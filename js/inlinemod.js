window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["cancel","delete_posts","delete_thread","inline_moved","inlinemod_auth","inlinemod_auth_login_failed","inlinemod_auth_login_first","inlinemod_auth_password_empty","loading","login","manage_deleted","merge_posts","merge_threads_ginlinemod","move_posts","move_threads_ginlinemod","not_much_would_be_accomplished_by_merging","please_select_at_least_one_post","please_select_at_least_two_posts","this_post_has_been_successfully_approved","this_post_has_been_successfully_unapproved","this_topic_has_been_stuck","this_topic_has_been_successfully_approved","this_topic_has_been_successfully_opened","this_topic_has_been_successfully_unapproved","this_topic_has_been_successfully_unstuck","this_topic_is_closed","this_topic_is_deleted","this_topic_is_undeleted","unapproved","you_did_not_select_any_valid_threads"]);(function(D){vBulletin.inlinemod=vBulletin.inlinemod||{};vBulletin.inlinemod.openAuthDialog=function(G){window.vBulletin.openAuthDialog(function(){var H=D(G).attr("data-action");if(!H){return false}var J=vBulletin.inlinemod[H];if(typeof J=="function"){var I=D(G).attr("data-params");I=I?I.split(","):[];J.apply(G,I)}else{alert("Not yet implemented.")}})};vBulletin.inlinemod.delete_form_thread=function(){var H=this;var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get("delete_thread"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }var I=openConfirmDialog({title:vBulletin.phrase.get("delete_thread"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-delete-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("delete_thread"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var L=I.find(".delete-posts-form");var M=L.find("input:radio[name=deletetype]:checked").val()||1;var J={hard:(M==2?1:0),reason:L.find(":input[name=deletereason]").val(),nodeids:G,deleteother:L.find(":input[name=deleteother]").is(":checked"),banusers:(L.find("input:radio[name=useraction]:checked").val()=="ban")?1:0};var K;if(J.deleteother||J.banusers){var N=function(){var O=openConfirmDialog({title:vBulletin.phrase.get("spam_management"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-spam-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("proceed_ellipsis"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var P=O.find(".spam-form");J.userids=new Array();P.find(":input[name=userids[]]:checked").each(function(){J.userids.push(D(this).val())});J.banusergroupid=P.find(":input[name=usergroupid]").val();J.period=P.find(":input[name=period]").val();J.banreason=P.find(":input[name=banreason]").val();D.ajax({url:vBulletin.normalizeAjaxUrl(P.attr("action")),data:J,type:"POST",dataType:"json",success:function(Q){if(Q.errors){if(Q.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get("spam_management"),message:Q.errors.join("\n"),iconType:"error"})}else{D.cookie(C,null,{path:pageData.baseurl_path});if(A=="thread"&&M==2){location.replace(D("#breadcrumbs .crumb a:last").attr("href"))}else{var R=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(R&&typeof R.applyFilters=="function"){R.forceApplyFilters()}else{location.reload()}}}},error:function(S,R,Q){console.log("/ajax/api/search/deleteNodesAsSpam failed, error: "+Q);openAlertDialog({title:vBulletin.phrase.get("spam_management"),message:vBulletin.phrase.get("error_deleting_posts_x",S.status),iconType:"error"})}})}});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_delete_spam",data:({nodeIds:G,banusers:J.banusers}),type:"POST",dataType:"json",success:function(P){console.log("/ajax/render/inlinemod_delete_spam");if(P&&!P.errors){D(".inlinemod-spam-dialog").removeClass("loading");D(".dialog-content .message",O).html(P).find("[placeholder]").placeholder();O.dialog("option","position","center")}else{console.log("/ajax/render/inlinemod_delete_spam successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){I.dialog("close")}})}},error:function(R,Q,P){console.log("/ajax/render/inlinemod_delete_spam failed, error: "+P);openAlertDialog({title:vBulletin.phrase.get("spam_management"),message:vBulletin.phrase.get("error_loading_spam_form_x",R.status),iconType:"error",onAfterClose:function(){I.dialog("close")}})}})};setTimeout(N,500)}else{D.ajax({url:vBulletin.normalizeAjaxUrl(L.attr("action")),data:J,type:"POST",dataType:"json",success:function(O){if(O.errors){if(O.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get("delete_thread"),message:O.errors.join("\n"),iconType:"error"})}else{D.cookie(C,null,{path:pageData.baseurl_path});if(A=="thread"&&M==2){if(D.inArray(D(H).attr("data-node-id"),O)!=-1||D.inArray(pageData.nodeid,O)!=-1){location.replace(D("#breadcrumbs .crumb a:last").attr("href"))}else{D("input.cb_inlinemod[type=checkbox]:checked",F).each(function(){if(D.inArray(D(this).val(),O)!=-1){D(this).parents(".inlinemod-item").remove()}})}}else{var P=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(P&&typeof P.applyFilters=="function"){P.forceApplyFilters()}else{location.reload()}}}},error:function(Q,P,O){console.log("/ajax/api/search/moderationDelete failed, error: "+O);openAlertDialog({title:vBulletin.phrase.get("delete_thread"),message:vBulletin.phrase.get("error_deleting_posts_x",Q.status),iconType:"error"})}})}}});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_delete_form",data:({postcount:G.length,nodeids:G,deleteposts:1,removeposts:1,firstpost:1}),type:"POST",dataType:"json",success:function(J){console.log("/ajax/render/inlinemod_delete_form");if(J&&!J.errors){D(".inlinemod-delete-dialog").removeClass("loading");D(".dialog-content .message",I).html(J).find("[placeholder]").placeholder();I.dialog("option","position","center")}else{console.log("/ajax/render/inlinemod_delete_form successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){I.dialog("close")}})}},error:function(L,K,J){console.log("/ajax/render/inlinemod_delete_form failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get("delete_thread"),message:vBulletin.phrase.get("error_loading_delete_form_x",L.status),iconType:"error",onAfterClose:function(){I.dialog("close")}})}})};vBulletin.inlinemod.delete_form=function(){var H=this;var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get("delete_posts"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }var I=openConfirmDialog({title:vBulletin.phrase.get("delete_posts"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-delete-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("delete_posts"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var L=I.find(".delete-posts-form");var M=L.find("input:radio[name=deletetype]:checked").val()||1;var J={hard:(M==2?1:0),reason:L.find(":input[name=deletereason]").val(),nodeids:G,deleteother:L.find(":input[name=deleteother]").is(":checked"),banusers:(L.find("input:radio[name=useraction]:checked").val()=="ban")?1:0};var K;if(J.deleteother||J.banusers){var N=function(){var O=openConfirmDialog({title:vBulletin.phrase.get("spam_management"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-spam-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("proceed_ellipsis"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var P=O.find(".spam-form");J.userids=new Array();P.find(":input[name=userids[]]:checked").each(function(){J.userids.push(D(this).val())});J.banusergroupid=P.find(":input[name=usergroupid]").val();J.period=P.find(":input[name=period]").val();J.banreason=P.find(":input[name=banreason]").val();vBulletin.AJAX({url:vBulletin.normalizeAjaxUrl(P.attr("action")),data:J,error_phrase:spam_management,success:function(Q){D.cookie(C,null,{path:pageData.baseurl_path});if(A=="thread"&&M==2){location.replace(D("#breadcrumbs .crumb a:last").attr("href"))}else{var R=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(R&&typeof R.applyFilters=="function"){R.forceApplyFilters()}else{location.reload()}}},error:function(S,R,Q){console.log("/ajax/api/search/deleteNodesAsSpam failed, error: "+Q);openAlertDialog({title:vBulletin.phrase.get("spam_management"),message:vBulletin.phrase.get("error_deleting_posts_x",S.status),iconType:"error"})}})}});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_delete_spam",data:({nodeIds:G,banusers:J.banusers}),type:"POST",dataType:"json",success:function(P){console.log("/ajax/render/inlinemod_delete_spam");if(P&&!P.errors){D(".inlinemod-spam-dialog").removeClass("loading");D(".dialog-content .message",O).html(P).find("[placeholder]").placeholder();O.dialog("option","position","center")}else{console.log("/ajax/render/inlinemod_delete_spam successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){I.dialog("close")}})}},error:function(R,Q,P){console.log("/ajax/render/inlinemod_delete_spam failed, error: "+P);openAlertDialog({title:vBulletin.phrase.get("spam_management"),message:vBulletin.phrase.get("error_loading_spam_form_x",R.status),iconType:"error",onAfterClose:function(){I.dialog("close")}})}})};setTimeout(N,500)}else{vBulletin.AJAX({url:vBulletin.normalizeAjaxUrl(L.attr("action")),data:J,error_phrase:"delete_posts",success:function(O){D.cookie(C,null,{path:pageData.baseurl_path});if(A=="thread"&&M==2){if(D.inArray(D(H).attr("data-node-id"),O)!=-1||D.inArray(pageData.nodeid,O)!=-1){location.replace(D("#breadcrumbs .crumb a:last").attr("href"))}else{D("input.cb_inlinemod[type=checkbox]:checked",F).each(function(){if(D.inArray(D(this).val(),O)!=-1){D(this).closest(".inlinemod-item").remove()}})}}else{var P=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(P&&typeof P.applyFilters=="function"){P.forceApplyFilters()}else{location.reload()}}},error:function(Q,P,O){console.log("/ajax/api/search/moderationDelete failed, error: "+O);openAlertDialog({title:vBulletin.phrase.get("delete_posts"),message:vBulletin.phrase.get("error_deleting_posts_x",Q.status),iconType:"error"})}})}}});vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_delete_form",data:({postcount:G.length,nodeids:G,deleteposts:1,removeposts:1,firstpost:1}),success:function(J){D(".inlinemod-delete-dialog").removeClass("loading");D(".dialog-content .message",I).html(J).find("[placeholder]").placeholder();I.dialog("option","position","center")}})};vBulletin.inlinemod.moveThreads=function(){var I=this;var H=(D(I).attr("data-node-id"))?[D(I).attr("data-node-id")]:B();if(H.length==0){openAlertDialog({title:vBulletin.phrase.get("move_threads_ginlinemod"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }var G=openConfirmDialog({title:vBulletin.phrase.get("move_threads_ginlinemod"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-move-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("move_threads_ginlinemod"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var K=G.find(".move-posts-form");var L={};if(K.find("input[name=enableredirect]").prop("checked")){L.redirect=K.find("#rb_redirect_perm").prop("checked")?"perm":"expires";if(L.redirect=="expires"){L.period=K.find("select[name=period]").val();L.frame=K.find("select[name=frame]").val()}console.log("Redirect data compiled:");console.dir(L)}var J={to_parent:K.find("select[name=destchannelid]").val(),nodeids:H,leaveRedirectData:L};D.ajax({url:vBulletin.normalizeAjaxUrl(K.attr("action")),data:J,type:K.attr("method"),dataType:"json",success:function(M){if(M.errors){if(M.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(I)}openAlertDialog({title:vBulletin.phrase.get("move_threads_ginlinemod"),message:M.errors.join("\n"),iconType:"error"})}else{D.cookie(C,null,{path:pageData.baseurl_path});openAlertDialog({title:vBulletin.phrase.get("move_threads_ginlinemod"),message:vBulletin.phrase.get("inline_moved"),onAfterClose:function(){location.reload()}})}},error:function(O,N,M){console.log("Move threads failed, error: "+M);openAlertDialog({title:vBulletin.phrase.get("move_threads_ginlinemod"),message:vBulletin.phrase.get("error_moving_threads_x",O.status),iconType:"error"})}})}});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_move_form",data:({postcount:H.length,moveposts:1,removeposts:1,firstpost:1}),type:"POST",dataType:"json",success:function(J){console.log("/ajax/render/inlinemod_move_form");if(J&&!J.errors){D(".inlinemod-move-dialog").removeClass("loading");D(".dialog-content .message",G).html(J).find("[placeholder]").placeholder();G.dialog("option","position","center")}else{console.log("/ajax/render/inlinemod_move_form successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){G.dialog("close")}})}},error:function(L,K,J){console.log("/ajax/render/inlinemod_move_form failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get("move_threads_ginlinemod"),message:vBulletin.phrase.get("error_loading_move_form_x",L.status),iconType:"error",onAfterClose:function(){G.dialog("close")}})}})};vBulletin.inlinemod.movePosts=function(){var I=this;var H=(D(I).attr("data-node-id"))?[D(I).attr("data-node-id")]:B();if(H.length==0){openAlertDialog({title:vBulletin.phrase.get("move_posts"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }var G=openConfirmDialog({title:vBulletin.phrase.get("move_posts"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-moveposts-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("move_posts"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var K=G.find(".move-posts-form");var L=K.find("input:radio[name=type]:checked").val()||0;var J={newtitle:K.find(':input[name="title"]').val(),to_parent:(L==0)?K.find(':input[name="destchannelid"]').val():K.find(':input[name="mergethreadurl"]').val().replace(pageData.baseurl+"/",""),nodeids:H};D.ajax({url:vBulletin.normalizeAjaxUrl(K.attr("action")),data:J,type:K.attr("method"),dataType:"json",success:function(M){if(M.errors){if(M.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(I)}openAlertDialog({title:vBulletin.phrase.get("move_posts"),message:M.errors.join("\n"),iconType:"error"})}else{D.cookie(C,null,{path:pageData.baseurl_path});if(A=="thread"){if(D.inArray(D(I).attr("data-node-id"),M)!=-1||D.inArray(pageData.nodeid,M)!=-1){location.replace(D("#breadcrumbs .crumb a:last").attr("href"))}else{D("input.cb_inlinemod[type=checkbox]:checked",F).each(function(){if(D.inArray(D(this).val(),M)!=-1){D(this).parents(".inlinemod-item").remove()}})}}else{var N=D(".filter-wrapper",D(I).parents(".conversation-toolbar")).data("object-instance");if(N&&typeof N.applyFilters=="function"){N.forceApplyFilters()}}D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/route/getNodeUrl",data:{nodeid:M[0]},type:"POST",datatype:"json",complete:function(){},success:function(O){if(O&&!O.errors){location.href=pageData.baseurl+O}},error:function(Q,P,O){console.log("Unable to get URL for node "+M[0]+":"+O)}})}},error:function(O,N,M){console.log("/ajax/api/node/movePosts failed, error: "+M);openAlertDialog({title:vBulletin.phrase.get("move_posts"),message:vBulletin.phrase.get("error_moving_posts_x",O.status),iconType:"error"})}})}});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_movePosts",data:({postcount:H.length,deleteposts:1,removeposts:1,firstpost:1}),type:"POST",dataType:"json",success:function(J){console.log("/ajax/render/inlinemod_movePosts");if(J&&!J.errors){D(".inlinemod-moveposts-dialog").removeClass("loading");D(".dialog-content .message",G).html(J).find("[placeholder]").placeholder();G.dialog("option","position","center")}else{console.log("/ajax/render/inlinemod_movePosts successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){G.dialog("close")}})}},error:function(L,K,J){console.log("/ajax/render/inlinemod_movePosts failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get("move_posts"),message:vBulletin.phrase.get("error_loading_move_form_x",L.status),iconType:"error",onAfterClose:function(){G.dialog("close")}})}})};vBulletin.inlinemod.stickThreads=function(I){var H=this;if(!I){I="stick"}var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/setSticky",data:{nodeids:G,stick:(I=="stick"?1:0)},type:"POST",dataType:"json",success:function(J){if(J.errors){if(J.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get("error"),message:J.errors.join("<br />"),iconType:"error"})}else{vBulletin.inlinemod.clear.apply(H);if(A=="thread"){var K;if(I=="stick"){D(".canvas-widget").addClass("sticky");K=vBulletin.phrase.get("this_topic_has_been_stuck")}else{D(".canvas-widget").removeClass("sticky");K=vBulletin.phrase.get("this_topic_has_been_successfully_unstuck")}E(K,"stick")}else{var L=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(L&&typeof L.applyFilters=="function"){if(A=="topic"){L.updatePageNumber(1)}L.forceApplyFilters()}}}},error:function(L,K,J){console.log("/ajax/api/node/setSticky failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("error_sticking_topics_x",L.status),iconType:"error"})}});return false};vBulletin.inlinemod.unstickThreads=function(){return vBulletin.inlinemod.stickThreads.apply(this,["unstick"])};vBulletin.inlinemod.openCloseThreads=function(I){var H=this;if(!I){I="open"}var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return false}D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/"+I+"Node",data:{nodeid:G},type:"POST",dataType:"json",success:function(J){if(J.errors){if(J.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:J.errors.join("<br />"),iconType:"error"})}else{vBulletin.inlinemod.clear.apply(H);if(A=="thread"){var K,L=D(".canvas-widget");if(I=="open"){L.removeClass("closed");if(D(".canvas-widget #canmoderate").val()=="0"){L.removeClass("closed_content-entry-box")}K=vBulletin.phrase.get("this_topic_has_been_successfully_opened")}else{L.addClass("closed");if(D(".canvas-widget #canmoderate").val()=="0"){L.addClass("closed_content-entry-box")}K=vBulletin.phrase.get("this_topic_is_closed")}E(K,"close")}else{var M=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(M&&typeof M.applyFilters=="function"){M.forceApplyFilters()}}}},error:function(L,K,J){console.log("/ajax/api/node/"+I+" failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("error_open_close_topic_x",L.status),iconType:"error"})}});return false};vBulletin.inlinemod.approvePosts=function(I){var H=this;if(!I){I="approve"}var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/setApproved",data:{nodeids:G,approved:(I=="approve"?1:0)},type:"POST",dataType:"json",success:function(J){if(J.errors){if(J.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get("error"),message:J.errors.join("<br />"),iconType:"error"})}else{vBulletin.inlinemod.clear.apply(H);if(A=="thread"){var K;if(I=="approve"){if(D.inArray(D(H).attr("data-node-id"),J)!=-1){D(".canvas-widget").removeClass("unapproved")}D(".inlinemod-item .cb_inlinemod",F).each(function(){if(D.inArray(this.value,J)!=-1){D(this).closest(".list-item").removeClass("unapproved");D(this).prev(".unapprove-text").remove()}});K=vBulletin.phrase.get("this_post_has_been_successfully_approved")}else{if(D.inArray(D(H).attr("data-node-id"),J)!=-1){D(".canvas-widget").addClass("unapproved")}D(".inlinemod-item .cb_inlinemod",F).each(function(){if(D.inArray(this.value,J)!=-1){D(this).closest(".list-item").addClass("unapproved");D('<span class="unapprove-text">{0}</span>'.format(vBulletin.phrase.get("unapproved"))).insertBefore(this)}});K=vBulletin.phrase.get("this_post_has_been_successfully_unapproved")}E(K,"approve")}else{var L=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(L&&typeof L.applyFilters=="function"){L.forceApplyFilters()}}}},error:function(L,K,J){console.log("/ajax/api/node/setApproved failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("error_un_approve_topics_x",L.status),iconType:"error"})}});return false};vBulletin.inlinemod.approveThreads=function(I){var H=this;if(!I){I="approve"}var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/setApproved",data:{nodeids:G,approved:(I=="approve"?1:0)},type:"POST",dataType:"json",success:function(J){if(J.errors){if(J.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get("error"),message:J.errors.join("<br />"),iconType:"error"})}else{vBulletin.inlinemod.clear.apply(H);if(A=="thread"){var K;if(I=="approve"){if(D.inArray(D(H).attr("data-node-id"),J)!=-1){D(".canvas-widget").removeClass("unapproved")}D(".inlinemod-item .cb_inlinemod",F).each(function(){if(D.inArray(this.value,J)!=-1){D(this).closest(".list-item").removeClass("unapproved");D(this).prev(".unapprove-text").remove()}});K=vBulletin.phrase.get("this_topic_has_been_successfully_approved")}else{if(D.inArray(D(H).attr("data-node-id"),J)!=-1){D(".canvas-widget").addClass("unapproved")}D(".inlinemod-item .cb_inlinemod",F).each(function(){if(D.inArray(this.value,J)!=-1){D(this).closest(".list-item").addClass("unapproved");D('<span class="unapprove-text">{0}</span>'.format(vBulletin.phrase.get("unapproved"))).insertBefore(this)}});K=vBulletin.phrase.get("this_topic_has_been_successfully_unapproved")}E(K,"approve")}else{var L=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(L&&typeof L.applyFilters=="function"){L.forceApplyFilters()}}}},error:function(L,K,J){console.log("/ajax/api/node/setApproved failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("error_un_approve_topics_x",L.status),iconType:"error"})}});return false};vBulletin.inlinemod.unfeatureThreads=function(G){vBulletin.inlinemod.featureThreads.apply(this,["unfeature"])};vBulletin.inlinemod.featureThreads=function(I){var H=this;if(!I){I="feature"}var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/setFeatured",data:{nodeids:G,set:(I=="feature"?1:0)},type:"POST",dataType:"json",success:function(J){if(J.errors){if(J.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get("error"),message:J.errors.join("<br />"),iconType:"error"})}else{vBulletin.inlinemod.clear.apply(H);if(A=="thread"){var K;if(I=="feature"){if(D.inArray(D(H).attr("data-node-id"),J)!=-1){D(".canvas-widget").addClass("featured")}D(".inlinemod-item .cb_inlinemod",F).each(function(){if(D.inArray(this.value,J)!=-1){D(this).closest(".list-item").removeClass("unfeatured")}});K=vBulletin.phrase.get("this_topic_has_been_featured")}else{if(D.inArray(D(H).attr("data-node-id"),J)!=-1){D(".canvas-widget").removeClass("featured")}D(".inlinemod-item .cb_inlinemod",F).each(function(){if(D.inArray(this.value,J)!=-1){D(this).closest(".list-item").addClass("unfeatured")}});K=vBulletin.phrase.get("this_topic_has_been_unfeatured")}E(K,"feature")}else{var L=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(L&&typeof L.applyFilters=="function"){L.forceApplyFilters()}}}},error:function(L,K,J){console.log("/ajax/api/node/setFeatured failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get(I+"_threads"),message:vBulletin.phrase.get("error_featuring_topics_x",L.status),iconType:"error"})}});return false};vBulletin.inlinemod.undelete=function(){var H=this;var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get("undelete_threads"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/undeleteNodes",data:{nodeids:G},type:"POST",dataType:"json",success:function(I){if(I.errors){if(I.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get("error"),message:I.errors.join("<br />"),iconType:"error"})}else{vBulletin.inlinemod.clear.apply(H);if(A=="thread"){var J;if(D.inArray(D(H).attr("data-node-id"),I)!=-1){D(".canvas-widget").removeClass("deleted")}D(".inlinemod-item .cb_inlinemod",F).each(function(){if(D.inArray(this.value,I)!=-1){D(this).closest(".list-item").removeClass("deleted")}});J=vBulletin.phrase.get("this_topic_is_undeleted");E(J,"delete")}else{var K=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(K&&typeof K.applyFilters=="function"){K.forceApplyFilters()}}}},error:function(K,J,I){console.log("/ajax/api/node/undeleteNodes failed, error: "+I);openAlertDialog({title:vBulletin.phrase.get("undelete_threads"),message:vBulletin.phrase.get("error_undeleting_topics_x",K.status),iconType:"error"})}});return false};vBulletin.inlinemod.unapprovePosts=function(){return vBulletin.inlinemod.approvePosts.apply(this,["unapprove"])};vBulletin.inlinemod.unapproveThreads=function(){return vBulletin.inlinemod.approveThreads.apply(this,["unapprove"])};vBulletin.inlinemod.viewSelectedPosts=function(){window.location=pageData.baseurl+"/search?cookie="+C};vBulletin.inlinemod.mergePosts=function(){var H=this;var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length<2){openAlertDialog({title:vBulletin.phrase.get("merge_posts"),message:vBulletin.phrase.get("please_select_at_least_two_posts"),iconType:"warning"});return }var I=openConfirmDialog({title:vBulletin.phrase.get("merge_posts"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-mergeposts-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("merge_posts"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var K=I.find("#hiddenVar_mergePosts").closest("form");var J=K.serializeArray();J.push({name:"destnodeid",value:I.find(':input[name="destnodeid"]').val()});J.push({name:"destauthorid",value:I.find(':input[name="destauthorid"]').val()});J.push({name:"contenttype",value:K.attr("data-content-type")});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/mergePosts",data:({input:J}),type:"POST",dataType:"json",success:function(L){if(L.errors){if(L.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}openAlertDialog({title:vBulletin.phrase.get("merge_posts"),message:L.errors.join("\n"),iconType:"error"})}else{D.cookie(C,null,{path:pageData.baseurl_path});var M=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(M&&typeof M.applyFilters=="function"){M.forceApplyFilters()}else{location.reload()}}},error:function(N,M,L){console.log("/ajax/api/node/mergePosts failed, error: "+L);openAlertDialog({title:vBulletin.phrase.get("merge_posts"),message:vBulletin.phrase.get("error_merging_posts_x",N.status),iconType:"error"})}})}});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_mergePosts",data:({posts:G.join(","),postcount:G.length}),type:"POST",dataType:"json",success:function(J){console.log("/ajax/render/inlinemod_mergePosts");if(J&&!J.errors){D(".inlinemod-mergeposts-dialog").removeClass("loading");D(".dialog-content .message",I).html(J).find("[placeholder]").placeholder();I.dialog("option","position","center");$galleryEdit=I.find(".gallery-form-container");if($galleryEdit.length>0){editorId=vBulletin.getNextId("vB_GalleryEdit_");$galleryEdit.attr("id",editorId);vBulletin.upload.initializePhotoUpload($galleryEdit)}$videoEdit=I.find("#newVideoForm");if($videoEdit.length>0){vBulletin.conversation.bindEditFormEventHandlers("video");D("body").trigger("video_editform_onload",[$videoEdit])}$linkEdit=I.find("#newLinkForm");if($linkEdit.length>0){vBulletin.conversation.bindEditFormEventHandlers("link");D("body").trigger("link_editform_onload",[$linkEdit,function(){}])}}else{console.log("/ajax/render/inlinemod_mergePosts successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){I.dialog("close")}})}},error:function(L,K,J){console.log("/ajax/render/inlinemod_mergePosts failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get("merge_posts"),message:vBulletin.phrase.get("error_loading_merge_form_x",L.status),iconType:"error",onAfterClose:function(){I.dialog("close")}})}})};vBulletin.inlinemod.copyPosts=function(){var H=this;var G=(D(H).attr("data-node-id"))?[D(H).attr("data-node-id")]:B();if(G.length==0){openAlertDialog({title:vBulletin.phrase.get("copy_posts"),message:vBulletin.phrase.get("please_select_at_least_one_post"),iconType:"warning"});return }var I=openConfirmDialog({title:vBulletin.phrase.get("copy_posts"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-copyposts-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("copy_posts"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var K=I.find(".copy-posts-form");var L=K.find("input:radio[name=type]:checked").val()||0;var J={newtitle:K.find(':input[name="title"]').val(),to_parent:(L==0)?K.find(':input[name="destchannelid"]').val():K.find(':input[name="mergethreadurl"]').val().replace(pageData.baseurl+"/",""),nodeids:G};D.ajax({url:vBulletin.normalizeAjaxUrl(K.attr("action")),data:J,type:K.attr("method"),dataType:"json",success:function(M){if(M.errors){if(M.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(H)}if(D.isArray(M.errors)&&D.isArray(M.errors[0])){D.each(M.errors,function(O,P){D.each(P,function(R,Q){if(R>0){P[R]=vBulletin.phrase.get(Q)}});M.errors[O]=vBulletin.phrase.get(P)});msg=M.errors.join("<br />")}else{msg=vBulletin.phrase.get(response.error)}openAlertDialog({title:vBulletin.phrase.get("copy_posts"),message:M.errors.join("\n"),iconType:"error"})}else{D.cookie(C,null,{path:pageData.baseurl_path});if(A=="thread"){location.reload()}else{var N=D(".filter-wrapper",D(H).parents(".conversation-toolbar")).data("object-instance");if(N&&typeof N.applyFilters=="function"){N.forceApplyFilters()}else{location.reload()}}}},error:function(O,N,M){console.log("/ajax/api/node/cloneNodes failed, error: "+M);openAlertDialog({title:vBulletin.phrase.get("copy_posts"),message:vBulletin.phrase.get("error_copy_posts_x",O.status),iconType:"error"})}})}});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_copyPosts",data:({postcount:G.length,deleteposts:1,removeposts:1,firstpost:1}),type:"POST",dataType:"json",success:function(J){console.log("/ajax/render/inlinemod_copyPosts");if(J&&!J.errors){D(".inlinemod-copyposts-dialog").removeClass("loading");D(".dialog-content .message",I).html(J).find("[placeholder]").placeholder();I.dialog("option","position","center")}else{console.log("/ajax/render/inlinemod_copyPosts successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){I.dialog("close")}})}},error:function(L,K,J){console.log("/ajax/render/inlinemod_copyPosts failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get("copy_posts"),message:vBulletin.phrase.get("error_loading_copy_posts_form_x",L.status),iconType:"error",onAfterClose:function(){I.dialog("close")}})}})};vBulletin.inlinemod.mergeThreads=function(){var I=this;var H=B();if(H.length==0){openAlertDialog({title:vBulletin.phrase.get("merge_threads_ginlinemod"),message:vBulletin.phrase.get("you_did_not_select_any_valid_threads"),iconType:"warning"});return }if(H.length==1){openAlertDialog({title:vBulletin.phrase.get("merge_threads_ginlinemod"),message:vBulletin.phrase.get("not_much_would_be_accomplished_by_merging"),iconType:"warning"});return }var G=openConfirmDialog({title:vBulletin.phrase.get("merge_threads_ginlinemod"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-merge-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("merge_threads_ginlinemod"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var K=G.find(".merge-threads-form");var J={targetnodeid:K.find('select[name="targetnodeid"]').val(),nodeids:H};D.ajax({url:vBulletin.normalizeAjaxUrl(K.attr("action")),data:J,type:K.attr("method"),dataType:"json",success:function(L){if(L.errors){if(L.errors[0]=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(I)}openAlertDialog({title:vBulletin.phrase.get("merge_threads_ginlinemod"),message:L.errors.join("\n"),iconType:"error"})}else{D.cookie(C,null,{path:pageData.baseurl_path});var M=D(".filter-wrapper",D(I).parents(".conversation-toolbar")).data("object-instance");if(M&&typeof M.applyFilters=="function"){M.forceApplyFilters()}else{location.reload()}}},error:function(N,M,L){console.log("/ajax/api/node/mergeTopics failed, error: "+L);openAlertDialog({title:vBulletin.phrase.get("merge_threads_ginlinemod"),message:vBulletin.phrase.get("error_merging_threads_x",N.status),iconType:"error"})}})}});D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_mergeThreads",data:({postcount:H.length,nodeids:H}),type:"POST",dataType:"json",success:function(J){console.log("/ajax/render/inlinemod_mergeThreads");if(J&&!J.errors){D(".inlinemod-merge-dialog").removeClass("loading");D(".dialog-content .message",G).html(J).find("[placeholder]").placeholder();G.dialog("option","position","center")}else{console.log("/ajax/render/inlinemod_mergeThreads successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){G.dialog("close")}})}},error:function(L,K,J){console.log("/ajax/render/inlinemod_mergeThreads failed, error: "+J);openAlertDialog({title:vBulletin.phrase.get("merge_threads_ginlinemod"),message:vBulletin.phrase.get("error_loading_merge_form_x",L.status),iconType:"error",onAfterClose:function(){G.dialog("close")}})}})};vBulletin.inlinemod.manage_deleted_form=function(){var H=D(this);var J=H.parents(".list-item.deleted").attr("data-node-id");var I=openConfirmDialog({title:vBulletin.phrase.get("manage_deleted"),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-delete-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("save"),noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var K=I.find(".manage-deleted-form");vBulletin.AJAX({url:vBulletin.normalizeAjaxUrl(K.attr("action")),data:{nodeid:J,params:{deletetype:K.find("input:radio[name=deletetype]:checked").val()||1,reason:K.find(":input[name=deletereason]").val(),topictitle:K.find("input:text[name=topic_title]").val()||"",moderator_notes:K.find("textarea[name=moderator_notes]").val()||"",keep_attachments:(K.find("input:checkbox[name=keep_attachments]:checked").val())?1:0,option_open:(K.find("input:checkbox[name=topicopen]:checked").val())?1:0,option_sticky:(K.find("input:checkbox[name=topicsticky]:checked").val())?1:0,}},success:function(L){var M=D(".conversation-toolbar .filter-wrapper",D(H).parents(".inlinemod-container")).data("object-instance");if(M&&typeof M.applyFilters=="function"){M.forceApplyFilters()}else{location.reload()}},error_phrase:"error_moderating_post_x",element:H})}});vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_manage_deleted",data:({nodeid:J,isblogcomment:(H.parents(".conversation-comments, .blog-list").length==2)?1:0}),success:function(K){if(K){D(".inlinemod-delete-dialog").removeClass("loading");D(".dialog-content .message",I).html(K).find("[placeholder]").placeholder();I.dialog("option","position","center");D(document).off("click",".manage-deleted-form input:radio[name=deletetype]").on("click",".manage-deleted-form input:radio[name=deletetype]",G);G()}}});function G(){var K=D(".manage-deleted-form"),L=D(".manage-deleted-form input:radio[name=deletetype]:checked").val();D("input:checkbox[name=keep_attachments]",K).prop("disabled",L!=1);D("input:checkbox[name=topicopen]",K).prop("disabled",L!=2);D("input:checkbox[name=topicsticky]",K).prop("disabled",L!=2)}};vBulletin.inlinemod.selectAll=function(){D(".inlinemod-item .cb_inlinemod",D(this).parents(".inlinemod-container")).each(function(){D(this).prop("checked",true);vBulletin.inlinemod.check.apply(this)})};vBulletin.inlinemod.selectNone=function(){D(".inlinemod-item .cb_inlinemod",D(this).parents(".inlinemod-container")).each(function(){D(this).prop("checked",false);vBulletin.inlinemod.check.apply(this)})};vBulletin.inlinemod.selectClass=function(G){D(".inlinemod-item."+G+" .cb_inlinemod",D(this).parents(".inlinemod-container")).each(function(){D(this).prop("checked",true);vBulletin.inlinemod.check.apply(this)})};vBulletin.inlinemod.invertSelection=function(){D(".inlinemod-item .cb_inlinemod",D(this).parents(".inlinemod-container")).each(function(){D(this).prop("checked",!D(this).prop("checked"));vBulletin.inlinemod.check.apply(this)})};vBulletin.inlinemod.clear=function(){var G=D(this).parents(".inlinemod-container");D(".inlinemod-item .cb_inlinemod:checked",G).each(function(){D(this).prop("checked",false).closest(".inlinemod-item").removeClass("inlinemod_highlight")});D(".cb_inlinemod_main",G).prop("checked",false);D.cookie(C,null,{path:pageData.baseurl_path})};vBulletin.inlinemod.check=function(){var H=D(this);var K=H.val();var J=B();if(H.prop("checked")){H.closest(".inlinemod-item").addClass("inlinemod_highlight");if(D.inArray(K,J)==-1){J.push(K)}var I=D(".inlinemod-item .cb_inlinemod",F);if(I.length==I.filter(":checked").length){D(".cb_inlinemod_main",F).prop("checked",true)}}else{H.closest(".inlinemod-item").removeClass("inlinemod_highlight");var L=new Array();for(var G=0;G<J.length;G++){if(J[G]!=K){L.push(J[G])}}J=L;D(".cb_inlinemod_main",F).prop("checked",false)}cookie_str=J.join(",");D.cookie(C,cookie_str,{path:pageData.baseurl_path})};vBulletin.inlinemod.markRead=function(){var G=D(this).closest(".channel-content-widget").attr("data-node-id");vBulletin.markchannelsread(G,{success:function(){location.reload()},failed:function(){openAlertDialog({title:vBulletin.phrase.get("forum"),message:"Mark Channels Read failed: {0}".format(result),iconType:"error"})}})};vBulletin.inlinemod.init=function(G){G=(G instanceof D)?G:D(G);if(G.length==0){G=D("body")}F=G.hasClass("inlinemod-container")?G:D(".inlinemod-container",G);A=D(".moderationmenu_container",F).attr("data-view");C=pageData.cookie_prefix+pageData.inlinemod_cookie_name+"_"+A;var I=B();if(I.length>0){var J=0;var H=D(".inlinemod-item .cb_inlinemod",F).each(function(){if(D.inArray(this.value,I)!=-1){J++;D(this).prop("checked",true);D(this).closest(".inlinemod-item").addClass("inlinemod_highlight")}});D(".cb_inlinemod_main",F).prop("checked",(J>0&&J==H.length))}vBulletin.inlinemod.addAttachClassToPost(G)};vBulletin.inlinemod.addAttachClassToPost=function(G){G=(G instanceof D)?G:D(G);if(G.length==0){G=D("body")}D(".inlinemod-container .inlinemod-item",G).each(function(){var H=D(this);if(H.hasClass("list-item-gallery")){H.addClass("im-attach")}else{var K=D(".conversation-body .post-content",this);var J=D("img",K);var L=D(".bbcode_container img",K);if(J.length>0&&J.length!=L.length){H.addClass("im-attach")}else{var M=D("iframe.restrain",K);var I=D(".bbcode_container iframe.restrain",K);if(M.length>0&&M.length!=I.length){H.addClass("im-attach")}}}})};function B(){var H=D.cookie(C);var G=[];if(H){G=H.split(",")}return G}function E(G,L){var I=D(".conversation-status-message.notice"),K;if(I.length>0){var H=I.filter("."+L);if(H.length==1){I=H}else{if((K=I.filter(".hide")).length==1){I=K}else{I=I.first().clone().removeClass().addClass("conversation-status-message notice").appendTo(".conversation-status-messages")}}I=(H.length==1?H:I).show();if(!vBulletin.isScrolledIntoView(I)){var J=I.offset().top-10;I.hide();D("html,body").animate({scrollTop:J},"slow",function(){I.find("span").html(G).end().addClass(L+" show-x").fadeIn("slow","linear")})}else{if(I.hasClass("hide")){I.hide().removeClass("hide").addClass(L+" show-x").find("span").html(G).end().fadeIn(800,"linear")}else{I.fadeOut("slow","linear",function(){I.find("span").html(G).end().addClass(L+" show-x").fadeIn("slow","linear")})}}}}var C,A,F;D(document).ready(function(){C=pageData.cookie_prefix+pageData.inlinemod_cookie_name;F=D(".inlinemod-container");D(".inlinemod-container .cb_inlinemod_main").off("click mouseover").on("click",function(){vBulletin.inlinemod[this.checked?"selectAll":"selectNone"].apply(this)}).on("mouseover",function(){this.title=(this.checked)?D(this).attr("data-title-unselect"):D(this).attr("data-title-select")});D(".inlinemod-container").off("click",".inlinemod-item input.cb_inlinemod").on("click",".inlinemod-item input.cb_inlinemod",function(I){vBulletin.inlinemod.check.apply(this)});var G;var H=true;D(".moderationmenu_container .moderation-mainmenu .mainmenu").off("mouseenter mouseleave").on("mouseenter",function(I){var J=D(this);if(D(".toolbar-filter-overlay",J.closest(".conversation-toolbar-wrapper")).is(":visible")){D(".toolbar-filter",J.closest(".conversation-toolbar")).triggerHandler("click",[0])}G=setTimeout(function(){J.removeClass("pos-top").addClass("hover").closest(".moderation-mainmenu").find(".mainmenu .submenu").hide().css("top","");var P={},M=D(".submenu",J).show();if(H&&M.find("li").length>10){H=false;var N=M.find("li").outerWidth();var Q=M.find("li").outerHeight()+1;var R=M.find("li.col1").length;M.addClass("splitmenu");M.find("li").css("width",N);M.find("li.col1").css("margin-"+pageData.textDirRight,N);M.find("li.col2").css("margin-"+pageData.textDirLeft,N+1);var K=-(Q*R);M.find("li.col2").each(function(T,U){D(U).css("margin-top",(K+(T*Q)))});M.find("li.col2").first().css("border-top-color","transparent")}if(!vBulletin.isScrolledIntoView(M,P)){var L=D(document).height()-D(window).height(),S=D(document).scrollTop(),O=Math.abs(P.bottom);if(O<=(L-S)){D("html,body").animate({scrollTop:"+="+(S+O)},"slow")}else{M.css("top",-(M.height()+1)).parent().addClass("pos-top");if(!vBulletin.isScrolledIntoView(M,P)){D("html,body").animate({scrollTop:"-="+Math.abs(P.top)},"slow")}}}},200)}).on("mouseleave",function(I){clearTimeout(G);D(".submenu",this).hide();D(this).removeClass("hover")});D(".moderationmenu_container .submenu .moderation-action a[data-action]").off("click").on("click",function(M){M.stopPropagation();D(this).closest(".submenu").hide();var K=F.find(".list-item-body-wrapper.edit-post .edit-conversation-container");if(K.length>0){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get("you_have_a_pending_edit_unsaved"),iconType:"warning",onAfterClose:function(){vBulletin.animateScrollTop(K.closest(".list-item").offset().top,{duration:"slow"})}});return false}var I=D(this).attr("data-action");if(!I){console.warn("Unable to find the inline moderation function name.");return false}var L=vBulletin.inlinemod[I];if(typeof L=="function"){var J=D(this).attr("data-params");J=J?J.split(","):[];L.apply(this,J)}else{console.warn('Unable to find the inline moderation function "{0}". Please ensure that it is defined in inlinemod.js.'.format("vBulletin.inlinemod."+I))}return false});D(".conversation-content-widget").off("click",".conversation-status-message .close").on("click",".conversation-status-message .close",function(){D(this).parent().fadeOut("slow")});return false})})(jQuery);