/*!
 * jQuery UI 1.8.14
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
/*
 * Modified for vBulletin. Added the following:
 * - ability to show/hide the Dialog 'X' button via 'showCloseButton' option.
 * - ability to show/hide the Dialog title bar via 'showTitleBar' option.
 * - ability to skip (designated by 'ui-tabs-skip' class) the first <ul> or <ol> that the Tabs plugin uses by default when tabifying content.
 */
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;if(!b.href||!g||f.nodeName.toLowerCase()!=="map"){return false}h=a("img[usemap=#"+g+"]")[0];return!!h&&d(h)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version){return}a.extend(a.ui,{version:"1.8.14",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus();if(c){c.call(d)}},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;if(a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))){b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}else{b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b){return this.css("zIndex",c)}if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0){return f}}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(c,d){function h(b,c,d,f){a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,true))||0;if(d){c-=parseFloat(a.curCSS(b,"border"+this+"Width",true))||0}if(f){c-=parseFloat(a.curCSS(b,"margin"+this,true))||0}});return c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){if(c===b){return g["inner"+d].call(this)}return this.each(function(){a(this).css(f,h(this,c)+"px")})};a.fn["outer"+d]=function(b,c){if(typeof b!=="number"){return g["outer"+d].call(this,b)}return this.each(function(){a(this).css(f,h(this,b,true,c)+"px")})}});a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}});a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=c.offsetHeight===100;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"});a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d){e.plugins[f]=e.plugins[f]||[];e.plugins[f].push([c,d[f]])}},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode){return}for(var e=0;e<d.length;e++){if(a.options[d[e][0]]){d[e][1].apply(a.element,c)}}}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden"){return false}var d=c&&c==="left"?"scrollLeft":"scrollTop",e=false;if(b[d]>0){return true}b[d]=1;e=b[d]>0;b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++){a(e).triggerHandler("remove")}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){if(!c){if(!b||a.filter(b,[this]).length){a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")})}}return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1];f=e+"-"+b;if(!d){d=c;c=a.Widget}a.expr[":"][f]=function(c){return!!a.data(c,b)};a[e]=a[e]||{};a[e][b]=function(a,b){if(arguments.length){this._createWidget(a,b)}};var g=new c;g.options=a.extend(true,{},g.options);a[e][b].prototype=a.extend(true,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d);a.widget.bridge(b,a[e][b])};a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e==="string",g=Array.prototype.slice.call(arguments,1),h=this;e=!f&&g.length?a.extend.apply(null,[true,e].concat(g)):e;if(f&&e.charAt(0)==="_"){return h}if(f){this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b){h=f;return false}})}else{this.each(function(){var b=a.data(this,c);if(b){b.option(e||{})._init()}else{a.data(this,c,new d(e,this))}})}return h}};a.Widget=function(a,b){if(arguments.length){this._createWidget(a,b)}};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=a.extend(true,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0){return a.extend({},this.options)}if(typeof c==="string"){if(d===b){return this.options[c]}e={};e[c]=d}this._setOptions(e);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;if(a==="disabled"){this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,c,d){var e=this.options[b];c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d=d||{};if(c.originalEvent){for(var f=a.event.props.length,g;f;){g=a.event.props[--f];c[g]=c.originalEvent[g]}}this.element.trigger(c,d);return!(a.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);(function(a,b){var c=false;a(document).mousedown(function(a){c=false});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(true===a.data(c.target,b.widgetName+".preventClickEvent")){a.removeData(c.target,b.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(c){return}this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"?a(b.target).closest(this.options.cancel).length:false;if(!e||f||!this._mouseCapture(b)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==false;if(!this._mouseStarted){b.preventDefault();return true}}if(true===a.data(b.target,this.widgetName+".preventClickEvent")){a.removeData(b.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();c=true;return true},_mouseMove:function(b){if(a.browser.msie&&!(document.documentMode>=9)&&!b.button){return this._mouseUp(b)}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false;this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)}return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(b.target==this._mouseDownEvent.target){a.data(b.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(b)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return true}})})(jQuery);(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f=a.fn.position,g=a.fn.offset;a.fn.position=function(b){if(!b||!b.of){return f.apply(this,arguments)}b=a.extend({},b);var g=a(b.of),h=g[0],i=(b.collision||"flip").split(" "),j=b.offset?b.offset.split(" "):[0,0],k,l,m;if(h.nodeType===9){k=g.width();l=g.height();m={top:0,left:0}}else if(h.setTimeout){k=g.width();l=g.height();m={top:g.scrollTop(),left:g.scrollLeft()}}else if(h.preventDefault){b.at="left top";k=l=0;m={top:b.of.pageY,left:b.of.pageX}}else{k=g.outerWidth();l=g.outerHeight();m=g.offset()}a.each(["my","at"],function(){var a=(b[this]||"").split(" ");if(a.length===1){a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]}a[0]=c.test(a[0])?a[0]:e;a[1]=d.test(a[1])?a[1]:e;b[this]=a});if(i.length===1){i[1]=i[0]}j[0]=parseInt(j[0],10)||0;if(j.length===1){j[1]=j[0]}j[1]=parseInt(j[1],10)||0;if(b.at[0]==="right"){m.left+=k}else if(b.at[0]===e){m.left+=k/2}if(b.at[1]==="bottom"){m.top+=l}else if(b.at[1]===e){m.top+=l/2}m.left+=j[0];m.top+=j[1];return this.each(function(){var c=a(this),d=c.outerWidth(),f=c.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",true))||0,h=parseInt(a.curCSS(this,"marginTop",true))||0,n=d+g+(parseInt(a.curCSS(this,"marginRight",true))||0),o=f+h+(parseInt(a.curCSS(this,"marginBottom",true))||0),p=a.extend({},m),q;if(b.my[0]==="right"){p.left-=d}else if(b.my[0]===e){p.left-=d/2}if(b.my[1]==="bottom"){p.top-=f}else if(b.my[1]===e){p.top-=f/2}p.left=Math.round(p.left);p.top=Math.round(p.top);q={left:p.left-g,top:p.top-h};a.each(["left","top"],function(c,e){if(a.ui.position[i[c]]){a.ui.position[i[c]][e](p,{targetWidth:k,targetHeight:l,elemWidth:d,elemHeight:f,collisionPosition:q,collisionWidth:n,collisionHeight:o,offset:j,my:b.my,at:b.at})}});if(a.fn.bgiframe){c.bgiframe()}c.offset(a.extend(p,{using:b.using}))})};a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e){return}var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e){return}var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}};if(!a.offset.setOffset){a.offset.setOffset=function(b,c){if(/static/.test(a.curCSS(b,"position"))){b.style.position="relative"}var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",true),10)||0,g=parseInt(a.curCSS(b,"left",true),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};if("using"in c){c.using.call(b,h)}else{d.css(h)}};a.fn.offset=function(b){var c=this[0];if(!c||!c.ownerDocument){return null}if(b){return this.each(function(){a.offset.setOffset(this,b)})}return g.call(this)}}})(jQuery);(function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable"+" ui-draggable-dragging"+" ui-draggable-disabled");this._mouseDestroy();return this},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(b);if(!this.handle)return false;a(c.iframeFix===true?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);if(c.containment)this._setContainment();if(this._trigger("start",b)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!c.dropBehaviour)a.ui.ddmanager.prepareOffsets(this,b);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);if(a.ui.ddmanager)a.ui.ddmanager.dragStart(this,b);return true},_mouseDrag:function(b,c){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";if(a.ui.ddmanager)a.ui.ddmanager.drag(this,b);return false},_mouseStop:function(b){var c=false;if(a.ui.ddmanager&&!this.options.dropBehaviour)c=a.ui.ddmanager.drop(this,b);if(this.dropped){c=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(d._trigger("stop",b)!==false){d._clear()}})}else{if(this._trigger("stop",b)!==false){this._clear()}}return false},_mouseUp:function(b){if(this.options.iframeFix===true){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}if(a.ui.ddmanager)a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==b.target)c=true});return c},_createHelper:function(b){var c=this.options;var d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;if(!d.parents("body").length)d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);if(d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position")))d.css("position","absolute");return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left"in b){this.offset.click.left=b.left+this.margins.left}if("right"in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top"in b){this.offset.click.top=b.top+this.margins.top}if("bottom"in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if(b.containment=="parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment);var d=c[0];if(!d)return;var e=c.offset();var f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=c}else if(b.containment.constructor==Array){this.containment=b.containment}},_convertPositionTo:function(b,c){if(!c)c=this.position;var d=b=="absolute"?1:-1;var e=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);var f=b.pageX;var g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else{h=this.containment}if(b.pageX-this.offset.click.left<h[0])f=h[0]+this.offset.click.left;if(b.pageY-this.offset.click.top<h[1])g=h[1]+this.offset.click.top;if(b.pageX-this.offset.click.left>h[2])f=h[2]+this.offset.click.left;if(b.pageY-this.offset.click.top>h[3])g=h[3]+this.offset.click.top}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?!(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j:!(j-this.offset.click.top<h[1])?j-c.grid[1]:j+c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?!(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k:!(k-this.offset.click.left<h[0])?k-c.grid[0]:k+c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d]);if(b=="drag")this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.14"});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[];a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");if(c&&!c.options.disabled){d.sortables.push({instance:c,shouldRevert:c.options.revert});c.refreshPositions();c._trigger("activate",b,f)}})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(b);this.instance.options.helper=this.instance.options._helper;if(d.options.helper=="original")this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",b,e)}})},drag:function(b,c){var d=a(this).data("draggable"),e=this;var f=function(b){var c=this.offset.click.top,d=this.offset.click.left;var e=this.positionAbs.top,f=this.positionAbs.left;var g=b.height,h=b.width;var i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return c.helper[0]};b.target=this.instance.currentItem[0];this.instance._mouseCapture(b,true);this.instance._mouseStart(b,true,true);this.instance.offset.click.top=d.offset.click.top;this.instance.offset.click.left=d.offset.click.left;this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top;d._trigger("toSortable",b);d.dropped=this.instance.element;d.currentItem=d.element;this.instance.fromOutside=d}if(this.instance.currentItem)this.instance._mouseDrag(b)}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",b,this.instance._uiHash(this.instance));this.instance._mouseStop(b,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder)this.instance.placeholder.remove();d._trigger("fromSortable",b);d.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;if(d.css("cursor"))e._cursor=d.css("cursor");d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._cursor)a("body").css("cursor",d._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;if(d.css("opacity"))e._opacity=d.css("opacity");d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._opacity)a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML")d.overflowOffset=d.scrollParent.offset()},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x"){if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity)d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed;else if(b.pageY-d.overflowOffset.top<e.scrollSensitivity)d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed}if(!e.axis||e.axis!="y"){if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity)d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed;else if(b.pageX-d.overflowOffset.left<e.scrollSensitivity)d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed}}else{if(!e.axis||e.axis!="x"){if(b.pageY-a(document).scrollTop()<e.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed);else if(a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed)}if(!e.axis||e.axis!="y"){if(b.pageX-a(document).scrollLeft()<e.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed);else if(a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)}}if(f!==false&&a.ui.ddmanager&&!e.dropBehaviour)a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[];a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this);var c=b.offset();if(this!=d.element[0])d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options;var f=e.snapTolerance;var g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){if(d.snapElements[k].snapping)d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item}));d.snapElements[k].snapping=false;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f;var q=Math.abs(o-i)<=f;var r=Math.abs(l-h)<=f;var s=Math.abs(m-g)<=f;if(p)c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top;if(q)c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top;if(r)c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left;if(s)c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f;var q=Math.abs(o-j)<=f;var r=Math.abs(l-g)<=f;var s=Math.abs(m-h)<=f;if(p)c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top;if(q)c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top;if(r)c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left;if(s)c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left}if(!d.snapElements[k].snapping&&(p||q||r||s||t))d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item}));d.snapElements[k].snapping=p||q||r||s||t}}});a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options;var e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length){return}var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a});this[0].style.zIndex=f+e.length}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;if(d.css("zIndex"))e._zIndex=d.css("zIndex");d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._zIndex)a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);(function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(a){return a.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)if(b[c]==this)b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(b,c){if(b=="accept"){this.accept=a.isFunction(c)?c:function(a){return a.is(c)}}a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;if(this.options.activeClass)this.element.addClass(this.options.activeClass);c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;if(this.options.activeClass)this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],c.currentItem||c.element)){if(this.options.hoverClass)this.element.addClass(this.options.hoverClass);this._trigger("over",b,this.ui(c))}},_out:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],c.currentItem||c.element)){if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger("out",b,this.ui(c))}},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return false;var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)){e=true;return false}});if(e)return false;if(this.accept.call(this.element[0],d.currentItem||d.element)){if(this.options.activeClass)this.element.removeClass(this.options.activeClass);if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger("drop",b,this.ui(d));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.14"});a.ui.intersect=function(b,c,d){if(!c.offset)return false;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height;var i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;break;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;break;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;break;case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);break;default:return false;break}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[];var e=c?c.type:null;var f=(b.currentItem||b.element).find(":data(droppable)").andSelf();a:for(var g=0;g<d.length;g++){if(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))continue;for(var h=0;h<f.length;h++){if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue a}}d[g].visible=d[g].element.css("display")!="none";if(!d[g].visible)continue;if(e=="mousedown")d[g]._activate.call(d[g],c);d[g].offset=d[g].element.offset();d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight}}},drop:function(b,c){var d=false;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options)return;if(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance))d=d||this._drop.call(this,c);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)){this.isout=1;this.isover=0;this._deactivate.call(this,c)}});return d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){if(!b.options.refreshPositions)a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){if(b.options.refreshPositions)a.ui.ddmanager.prepareOffsets(b,c);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var d=a.ui.intersect(b,this,this.options.tolerance);var e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");if(g.length){f=a.data(g[0],"droppable");f.greedyChild=e=="isover"?1:0}}if(f&&e=="isover"){f["isover"]=0;f["isout"]=1;f._out.call(f,c)}this[e]=1;this[e=="isout"?"isover":"isout"]=0;this[e=="isover"?"_over":"_out"].call(this,c);if(f&&e=="isout"){f["isout"]=0;f["isover"]=1;f._over.call(f,c)}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable");if(!b.options.refreshPositions)a.ui.ddmanager.prepareOffsets(b,c)}}})(jQuery);(function(a,b){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css("position"))&&a.browser.opera)this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=c.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f;var h=a('<div class="ui-resizable-handle '+g+'"></div>');if(/sw|se|ne|nw/.test(f))h.css({zIndex:++c.zIndex});if("se"==f){h.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[f]=".ui-resizable-"+f;this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String)this.handles[c]=a(this.handles[c],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e);this._proportionallyResize()}if(!a(this.handles[c]).length)continue}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}});if(c.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){if(c.disabled)return;a(this).removeClass("ui-resizable-autohide");b._handles.show()},function(){if(c.disabled)return;if(!b.resizing){a(this).addClass("ui-resizable-autohide");b._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var c=false;for(var d in this.handles){if(a(this.handles[d])[0]==b.target){c=true}}return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(f.is(".ui-draggable")||/absolute/.test(f.css("position"))){f.css({position:"absolute",top:e.top,left:e.left})}if(a.browser.opera&&/relative/.test(f.css("position")))f.css({position:"relative",top:"auto",left:"auto"});this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));if(d.containment){g+=a(d.containment).scrollLeft()||0;h+=a(d.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:g,top:h};this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalPosition={left:g,top:h};this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",i=="auto"?this.axis+"-resize":i);f.addClass("ui-resizable-resizing");this._propagate("start",b);return true},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis;var i=b.pageX-g.left||0,j=b.pageY-g.top||0;var k=this._change[h];if(!k)return false;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);l=this._respectSize(l,b);this._propagate("resize",b);c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length)this._proportionallyResize();this._updateCache(l);this._trigger("resize",b,this.ui());return false},_mouseStop:function(b){this.resizing=false;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width;var i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;if(!c.animate)this.element.css(a.extend(i,{top:k,left:j}));d.helper.height(d.size.height);d.helper.width(d.size.width);if(this._helper&&!c.animate)this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);if(this._helper)this.helper.remove();return false},_updateVirtualBoundaries:function(a){var b=this.options,c,e,f,g,h;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a){c=h.minHeight*this.aspectRatio;f=h.minWidth/this.aspectRatio;e=h.maxHeight*this.aspectRatio;g=h.maxWidth/this.aspectRatio;if(c>h.minWidth)h.minWidth=c;if(f>h.minHeight)h.minHeight=f;if(e<h.maxWidth)h.maxWidth=e;if(g<h.maxHeight)h.maxHeight=g}this._vBoundaries=h},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset();if(d(a.left))this.position.left=a.left;if(d(a.top))this.position.top=a.top;if(d(a.height))this.size.height=a.height;if(d(a.width))this.size.width=a.width},_updateRatio:function(a,b){var c=this.options,e=this.position,f=this.size,g=this.axis;if(d(a.height))a.width=a.height*this.aspectRatio;else if(d(a.width))a.height=a.width/this.aspectRatio;if(g=="sw"){a.left=e.left+(f.width-a.width);a.top=null}if(g=="nw"){a.top=e.top+(f.height-a.height);a.left=e.left+(f.width-a.width)}return a},_respectSize:function(a,b){var c=this.helper,e=this._vBoundaries,f=this._aspectRatio||b.shiftKey,g=this.axis,h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;if(j)a.width=e.minWidth;if(k)a.height=e.minHeight;if(h)a.width=e.maxWidth;if(i)a.height=e.maxHeight;var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height;var n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);if(j&&n)a.left=l-e.minWidth;if(h&&n)a.left=l-e.maxWidth;if(k&&o)a.top=m-e.minHeight;if(i&&o)a.top=m-e.maxHeight;var p=!a.width&&!a.height;if(p&&!a.left&&a.top)a.top=null;else if(p&&!a.top&&a.left)a.left=null;return a},_proportionallyResize:function(){var b=this.options;if(!this._proportionallyResizeElements.length)return;var c=this.helper||this.element;for(var d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(a.browser.msie&&!!(a(c).is(":hidden")||a(c).parents(":hidden").length))continue;e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8.14"});a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options;var f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10),position:b.css("position")})})};if(typeof e.alsoResize=="object"&&!e.alsoResize.parentNode){if(e.alsoResize.length){e.alsoResize=e.alsoResize[0];f(e.alsoResize)}else{a.each(e.alsoResize,function(a){f(a)})}}else{f(e.alsoResize)}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition;var h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,e){a(b).each(function(){var b=a(this),f=a(this).data("resizable-alsoresize"),g={},i=e&&e.length?e:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(i,function(a,b){var c=(f[b]||0)+(h[b]||0);if(c&&c>=0)g[b]=c||null});if(a.browser.opera&&/relative/.test(b.css("position"))){d._revertToRelativePosition=true;b.css({position:"absolute",top:"auto",left:"auto"})}b.css(g)})};if(typeof e.alsoResize=="object"&&!e.alsoResize.nodeType){a.each(e.alsoResize,function(a,b){i(a,b)})}else{i(e.alsoResize)}},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;var f=function(b){a(b).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};if(d._revertToRelativePosition){d._revertToRelativePosition=false;if(typeof e.alsoResize=="object"&&!e.alsoResize.nodeType){a.each(e.alsoResize,function(a){f(a)})}else{f(e.alsoResize)}}a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options;var f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width;var j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};if(f&&f.length)a(f[0]).css({width:c.width,height:c.height});d._updateCache(c);d._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(b,d){var e=a(this).data("resizable"),f=e.options,g=e.element;var h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(!i)return;e.containerElement=a(i);if(/document/.test(h)||h==document){e.containerOffset={left:0,top:0};e.containerPosition={left:0,top:0};e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))});e.containerOffset=j.offset();e.containerPosition=j.position();e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.containerSize,g=d.containerOffset,h=d.size,i=d.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;if(l[0]!=document&&/static/.test(l.css("position")))k=g;if(i.left<(d._helper?g.left:0)){d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left);if(j)d.size.height=d.size.width/e.aspectRatio;d.position.left=e.helper?g.left:0}if(i.top<(d._helper?g.top:0)){d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top);if(j)d.size.width=d.size.height*e.aspectRatio;d.position.top=d._helper?g.top:0}d.offset.left=d.parentData.left+d.position.left;d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height);var o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));if(o&&p)m-=d.parentData.left;if(m+d.size.width>=d.parentData.width){d.size.width=d.parentData.width-m;if(j)d.size.height=d.size.width/d.aspectRatio}if(n+d.size.height>=d.parentData.height){d.size.height=d.parentData.height-n;if(j)d.size.width=d.size.height*d.aspectRatio}},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.position,g=d.containerOffset,h=d.containerPosition,i=d.containerElement;var j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;if(d._helper&&!e.animate&&/relative/.test(i.css("position")))a(this).css({left:k.left-h.left-g.left,width:l,height:m});if(d._helper&&!e.animate&&/static/.test(i.css("position")))a(this).css({left:k.left-h.left-g.left,width:l,height:m})}});a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:"");d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options;if(d.ghost)d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;if(d.ghost&&d.helper)d.helper.get(0).removeChild(d.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis,j=e._aspectRatio||b.shiftKey;e.grid=typeof e.grid=="number"?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);if(/^(se|s|e)$/.test(i)){d.size.width=g.width+k;d.size.height=g.height+l}else if(/^(ne)$/.test(i)){d.size.width=g.width+k;d.size.height=g.height+l;d.position.top=h.top-l}else if(/^(sw)$/.test(i)){d.size.width=g.width+k;d.size.height=g.height+l;d.position.left=h.left-k}else{d.size.width=g.width+k;d.size.height=g.height+l;d.position.top=h.top-l;d.position.left=h.left-k}}});var c=function(a){return parseInt(a,10)||0};var d=function(a){return!isNaN(parseInt(a,10))}})(jQuery);(function(a,b){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=false;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]);c.each(function(){var b=a(this);var c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:false,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(this.options.disabled)return;var d=this.options;this.selectees=a(d.filter,this.element[0]);this._trigger("start",b);a(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});if(d.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=true;if(!b.metaKey){d.$element.removeClass("ui-selected");d.selected=false;d.$element.addClass("ui-unselecting");d.unselecting=true;c._trigger("unselecting",b,{unselecting:d.element})}});a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");d.unselecting=!e;d.selecting=e;d.selected=e;if(e){c._trigger("selecting",b,{selecting:d.element})}else{c._trigger("unselecting",b,{unselecting:d.element})}return false}})},_mouseDrag:function(b){var c=this;this.dragged=true;if(this.options.disabled)return;var d=this.options;var e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e;e=i}if(f>h){var i=h;h=f;f=i}this.helper.css({left:e,top:f,width:g-e,height:h-f});this.selectees.each(function(){var i=a.data(this,"selectable-item");if(!i||i.element==c.element[0])return;var j=false;if(d.tolerance=="touch"){j=!(i.left>g||i.right<e||i.top>h||i.bottom<f)}else if(d.tolerance=="fit"){j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h}if(j){if(i.selected){i.$element.removeClass("ui-selected");i.selected=false}if(i.unselecting){i.$element.removeClass("ui-unselecting");i.unselecting=false}if(!i.selecting){i.$element.addClass("ui-selecting");i.selecting=true;c._trigger("selecting",b,{selecting:i.element})}}else{if(i.selecting){if(b.metaKey&&i.startselected){i.$element.removeClass("ui-selecting");i.selecting=false;i.$element.addClass("ui-selected");i.selected=true}else{i.$element.removeClass("ui-selecting");i.selecting=false;if(i.startselected){i.$element.addClass("ui-unselecting");i.unselecting=true}c._trigger("unselecting",b,{unselecting:i.element})}}if(i.selected){if(!b.metaKey&&!i.startselected){i.$element.removeClass("ui-selected");i.selected=false;i.$element.addClass("ui-unselecting");i.unselecting=true;c._trigger("unselecting",b,{unselecting:i.element})}}}});return false},_mouseStop:function(b){var c=this;this.dragged=false;var d=this.options;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;c._trigger("unselected",b,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;c._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.14"})})(jQuery);(function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(b,c){if(b==="disabled"){this.options[b]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")}else{a.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(b,c){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(b);var d=null,e=this,f=a(b.target).parents().each(function(){if(a.data(this,"sortable-item")==e){d=a(this);return false}});if(a.data(b.target,"sortable-item")==e)d=a(b.target);if(!d)return false;if(this.options.handle&&!c){var g=false;a(this.options.handle,d).find("*").andSelf().each(function(){if(this==b.target)g=true});if(!g)return false}this.currentItem=d;this._removeCurrentsFromItems();return true},_mouseStart:function(b,c,d){var e=this.options,f=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(e.containment)this._setContainment();if(e.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",e.cursor)}if(e.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",e.opacity)}if(e.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",e.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",b,this._uiHash());if(!this._preserveHelperProportions)this._cacheHelperProportions();if(!d){for(var g=this.containers.length-1;g>=0;g--){this.containers[g]._trigger("activate",b,f._uiHash(this))}}if(a.ui.ddmanager)a.ui.ddmanager.current=this;if(a.ui.ddmanager&&!e.dropBehaviour)a.ui.ddmanager.prepareOffsets(this,b);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return true},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var c=this.options,d=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed;else if(b.pageY-this.overflowOffset.top<c.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed;else if(b.pageX-this.overflowOffset.left<c.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(b.pageY-a(document).scrollTop()<c.scrollSensitivity)d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed);else if(a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity)d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed);if(b.pageX-a(document).scrollLeft()<c.scrollSensitivity)d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed);else if(a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity)d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed)}if(d!==false&&a.ui.ddmanager&&!c.dropBehaviour)a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(!h)continue;if(g!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],g):true)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f)){this._rearrange(b,f)}else{break}this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);if(a.ui.ddmanager)a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(b,c){if(!b)return;if(a.ui.ddmanager&&!this.options.dropBehaviour)a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this;var e=d.placeholder.offset();d.reverting=true;a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else{this._clear(b,c)}return false},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null});if(this.options.helper=="original")this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,b._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,b._uiHash(this));this.containers[c].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode)this.helper.remove();a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){a(this.domPosition.prev).after(this.currentItem)}else{a(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected);var d=[];b=b||{};a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);if(c)d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))});if(!d.length&&b.key){d.push(b.key+"=")}return d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected);var d=[];b=b||{};c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")});return d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height;var f=a.left,g=f+a.width,h=a.top,i=h+a.height;var j=this.offset.click.top,k=this.offset.click.left;var l=d+j>h&&d+j<i&&b+k>f&&b+k<g;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]){return l}else{return f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i}},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(!e)return false;return this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1)},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();if(this.floating&&f){return f=="right"&&d||f=="left"&&!d}else{return e&&(e=="down"&&c||e=="up"&&!c)}},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=this;var d=[];var e=[];var f=this._connectWith();if(f&&b){for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],"sortable");if(j&&j!=this&&!j.options.disabled){e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=e.length-1;g>=0;g--){e[g][0].each(function(){d.push(this)})}return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data(sortable-item)");for(var b=0;b<this.items.length;b++){for(var c=0;c<a.length;c++){if(a[c]==this.items[b].item[0])this.items.splice(b,1)}}},_refreshItems:function(b){this.items=[];this.containers=[this];var c=this.items;var d=this;var e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];var f=this._connectWith();if(f){for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],"sortable");if(j&&j!=this&&!j.options.disabled){e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]);this.containers.push(j)}}}}for(var g=e.length-1;g>=0;g--){var k=e[g][1];var l=e[g][0];for(var i=0,m=l.length;i<m;i++){var n=a(l[i]);n.data("sortable-item",k);c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;if(!b){d.width=e.outerWidth();d.height=e.outerHeight()}var f=e.offset();d.left=f.left;d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left;this.containers[c].containerCache.top=f.top;this.containers[c].containerCache.width=this.containers[c].element.outerWidth();this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!e)b.style.visibility="hidden";return b},update:function(a,b){if(e&&!d.forcePlaceholderSize)return;if(!b.height()){b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10))}if(!b.width()){b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){var c=null,d=null;for(var e=this.containers.length-1;e>=0;e--){if(a.ui.contains(this.currentItem[0],this.containers[e].element[0]))continue;if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e];d=e}else{if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",b,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(!c)return;if(this.containers.length===1){this.containers[d]._trigger("over",b,this._uiHash(this));this.containers[d].containerCache.over=1}else if(this.currentContainer!=this.containers[d]){var f=1e4;var g=null;var h=this.positionAbs[this.containers[d].floating?"left":"top"];for(var i=this.items.length-1;i>=0;i--){if(!a.ui.contains(this.containers[d].element[0],this.items[i].item[0]))continue;var j=this.items[i][this.containers[d].floating?"left":"top"];if(Math.abs(j-h)<f){f=Math.abs(j-h);g=this.items[i]}}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d];g?this._rearrange(b,g,null,true):this._rearrange(b,null,this.containers[d].element,true);this._trigger("change",b,this._uiHash());this.containers[d]._trigger("change",b,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[d]._trigger("over",b,this._uiHash(this));this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options;var d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;if(!d.parents("body").length)a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);if(d[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(d[0].style.width==""||c.forceHelperSize)d.width(this.currentItem.width());if(d[0].style.height==""||c.forceHelperSize)d.height(this.currentItem.height());return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left"in b){this.offset.click.left=b.left+this.margins.left}if("right"in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top"in b){this.offset.click.top=b.top+this.margins.top}if("bottom"in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if(b.containment=="parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0];var d=a(b.containment).offset();var e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){if(!c)c=this.position;var d=b=="absolute"?1:-1;var e=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var f=b.pageX;var g=b.pageY;if(this.originalPosition){if(this.containment){if(b.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+this.offset.click.left;if(b.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(b.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(b.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?!(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h:!(h-this.offset.click.top<this.containment[1])?h-c.grid[1]:h+c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?!(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i:!(i-this.offset.click.left<this.containment[0])?i-c.grid[0]:i+c.grid[0]:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){if(f==e.counter)e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=false;var d=[],e=this;if(!this._noFinalSort&&this.currentItem.parent().length)this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS){if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]=""}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!c)d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c)d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){if(!c)d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--){if(a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c){d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f]));d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f]))}}}for(var f=this.containers.length-1;f>=0;f--){if(!c)d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f]));if(this.containers[f].containerCache.over){d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f]));this.containers[f].containerCache.over=0}}if(this._storedCursor)a("body").css("cursor",this._storedCursor);if(this._storedOpacity)this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++){d[f].call(this,b)}this._trigger("stop",b,this._uiHash())}return false}if(!c)this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0])this.helper.remove();this.helper=null;if(!c){for(var f=0;f<d.length;f++){d[f].call(this,b)}this._trigger("stop",b,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(a.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}});a.extend(a.ui.sortable,{version:"1.8.14"})})(jQuery);(function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0;b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(c.disabled){return}a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(c.disabled){return}a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(c.disabled){return}a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(c.disabled){return}a(this).removeClass("ui-state-focus")});b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");if(e.length){b.active=e}else{b.active=d.closest(".ui-accordion-content").prev()}}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");b.active.next().addClass("ui-accordion-content-active");b._createIcons();b.resize();b.element.attr("role","tablist");b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel");b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();if(!b.active.length){b.headers.eq(0).attr("tabIndex",0)}else{b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0})}if(!a.browser.safari){b.headers.find("a").attr("tabIndex",-1)}if(c.event){b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this);a.preventDefault()})}},_createIcons:function(){var b=this.options;if(b.icons){a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(b.autoHeight||b.fillHeight){c.css("height","")}return a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b=="active"){this.activate(c)}if(b=="icons"){this._destroyIcons();if(c){this._createIcons()}}if(b=="disabled"){this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")}},_keydown:function(b){if(this.options.disabled||b.altKey||b.ctrlKey){return}var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=false;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target);b.preventDefault()}if(f){a(b.target).attr("tabIndex",-1);a(f).attr("tabIndex",0);f.focus();return false}return true},resize:function(){var b=this.options,c;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height();if(a.browser.msie){this.element.parent().css("overflow",d)}this.headers.each(function(){c-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else if(b.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c)}return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];this._clickHandler({target:b},b);return this},_findActive:function(b){return b?typeof b==="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(d.disabled){return}if(!b.target){if(!d.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f);return}var h=a(b.currentTarget||c),i=h[0]===this.active[0];d.active=d.collapsible&&i?false:this.headers.index(h);if(this.running||!d.collapsible&&i){return}var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h;this._toggle(g,e,f,i,k);j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);if(!i){h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected);h.next().addClass("ui-accordion-content-active")}return},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b;g.toHide=c;g.data=d;var i=function(){if(!g){return}return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data);g.running=c.size()===0?b.size():c.size();if(h.animated){var j={};if(h.collapsible&&e){j={toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}}else{j={toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}}if(!h.proxied){h.proxied=h.animated}if(!h.proxiedDuration){h.proxiedDuration=h.duration}h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied;h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;if(m&&!k[m]&&!a.easing[m]){m="slide"}if(!k[m]){k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}}k[m](j)}else{if(h.collapsible&&e){b.toggle()}else{c.hide();b.show()}i(true)}c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur();b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(this.running){return}if(this.options.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""})}this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length){this.toHide.parent()[0].className=this.toHide.parent()[0].className}this._trigger("change",null,this.data)}});a.extend(a.ui.accordion,{version:"1.8.14",animations:{slide:function(b,c){b=a.extend({easing:"swing",duration:300},b,c);if(!b.toHide.size()){b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],i;var j=b.toShow;i=j[0].style.width;j.width(parseInt(j.parent().width(),10)-parseInt(j.css("paddingLeft"),10)-parseInt(j.css("paddingRight"),10)-(parseInt(j.css("borderLeftWidth"),10)||0)-(parseInt(j.css("borderRightWidth"),10)||0));a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}});b.toShow.css({height:0,overflow:"hidden"}).show();b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){if(c.prop=="height"){e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)}b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){if(!b.autoHeight){b.toShow.css("height","")}b.toShow.css({width:i,overflow:d});b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})})(jQuery);(function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.attr("readonly")){return}d=false;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._move("previous",c);c.preventDefault();break;case e.DOWN:b._move("next",c);c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:if(b.menu.active){d=true;c.preventDefault()};case e.TAB:if(!b.menu.active){return}b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term);b.close(c);break;default:clearTimeout(b.searching);b.searching=setTimeout(function(){if(b.term!=b.element.val()){b.selectedItem=null;b.search(null,c)}},b.options.delay);break}}).bind("keypress.autocomplete",function(a){if(d){d=false;a.preventDefault()}}).bind("focus.autocomplete",function(){if(b.options.disabled){return}b.selectedItem=null;b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled){return}clearTimeout(b.searching);b.closing=setTimeout(function(){b.close(a);b._change(a)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];if(!a(c.target).closest(".ui-menu-item").length){setTimeout(function(){a(document).one("mousedown",function(c){if(c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)){b.close()}})},1)}setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");if(false!==b._trigger("focus",a,{item:d})){if(/^key/.test(a.originalEvent.type)){b.element.val(d.value)}}},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;if(b.element[0]!==c.activeElement){b.element.focus();b.previous=f;setTimeout(function(){b.previous=f;b.selectedItem=e},1)}if(false!==b._trigger("select",a,{item:e})){b.element.val(e.value)}b.term=b.element.val();b.close(a);b.selectedItem=e},blur:function(a,c){if(b.menu.element.is(":visible")&&b.element.val()!==b.term){b.element.val(b.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(a.fn.bgiframe){this.menu.element.bgiframe()}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="source"){this._initSource()}if(b==="appendTo"){this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0])}if(b==="disabled"&&c&&this.xhr){this.xhr.abort()}},_initSource:function(){var b=this,d,e;if(a.isArray(this.options.source)){d=this.options.source;this.source=function(b,c){c(a.ui.autocomplete.filter(d,b.term))}}else if(typeof this.options.source==="string"){e=this.options.source;this.source=function(d,f){if(b.xhr){b.xhr.abort()}b.xhr=a.ajax({url:e,data:d,dataType:"json",autocompleteRequest:++c,success:function(a,b){if(this.autocompleteRequest===c){f(a)}},error:function(){if(this.autocompleteRequest===c){f([])}}})}}else{this.source=this.options.source}},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength){return this.close(b)}clearTimeout(this.closing);if(this._trigger("search",b)===false){return}return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){if(!this.options.disabled&&a&&a.length){a=this._normalize(a);this._suggest(a);this._trigger("open")}else{this.close()}this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading")}},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",a)}},_change:function(a){if(this.previous!==this.element.val()){this._trigger("change",a,{item:this.selectedItem})}},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(b){if(typeof b==="string"){return{label:b,value:b}}return a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b);this.menu.deactivate();this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next(new a.Event("mouseover"))}},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery);(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length){return}c.preventDefault();b.select(c)});this.refresh()},refresh:function(){var b=this;var c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();if(c<0){this.element.scrollTop(d+c)}else if(c>=e){this.element.scrollTop(d+c-e+b.height())}}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);if(d.length){this.activate(c,d)}else{this.activate(c,this.element.children(b))}},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});if(!e.length){e=this.element.children(".ui-menu-item:last")}this.activate(b,e)}else{this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});if(!result.length){result=this.element.children(".ui-menu-item:first")}this.activate(b,result)}else{this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})})(jQuery);(function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);if(c){if(d){e=a(d).find("[name='"+c+"']")}else{e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})}}return e};a.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j);if(typeof this.options.disabled!=="boolean"){this.options.disabled=this.element.attr("disabled")}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i=this.type==="checkbox"||this.type==="radio",l="ui-state-hover"+(!i?" ui-state-active":""),m="ui-state-focus";if(h.label===null){h.label=this.buttonElement.html()}if(this.element.is(":disabled")){h.disabled=true}this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){if(h.disabled){return}a(this).addClass("ui-state-hover");if(this===c){a(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){if(h.disabled){return}a(this).removeClass(l)}).bind("click.button",function(a){if(h.disabled){a.preventDefault();a.stopImmediatePropagation()}});this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)});if(i){this.element.bind("change.button",function(){if(f){return}b.refresh()});this.buttonElement.bind("mousedown.button",function(a){if(h.disabled){return}f=false;d=a.pageX;e=a.pageY}).bind("mouseup.button",function(a){if(h.disabled){return}if(d!==a.pageX||e!==a.pageY){f=true}})}if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(h.disabled||f){return false}a(this).toggleClass("ui-state-active");b.buttonElement.attr("aria-pressed",b.element[0].checked)})}else if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(h.disabled||f){return false}a(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed",true);var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)})}else{this.buttonElement.bind("mousedown.button",function(){if(h.disabled){return false}a(this).addClass("ui-state-active");c=this;a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled){return false}a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(h.disabled){return false}if(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER){a(this).addClass("ui-state-active")}}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(b){if(b.keyCode===a.ui.keyCode.SPACE){a(this).click()}})}}this._setOption("disabled",h.disabled);this._resetButton()},_determineButtonType:function(){if(this.element.is(":checkbox")){this.type="checkbox"}else if(this.element.is(":radio")){this.type="radio"}else if(this.element.is("input")){this.type="input"}else{this.type="button"}if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().filter(":last"),b="label[for="+this.element.attr("id")+"]";this.buttonElement=a.find(b);if(!this.buttonElement.length){a=a.length?a.siblings():this.element.siblings();this.buttonElement=a.filter(b);if(!this.buttonElement.length){this.buttonElement=a.find(b)}}this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");if(c){this.buttonElement.addClass("ui-state-active")}this.buttonElement.attr("aria-pressed",c)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled"){if(c){this.element.attr("disabled",true)}else{this.element.removeAttr("disabled")}return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");if(b!==this.options.disabled){this._setOption("disabled",b)}if(this.type==="radio"){k(this.element[0]).each(function(){if(a(this).is(":checked")){a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true)}else{a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)}})}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true)}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var b=this.buttonElement.removeClass(i),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];if(d.primary||d.secondary){if(this.options.text){f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary"))}if(d.primary){b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>")}if(d.secondary){b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>")}if(!this.options.text){f.push(e?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){b.attr("title",c)}}}else{f.push("ui-button-text-only")}b.addClass(f.join(" "))}});a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){if(b==="disabled"){this.buttons.button("option",b,c)}a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=this.element.css("direction")==="ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(b?"ui-corner-right":"ui-corner-left").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");a.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a,b){var c="ui-dialog "+"ui-widget "+"ui-widget-content "+"ui-corner-all ",d={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},e={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},f=a.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",showCloseButton:true,showTitleBar:true,dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;if(c<0){a(this).css("top",b.top-c)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){if(d.closeOnEscape&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE){b.close(c);c.preventDefault()}}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(false,a)}),h=b.element.show().removeAttr("title").addClass("ui-dialog-content "+"ui-widget-content").appendTo(g),i=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar "+"ui-widget-header "+"ui-corner-all "+(!d.showTitleBar?" ui-helper-hidden":" ui-helper-clearfix")).prependTo(g),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close "+"ui-corner-all"+(!d.showCloseButton?" ui-helper-hidden":"")).attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){b.close(a);return false}).appendTo(i),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon "+"ui-icon-closethick").text(d.closeText).appendTo(j),l=a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i);if(a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)){d.beforeClose=d.beforeclose}i.find("*").add(i).disableSelection();if(d.draggable&&a.fn.draggable){b._makeDraggable()}if(d.resizable&&a.fn.resizable){b._makeResizable()}b._createButtons(d.buttons);b._isOpen=false;if(a.fn.bgiframe){g.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},destroy:function(){var a=this;if(a.overlay){a.overlay.destroy()}a.uiDialog.hide();a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");a.uiDialog.remove();if(a.originalTitle){a.element.attr("title",a.originalTitle)}return a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(false===c._trigger("beforeClose",b)){return}if(c.overlay){c.overlay.destroy()}c.uiDialog.unbind("keypress.ui-dialog");c._isOpen=false;if(c.options.hide){c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)})}else{c.uiDialog.hide();c._trigger("close",b)}a.ui.dialog.overlay.resize();if(c.options.modal){d=0;a(".ui-dialog").each(function(){if(this!==c.uiDialog[0]){e=a(this).css("z-index");if(!isNaN(e)){d=Math.max(d,e)}}});a.ui.dialog.maxZ=d}return c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;if(e.modal&&!b||!e.stack&&!e.modal){return d._trigger("focus",c)}if(e.zIndex>a.ui.dialog.maxZ){a.ui.dialog.maxZ=e.zIndex}if(d.overlay){a.ui.dialog.maxZ+=1;d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}f={scrollTop:d.element.attr("scrollTop"),scrollLeft:d.element.attr("scrollLeft")};a.ui.dialog.maxZ+=1;d.uiDialog.css("z-index",a.ui.dialog.maxZ);d.element.attr(f);d._trigger("focus",c);return d},open:function(){if(this._isOpen){return}var b=this,c=b.options,d=b.uiDialog;b.overlay=c.modal?new a.ui.dialog.overlay(b):null;b._size();b._position(c.position);d.show(c.show);b.moveToTop(true);if(c.modal){d.bind("keypress.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB){return}var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey){d.focus(1);return false}else if(b.target===d[0]&&b.shiftKey){e.focus(1);return false}})}a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus();b._isOpen=true;b._trigger("open");return b},_createButtons:function(b){var c=this,d=false,e=a("<div></div>").addClass("ui-dialog-buttonpane "+"ui-widget-content "+"ui-helper-clearfix"),g=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove();if(typeof b==="object"&&b!==null){a.each(b,function(){return!(d=true)})}if(d){a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(g);a.each(d,function(a,b){if(a==="click"){return}if(a in f){e[a](b)}else{e.attr(a,b)}});if(a.fn.button){e.button()}});e.appendTo(c.uiDialog)}},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var b=this,c=b.options,d=a(document),e;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e=c.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(e);b._trigger("dragStop",g,f(h));a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g=typeof c==="string"?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing");e.height=a(this).height();e.width=a(this).width();d._trigger("resizeStop",b,h(c));a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;if(a.height==="auto"){return a.minHeight}else{return Math.min(a.minHeight,a.height)}},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b==="string"||typeof b==="object"&&"0"in b){c=b.split?b.split(" "):[b[0],b[1]];if(c.length===1){c[1]=c[0]}a.each(["left","top"],function(a,b){if(+c[a]===c[a]){d[a]=c[a];c[a]=b}});b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")}}b=a.extend({},a.ui.dialog.prototype.options.position,b)}else{b=a.ui.dialog.prototype.options.position}e=this.uiDialog.is(":visible");if(!e){this.uiDialog.show()}this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b));if(!e){this.uiDialog.hide()}},_setOptions:function(b){var c=this,f={},g=false;a.each(b,function(a,b){c._setOption(a,b);if(a in d){g=true}if(a in e){f[a]=b}});if(g){this._size()}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",f)}},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"showCloseButton":e.uiDialogTitlebar.find(".ui-dialog-titlebar-close")[d?"removeClass":"addClass"]("ui-helper-hidden");break;case"showTitleBar":if(d){e.uiDialogTitlebar.removeClass("ui-helper-hidden").addClass("ui-helper-clearfix")}else{e.uiDialogTitlebar.addClass("ui-helper-hidden").removeClass("ui-helper-clearfix")}break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":if(d){f.addClass("ui-dialog-disabled")}else{f.removeClass("ui-dialog-disabled")}break;case"draggable":var g=f.is(":data(draggable)");if(g&&!d){f.draggable("destroy")}if(!g&&d){e._makeDraggable()}break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");if(h&&!d){f.resizable("destroy")}if(h&&typeof d==="string"){f.resizable("option","handles",d)}if(!h&&d!==false){e._makeResizable(d)}break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"));break}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(b.minWidth>b.width){b.width=b.minWidth}c=this.uiDialog.css({height:"auto",width:b.width}).height();d=Math.max(0,b.minHeight-c);if(b.height==="auto"){if(a.support.minHeight){this.element.css({minHeight:d,height:"auto"})}else{this.uiDialog.show();var f=this.element.css("height","auto").height();if(!e){this.uiDialog.hide()}this.element.height(Math.max(f,d))}}else{this.element.height(Math.max(b.height-c,0))}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}}});a.extend(a.ui.dialog,{version:"1.8.14",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");if(!b){this.uuid+=1;b=this.uuid}return"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){if(this.instances.length===0){setTimeout(function(){if(a.ui.dialog.overlay.instances.length){a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ){return false}})}},1);a(document).bind("keydown.dialog-overlay",function(c){if(b.options.closeOnEscape&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE){b.close(c);c.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});if(a.fn.bgiframe){c.bgiframe()}this.instances.push(c);return c},destroy:function(b){var c=a.inArray(b,this.instances);if(c!=-1){this.oldInstances.push(this.instances.splice(c,1)[0])}if(this.instances.length===0){a([document,window]).unbind(".dialog-overlay")}b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var b,c;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(b<c){return a(window).height()+"px"}else{return b+"px"}}else{return a(document).height()+"px"}},width:function(){var b,c;if(a.browser.msie){b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(b<c){return a(window).width()+"px"}else{return b+"px"}}else{return a(document).width()+"px"}},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(a,b){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);if(d.range){if(d.range===true){if(!d.values){d.values=[this._valueMin(),this._valueMin()]}if(d.values.length&&d.values.length!==2){d.values=[d.values[0],d.values[0]]}}this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range"+" ui-widget-header"+(d.range==="min"||d.range==="max"?" ui-slider-range-"+d.range:""))}for(var i=e.length;i<g;i+=1){h.push(f)}this.handles=e.add(a(h.join("")).appendTo(b.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){if(!d.disabled){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(!d.disabled){a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}else{a(this).blur()}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)});this.handles.keydown(function(d){var e=true,f=a(this).data("index.ui-slider-handle"),g,h,i,j;if(b.options.disabled){return}switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:e=false;if(!b._keySliding){b._keySliding=true;a(this).addClass("ui-state-active");g=b._start(d,f);if(g===false){return}}break}j=b.options.step;if(b.options.values&&b.options.values.length){h=i=b.values(f)}else{h=i=b.value()}switch(d.keyCode){case a.ui.keyCode.HOME:i=b._valueMin();break;case a.ui.keyCode.END:i=b._valueMax();break;case a.ui.keyCode.PAGE_UP:i=b._trimAlignValue(h+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:i=b._trimAlignValue(h-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(h===b._valueMax()){return}i=b._trimAlignValue(h+j);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(h===b._valueMin()){return}i=b._trimAlignValue(h-j);break}b._slide(d,f,i);return e}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");if(b._keySliding){b._keySliding=false;b._stop(c,d);b._change(c,d);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-slider-disabled"+" ui-widget"+" ui-widget-content"+" ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(b){var c=this.options,d,e,f,g,h,i,j,k,l;if(c.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();d={x:b.pageX,y:b.pageY};e=this._normValueFromMouse(d);f=this._valueMax()-this._valueMin()+1;h=this;this.handles.each(function(b){var c=Math.abs(e-h.values(b));if(f>c){f=c;g=a(this);i=b}});if(c.range===true&&this.values(1)===c.min){i+=1;g=a(this.handles[i])}j=this._start(b,i);if(j===false){return false}this._mouseSliding=true;h._handleIndex=i;g.addClass("ui-state-active").focus();k=g.offset();l=!a(b.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(b,i,e)}this._animateOff=true;return true},_mouseStart:function(a){return true},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);this._slide(a,this._handleIndex,c);return false},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;if(this.orientation==="horizontal"){b=this.elementSize.width;c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{b=this.elementSize.height;c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}d=c/b;if(d>1){d=1}if(d<0){d=0}if(this.orientation==="vertical"){d=1-d}e=this._valueMax()-this._valueMin();f=this._valueMin()+d*e;return this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}return this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;if(this.options.values&&this.options.values.length){d=this.values(b?0:1);if(this.options.values.length===2&&this.options.range===true&&(b===0&&c>d||b===1&&c<d)){c=d}if(c!==this.values(b)){e=this.values();e[b]=c;f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e});d=this.values(b?0:1);if(f!==false){this.values(b,c,true)}}}else{if(c!==this.value()){f=this._trigger("slide",a,{handle:this.handles[b],value:c});if(f!==false){this.value(c)}}}},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("change",a,c)}},value:function(a){if(arguments.length){this.options.value=this._trimAlignValue(a);this._refreshValue();this._change(null,0);return}return this._value()},values:function(b,c){var d,e,f;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(c);this._refreshValue();this._change(null,b);return}if(arguments.length){if(a.isArray(arguments[0])){d=this.options.values;e=arguments[0];for(f=0;f<d.length;f+=1){d[f]=this._trimAlignValue(e[f]);this._change(null,f)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(b)}else{return this.value()}}}else{return this._values()}},_setOption:function(b,c){var d,e=0;if(a.isArray(this.options.values)){e=this.options.values.length}a.Widget.prototype._setOption.apply(this,arguments);switch(b){case"disabled":if(c){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(d=0;d<e;d+=1){this._change(null,d)}this._animateOff=false;break}},_value:function(){var a=this.options.value;a=this._trimAlignValue(a);return a},_values:function(a){var b,c,d;if(arguments.length){b=this.options.values[a];b=this._trimAlignValue(b);return b}else{c=this.options.values.slice();for(d=0;d<c.length;d+=1){c[d]=this._trimAlignValue(c[d])}return c}},_trimAlignValue:function(a){if(a<=this._valueMin()){return this._valueMin()}if(a>=this._valueMax()){return this._valueMax()}var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b;alignValue=a-c;if(Math.abs(c)*2>=b){alignValue+=c>0?b:-b}return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,c=this.options,d=this,e=!this._animateOff?c.animate:false,f,g={},h,i,j,k;if(this.options.values&&this.options.values.length){this.handles.each(function(b,i){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100;g[d.orientation==="horizontal"?"left":"bottom"]=f+"%";a(this).stop(1,1)[e?"animate":"css"](g,c.animate);if(d.options.range===true){if(d.orientation==="horizontal"){if(b===0){d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate)}if(b===1){d.range[e?"animate":"css"]({width:f-h+"%"},{queue:false,duration:c.animate})}}else{if(b===0){d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate)}if(b===1){d.range[e?"animate":"css"]({height:f-h+"%"},{queue:false,duration:c.animate})}}}h=f})}else{i=this.value();j=this._valueMin();k=this._valueMax();f=k!==j?(i-j)/(k-j)*100:0;g[d.orientation==="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[e?"animate":"css"](g,c.animate);if(b==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate)}if(b==="max"&&this.orientation==="horizontal"){this.range[e?"animate":"css"]({width:100-f+"%"},{queue:false,duration:c.animate})}if(b==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate)}if(b==="max"&&this.orientation==="vertical"){this.range[e?"animate":"css"]({height:100-f+"%"},{queue:false,duration:c.animate})}}}});a.extend(a.ui.slider,{version:"1.8.14"})})(jQuery);(function(a,b){function e(){return++c}function f(){return++d}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(a,b){if(a=="selected"){if(this.options.collapsible&&b==this.options.selected){return}this.select(b)}else{this.options[a]=b;this._tabify()}},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display","");if(!a.support.opacity&&c.opacity){b[0].style.removeAttribute("filter")}}var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol:not(.ui-tabs-skip),ul:not(.ui-tabs-skip)").eq(0);this.lis=a(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);this.anchors.each(function(b,c){var g=a(c).attr("href");var h=g.split("#")[0],i;if(h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)){g=c.hash;c.href=g}if(f.test(g)){d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)))}else if(g&&g!=="#"){a.data(c,"href.tabs",g);a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);if(!k.length){k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list);k.data("destroy.tabs",true)}d.panels=d.panels.add(k)}else{e.disabled.push(b)}});if(c){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(e.selected===b){if(location.hash){this.anchors.each(function(a,b){if(b.hash==location.hash){e.selected=a;return false}})}if(typeof e.selected!=="number"&&e.cookie){e.selected=parseInt(d._cookie(),10)}if(typeof e.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length){e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}e.selected=e.selected||(this.lis.length?0:-1)}else if(e.selected===null){e.selected=-1}e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0;e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return d.lis.index(a)}))).sort();if(a.inArray(e.selected,e.disabled)!=-1){e.disabled.splice(a.inArray(e.selected,e.disabled),1)}this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(e.selected>=0&&this.anchors.length){d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active");d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))});this.load(e.selected)}a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs");d.lis=d.anchors=d.panels=null})}else{e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(e.cookie){this._cookie(e.selected,e.cookie)}for(var g=0,h;h=this.lis[g];g++){a(h)[a.inArray(g,e.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}if(e.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(e.event!=="mouseover"){var i=function(a,b){if(b.is(":not(.ui-state-disabled)")){b.addClass("ui-state-"+a)}};var j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))});this.lis.bind("mouseout.tabs",function(){j("hover",a(this))});this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;if(e.fx){if(a.isArray(e.fx)){k=e.fx[0];l=e.fx[1]}else{k=l=e.fx}}var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active");c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l);d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active");c.removeClass("ui-tabs-hide");d._trigger("show",null,d._ui(b,c[0]))};var o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active");b.addClass("ui-tabs-hide");m(b,k);d.element.dequeue("tabs")})}:function(a,b,c){d.lis.removeClass("ui-tabs-selected ui-state-active");b.addClass("ui-tabs-hide");d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===false){this.blur();return false}e.selected=d.anchors.index(this);d.abort();if(e.collapsible){if(c.hasClass("ui-tabs-selected")){e.selected=-1;if(e.cookie){d._cookie(e.selected,e.cookie)}d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs");this.blur();return false}else if(!f.length){if(e.cookie){d._cookie(e.selected,e.cookie)}d.element.queue("tabs",function(){n(b,g)});d.load(d.anchors.index(this));this.blur();return false}}if(e.cookie){d._cookie(e.selected,e.cookie)}if(g.length){if(f.length){d.element.queue("tabs",function(){o(b,f)})}d.element.queue("tabs",function(){n(b,g)});d.load(d.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(a.browser.msie){this.blur()}});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(a){if(typeof a=="string"){a=this.anchors.index(this.anchors.filter("[href$="+a+"]"))}return a},destroy:function(){var b=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var b=a.data(this,"href.tabs");if(b){this.href=b}var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(a.data(this,"destroy.tabs")){a(this).remove()}else{a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}});if(b.cookie){this._cookie(null,b.cookie)}return this},add:function(c,d,e){if(e===b){e=this.anchors.length}var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=!c.indexOf("#")?c.replace("#",""):this._tabId(a("a",h)[0]);h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var j=f.element.find("#"+i);if(!j.length){j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",true)}j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(e>=this.lis.length){h.appendTo(this.list);j.appendTo(this.list[0].parentNode)}else{h.insertBefore(this.lis[e]);j.insertBefore(this.panels[e])}g.disabled=a.map(g.disabled,function(a,b){return a>=e?++a:a});this._tabify();if(this.anchors.length==1){g.selected=0;h.addClass("ui-tabs-selected ui-state-active");j.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[e],this.panels[e]));return this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();if(d.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(b+(b+1<this.anchors.length?1:-1))}c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a>=b?--a:a});this._tabify();this._trigger("remove",null,this._ui(d.find("a")[0],e[0]));return this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)==-1){return}this.lis.eq(b).removeClass("ui-state-disabled");c.disabled=a.grep(c.disabled,function(a,c){return a!=b});this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]));return this},disable:function(a){a=this._getIndex(a);var b=this,c=this.options;if(a!=c.selected){this.lis.eq(a).addClass("ui-state-disabled");c.disabled.push(a);c.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))}return this},select:function(a){a=this._getIndex(a);if(a==-1){if(this.options.collapsible&&this.options.selected!=-1){a=this.options.selected}else{return this}}this.anchors.eq(a).trigger(this.options.event+".tabs");return this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f);c._cleanup();if(d.cache){a.data(e,"cache.tabs",true)}c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f,g){c._cleanup();c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}}));c.element.dequeue("tabs");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(a,b){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b);return this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8.14"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options;var e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation);c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a);if(b){b.stopPropagation()}});var f=c._unrotate||(c._unrotate=!b?function(a){if(a.clientX){c.rotate(null)}}:function(a){t=d.selected;e()});if(a){this.element.bind("tabsshow",e);this.anchors.bind(d.event+".tabs",f);e()}else{clearTimeout(c.rotation);this.element.unbind("tabsshow",e);this.anchors.unbind(d.event+".tabs",f);delete this._rotate;delete this._unrotate}return this}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d.addClass("ui-state-hover");if(d.hasClass("ui-datepicker-prev"))d.addClass("ui-datepicker-prev-hover");if(d.hasClass("ui-datepicker-next"))d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.14"}});var PROP_NAME="datepicker";var dpuuid=(new Date).getTime();var instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){if(this.debug)console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){extendRemove(this._defaults,a||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=nodeName=="div"||nodeName=="span";if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else if(inline){this._inlineDatepicker(target,inst)}},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]);b.trigger=$([]);if(c.hasClass(this.markerClassName))return;this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)});this._autoSize(b);$.data(a,PROP_NAME,b)},_attachments:function(a,b){var c=this._get(b,"appendText");var d=this._get(b,"isRTL");if(b.append)b.append.remove();if(c){b.append=$('<span class="'+this._appendClass+'">'+c+"</span>");a[d?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);if(b.trigger)b.trigger.remove();var e=this._get(b,"showOn");if(e=="focus"||e=="both")a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText");var g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f})));a[d?"before":"after"](b.trigger);b.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0])$.datepicker._hideDatepicker();else $.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,12-1,20);var c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0;var c=0;for(var d=0;d<a.length;d++){if(a[d].length>b){b=a[d].length;c=d}}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName))return;c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)});$.data(a,PROP_NAME,b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b);b.dpDiv.show()},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);f=this._dialogInst=this._newInst(this._dialogInput,false);f.settings={};$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{});b=b&&b.constructor==Date?this._formatDate(f,b):b;this._dialogInput.val(b);this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth;var i=document.documentElement.clientHeight;var j=document.documentElement.scrollLeft||document.body.scrollLeft;var k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");f.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI)$.blockUI(this.dpDiv);$.data(this._dialogInput[0],PROP_NAME,f);return this},_destroyDatepicker:function(a){var b=$(a);var c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME);if(d=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(d=="div"||d=="span")b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a);var c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled");e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a);var c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled");e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return false}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a)return true}return false},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};if(typeof b=="string"){e={};e[b]=c}if(d){if(this._curInst==d){this._hideDatepicker()}var f=this._getDateDatepicker(a,true);var g=this._getMinMaxDate(d,"min");var h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e);if(g!==null&&e["dateFormat"]!==undefined&&e["minDate"]===undefined)d.settings.minDate=this._formatDate(d,g);if(h!==null&&e["dateFormat"]!==undefined&&e["maxDate"]===undefined)d.settings.maxDate=this._formatDate(d,h);this._attachments($(a),d);this._autoSize(d);this._setDate(d,f);this._updateAlternate(d);this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);if(b){this._updateDatepicker(b)}},_setDateDatepicker:function(a,b){var c=this._getInst(a);if(c){this._setDate(c,b);this._updateDatepicker(c);this._updateAlternate(c)}},_getDateDatepicker:function(a,b){var c=this._getInst(a);if(c&&!c.inline)this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target);var c=true;var d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=true;if($.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker();c=false;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);if(e[0])$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);else $.datepicker._hideDatepicker();return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey)$.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey)$.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey)$.datepicker._adjustDate(a.target,d?+1:-1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:if(a.ctrlKey||a.metaKey)$.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)$.datepicker._adjustDate(a.target,d?-1:+1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:if(a.ctrlKey||a.metaKey)$.datepicker._adjustDate(a.target,+7,"D");c=a.ctrlKey||a.metaKey;break;default:c=false}else if(a.keyCode==36&&a.ctrlKey)$.datepicker._showDatepicker(this);else{c=false}if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat"));var d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));if(c){$.datepicker._setDateFromField(b);$.datepicker._updateAlternate(b);$.datepicker._updateDatepicker(b)}}catch(a){$.datepicker.log(a)}}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input")a=$("input",a.parentNode)[0];if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a)return;var b=$.datepicker._getInst(a);if($.datepicker._curInst&&$.datepicker._curInst!=b){if($.datepicker._datepickerShowing){$.datepicker._triggerOnClose($.datepicker._curInst)}$.datepicker._curInst.dpDiv.stop(true,true)}var c=$.datepicker._get(b,"beforeShow");extendRemove(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;$.datepicker._lastInput=a;$.datepicker._setDateFromField(b);if($.datepicker._inDialog)a.value="";if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(a);$.datepicker._pos[1]+=a.offsetHeight}var d=false;$(a).parents().each(function(){d|=$(this).css("position")=="fixed";return!d});if(d&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var e={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(b);e=$.datepicker._checkOffset(b,e,d);b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":d?"fixed":"absolute",display:"none",left:e.left+"px",top:e.top+"px"});if(!b.inline){var f=$.datepicker._get(b,"showAnim");var g=$.datepicker._get(b,"duration");var h=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects[f])b.dpDiv.show(f,$.datepicker._get(b,"showOptions"),g,h);else b.dpDiv[f||"show"](f?g:null,h);if(!f||!g)h();if(b.input.is(":visible")&&!b.input.is(":disabled"))b.input.focus();$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a;a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");if(!!d.length){d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()})}a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a);var f=e[1];var g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(f>1)a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em");a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement)a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){if(h===a.yearshtml&&a.yearshtml){a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml)}h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth();var e=a.dpDiv.outerHeight();var f=a.input?a.input.outerWidth():0;var g=a.input?a.input.outerHeight():0;var h=document.documentElement.clientWidth+$(document).scrollLeft();var i=document.documentElement.clientHeight+$(document).scrollTop();b.left-=this._get(a,"isRTL")?d-f:0;b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0;b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0);b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0);return b},_findPos:function(a){var b=this._getInst(a);var c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_triggerOnClose:function(a){var b=this._get(a,"onClose");if(b)b.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a])},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME))return;if(this._datepickerShowing){var c=this._get(b,"showAnim");var d=this._get(b,"duration");var e=function(){$.datepicker._tidyDialog(b);this._curInst=null};if($.effects&&$.effects[c])b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e);else b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e);if(!c)e();$.datepicker._triggerOnClose(b);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst)return;var b=$(a.target);if(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI))$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a);var e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c);this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a);var c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay;c.drawMonth=c.selectedMonth=c.currentMonth;c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate();c.drawMonth=c.selectedMonth=d.getMonth();c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a);var e=this._getInst(d[0]);e._selectingMonthYear=false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(d)},_clickMonthYear:function(a){var b=$(a);var c=this._getInst(b[0]);if(c.input&&c._selectingMonthYear){setTimeout(function(){c.input.focus()},0)}c._selectingMonthYear=!c._selectingMonthYear},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a);var c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a);var d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d);if(d.input)d.input.val(b);this._updateAlternate(d);var e=this._get(d,"onSelect");if(e)e.apply(d.input?d.input[0]:null,[b,d]);else if(d.input)d.input.trigger("change");if(d.inline)this._updateDatepicker(d);else{this._hideDatepicker();this._lastInput=d.input[0];if(typeof d.input[0]!="object")d.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat");var d=this._getDate(a);var e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort;var f=(c?c.dayNames:null)||this._defaults.dayNames;var g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;var h=(c?c.monthNames:null)||this._defaults.monthNames;var i=-1;var j=-1;var k=-1;var l=-1;var m=false;var n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;if(c)s++;return c};var o=function(a){var c=n(a);var d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2;var e=new RegExp("^\\d{1,"+d+"}");var f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;r+=f[0].length;return parseInt(f[0],10)};var p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){f=c[0];r+=d.length;return false}});if(f!=-1)return f+1;else throw"Unknown name at position "+r};var q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++};var r=0;for(var s=0;s<a.length;s++){if(m)if(a.charAt(s)=="'"&&!n("'"))m=false;else q();else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear();j=t.getMonth()+1;k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear();j=t.getMonth()+1;k=t.getDate();break;case"'":if(n("'"))q();else m=true;break;default:q()}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}if(i==-1)i=(new Date).getFullYear();else if(i<100)i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100);if(l>-1){j=1;k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u)break;j++;k-=u}while(true)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort;var e=(c?c.dayNames:null)||this._defaults.dayNames;var f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;var g=(c?c.monthNames:null)||this._defaults.monthNames;var h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;if(c)m++;return c};var i=function(a,b,c){var d=""+b;if(h(a))while(d.length<c)d="0"+d;return d};var j=function(a,b,c,d){return h(a)?d[b]:c[b]};var k="";var l=false;if(b)for(var m=0;m<a.length;m++){if(l)if(a.charAt(m)=="'"&&!h("'"))l=false;else k+=a.charAt(m);else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*1e4+this._ticksTo1970;break;case"'":if(h("'"))k+="'";else l=true;break;default:k+=a.charAt(m)}}return k},_possibleChars:function(a){var b="";var c=false;var d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;if(c)e++;return c};for(var e=0;e<a.length;e++)if(c)if(a.charAt(e)=="'"&&!d("'"))c=false;else b+=a.charAt(e);else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":if(d("'"))b+="'";else c=true;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat");var d=a.lastVal=a.input?a.input.val():null;var e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h);d=b?"":d}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=d?e.getDate():0;a.currentMonth=d?e.getMonth():0;a.currentYear=d?e.getFullYear():0;this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;b.setDate(b.getDate()+a);return b};var e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date;var e=d.getFullYear();var f=d.getMonth();var g=d.getDate();var h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10);g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10);g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break}i=h.exec(b)}return new Date(e,f,g)};var f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());f=f&&f.toString()=="Invalid Date"?c:f;if(f){f.setHours(0);f.setMinutes(0);f.setSeconds(0);f.setMilliseconds(0)}return this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b;var e=a.selectedMonth;var f=a.selectedYear;var g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth();a.drawYear=a.selectedYear=a.currentYear=g.getFullYear();if((e!=a.selectedMonth||f!=a.selectedYear)&&!c)this._notifyChange(a);this._adjustInstDate(a);if(a.input){a.input.val(d?"":this._formatDate(a))}},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL");var d=this._get(a,"showButtonPanel");var e=this._get(a,"hideIfNoPrevNext");var f=this._get(a,"navigationAsDateFormat");var g=this._getNumberOfMonths(a);var h=this._get(a,"showCurrentAtPos");var i=this._get(a,"stepMonths");var j=g[0]!=1||g[1]!=1;var k=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay));var l=this._getMinMaxDate(a,"min");var m=this._getMinMaxDate(a,"max");var n=a.drawMonth-h;var o=a.drawYear;if(n<0){n+=12;o--}if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--;if(n<0){n=11;o--}}}a.drawMonth=n;a.drawYear=o;var q=this._get(a,"prevText");q=!f?q:this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a));var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\""+' title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>";var s=this._get(a,"nextText");s=!f?s:this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a));var t=this._canAdjustMonth(a,+1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\""+' title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>";var u=this._get(a,"currentText");var v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=!f?u:this.formatDate(u,v,this._getFormatConfig(a));var w=!a.inline?'<a class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</a>":"";var x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<a class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\""+">"+u+"</a>":"")+(c?"":w)+"</div>":"";var y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek");var A=this._get(a,"dayNames");var B=this._get(a,"dayNamesShort");var C=this._get(a,"dayNamesMin");var D=this._get(a,"monthNames");var E=this._get(a,"monthNamesShort");var F=this._get(a,"beforeShowDay");var G=this._get(a,"showOtherMonths");var H=this._get(a,"selectOtherMonths");var I=this._get(a,"calculateWeek")||this.iso8601Week;var J=this._getDefaultDate(a);var K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay));var P=" ui-corner-all";var Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first";P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last";P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle";P="";break}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);if(o==a.selectedYear&&n==a.selectedMonth)a.selectedDay=Math.min(a.selectedDay,U);var V=(this._getFirstDayOfMonth(o,n)-y+7)%7;var W=Math.ceil((V+U)/7);var X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=!z?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>";for(var S=0;S<7;S++){var ab=F?F.apply(a.input?a.input[0]:null,[Y]):[true,""];var bb=Y.getMonth()!=n;var cb=bb&&!H||!ab[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(cb?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ab[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ab[2]?' title="'+ab[2]+'"':"")+(cb?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":cb?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>";Y.setDate(Y.getDate()+1);Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++;if(n>11){n=0;o++}Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=Q}K+=M}K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=false;return K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth");var j=this._get(a,"changeYear");var k=this._get(a,"showMonthAfterYear");var l='<div class="ui-datepicker-title">';var m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c;var o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" '+'onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" "+'onclick="DP_jQuery_'+dpuuid+".datepicker._clickMonthYear('#"+a.id+"');\""+">";for(var p=0;p<12;p++){if((!n||p>=d.getMonth())&&(!o||p<=e.getMonth()))m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>"}m+="</select>"}if(!k)l+=m+(f||!(i&&j)?"&#xa0;":"");if(!a.yearshtml){a.yearshtml="";if(f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();var s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b};var t=s(q[0]);var u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t;u=e?Math.min(u,e.getFullYear()):u;a.yearshtml+='<select class="ui-datepicker-year" '+'onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" "+'onclick="DP_jQuery_'+dpuuid+".datepicker._clickMonthYear('#"+a.id+"');\""+">";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>";l+=a.yearshtml;a.yearshtml=null}}l+=this._get(a,"yearSuffix");if(k)l+=(f||!(i&&j)?"&#xa0;":"")+m;l+="</div>";return l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0);var e=a.drawMonth+(c=="M"?b:0);var f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0);var g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate();a.drawMonth=a.selectedMonth=g.getMonth();a.drawYear=a.selectedYear=g.getFullYear();if(c=="M"||c=="Y")this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");var d=this._getMinMaxDate(a,"max");var e=c&&b<c?c:b;e=d&&e>d?d:e;return e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b)b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a);var f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));if(b<0)f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth()));return this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");var d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}});$.fn.datepicker=function(a){if(!this.length){return this}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget"))return $.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return $.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b));return this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)})};$.datepicker=new Datepicker;$.datepicker.initialized=false;$.datepicker.uuid=(new Date).getTime();$.datepicker.version="1.8.14";window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(a===b){return this._value()}this._setOption("value",a);return this},_setOption:function(b,c){if(b==="value"){this.options.value=c;this._refreshValue();if(this._value()===this.options.max){this._trigger("complete")}}a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;if(typeof a!=="number"){a=0}return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value();var b=this._percentage();if(this.oldValue!==a){this.oldValue=a;this._trigger("change")}this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}});a.extend(a.ui.progressbar,{version:"1.8.14"})})(jQuery);jQuery.effects||function(a,b){function c(b){var c;if(b&&b.constructor==Array&&b.length==3)return b;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))return[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)];if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))return[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55];if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)];if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)];if(c=/rgba\(0, 0, 0, 0\)/.exec(b))return e["transparent"];return e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--){c=a[e];if(typeof a[c]=="string"){d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});b[d]=a[c]}}}else{for(c in a){if(typeof a[c]==="string"){b[c]=a[c]}}}return b}function i(b){var c,d;for(c in b){d=b[c];if(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d))){delete b[c]}}return b}function j(a,b){var c={_:0},d;for(d in b){if(a[d]!=b[d]){c[d]=b[d]}}return c}function k(b,c,d,e){if(typeof b=="object"){e=c;d=null;c=b;b=c.effect}if(a.isFunction(c)){e=c;d=null;c={}}if(typeof c=="number"||a.fx.speeds[c]){e=d;d=c;c={}}if(a.isFunction(d)){e=d;d=null}c=c||{};d=d||c.duration;d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;e=e||c.complete;return[b,c,d,e]}function l(b){if(!b||typeof b==="number"||a.fx.speeds[b]){return true}if(typeof b==="string"&&!a.effects[b]){return true}return false}a.effects={};a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){if(!a.colorInit){a.start=d(a.elem,e);a.end=c(a.end);a.colorInit=true}a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){if(a.isFunction(d)){e=d;d=null}return this.queue(function(){var g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class");a.each(f,function(a,c){if(b[c]){g[c+"Class"](b[c])}});m=i(h.call(this));g.attr("class",n);g.animate(j(l,m),{queue:false,duration:c,easing:d,complete:function(){a.each(f,function(a,c){if(b[c]){g[c+"Class"](b[c])}});if(typeof g.attr("style")=="object"){g.attr("style").cssText="";g.attr("style").cssText=k}else{g.attr("style",k)}if(e){e.apply(this,arguments)}a.dequeue(this)}})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){if(typeof d=="boolean"||d===b){if(!e){return this._toggleClass(c,d)}else{return a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g])}}else{return a.effects.animateClass.apply(this,[{toggle:c},d,e,f])}},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}});a.extend(a.effects,{version:"1.8.14",save:function(a,b){for(var c=0;c<b.length;c++){if(b[c]!==null)a.data("ec.storage."+b[c],a[0].style[b[c]])}},restore:function(a,b){for(var c=0;c<b.length;c++){if(b[c]!==null)a.css(b[c],a.data("ec.storage."+b[c]))}},setMode:function(a,b){if(b=="toggle")b=a.is(":hidden")?"show":"hide";return b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper")){return b.parent()}var c={width:b.outerWidth(true),height:b.outerHeight(true),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});b.wrap(d);d=b.parent();if(b.css("position")=="static"){d.css({position:"relative"});b.css({position:"relative"})}else{a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")});a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);if(isNaN(parseInt(c[d],10))){c[d]="auto"}});b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return d.css(c).show()},removeWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent().replaceWith(a);return a},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){unit=b.cssUnit(c);if(unit[0]>0)e[c]=unit[0]*d+unit[1]});return e}});a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];if(a.fx.off||!i){if(h){return this[h](g.duration,g.callback)}else{return this.each(function(){if(g.callback){g.callback.call(this)}})}}return i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a)){return this._show.apply(this,arguments)}else{var b=k.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)}},_hide:a.fn.hide,hide:function(a){if(l(a)){return this._hide.apply(this,arguments)}else{var b=k.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)}},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b==="boolean"||a.isFunction(b)){return this.__toggle.apply(this,arguments)}else{var c=k.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)}},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){if(c.indexOf(b)>0)d=[parseFloat(c),b]});return d}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b+c;return-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b+c;return d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b+c;return-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b*b+c;return d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){if(b==0)return c;if(b==e)return c+d;if((b/=e/2)<1)return d/2*Math.pow(2,10*(b-1))+c;return d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){if((b/=e/2)<1)return-d/2*(Math.sqrt(1-b*b)-1)+c;return d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e)==1)return c+d;if(!g)g=e*.3;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e)==1)return c+d;if(!g)g=e*.3;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;if(!g)g=e*.3*1.5;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);if(b<1)return-.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c;return h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){if(g==b)g=1.70158;return e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){if(g==b)g=1.70158;return e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){if(g==b)g=1.70158;if((c/=f/2)<1)return e/2*c*c*(((g*=1.525)+1)*c-g)+d;return e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){if((b/=e)<1/2.75){return d*7.5625*b*b+c}else if(b<2/2.75){return d*(7.5625*(b-=1.5/2.75)*b+.75)+c}else if(b<2.5/2.75){return d*(7.5625*(b-=2.25/2.75)*b+.9375)+c}else{return d*(7.5625*(b-=2.625/2.75)*b+.984375)+c}},easeInOutBounce:function(b,c,d,e,f){if(c<f/2)return a.easing.easeInBounce(b,c*2,0,e,f)*.5+d;return a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery);(function(a,b){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"];var e=a.effects.setMode(c,b.options.mode||"hide");var f=b.options.direction||"vertical";a.effects.save(c,d);c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"});var h=f=="vertical"?"height":"width";var i=f=="vertical"?g.height():g.width();if(e=="show")g.css(h,0);var j={};j[h]=e=="show"?i:0;g.animate(j,b.duration,b.options.easing,function(){if(e=="hide")c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);(function(a,b){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"];var e=a.effects.setMode(c,b.options.mode||"effect");var f=b.options.direction||"up";var g=b.options.distance||20;var h=b.options.times||5;var i=b.duration||250;if(/show|hide/.test(e))d.push("opacity");a.effects.save(c,d);c.show();a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left";var k=f=="up"||f=="left"?"pos":"neg";var g=b.options.distance||(j=="top"?c.outerHeight({margin:true})/3:c.outerWidth({margin:true})/3);if(e=="show")c.css("opacity",0).css(j,k=="pos"?-g:g);if(e=="hide")g=g/(h*2);if(e!="hide")h--;if(e=="show"){var l={opacity:1};l[j]=(k=="pos"?"+=":"-=")+g;c.animate(l,i/2,b.options.easing);g=g/2;h--}for(var m=0;m<h;m++){var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g;p[j]=(k=="pos"?"+=":"-=")+g;c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing);g=e=="hide"?g*2:g/2}if(e=="hide"){var l={opacity:0};l[j]=(k=="pos"?"-=":"+=")+g;c.animate(l,i/2,b.options.easing,function(){c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(this,arguments)})}else{var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g;p[j]=(k=="pos"?"+=":"-=")+g;c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing,function(){a.effects.restore(c,d);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);(function(a,b){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"];var e=a.effects.setMode(c,b.options.mode||"hide");var f=b.options.direction||"vertical";a.effects.save(c,d);c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"});var h=c[0].tagName=="IMG"?g:c;var i={size:f=="vertical"?"height":"width",position:f=="vertical"?"top":"left"};var j=f=="vertical"?h.height():h.width();if(e=="show"){h.css(i.size,0);h.css(i.position,j/2)}var k={};k[i.size]=e=="show"?j:0;k[i.position]=e=="show"?0:j/2;h.animate(k,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(e=="hide")c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(c[0],arguments);c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"];var e=a.effects.setMode(c,b.options.mode||"hide");var f=b.options.direction||"left";a.effects.save(c,d);c.show();a.effects.createWrapper(c);var g=f=="up"||f=="down"?"top":"left";var h=f=="up"||f=="left"?"pos":"neg";var i=b.options.distance||(g=="top"?c.outerHeight({margin:true})/2:c.outerWidth({margin:true})/2);if(e=="show")c.css("opacity",0).css(g,h=="pos"?-i:i);var j={opacity:e=="show"?1:0};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i;c.animate(j,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(e=="hide")c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;var d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden");var f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0;f.left-=parseInt(e.css("marginLeft"),10)||0;var g=e.outerWidth(true);var h=e.outerHeight(true);for(var i=0;i<c;i++){for(var j=0;j<d;j++){e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+(b.options.mode=="show"?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+(b.options.mode=="show"?(i-Math.floor(c/2))*(h/c):0),opacity:b.options.mode=="show"?0:1}).animate({left:f.left+j*(g/d)+(b.options.mode=="show"?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+(b.options.mode=="show"?0:(i-Math.floor(c/2))*(h/c)),opacity:b.options.mode=="show"?1:0},b.duration||500)}}setTimeout(function(){b.options.mode=="show"?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide();if(b.callback)b.callback.apply(e[0]);e.dequeue();a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);(function(a,b){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"];var e=a.effects.setMode(c,b.options.mode||"hide");var f=b.options.size||15;var g=!!b.options.horizFirst;var h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d);c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"});var j=e=="show"!=g;var k=j?["width","height"]:["height","width"];var l=j?[i.width(),i.height()]:[i.height(),i.width()];var m=/([0-9]+)%/.exec(f);if(m)f=parseInt(m[1],10)/100*l[e=="hide"?0:1];if(e=="show")i.css(g?{height:0,width:f}:{height:f,width:0});var n={},p={};n[k[0]]=e=="show"?l[0]:f;p[k[1]]=e=="show"?l[1]:0;i.animate(n,h,b.options.easing).animate(p,h,b.options.easing,function(){if(e=="hide")c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);(function(a,b){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};if(e=="hide"){f.opacity=0}a.effects.save(c,d);c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide();a.effects.restore(c,d);e=="show"&&!a.support.opacity&&this.style.removeAttribute("filter");b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show");times=(b.options.times||5)*2-1;duration=b.duration?b.duration/2:a.fx.speeds._default/2,isVisible=c.is(":visible"),animateTo=0;if(!isVisible){c.css("opacity",0).show();animateTo=1}if(d=="hide"&&isVisible||d=="show"&&!isVisible){times--}for(var e=0;e<times;e++){c.animate({opacity:animateTo},duration,b.options.easing);animateTo=(animateTo+1)%2}c.animate({opacity:animateTo},duration,b.options.easing,function(){if(animateTo==0){c.hide()}b.callback&&b.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()}).dequeue()})}})(jQuery);(function(a,b){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:true,mode:d,percent:d=="hide"?e:100,from:d=="hide"?g:{height:g.height*f,width:g.width*f}});c.effect("scale",b.options,b.duration,b.callback);c.dequeue()})};a.effects.scale=function(b){return this.queue(function(){var c=a(this);var d=a.extend(true,{},b.options);var e=a.effects.setMode(c,b.options.mode||"effect");var f=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:e=="hide"?0:100);var g=b.options.direction||"both";var h=b.options.origin;if(e!="effect"){d.origin=h||["middle","center"];d.restore=true}var i={height:c.height(),width:c.width()};c.from=b.options.from||(e=="show"?{height:0,width:0}:i);var j={y:g!="horizontal"?f/100:1,x:g!="vertical"?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x};if(b.options.fade){if(e=="show"){c.from.opacity=0;c.to.opacity=1}if(e=="hide"){c.from.opacity=1;c.to.opacity=0}}d.from=c.from;d.to=c.to;d.mode=e;c.effect("size",d,b.duration,b.callback);c.dequeue()})};a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"];var e=["position","top","bottom","left","right","overflow","opacity"];var f=["width","height","overflow"];var g=["fontSize"];var h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var j=a.effects.setMode(c,b.options.mode||"effect");var k=b.options.restore||false;var l=b.options.scale||"both";var m=b.options.origin;var n={height:c.height(),width:c.width()};c.from=b.options.from||n;c.to=b.options.to||n;if(m){var p=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*p.y;c.from.left=(n.width-c.from.width)*p.x;c.to.top=(n.height-c.to.height)*p.y;c.to.left=(n.width-c.to.width)*p.x}var q={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};if(l=="box"||l=="both"){if(q.from.y!=q.to.y){d=d.concat(h);c.from=a.effects.setTransition(c,h,q.from.y,c.from);c.to=a.effects.setTransition(c,h,q.to.y,c.to)}if(q.from.x!=q.to.x){d=d.concat(i);c.from=a.effects.setTransition(c,i,q.from.x,c.from);c.to=a.effects.setTransition(c,i,q.to.x,c.to)}}if(l=="content"||l=="both"){if(q.from.y!=q.to.y){d=d.concat(g);c.from=a.effects.setTransition(c,g,q.from.y,c.from);c.to=a.effects.setTransition(c,g,q.to.y,c.to)}}a.effects.save(c,k?d:e);c.show();a.effects.createWrapper(c);c.css("overflow","hidden").css(c.from);if(l=="content"||l=="both"){h=h.concat(["marginTop","marginBottom"]).concat(g);i=i.concat(["marginLeft","marginRight"]);f=d.concat(h).concat(i);c.find("*[width]").each(function(){child=a(this);if(k)a.effects.save(child,f);var c={height:child.height(),width:child.width()};child.from={height:c.height*q.from.y,width:c.width*q.from.x};child.to={height:c.height*q.to.y,width:c.width*q.to.x};if(q.from.y!=q.to.y){child.from=a.effects.setTransition(child,h,q.from.y,child.from);child.to=a.effects.setTransition(child,h,q.to.y,child.to)}if(q.from.x!=q.to.x){child.from=a.effects.setTransition(child,i,q.from.x,child.from);child.to=a.effects.setTransition(child,i,q.to.x,child.to)}child.css(child.from);child.animate(child.to,b.duration,b.options.easing,function(){if(k)a.effects.restore(child,f)})})}c.animate(c.to,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(c.to.opacity===0){c.css("opacity",c.from.opacity)}if(j=="hide")c.hide();a.effects.restore(c,k?d:e);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"];var e=a.effects.setMode(c,b.options.mode||"effect");var f=b.options.direction||"left";var g=b.options.distance||20;var h=b.options.times||3;var i=b.duration||b.options.duration||140;a.effects.save(c,d);c.show();a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left";var k=f=="up"||f=="left"?"pos":"neg";var l={},m={},n={};l[j]=(k=="pos"?"-=":"+=")+g;m[j]=(k=="pos"?"+=":"-=")+g*2;n[j]=(k=="pos"?"-=":"+=")+g*2;c.animate(l,i,b.options.easing);for(var p=1;p<h;p++){c.animate(m,i,b.options.easing).animate(n,i,b.options.easing)}c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);(function(a,b){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"];var e=a.effects.setMode(c,b.options.mode||"show");var f=b.options.direction||"left";a.effects.save(c,d);c.show();a.effects.createWrapper(c).css({overflow:"hidden"});var g=f=="up"||f=="down"?"top":"left";var h=f=="up"||f=="left"?"pos":"neg";var i=b.options.distance||(g=="top"?c.outerHeight({margin:true}):c.outerWidth({margin:true}));if(e=="show")c.css(g,h=="pos"?isNaN(i)?"-"+i:-i:i);var j={};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i;c.animate(j,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(e=="hide")c.hide();a.effects.restore(c,d);a.effects.removeWrapper(c);if(b.callback)b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove();b.callback&&b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);

/*jshint eqnull:true */
/*!
 * jQuery Cookie Plugin v1.2
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(a,b,c){function e(a){return a}function f(a){return decodeURIComponent(a.replace(d," "))}var d=/\+/g;var g=a.cookie=function(d,h,i){if(h!==c){i=a.extend({},g.defaults,i);if(h===null){i.expires=-1}if(typeof i.expires==="number"){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}h=g.json?JSON.stringify(h):String(h);return b.cookie=[encodeURIComponent(d),"=",g.raw?h:encodeURIComponent(h),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}var l=g.raw?e:f;var m=b.cookie.split("; ");for(var n=0,o;o=m[n]&&m[n].split("=");n++){if(l(o.shift())===d){var p=l(o.join("="));return g.json?JSON.parse(p):p}}return null};g.defaults={};a.removeCookie=function(b,c){if(a.cookie(b)!==null){a.cookie(b,null,c);return true}return false}})(jQuery,document);

/**
* Condense 0.1 - Condense and expand text heavy elements
*
* (c) 2008 Joseph Sillitoe
* Dual licensed under the MIT License (MIT-LICENSE) and GPL License,version 2 (GPL-LICENSE). 
*/
 
/*
*  Modified for vBulletin:
*  - Added callbacks when initializing condense plugin is done (onInit), 
*  		when condensing is done (onCondense), 
*  		when expanding is done (onExpand) and
*  		when condensing or expanding is done (onToggle).
*  - Added patch for infinite loop when condense length cutoff occurs in consecutive spaces (https://github.com/jsillitoe/jquery-condense-plugin/issues/5)
*/
(function(a){function b(b,d){if(a.trim(b.text()).length<=d.condensedLength+d.minTrail){g("element too short: skipping.");return false}var e=a.trim(b.html());var f=a.trim(b.text());var h=d.delim;var i=b.clone();var j=0;do{var k=c(e,d.delim,d.condensedLength+j);i.html(e.substring(0,k+1));var l=i.text().length;var m=i.html().length;j=i.html().length-l;g("condensing... [html-length:"+m+" text-length:"+l+" delta: "+j+" break-point: "+k+"]")}while(j&&i.text().length<d.condensedLength);if(f.length-l<d.minTrail){g("not enough trailing text: skipping.");return false}g("clone condensed. [text-length:"+l+"]");return i}function c(a,b,c){var e=false;var f=c;do{var f=a.indexOf(b,f);if(f<0){g("No delimiter found.");return a.length}e=true;while(d(a,f)){f++;e=false}}while(!e);g("Delimiter found in html at: "+f);return f}function d(a,b){return a.indexOf(">",b)<a.indexOf("<",b)}function e(a,b){g("Condense Trigger: "+a.html());var c=a.parent();var d=c.next();d.show();var e=d.width();var f=d.height();d.hide();var h=c.width();var i=c.height();c.animate({height:f,width:e,opacity:1},b.lessSpeed,b.easing,function(){c.height(i).width(h).hide();d.show();if(typeof b.onCondense=="function"){b.onCondense.apply(a,[d])}if(typeof b.onToggle=="function"){b.onToggle.apply(a,[c,d,true])}})}function f(a,b){g("Expand Trigger: "+a.html());var c=a.parent();var d=c.prev();d.show();var e=d.width();var f=d.height();d.width(c.width()+"px").height(c.height()+"px");c.hide();d.animate({height:f,width:e,opacity:1},b.moreSpeed,b.easing,function(){if(typeof b.onExpand=="function"){b.onExpand.apply(a,[d])}if(typeof b.onToggle=="function"){b.onToggle.apply(a,[d,c,false])}});if(c.attr("id")){var h=c.attr("id");c.attr("id","condensed_"+h);d.attr("id",h)}}function g(a){if(window.console&&window.console.log){window.console.log(a)}}a.fn.condense=function(c){a.metadata?g("metadata plugin detected"):g("metadata plugin not present");var d=a.extend({},a.fn.condense.defaults,c);return this.each(function(){$this=a(this);var c=a.metadata?a.extend({},d,$this.metadata()):d;g("Condensing ["+$this.text().length+"]: "+$this.text());var h=b($this,c);if(h){$this.attr("id")?$this.attr("id","condensed_"+$this.attr("id")):false;var i=" <span class='condense_control condense_control_more' style='cursor:pointer;'>"+c.moreText+"</span>";var j=" <span class='condense_control condense_control_less' style='cursor:pointer;'>"+c.lessText+"</span>";h.append(c.ellipsis+i);$this.after(h).hide().append(j);a(".condense_control_more",h).click(function(){g("moreControl clicked.");f(a(this),c)});a(".condense_control_less",$this).click(function(){g("lessControl clicked.");e(a(this),c)})}if(typeof c.onInit=="function"){c.onInit.apply(this,[h])}})};a.fn.condense.defaults={condensedLength:200,minTrail:20,delim:" ",moreText:"[more]",lessText:"[less]",ellipsis:" ( ... )",moreSpeed:"normal",lessSpeed:"normal",easing:"linear",onInit:null,onCondense:null,onExpand:null,onToggle:null}})(jQuery);

var Responsive={bodyWidth:0,scrollToFixedBreakPoint:480};var $Rx=Responsive;$(function(){$(".blogAdminActive").click(function(A){$(this).parent().toggleClass("expanded")});Modernizr.addTest("firefox",function(){return !!navigator.userAgent.match(/firefox/i)});Modernizr.addTest("opera",function(){return !!navigator.userAgent.match(/opera/i)})});Responsive.DocReady={load:function(){$("#searchForm").addClass("desktopSearch");$Rx.ChannelTabBar.initMainMenu();$Rx.MediaQueries.setResizeEvent();$Rx.MediaQueries.handleResizeEvent();$Rx.ListToSelect.registerChangeEvents();$Rx.Footer.registerChangeEvents();$Rx.Profile.clonePrivateMessageButton();$Rx.ChannelContent.cloneNewTopicButton();$Rx.SocialGroups.cloneButtons();$Rx.Profile.cloneButtons();$Rx.Debug.wrap();$Rx.ConversationContent.checkForSignature();$Rx.Touch.override();setTimeout($Rx.ListToSelect.registerSyncMenuEvents,100)}};$(document).ready(function(){$Rx.DocReady.load()});Responsive.Touch={override:function(){var B="touch";if($("html").hasClass(B)){var F="no-touch";var E=navigator.userAgent.toLowerCase();var A="Firefox".toLowerCase();var D=E.indexOf(A);var G="Windows NT 6.1".toLowerCase();var C=E.indexOf(G);if(D!==-1&&C!==-1){$("html").removeClass(B).addClass(F)}}}};Responsive.Modal={init:function(){if($(".sgIconUploader").length){var B=["ui-dialog","ui-widget","ui-widget-content","ui-corner-all","ui-draggable","ui-resizable"];var A="body div."+B.join(".");if(!$(A).hasClass("rx-modal")){$(A).addClass("rx-modal")}}setTimeout(this.setRadioState,100)},setRadioState:function(){$("input:radio[name=sgIconToggle]:visible:first").click()}};Responsive.Debug={wrap:function(){var B="debug-information";var A="debug-information-wrapper";if($("#"+B).length&&!$("#"+A).length){$("#"+B).wrap('<div id="'+A+'" />')}}};Responsive.ListToSelect={handleSelectChangeHome:function(){var C=$("div.activity-stream-widget > .widget-header > .module-title.left > select").get(0);var B=C.selectedIndex;var A="div.activity-stream-widget > .widget-header > .module-title.left > ul [href="+C.options[B].value+"]";$Rx.ListToSelect.selectTab(A)},handleSelectChangeProfileSubscriptions:function(){var C=$(".subscriptionsContainer > .subscribeTabs > div.widget-tabs-nav > select").get(0);var B=C.selectedIndex;var A=".subscriptionsContainer > .subscribeTabs > ul.widget-tabs-nav [href="+C.options[B].value+"]";$Rx.ListToSelect.selectTab(A)},handleSelectChangeForum:function(){var C=$("div.channel-content-widget > .widget-content > .channel-conversation-list-wrapper > .widget-tabs-nav > select").get(0);var B=C.selectedIndex;var A="div.channel-content-widget > .widget-content > .channel-conversation-list-wrapper > .widget-tabs-nav > ul.ui-tabs-nav [href="+C.options[B].value+"]";$Rx.ListToSelect.selectTab(A)},handleSelectChangeForumElse:function(){var C=$("div.channel-content-widget > .widget-header > .module-title.left > select").get(0);var B=C.selectedIndex;var A="div.channel-content-widget > .widget-header > .module-title.left > ul [href="+C.options[B].value+"]";$Rx.ListToSelect.selectTab(A)},handleSelectChangeBlog:function(){var C=$("div.blog-channel-content-widget > .widget-content > .channel-conversation-list-wrapper > select").get(0);var B=C.selectedIndex;var A="div.blog-channel-content-widget > .widget-content > .channel-conversation-list-wrapper > .widget-tabs-nav > ul.ui-tabs-nav [href="+C.options[B].value+"]";$Rx.ListToSelect.selectTab(A)},handleSelectChangeBlogElse:function(){var C=$("div.blog-channel-content-widget > .widget-header > .module-title.left > select").get(0);var B=C.selectedIndex;var A="div.blog-channel-content-widget > .widget-header > .module-title.left > ul [href="+C.options[B].value+"]";$Rx.ListToSelect.selectTab(A)},handleSelectChangeBlogNewEntry:function(){var C=$("div.blog-channel-content-widget > .channel-conversation-list-wrapper > .widget-tabs-nav > select").get(0);var B=C.selectedIndex;var A="div.blog-channel-content-widget > .channel-conversation-list-wrapper > .widget-tabs-nav > ul [href="+C.options[B].value+"]";$Rx.ListToSelect.selectTab(A)},handleSelectChangeProfile:function(){var C=$("div.profile-widget > .widget-content > .profile-container > .widget-tabs > .widget-tabs-nav > select").get(0);var B=C.selectedIndex;var A="div.profile-widget > .widget-content > .profile-container > .widget-tabs > ul [href="+C.options[B].value+"]";$Rx.ListToSelect.selectTab(A)},selectTab:function(A){$(A).click()},registerChangeEvents:function(){this.registerSelectChangeHome();this.registerSelectChangeForum();this.registerSelectChangeForumElse();this.registerSelectChangeBlog();this.registerSelectChangeBlogElse();this.registerSelectChangeBlogNewEntry();this.registerSelectChangeProfile();this.registerSelectChangeProfileSubscriptions()},registerSelectChangeHome:function(){$("div.activity-stream-widget > .widget-header > .module-title.left > select").on("change",this.handleSelectChangeHome)},registerSelectChangeForum:function(){$("div.channel-content-widget > .widget-content > .channel-conversation-list-wrapper > .widget-tabs-nav > select").on("change",this.handleSelectChangeForum)},registerSelectChangeForumElse:function(){$("div.channel-content-widget > .widget-header > .module-title.left > select").on("change",this.handleSelectChangeForumElse)},registerSelectChangeBlog:function(){$("div.blog-channel-content-widget > .widget-content > .channel-conversation-list-wrapper > select").on("change",this.handleSelectChangeBlog)},registerSelectChangeBlogElse:function(){$("div.blog-channel-content-widget > .widget-header > .module-title.left > select").on("change",this.handleSelectChangeBlogElse)},registerSelectChangeBlogNewEntry:function(){$("div.blog-channel-content-widget > .channel-conversation-list-wrapper > .widget-tabs-nav > select").on("change",this.handleSelectChangeBlogNewEntry)},registerSelectChangeProfile:function(){$("div.profile-widget> .widget-content > .profile-container > .widget-tabs > .widget-tabs-nav > select").on("change",this.handleSelectChangeProfile)},registerSelectChangeProfileSubscriptions:function(){$(".subscriptionsContainer > .subscribeTabs > div.widget-tabs-nav > select").on("change",this.handleSelectChangeProfileSubscriptions)},tabSelected:function(D){var B=this;if(D.length){var A=D.first();var C=A.parent().parent();A.find("a").each(function(){B.setSelectedListItem(C,$(this).attr("href"))})}},setSelectedListItem:function(C,A){var B=C.children("select").length?C.children("select"):C.find("div.widget-header > select");B.each(function(){if($(this).find("option[value='"+A+"']")){$(this).find("option[value='"+A+"']").attr("selected","selected")}})},registerSyncMenuEvents:function(){$("ul.ui-tabs-nav > li.ui-state-default a").on("click",function(){$Rx.ListToSelect.tabSelected($(this).closest("li"))});$(".widget-tabs-nav ul.ui-tabs-nav li.ui-tabs-selected a").each(function(){$Rx.ListToSelect.tabSelected($(this).closest("li"))})}};Responsive.Facade={addFacadeControlToToolbar:function(I,F,D,J){var C=$(I);var A=$(F);var B=$(D);if(C.length&&!A.length&&B.length){var G=B[0];var H=$(G).clone();if(J){for(var E=0;E<J;E++){this.addClickEvent(H,existingButtonSet,J[E])}}else{this.addClickEvent(H,G)}C.append(H)}},addClickEvent:function(C,B,A){if(A){C.find(A).on("click",function(){B.find(A).click()})}else{C.on("click",function(){B.click()})}},addNewConversationToolbarToDOM:function(D,B){var C="#"+D+" .conversation-toolbar-wrapper .conversation-toolbar."+B;if(!$($(C)).length){var A='<div class="conversation-toolbar '+B+'"><ul class="toolset-left"><li></li></ul></div>';$("#"+D+" .conversation-toolbar-wrapper").prepend(A)}}};Responsive.Profile={styleSidebarContent:function(){$(".profile-info-item").removeClass()},clonePrivateMessageButton:function(){var C=".conversation-toolbar > ul > li > a.pm_button";var B=".profile_sidebar_content > .profileContainer";var A=".profile_sidebar_content > .profileContainer > div.pm-button-container > a.pm-button";if($(C).length){if($(B).length){if(!$(A).length){var E=$(C).clone();var D=$("<div class='pm-button-container'></div>").append(E);$(B).append(D)}}}},cloneButtons:function(){this.cloneTabButtons("subscription");this.cloneTabButtons("subscriber")},cloneTabButtons:function(D){var F=D+"sTab";var E=D+"s-totalcount";var A=$("#"+F+" .conversation-toolbar .toolset-left .back-button");var C=$("#"+F+" .conversation-toolbar");var B=$("#"+F+" .conversation-toolbar.rx-facade-back-to-profile");if(A.length&&!B.length){C.addClass("rx-desktop");$Rx.Facade.addNewConversationToolbarToDOM(F,"rx-facade-"+D+"-count");$Rx.Facade.addFacadeControlToToolbar("#"+F+" .conversation-toolbar.rx-facade-"+D+"-count ul.toolset-left li","#"+F+" .conversation-toolbar.rx-facade-"+D+"-count ul.toolset-left li ."+E,"#"+F+" .conversation-toolbar .toolset-left ."+E);$Rx.Facade.addNewConversationToolbarToDOM(F,"rx-facade-back-to-profile");$Rx.Facade.addFacadeControlToToolbar("#"+F+" .conversation-toolbar.rx-facade-back-to-profile ul.toolset-left li","#"+F+" .conversation-toolbar.rx-facade-back-to-profile ul.toolset-left li .back-button","#"+F+" .conversation-toolbar .toolset-left .back-button");$Rx.Facade.addFacadeControlToToolbar("#"+F+" .conversation-toolbar.rx-facade-"+D+"-count ul.toolset-left li","#"+F+" .conversation-toolbar.rx-facade-back-to-profile ul.toolset-left li .rx-ignore","#"+F+" .conversation-toolbar .toolset-left .rx-ignore")}},};Responsive.ChannelContent={cloneNewTopicButton:function(){var C="#activity-stream-tab .conversation-toolbar .toolset-left button.new-conversation-btn";var B=".channel-content-widget .channel-controls";var A=".channel-content-widget .channel-controls > button.new-conversation-btn";if($(C).length){if($(B).length){if(!$(A).length){var D=$(C).clone();D.attr("id","rx-facade-new-conversation-btn");D.on("click",function(){$(C).click()});$(B).append(D)}}}}};Responsive.SocialGroups={cloneButtons:function(){if($("#groups-tab .conversation-toolbar .toolset-left div.button-set").length){$Rx.Facade.addNewConversationToolbarToDOM("groups-tab","rx-facade-show-groups");$Rx.Facade.addFacadeControlToToolbar("#groups-tab .conversation-toolbar.rx-facade-show-groups ul.toolset-left li","#groups-tab .conversation-toolbar.rx-facade-show-groups ul.toolset-left li div.button-set","#groups-tab .conversation-toolbar .toolset-left div.button-set",["button.showAll","button.showMy"]);$Rx.Facade.addNewConversationToolbarToDOM("groups-tab","rx-facade-create-groups");$Rx.Facade.addFacadeControlToToolbar("#groups-tab .conversation-toolbar.rx-facade-create-groups ul.toolset-left li","#groups-tab .conversation-toolbar.rx-facade-create-groups ul.toolset-left li button.add-sg","#groups-tab .conversation-toolbar .toolset-left button.add-sg")}}};Responsive.Search={cloneTagsLink:function(){if(!$("#rx-tags-column").length){var C=$(".form-row-tags");var A=$(".form-row-tags > .field_column");var D=$(".tag-editor-wrapper > span.add-tag-link");var B=D.clone();B.on("click",function(){$(".tag-editor-wrapper > span.add-tag-link").click()});A.css("display","block");D.css("display","none");C.append("<div id='rx-tags-column' class='field_column'></div>");B.appendTo($("#rx-tags-column"))}}};Responsive.Footer={menuItemCount:0,menuItemCountLimit:5,handleSelectChange:function(){var C=$("li.rx-list-to-select > select").get(0);var B=C.selectedIndex;var A=C.options[B].value;if(A!==""){window.location=A}},registerChangeEvents:function(){this.setMenuItemCount();this.setMenuClasses();this.registerSelectChange()},setMenuClasses:function(){if($Rx.Footer.menuItemCount>$Rx.Footer.menuItemCountLimit){$("#footer-tabbar > ul.right").addClass("rx-menu-limit-exceeded");$("#footer-tabbar > ul.left > li.rx-list-to-select").addClass("rx-menu-limit-exceeded")}else{$("#footer-tabbar > ul.right").addClass("rx-menu-limit-ok");$("#footer-tabbar > ul.left > li.rx-list-to-select").addClass("rx-menu-limit-ok")}},setMenuItemCount:function(){$Rx.Footer.menuItemCount=$("#footer-tabbar > ul.right > li").length},registerSelectChange:function(){$("li.rx-list-to-select > select").on("change",this.handleSelectChange)}};Responsive.MediaQueries={init:function(){$Rx.bodyWidth=$("#vb-page-body").width()},setResizeEvent:function(){var A=this.handleResizeEvent;$(window).resize(function(){A()})},handleResizeEvent:function(){if($("#vb-page-body").width()!=$Rx.bodyWidth){$Rx.bodyWidth=$("#vb-page-body").width();if(Modernizr.mq("only screen and (max-width: 479px)")){window.vBulletin.scrollToFixed();$(".private-message-widget-layout .section-0").insertAfter(".private-message-widget-layout .section-1")}if(Modernizr.mq("only screen and (min-width: 480px)")){$(".private-message-widget-layout .section-1").insertAfter(".private-message-widget-layout .section-0")}if(Modernizr.mq("only screen and (max-width: 599px)")){$("#pmFloatingBarContent .toolset.left").detach().prependTo("#privateMessageContainer").addClass("clearfix")}if(Modernizr.mq("only screen and (min-width: 600px)")){$("#privateMessageContainer .toolset.left").detach().prependTo("#pmFloatingBarContent").removeClass("clearfix")}if(Modernizr.mq("only screen and (max-width: 990px)")){var A=$Rx.ConversationToolbar.selector;if($(A).length&&$(A+".mobile-search").length===0){$Rx.ConversationToolbar.createMobileView()}}if(Modernizr.mq("only screen and (max-width: 767px)")){if(!$Rx.ChannelTabBar.isMobileMenu){$Rx.ChannelTabBar.showMobileSearchForm()}$Rx.ChannelTabBar.create();$("#mobile-main-menu").css("display","block");$Rx.Search.cloneTagsLink();$Rx.Profile.styleSidebarContent()}if(Modernizr.mq("only screen and (min-width: 768px)")){if($Rx.ChannelTabBar.isMobileMenu){$Rx.ChannelTabBar.showDesktopSearchForm()}$("#mobile-main-menu").css("display","none")}if(Modernizr.mq("only screen and (max-width: 479px)")){$Rx.Debug.wrap()}}}};Responsive.ChannelTabBar={sectionItemsSelector:"#channel-tabbar ul li.section-item",initMainMenu:function(){$("#mobile-main-menu").each(function(){$(this).find(".main-menu-control-sections").on("click",function(){$Rx.ChannelTabBar.toggle("sections")});$(this).find(".mobile-search span").on("click",function(){$Rx.ChannelTabBar.toggle("search")})})},isMobileMenu:false,getMobileSearchForm:function(){var B=$("form.desktopSearch").attr("action");var A='<form method="get" class="right mobile mobileSearch" action="'+B+'" id="searchForm"><fieldset><div class="search-inputs"><input type="text" autocomplete="off" class="textbox search-term" placeholder="Search..." id="q" name="q"></div></fieldset></form>';return A},showMobileSearchForm:function(){var C=$("form.mobileSearch");var B=$("form.desktopSearch");var A=$("form.mobileSearch input.search-term");var D=$("form.desktopSearch input.search-term");if(C.length){C.attr("id","searchForm");A.attr("id","q")}if(B.length){B.attr("id","searchFormDesktop");D.attr("id","qDesktop")}this.showCollapsed();$Rx.ChannelTabBar.isMobileMenu=true},showDesktopSearchForm:function(){var C=$("form.mobileSearch");var B=$("form.desktopSearch");var A=$("form.mobileSearch input.search-term");var D=$("form.desktopSearch input.search-term");if(C.length){C.attr("id","searchFormMobile");A.attr("id","qMobile")}if(B.length){B.attr("id","searchForm");D.attr("id","q")}this.showExpanded();$Rx.ChannelTabBar.isMobileMenu=false},create:function(){if(!$("form.mobileSearch").length){var A=this.getMobileSearchForm();$("#mobile-main-menu-search").append(A);this.showMobileSearchForm();$($Rx.ChannelTabBar.sectionItemsSelector).each(function(){var B=$(this).find("a").attr("href");$(this).click(function(){window.location=B})})}},toggle:function(F){if(F==="search"){var D=$("#mobile-main-menu-search");var E=$("#mobile-main-menu-sections");if(D.css("display")==="none"){E.css("display","none");D.css("display","inline-block")}else{var G=$("#mobile-main-menu-search input");var C=$(G[0]).val();if(C!==""){var A=$("#mobile-main-menu-search form");A[0].submit()}else{D.css("display","none");E.css("display","inline-block")}}}else{if(F==="sections"){var B=$($Rx.ChannelTabBar.sectionItemsSelector);if(B.length){if(B.eq(0).css("display")==="none"){this.showExpanded()}else{this.showCollapsed()}}}}},showExpanded:function(){$($Rx.ChannelTabBar.sectionItemsSelector).css("display","block");this.removeCollapsedClass()},showCollapsed:function(){$($Rx.ChannelTabBar.sectionItemsSelector).css("display","none");this.addCollapsedClass()},removeCollapsedClass:function(){$("#mobile-main-menu-sections div.main-menu-control-sections").removeClass("collapsed");$("#mobile-main-menu-sections div.main-menu-control-sections .sections-menu-icon span.icon").removeClass("collapsed");$("#mobile-main-menu-sections div.main-menu-control-sections .sections-icon .icon").removeClass("collapsed");$("#mobile-main-menu-sections div.main-menu-control-sections .sections-title").removeClass("collapsed")},addCollapsedClass:function(){$("#mobile-main-menu-sections div.main-menu-control-sections").addClass("collapsed");$("#mobile-main-menu-sections div.main-menu-control-sections .sections-menu-icon .icon").addClass("collapsed");$("#mobile-main-menu-sections div.main-menu-control-sections .sections-icon .icon").addClass("collapsed");$("#mobile-main-menu-sections div.main-menu-control-sections .sections-title").addClass("collapsed")}};Responsive.ConversationContent={checkForSignature:function(){$(".conversation-content .videoscontainer").each(function(){if(!$(this).siblings("div.post-signature").length){$(this).addClass("no-signature")}})}};Responsive.ConversationToolbar={selector:".conversation-view > .conversation-toolbar-wrapper > .conversation-toolbar",createMobileView:function(){var A=$Rx.ConversationToolbar.selector;var B=A+".desktop";var C=$(A);C.addClass("desktop");if($(B).find("button.post-reply-btn").length){$("<div>").addClass("conversation-toolbar mobile-search").insertAfter(C);this.copyElementsToMobileSearchToolbar()}},copyElementsToMobileSearchToolbar:function(){var D=$Rx.ConversationToolbar.selector;var B=D+".desktop";var L=D+".mobile-search";var F=$(B);var A=$(L);A.css("display","none");var E=F.find("button.post-reply-btn").clone(true,true).removeAttr("id");var K=$("<ul>").addClass("toolset-left");var H=$("<li>").addClass("post-buttonset split-button");var I=$("<div>").addClass("split-button-wrapper button primary light");var J=$("<div>").addClass("button-set left ui-buttonset");J.append(E);I.append(J);H.append(I);K.append(H);A.append(K);var C=$("<ul>").addClass("toolset-right");var G=F.find("li.toolbar-search").clone(true,true);G.find("button").removeAttr("id");C.append(G);A.append(C)}};;

(function(C){if(typeof window.console!="object"){window.console={}}var D=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];for(var B=0;B<D.length;B++){if(typeof window.console[D[B]]!="function"&&typeof window.console[D[B]]!="object"){window.console[D[B]]=function(){}}}C.ajaxPrefilter("script",function(E){E.cache=true});String.prototype.format=function(){var F=this,E=arguments.length;while(E--){F=F.replace(new RegExp("\\{"+E+"\\}","gm"),arguments[E])}return F};String.prototype.latinise=function(){return this.replace(/[^A-Za-z0-9]/g,function(E){var F={"?":"A","":"A","":"A","":"A","":"A","":"A","":"A","?":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","?":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","?":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","?":"D","":"D","":"DZ","":"DZ","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","?":"ET","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","?":"I","":"I","?":"I","":"I","?":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","?":"D","?":"F","?":"G","":"R","":"S","":"T","?":"IS","":"J","":"J","":"K","":"K","":"K","":"K","?":"K","":"K","":"K","":"K","?":"K","?":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","?":"L","":"L","":"L","":"L","":"L","?":"L","":"LJ","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","?":"N","":"N","":"N","":"N","":"N","":"NJ","":"O","":"O","":"O","":"O","?":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","?":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","?":"O","?":"O","":"O","":"O","?":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","?":"OO","?":"E","":"O","":"OU","":"P","":"P","?":"P","":"P","?":"P","":"P","??":"P","?":"Q","?":"Q","":"R","":"R","":"R","":"R","":"R","":"R","?":"R","":"R","":"R","":"R","":"R","":"C","":"E","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"A","":"L","":"M","":"V","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","?":"V","":"V","":"V","":"V","?":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","?":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","?":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"IJ","":"OE","":"A","?":"AE","":"B","":"B","":"C","":"D","":"E","":"F","":"G","":"G","":"H","":"I","?":"R","":"J","":"K","":"L","":"L","?":"M","":"N","?":"O","":"OE","?":"O","":"OU","":"P","":"R","":"N","":"R","":"S","":"T","":"E","":"R","":"U","":"V","":"W","?":"Y","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","?":"a","":"a","":"a","":"a","?":"a","":"a","?":"a","":"a","":"a","":"a","?":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"o","":"c","?":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","?":"d","":"d","":"d","":"d","":"d","?":"d","":"d","":"d","?":"d","":"d","?":"d","":"d","":"d","":"d","":"i","":"j","":"j","":"j","":"dz","":"dz","":"e","":"e","":"e","":"e","?":"e","":"e","":"e","":"e","?":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","?":"et","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","?":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","?":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","?":"d","?":"f","":"g","":"r","":"s","":"t","?":"is","":"j","":"j","?":"j","":"j","":"k","":"k","":"k","":"k","?":"k","":"k","":"k","":"k","":"k","??":"k","?":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","?":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"s","":"s","":"s","?":"s","":"m","?":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","?":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","?":"o","":"o","?":"o","":"o","?":"o","":"o","":"o","":"o","?":"o","":"o","":"o","?":"o","?":"o","??":"o","":"o","?":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","?":"o","?":"o","":"o","":"oi","??":"oo","":"e","":"e","":"o","":"o","":"ou","":"p","":"p","?":"p","":"p","":"p","":"p","?":"p","":"p","?":"p","?":"q","":"q","":"q","?":"q","":"r","":"r","":"r","":"r","":"r","?":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","?":"r","":"r","":"c","":"c","":"e","":"r","":"s","":"s","":"s","":"s","":"s","?":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"g","":"o","":"o","?":"u","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"th","?":"a","":"ae","?":"e","":"g","":"h","":"h","":"h","":"i","":"k","?":"l","":"m","":"m","":"oe","":"r","":"r","":"r","":"r","":"t","":"v","?":"w","":"y","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"ue","?":"um","":"v","?":"v","":"v","":"v","":"v","":"v","":"v","?":"vy","":"w","":"w","":"w","":"w","":"w","?":"w","":"w","":"w","?":"x","":"x","?":"x","":"y","":"y","":"y","?":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","?":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","?":"z","":"z","":"z","":"ff","":"ffi","":"ffl","?":"fi","":"fl","":"ij","":"oe","":"st","?":"a","":"e","":"i","":"j","":"o","":"r","":"u","":"v","":"x"};return F[E]||E})};window.vBulletin=window.vBulletin||{};vBulletin.cookie=vBulletin.cookie||{};vBulletin.cookie.convertBbarrayCookie=function(F,E){F=F||"";E=E||"get";if(E=="set"){F=F.replace(/"/g,".");F=F.replace(/:/g,"-");F=F.replace(/;/g,"_")}else{F=F.replace(/\./g,'"');F=F.replace(/-/g,":");F=F.replace(/_/g,";")}return F};vBulletin.cookie.fetchBbarrayCookie=function(E,H){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var F=C.cookie(pageData.cookie_prefix+E);if(F!=""&&!vBulletin.cookie.bbarraycookiecache[E]){try{vBulletin.cookie.bbarraycookiecache[E]=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(F))}catch(G){vBulletin.cookie.bbarraycookiecache[E]=null}}if(vBulletin.cookie.bbarraycookiecache[E]){return vBulletin.cookie.bbarraycookiecache[E][H]?vBulletin.cookie.bbarraycookiecache[E][H]:null}else{return null}};vBulletin.cookie.setBbarrayCookie=function(E,K,G,I){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var F=C.cookie(pageData.cookie_prefix+E);if(F!=""&&!vBulletin.cookie.bbarraycookiecache[E]){try{vBulletin.cookie.bbarraycookiecache[E]=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(F))}catch(H){vBulletin.cookie.bbarraycookiecache[E]=null}}if(!vBulletin.cookie.bbarraycookiecache[E]){vBulletin.cookie.bbarraycookiecache[E]={}}vBulletin.cookie.bbarraycookiecache[E][K]=G;var J={path:pageData.baseurl_path};if(I){J.expires=365}C.cookie(pageData.cookie_prefix+E,vBulletin.cookie.convertBbarrayCookie(JSON.stringify(vBulletin.cookie.bbarraycookiecache[E]),"set"),J)};(function A(){C(".announcement-tabs").tabs({fx:{opacity:"toggle"},show:function(G,H){var E=C(H.panel).attr("data-id"),F=vBulletin.cookie.fetchBbarrayCookie("announcements_displayed",E);if(!F){vBulletin.cookie.setBbarrayCookie("announcements_displayed",E,1,true)}}}).each(function(){var E=C(this),F=C("> .tab",E).length;C(".tab",E).each(function(){var I=parseInt(C(this).attr("data-index")),H=C(this);C("span.prev",H)[I==0?"hide":"show"]();C("span.next",H)[I==F-1?"hide":"show"]();C("span.prev",H).on("click",function(J){E.tabs("select",I-1)});C("span.next",H).on("click",function(J){E.tabs("select",I+1)});var G={condensedLength:250,minTrail:20,delim:" ",moreText:C(".condense-text .see-more",E).html(),lessText:C(".condense-text .see-less",E).html(),ellipsis:"...",moreSpeed:"fast",lessSpeed:"fast",easing:"linear"};C(".announcementtext",H).removeClass("hide").condense(G)})});C(".ui-tabs .ui-tabs-nav > li").addClass("ui-state-disabled")})();window.vBulletin.getAjaxBaseurl=function(){if(pageData.baseurl.indexOf("http://")==0){return pageData.baseurl.substring(5)}else{if(pageData.baseurl.indexOf("https://")==0){return pageData.baseurl.substring(6)}else{return pageData.baseurl}}};window.vBulletin.normalizeAjaxUrl=function(E){if(E.indexOf("http://")==0){return E.substring(5)}else{if(E.indexOf("https://")==0){return E.substring(6)}else{return E}}};window.vBulletin.pageHasSelectors=function(E){if(C.isArray(E)&&E.length>0&&C.trim(E.toString())!=""){var F=false;C.each(E,function(G,H){if(C(H).length>0){F=true;return false}});return F}return true};window.vBulletin.areJsonObjectsEqual=function(G,E){var F=function(J,I){for(var H in J){if(J.hasOwnProperty(H)&&I.hasOwnProperty(H)){var L=J[H],K=I[H];if(L!=K){if(L instanceof Array&&K instanceof Array){if(C(L).not(K).length>0||C(K).not(L).length>0){return false}else{continue}}else{return false}switch(L.constructor){case Object:if(!window.vBulletin.areJsonObjectsEqual(L,K)){return false}break;case Function:if(L.toString()!=K.toString()){return false}break;default:return false}}}else{return false}}return true};if(typeof Object.keys=="function"){return(Object.keys(G).length==Object.keys(E).length)?F(G,E):false}else{return F(G,E)&&F(E,G)}};window.vBulletin.ajaxSetup=(function(){var E=false;return{init:function(){if(E){return }E=true;C.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=UTF-8"})}}})();window.vBulletin.ajaxSetup.init();window.vBulletin.ajaxProfile=(function(){var G=[],H=false,F=true,E=false;return{init:function(){if(H){return }H=true;C(function(){if(C("#debug-information").length==0){F=false}C("<ol />").attr("id","debug-ajax-request-list").hide().css({height:"150px",overflow:"auto",padding:"4px",border:"1px solid #CCC",background:"#EEE","margin-top":"2px","margin-bottom":"4px"}).appendTo(C("#debug-information #debug-ajax-request-count").closest("li"));C("#debug-information #debug-ajax-request-count").css("cursor","pointer").on("click",function(){C("#debug-ajax-request-list").toggle()});E=true});C.ajaxPrefilter(function(I,K,J){if(!F){return }G.push({displayed:false,url:I.url,relUrl:""});if(E){C("#debug-information #debug-ajax-request-count").text(G.length);C.each(G,function(){if(!this.displayed){this.displayed=true;this.relUrl=this.url.indexOf(pageData.baseurl)==0?this.url.substring(pageData.baseurl.length):this.url;C("#debug-ajax-request-list").append(C("<li />").text(this.relUrl))}})}})}}})();window.vBulletin.ajaxProfile.init();window.vBulletin.loadingIndicator=(function(){var I=0,H=false,G=false,F=0,E=0;return{init:function(){if(H){return }C("#loading_indicator").ajaxStart(function(){window.vBulletin.loadingIndicator.show("ajaxStart")});C("#loading_indicator").ajaxStop(function(){window.vBulletin.loadingIndicator.hide("ajaxStop")});H=true},show:function(J){if(F>0&&J=="ajaxStart"){--F;++E;console.log("vBulletin.loadingIndicator.show ajax indicator suppressed");return }++I;console.log("vBulletin.loadingIndicator.show Counter: "+I+" Source: "+(J||"Unspecified"));if(I>0){G=window.setTimeout(function(){if(G){C("#loading_indicator").show();G=false}},1000)}},hide:function(J){if(E>0&&J=="ajaxStop"){--E;console.log("vBulletin.loadingIndicator.hide ajax indicator suppressed");return }--I;I=I<0?0:I;if(!J){I=0}console.log("vBulletin.loadingIndicator.hide Counter: "+I+" Source: "+(J||"Unspecified"));if(I<1){if(G){window.clearTimeout(G);G=false}C("#loading_indicator").hide()}},suppressNextAjaxIndicator:function(){++F}}})();window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.cache=window.vBulletin.phrase.cache||{};window.vBulletin.phrase.uncachable=window.vBulletin.phrase.uncachable||[];window.vBulletin.phrase.isCached=function(E){return(typeof window.vBulletin.phrase.cache[E]!="undefined")};window.vBulletin.phrase.isCachable=function(E){return(C.inArray(E,window.vBulletin.phrase.uncachable)==-1)};window.vBulletin.phrase.isPreCached=function(E){return(C.inArray(E,window.vBulletin.phrase.precache)!=-1)};window.vBulletin.phrase.render=function(E){var G=window.vBulletin.phrase.isCached(E[0])?window.vBulletin.phrase.cache[E[0]]:E[0];for(var F=1;F<E.length;++F){G=G.replace(new RegExp("%"+F+"\\$s","gm"),E[F])}return G};window.vBulletin.phrase.cachePhrases=function(E,H){console.log("Cache phrases");var F=window.vBulletin.phrase.isCachable(E);if(!F){console.warn('The phrase "{0}" cannot be cached. This usually means it does not exist.'.format(E))}if(F&&!window.vBulletin.phrase.isPreCached(E)){window.vBulletin.phrase.precache.push(E);console.warn('The phrase "{0}" needs to be pre-cached at the top of the Javascript file'.format(E))}if(window.vBulletin.phrase.precache.length<1){console.log("Nothing to cache");return""}console.log("Phrases required: "+window.vBulletin.phrase.precache);var G=[];C.each(window.vBulletin.phrase.precache,function(J,I){if(C.inArray(I,G)===-1){G.push(I)}});console.log("Phrases being cached: "+G);window.vBulletin.phrase.precache=[];vBulletin.loadingIndicator.suppressNextAjaxIndicator();C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/phrase/fetch",async:false,data:({phrases:G}),type:"POST",dataType:"json",success:function(I){console.log("Successfully fetched phrases");if(I){var J=[];C.each(I,function(L,K){window.vBulletin.phrase.cache[L]=K;J.push(L)});C.each(G,function(K,L){if(C.inArray(L,J)==-1){window.vBulletin.phrase.uncachable.push(L)}});console.warn("Uncachable phrases (check if they even exist): "+window.vBulletin.phrase.uncachable)}else{console.warn("Unexpected result when fetching phrases")}},error:function(K,J,I){console.warn("Error when fetching phrases: {0}".format(I))}});if(typeof H=="function"){return H()}};window.vBulletin.phrase.get=function(){if(arguments.length<1){console.log("vBulletin.phrase.get() called with no parameters");return""}if(typeof arguments[0]=="object"){arguments=arguments[0]}if(window.vBulletin.phrase.isCached(arguments[0])){return window.vBulletin.phrase.render(arguments)}else{if(!window.vBulletin.phrase.isCachable(arguments[0])){console.warn('The phrase "{0}" cannot be cached. This usually means it does not exist.'.format(arguments[0]));return window.vBulletin.phrase.render(arguments)}else{var E=arguments;return window.vBulletin.phrase.cachePhrases(arguments[0],function(){return window.vBulletin.phrase.render(E)})}}};window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=C.merge(window.vBulletin.phrase.precache,["admin","admin_auth","all_changes_made_will_be_lost_would_you_like_to_continue","attach_link","attach_video","cancel","cancel_edit","close","compare_versions","conversation","edit_conversation","email_addresses_must_match","error","error_fetching_online_users_x","error_loading_ckeditor_script","error_loading_editor","error_loading_post","error_posting_comment_code_x","error_saving_vote","error_x","existing_reply_will_be_deleted","flag_a_post","follow","follow_error","following","following_pending","following_remove","forgot_password_title","go_to_first_new_post","inlinemod_auth_login_failed","inlinemod_auth_login_first","inlinemod_auth_password_empty","invalid_data","invalid_data_requested","invalid_email_address","invalid_request","invalid_server_response_please_try_again","invalid_special_channel_subscribe_request","invalid_user_permissions","invalid_username_specified","invalid_username_specified_maxlength_x","invalid_username_specified_minlength_x","invalid_query_definition_x","join","joined","join_error","leave","logged_out_while_editing_post","login","login_success_admin_auth","lostpw_email_sent","moderator","new_posts","no_create_permissions","no_icon","no_leave_channel_permission","no_one_voted","no_permission","no_update_permissions","no_valid_tags_found","not_logged_no_permission","onbeforeunload_message_while_editing_post","password_must_be_at_least_four_chars","passwords_must_match","people_who_liked","physically_remove_blog","physically_remove_comment","physically_remove_media","physically_remove_reply","physically_remove_topic","physically_remove_visitorMessage","please_enter_a_username","please_enter_link_url","please_enter_video_url","please_enter_your_comment","please_enter_your_email_address","please_enter_your_reason_why_you_want_to_flag_this_post","please_provide_search_string","please_select_a_day","please_select_a_month","please_select_a_year","post_comment","post_history","posttype_blog","posttype_comment","posttype_media","posttype_reply","posttype_topic","posttype_visitorMessage","search","see_less","see_more","select_option_and_click_delete_button_blog","select_option_and_click_delete_button_comment","select_option_and_click_delete_button_media","select_option_and_click_delete_button_reply","select_option_and_click_delete_button_topic","select_option_and_click_delete_button_visitorMessage","send_report","soft_delete_blog","soft_delete_comment","soft_delete_media","soft_delete_notes_blog","soft_delete_notes_comment","soft_delete_notes_media","soft_delete_notes_reply","soft_delete_notes_topic","soft_delete_notes_visitorMessage","soft_delete_reply","soft_delete_topic","soft_delete_visitorMessage","thanks_for_signing_up_log_in","the_report_has_been_sent","unable_to_check_admin_permissions","unexpected_error","unfollow_error","unsubscribe","unsubscribe_overlay_error","unvote_cap","user_name_x_already_in_use_choose_different_name","vote_a_post","vote_cap","xs_avatar","you_have_a_pending_edit_unsaved"]);window.vBulletin.getScrollbarWidth=function(){if(C("body").data("scrollbar-width")){return C("body").data("scrollbar-width")}var E=C('<div style="width:50px;height:50px;overflow:auto;position:absolute;top:-99999px;"><div /></div>').appendTo("body"),G=E.children(),F=G.innerWidth()-G.height(99).innerWidth();E.remove();C("body").data("scrollbar-width",F);return F};window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.cache=window.vBulletin.options.cache||{};window.vBulletin.options.uncachable=window.vBulletin.options.uncachable||[];window.vBulletin.options.isCached=function(E){return(typeof window.vBulletin.options.cache[E]!="undefined")};window.vBulletin.options.isCachable=function(E){return(C.inArray(E,window.vBulletin.options.uncachable)==-1)};window.vBulletin.options.isPreCached=function(E){return(C.inArray(E,window.vBulletin.options.precache)!=-1)};window.vBulletin.options.cacheOptions=function(E,H){console.log("Cache options");var F=window.vBulletin.options.isCachable(E);if(!F){console.warn('The option "{0}" cannot be cached. This usually means it does not exist.'.format(E))}if(F&&!window.vBulletin.options.isPreCached(E)){window.vBulletin.options.precache.push(E);console.warn('The option "{0}" needs to be pre-cached at the top of the Javascript file'.format(E))}if(window.vBulletin.options.precache.length<1){console.log("Nothing to cache");return""}console.log("Options required: "+window.vBulletin.options.precache);var G=[];C.each(window.vBulletin.options.precache,function(J,I){if(C.inArray(I,G)===-1){G.push(I)}});console.log("Options being cached: "+G);window.vBulletin.options.precache=[];C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/options/fetchValues",async:false,data:({options:G}),type:"POST",dataType:"json",success:function(I){console.log("Successfully fetched options");if(I){var J=[];C.each(I,function(K,L){window.vBulletin.options.cache[K]=L;J.push(K)});C.each(G,function(K,L){if(C.inArray(L,J)==-1){window.vBulletin.options.uncachable.push(L)}});console.warn("Uncachable options (check if they even exist): "+window.vBulletin.options.uncachable)}else{console.warn("Unexpected result when fetching options")}},error:function(K,J,I){console.warn("Error when fetching options: {0}".format(I))}});return H()};window.vBulletin.options.get=function(E){if(window.vBulletin.options.isCached(E)){return window.vBulletin.options.cache[E]}else{if(!window.vBulletin.options.isCachable(E)){console.warn('The option "{0}" cannot be cached. This usually means it does not exist.'.format(E));return E}else{var F=E;return window.vBulletin.options.cacheOptions(E,function(){return window.vBulletin.options.cache[F]})}}};window.vBulletin=window.vBulletin||{};window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.precache=C.merge(window.vBulletin.options.precache,["crontab","bbtitle","markinglimit"]);window.vBulletin.openAuthDialog=function(H,G,E){G=G||"inlinemod_auth";E=E||function(){};var F=openConfirmDialog({title:vBulletin.phrase.get(G),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-auth-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("login"),noLabel:vBulletin.phrase.get("cancel")},primaryButton:"yes",onClickYesWithAjax:true,onClickYes:function(){var J=F.find(".inlinemod-auth-form"),K=J.find(':input[name="password"]').val(),I=J.find(".error-msg-box");I.text("").addClass("hide");C.ajax({url:vBulletin.normalizeAjaxUrl(J.attr("action")),data:{password:K},type:"POST",dataType:"json",success:function(L){if(L.error){I.text(vBulletin.phrase.get(L.error)).removeClass("hide")}else{F.dialog("close");F.dialog("close");return H()}},error:function(N,M,L){console.log("/auth/inlinemodLogin failed, error: "+L);openAlertDialog({title:vBulletin.phrase.get(G),message:N.status,iconType:"error"})}})},onClickNo:E});C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_auth",type:"POST",dataType:"json",success:function(I){console.log("/ajax/render/inlinemod_auth");if(I&&!I.errors){C(".inlinemod-auth-dialog").removeClass("loading");C(".dialog-content .message",F).html(I);F.dialog("option","position","center");C('[name="password"]',F).on("keydown",function(J){if(J.which==13){J.preventDefault();C("#btnConfirmDialogYes",F).click()}}).focus()}else{console.log("/ajax/render/inlinemod_auth successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){F.dialog("close")}})}},error:function(K,J,I){console.log("/ajax/render/inlinemod_auth failed, error: "+I);openAlertDialog({title:vBulletin.phrase.get(G),message:vBulletin.phrase.get("error_loading_delete_form_x",K.status),iconType:"error",onAfterClose:function(){F.dialog("close")}})}})};window.vBulletin.assertUserHasAdminPermission=function(H,G,E){if(C(G).data("in-progress")){return false}C("body").css("cursor","wait");var F=arguments.callee.caller;C(G).data("in-progress",true);C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/user/currentUserHasAdminPermission",data:({adminPermission:H}),type:"POST",dataType:"json",complete:function(){C("body").css("cursor","auto");C(G).data("in-progress",null)},success:function(I){console.log("ajax/api/user/currentUserHasAdminPermission result:"+JSON.stringify(I));if(I===true){E()}else{if(I&&I.errors&&I.errors.length>0){if(I.errors[0]=="auth_required"){window.vBulletin.openAuthDialog(function(){F.apply(G)},"admin_auth");return }openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("nopermission_loggedout"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}else{openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("unable_to_check_admin_permissions"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}}},error:function(K,J,I){console.log("ajax/api/user/currentUserHasAdminPermission error: "+I);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("unable_to_check_admin_permissions"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}})};vBulletin.pagination=function(L){var H={context:document,onPageChanged:null};if(L&&typeof L=="object"){C.extend(H,L)}var J=C(".pagenav-controls .pagenav-form",H.context);function F(){return parseInt(C(".pagetotal",J).html(),10)}function G(M,O){var N=F.apply(this);if(M<1){M=1}C("input[name=page]",J).val(M);C(".horizontal-arrows .arrow[rel=next]",J)[(M>=N)?"addClass":"removeClass"]("disabled");C(".horizontal-arrows .arrow[rel=prev]",J)[(M==1)?"addClass":"removeClass"]("disabled");if(typeof H.onPageChanged=="function"){H.onPageChanged.apply(this,[M,O])}}function K(M){var N=parseInt(M);if(N&&typeof N==="number"){C("input[name=result-id]",J).val(N)}}function I(M){C("a.see-all-btn",this).closest(".pagenav-controls")[M?"addClass":"removeClass"]("hide")}C(".arrow",J).off("click").on("click",function(N){N.preventDefault();if(!C(this).hasClass("disabled")){var M=parseInt(C("input[name=page]",J).val())+((C(this).attr("rel")=="next")?1:-1);G.apply(this,[M,false])}});function E(){C(".pagenav .button",H.context).off("click").on("click",function(N){N.preventDefault();var M=parseInt(C(this).data("page"));G.apply(this,[M,false])})}E();C("input[type=text][name=page]",J).off("keypress").on("keypress",function(O){if(O.keyCode==13){O.preventDefault();var M=parseInt(C(this).val(),10);var N=F.apply(this);if(M>N){M=N}if(M<1){M=1}G.apply(this,[M,false])}});this.updatePageInfo=function(N,M){if(N&&typeof N=="object"){var O=N.totalpages||1;C(".pagetotal",J).text(O);if(typeof N.showseemore!="undefined"){if(N.showseemore){I.apply(J,[false])}else{I.apply(J,[true])}}N.perpage=vBulletin.conversation.POSTS_PER_PAGE;if(M){C.get(pageData.baseurl+"/ajax/render/pagenav",{pagenav:N},function(P){if(P){C(".pagenav-container",H.context).replaceWith(P);E()}},"json")}G.apply(J,[N.pagenumber,M])}};this.updateResultId=function(M){K(M)}};vBulletin.conversation=vBulletin.conversation||{};vBulletin.conversation.toggleCommentBox=function(){var E=C(this).closest(".list-item-body-wrapper").find(".comment-entry-box");E.slideToggle("fast",function(){var F=C(this).find(".comment-textbox");if(F.is(":visible")){F.focus()}});E.find(".post-comment-cancel-btn").off("click").on("click",function(F){E.slideToggle();return false});return false};vBulletin.conversation.postComment=function(K,H){var G=this;var F=C(G).closest(".comment-entry-box").find(".comment-textbox");var J=C.trim(F.val());if(!J||(F.hasClass("placeholder")&&J==F.attr("placeholder"))){openAlertDialog({title:vBulletin.phrase.get("post_comment"),message:vBulletin.phrase.get("please_enter_your_comment"),iconType:"warning",onAfterClose:function(){F.focus()}});return false}C("body").css("cursor","wait");C(G).blur();var E=C(G).closest(".list-item"),I=C(G).closest(".comment-entry-box-blog").length==1?1:0;C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/post-comment",data:({text:J,parentid:E.attr("data-node-id"),postindex:E.find(".conversation-body .post-count").text().replace("#",""),view:E.parent().hasClass("stream-view")?"stream":"thread",redirecturl:F.hasClass(".reload-on-post")?1:0,isblogcomment:I,humanverify:{input:C(G).closest(".comment-entry-box").find('[name="humanverify[input]"]').val(),hash:C(G).closest(".comment-entry-box").find('[name="humanverify[hash]"]').val()},recaptcha_challenge_field:C(G).closest(".comment-entry-box").find('[name="recaptcha_challenge_field"]').val(),recaptcha_response_field:C(G).closest(".comment-entry-box").find('[name="recaptcha_response_field"]').val()}),type:"POST",dataType:"json",complete:function(M,L){console.log("post-comment complete.");C("body").css("cursor","auto");vBulletin.hv.reset()},success:function(L,N,O){console.log("post-comment successful! result:"+JSON.stringify(L));if(L){if(!L.error){if(typeof H=="function"){H.apply(G,[L])}if(!I){C(G).closest(".comment-entry-box").slideToggle()}var M=E.attr("data-node-id");if(pageData.threadmarking=="0"||pageData.userid=="0"){vBulletin.cookie.setBbarrayCookie("discussion_view",M,Math.round(new Date().getTime()/1000))}else{C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/markRead",data:{nodeid:M},type:"POST",datatype:"json",complete:function(){},success:function(P){if(P&&!P.error){console.log("Topic "+M+" is marked read successfully!")}else{console.log("Topic "+M+" is marked read failed: "+P.error)}},error:function(R,Q,P){console.log("Topic "+M+" is marked read failed:"+P)}})}}else{openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_x",L.error),iconType:"warning"})}}else{openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}},error:function(N,M,L){console.log("post-comment failed! error:"+L);openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_posting_comment_code_x",N.status),iconType:"error"})}})};vBulletin.conversation.showIp=function(F){var H=C(this),G=C(this).data("post-ip"),E=C(this).data("post-host");openAlertDialog({title:vBulletin.phrase.get("ip_info"),message:vBulletin.phrase.get("ip_address_is")+": "+G+"<br />"+vBulletin.phrase.get("host_name_is")+': <span class="ip-host-name loading">...</span>',iconType:"none"});vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/getHostName",data:{ip:G},success:function(I,J,K){C(".ip-host-name").removeClass("loading").html(I)}});return false};vBulletin.conversation.showPostHistory=function(H){var I=C(this);var G=C(this).closest(".list-item").attr("data-node-id");var F=openConfirmDialog({title:vBulletin.phrase.get("post_history"),message:vBulletin.phrase.get("loading")+"...",width:800,dialogClass:"post-history-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:vBulletin.phrase.get("compare_versions"),noLabel:vBulletin.phrase.get("cancel")},onAfterClose:function(){if(this.id=="btnConfirmDialogYes"){var K=F.find(".post-history-form");var J={oldpost:K.find("input:radio[name=old]:checked").val()||1,newpost:K.find("input:radio[name=new]:checked").val()||1,nodeid:G};C("#btnConfirmDialogYes").hide();var L=openConfirmDialog({title:vBulletin.phrase.get("post_history"),message:vBulletin.phrase.get("loading")+"...",width:800,dialogClass:"post-history-comparison-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:vBulletin.phrase.get("compare_versions"),noLabel:vBulletin.phrase.get("close")},onAfterClose:function(){C("#btnConfirmDialogYes").show()}});E(L,"post_history_form",J)}}});E(F,"post_history_form",{nodeid:G});function E(J,K,L){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/"+K,data:L,type:"POST",dataType:"json",success:function(M){console.log("/ajax/render/"+K);if(M&&!M.errors){J.removeClass("loading").find(".dialog-content .message").html(M).find("[placeholder]").placeholder().end().end().dialog("option","position","center")}else{console.log("/ajax/render/"+K+" successful, but response was not valid: "+JSON.stringify(M));openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){J.dialog("close")}})}},error:function(O,N,M){console.log("/ajax/render/"+K+" failed, error: "+M);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_delete_form_x",O.status),iconType:"error",onAfterClose:function(){J.dialog("close")}})}})}};vBulletin.conversation.flagPost=function(F){var G=C(this);var E=C(this).closest(".list-item").attr("data-node-id");openPromptDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("please_enter_your_reason_why_you_want_to_flag_this_post"),buttonLabel:{okLabel:vBulletin.phrase.get("send_report"),cancelLabel:vBulletin.phrase.get("cancel")},multiline:true,validation:{type:"string"},onClickOK:function(H){C("body").css("cursor","wait");C.ajax({url:vBulletin.getAjaxBaseurl()+"/report/report",type:"post",data:{reason:H,reportnodeid:E},dataType:"json",success:function(I){if(I){if(I.error){console.log("/report/report failed, error: "+JSON.stringify(I.error));var J;if(I.error.length>1){J=vBulletin.phrase.get(I.error)}else{J=vBulletin.phrase.get(I.error[0])}openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:J,iconType:"error"})}else{openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("the_report_has_been_sent"),iconType:"",onAfterClose:function(){C("#prompt-dialog").dialog("close")}})}}},error:function(K,J,I){console.log("/report/report failed, error: "+I);openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error",onAfterClose:function(){C("#prompt-dialog").dialog("close")}})},complete:function(){C("body").css("cursor","default")}})}});return false};vBulletin.conversation.editPost=function(K,N){var P=C(this),G,O,L=P.closest(".conversation-list");if(P.closest(".conversation-comments-wrapper").length>0){G="comment"}var H=C(".edit-conversation-container form",L);if(H.length>0){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get("you_have_a_pending_edit_unsaved"),iconType:"warning",onAfterClose:function(){vBulletin.animateScrollTop(H.closest(".list-item").offset().top,{duration:"slow"})}});return }if(N&&N.isFilterSelected("conversations_on")){N.toggleNewConversations(false)}window.vBulletin.loadingIndicator.show();K.preventDefault();var F=P.parent().attr("data-node-id");var E=(G=="comment")?P.closest(".conversation-comments-wrapper .list-item"):P.closest(".list-item-body-wrapper");if(L.hasClass("thread-view")){O="thread"}else{if(L.hasClass("full-activity-view")){O="full-activity-stream"}else{if(L.hasClass("activity-view")){O="activity-stream"}else{O="stream"}}}G=G||E.attr("data-node-type")||"";var J,M=C(".post-count",E).text()||"1";if(G=="comment"&&O=="thread"){J=Number(M.replace("#",""))}else{J=Number(M.replace("#",""))-1}var I=function(R,U,W,Q){if(R&&R.error){window.vBulletin.loadingIndicator.hide();Q.find(".action-buttons .button").prop("disabled",false);if(C.isArray(R.error)){switch(R.error[0]){case"toomanyimages":var V=vBulletin.phrase.get("toomanyimages",R.error[1],R.error[2]);break;default:C.each(R.error,function(Y,Z){R.error[Y]=vBulletin.phrase.get(Z)});var V=R.error.join("<br />")}}else{var V=vBulletin.phrase.get(R.error)}openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:V,iconType:"error"});return }var X=C(".edit-conversation-container form",E).attr("data-content-type");var S=Q.attr("ck-editorid");if(S&&vBulletin.ckeditor.eventRegistered(S,"afterSave")){C("body").trigger(X+"_editform_onunload",[E]);C("#"+S).trigger("afterSave",[S]);window.vBulletin.loadingIndicator.hide();return }Q.closest(".conversation-reply-slideout").addClass("hide");var T=pageData;T["posts-perpage"]=vBulletin.conversation.POSTS_PER_PAGE;if(O=="thread"){T["comments-perpage"]=vBulletin.conversation.COMMENTS_PER_PAGE}var W=C.post(vBulletin.getAjaxBaseurl()+"/create-content/loadnode",{nodeid:F,view:O,page:T,index:J,type:G},function(a){if(a.error){openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get(a.error),iconType:"error"})}else{var Y=C(a.template);C("body").trigger(X+"_editform_onunload",[E]);if(N&&N.isFilterSelected("conversations_on")){N.toggleNewConversations(true)}P.closest(".list-item").replaceWith(Y);C("body").trigger(X+"_newcontent_onload",[Y]);var b=Y.attr("data-node-id");if(Y.hasClass("conversation-starter")){var Z=C(".post-title",Y).first().text();document.title=Z+" - "+vBulletin.options.get("bbtitle");C(".conversation-content-widget .widget-header .module-title").text(Z)}vBulletin.animateScrollTop(Y.offset().top,{duration:"slow"})}},"json").error(function(){openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_loading_post"),iconType:"error"})}).complete(function(){window.vBulletin.loadingIndicator.hide()})};C.post(vBulletin.getAjaxBaseurl()+"/create-content/loadeditor",{nodeid:F,type:G,view:O},function(U){if(U.error){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get(U.error),iconType:"error"})}else{var T=function(){E.addClass("edit-post content-entry-box").find(".edit-conversation-container").show();vBulletin.ckeditor.initTitleRow(E);window.vBulletin.loadingIndicator.hide()};C("> .edit-conversation-container",E).hide().html(U.template);var V=C(".edit-conversation-container form",E).attr("data-content-type");var S=C(".edit-conversation-container form textarea.ckeditor-bare-box",E);S.val(JShtmlEncode(S.val()));C(".edit-conversation-container input[placeholder], .edit-conversation-container textarea[placeholder]",E).placeholder();var Q=C(".list-item[data-node-id={0}] .tag-editor-container .tag-input".format(F));if(Q.length>0){var R=new vBulletin.tagEditor.instance(Q.selector)}C("button.cancel",E).on("click",function(X,W){X.preventDefault();if(!W){openConfirmDialog({title:vBulletin.phrase.get("cancel_edit"),message:vBulletin.phrase.get("all_changes_made_will_be_lost_would_you_like_to_continue"),iconType:"warning",onClickYes:function(){C(E).find("form").each(function(Z,Y){var a=C(Y).attr("ck-editorid");if(a){C("#"+a).trigger("beforeCancel",[a])}});C("button.cancel",E).trigger("click",[true])}});return false}E.removeClass("edit-post content-entry-box");C(window).off("beforeunload.editPost");C("body").trigger(V+"_editform_onunload",[E]);if(N&&N.isFilterSelected("conversations_on")){N.toggleNewConversations(true)}C(E).find("form").each(function(Z,Y){var a=C(Y).attr("ck-editorid");if(a){C("#"+a).trigger("afterCancel",[a])}});C(".edit-conversation-container",E).empty().hide()});C("button.delete",E).on("click",function(){var X=C(this),Y=C(this.form).data("content-type");if(Y!="comment"&&Y!="media"){if(X.closest('.content-entry-box[data-node-type="visitorMessage"]').length==1){Y="visitorMessage"}else{if(X.closest(".list-item.conversation-starter").length==1){Y=X.closest(".conversation-list.blog-list").length==1?"blog":"topic"}else{Y="reply"}}}var W=vBulletin.phrase.get("delete_x",vBulletin.phrase.get("posttype_"+Y));$deleteDialog=openConfirmDialog({title:W,message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"delete-post-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:W,noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var c=[];C(E).find("form").each(function(e,d){var f=C(d).attr("ck-editorid");if(f){C("#"+f).trigger("beforeDelete",[f]);c.push(f)}});var b=$deleteDialog.find(".delete-posts-form");var a=b.find("input:radio[name=deletetype]:checked").val()||1;var Z={hard:(a==2?1:0),reason:b.find(":input[name=deletereason]").val(),nodeids:F};vBulletin.AJAX({url:vBulletin.normalizeAjaxUrl(b.attr("action")),data:Z,error_phrase:"error_deleting_posts_x",success:function(d){C(window).off("beforeunload.editPost");C("body").trigger(V+"_editform_onunload",[E]);if(a==2){if(Y=="topic"||Y=="blog"){location.replace(C("#breadcrumbs .crumb a:last").attr("href")||pageData.baseurl)}else{C('.list-item[data-node-id="'+F+'"]').remove()}}else{var e=C(".filter-wrapper",X.closest(".conversation-view, .ui-tabs-panel, .widget-content").find(".conversation-toolbar")).data("object-instance");if(e&&typeof e.applyFilters=="function"){e.forceApplyFilters()}else{if(Y=="visitorMessage"){window.history.back()}else{location.reload()}}}C.each(c,function(f,g){C("#"+g).trigger("afterDelete",[g])})}})}});C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/delete_post_form",data:({postType:Y,nodeid:F,authorid:X.data("userid")}),type:"POST",dataType:"json",success:function(Z){console.log("/ajax/render/delete_post_form");if(Z&&!Z.errors){$deleteDialog.removeClass("loading").find(".dialog-content .message").html(Z).find("[placeholder]").placeholder().end().end().dialog("option","position","center")}else{console.log("/ajax/render/delete_post_form successful, but response was not valid: "+JSON.stringify(Z));openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){$deleteDialog.dialog("close")}})}},error:function(b,a,Z){console.log("/ajax/render/delete_post_form failed, error: "+Z);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_delete_form_x",b.status),iconType:"error",onAfterClose:function(){$deleteDialog.dialog("close")}})}})});C("form",E).ajaxForm({dataType:"json",success:I,beforeSerialize:function(W){var Y=W.attr("ck-editorid");C("#"+Y).trigger("beforeSave",[Y]);var X=C("body").triggerHandler(V+"_editform_onbeforeserialize",[W]);return(X===false)?false:true},beforeSubmit:function(a,Z,X){var Y=(vBulletin.contentEntryBox||{})[V+"FormValidate"],W;if(typeof Y=="function"){W=Y.apply(Z,[X])}if(W===false){return false}C(window).off("beforeunload.editPost");window.vBulletin.loadingIndicator.show();return true}});C(window).off("beforeunload.editPost").on("beforeunload.editPost",function(){return vBulletin.phrase.get("onbeforeunload_message_while_editing_post")});C("body").trigger(V+"_editform_onload",[E,T])}},"json").error(function(R,S,Q){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:"HTTP {0} - {1}".format(R.status,Q),iconType:"error"})}).complete(function(R,S,Q){window.vBulletin.loadingIndicator.hide()})};vBulletin.conversation.votePost=function(F){var E=C(this).closest(".list-item").attr("data-node-id");C(".list-item[data-node-id="+E+"] .voteCtrl").addClass("disabled");C("body").css("cursor","wait");if(!C(this).hasClass("voted")){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/vote",type:"post",data:{nodeid:E},dataType:"json",success:function(G){if(G){if(G.errors){openAlertDialog({title:vBulletin.phrase.get("error_saving_vote"),message:vBulletin.phrase.get(G.errors[0]),iconType:"error"});C(".list-item[data-node-id="+E+"] .voteCtrl").removeClass("disabled")}else{C(".list-item[data-node-id="+G.nodeid+"] .votecount").html(G.votes);C(".list-item[data-node-id="+E+"] .voteCtrl").addClass("voted").removeClass("disabled").find(".label").text(vBulletin.phrase.get("unvote_cap")).end()}}},complete:function(){C("body").css("cursor","default")}})}else{C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/unvote",type:"post",data:{nodeid:E},dataType:"json",success:function(G){if(G){if(G.errors){openAlertDialog({title:vBulletin.phrase.get("error_saving_vote"),message:vBulletin.phrase.get(G.errors[0]),iconType:"error"});C(".list-item[data-node-id="+E+"] .voteCtrl").removeClass("disabled")}else{C(".list-item[data-node-id="+G.nodeid+"] .votecount").html(G.votes);C(".list-item[data-node-id="+E+"] .voteCtrl").removeClass("voted").removeClass("disabled").find(".label").text(vBulletin.phrase.get("vote_cap")).end()}}},complete:function(){C("body").css("cursor","default")}})}};vBulletin.conversation.showWhoVoted=function(G){var E=C(this);if(C(this).hasClass("novotepopup")){return }var F=E.closest(".list-item").attr("data-node-id");E.qtip({content:{title:{text:vBulletin.phrase.get("people_who_liked"),button:true},text:vBulletin.phrase.get("loading")+"...",ajax:{url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/fetchWhovoted",type:"POST",data:{nodeid:F},dataType:"json",once:false,success:function(L,J){if(L.errors){this.set("content.text",L.errors[0][0])}else{if(L.length<1){this.set("content.text",vBulletin.phrase.get("no_one_voted"))}else{var N="<ul>";for(x in L){var I=pageData.baseurl+L[x].profileurl,Q;if(!L[x].avatarurl){Q=pageData.baseurl_core+"/image.php?u="+L[x].userid+"&type=profile"}else{Q=pageData.baseurl_core+"/"+L[x].avatarurl}var M=C("<img>").attr("src",Q).attr("alt",vBulletin.phrase.get("xs_avatar",L[x].username)),P=C("<a>").attr("href",I).addClass("avatar"),H=P.clone().removeClass("avatar"),R=C("<li>"),O=C("<div>").addClass("usertitle").text(L[x].usertitle);var K=C("<div>").addClass("username").text(L[x].musername);if(L[x].musername!=""){K=C("<div>").addClass("username").html(L[x].musername)}P.append(M);H.append(K);R.append(P);R.append(H);R.append(O);N+=C("<div>").append(R).html()}N+="</ul>";this.set("content.text",N)}}},error:function(H,J,I){this.set("content.text","failed to load.")}}},position:{my:"left top",at:"right top",viewport:C(window)},show:{event:"click"},hide:{event:"unfocus",fixed:true},style:{classes:"ui-tooltip-shadow ui-tooltip-light ui-tooltip-whovoted"}});E.qtip("api").show()};vBulletin.conversation.processPostContent=function(E){E.css("border-bottom","").filter(".stream-view.activity-view").find(".list-item-poll form.poll").each(function(F,G){if(C(this).is(":visible")&&C(".view-less-ctrl",this).hasClass("hide")){vBulletin.conversation.limitVisiblePollOptionsInAPost(this,3)}})};vBulletin.conversation.limitVisiblePollOptionsInAPost=function(I,H){if(typeof H=="undefined"){H=3}var F=0;var G=C("ul.poll li",I);var E=parseInt(G.css("line-height"),10);G.each(function(J){C(this).removeClass("hide");var K=C(this).height();F+=K/E;if(F>H){C(this).addClass("hide")}else{C(this).css("display","")}});if(F>3){C(".view-more-ctrl",I).removeClass("hide").next(".action-buttons").addClass("hide").next(".view-less-ctrl").addClass("hide")}else{C(".view-more-ctrl",I).addClass("hide").next(".action-buttons").removeClass("hide").next(".view-less-ctrl").addClass("hide")}};vBulletin.conversation.bindEditFormEventHandlers=function(K){K=(K)?K.toLowerCase():"";if(C.inArray(K,["text","gallery","video","poll","link","comment"])!=-1||K=="all"){var E=function(){C("body").off("text_editform_onload").on("text_editform_onload",function(N,L,M){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){vBulletin.ckeditor.initEditor("ckeditor-bare-edit",{success:function(O){if(typeof M=="function"){M();this.setData(C("."+O,L).html());this.focus()}},error:function(O){if(typeof M=="function"){M()}C("#"+O).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true})}else{if(typeof M=="function"){M();L.closest(".conversation-comments-wrapper").find("> .action-buttons").hide();C("#ckeditor-bare-edit").focus()}}}).off("text_editform_onunload").on("text_editform_onunload",function(N,L){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}else{L.closest(".conversation-comments-wrapper").find("> .action-buttons").show()}}).off("text_newcontent_onload").on("text_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L)}})};var I=function(){C("body").off("comment_editform_onload").on("comment_editform_onload",function(N,L,M){if(typeof M=="function"){M();C("#ckeditor-bare-edit").focus()}}).off("comment_editform_onunload").on("comment_editform_onunload",function(M,L){})};var H=function(){C("body").off("poll_editform_onload").on("poll_editform_onload",function(N,L,M){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){vBulletin.ckeditor.initEditor("ckeditor-bare-poll-edit",{success:function(O){if(typeof M=="function"){M();this.setData(C("."+O,L).html());this.focus()}},error:function(O){if(typeof M=="function"){M()}C("#"+O).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true})}else{if(typeof M=="function"){M();L.closest(".conversation-comments-wrapper").find("> .action-buttons").hide();C("#ckeditor-bare-poll-edit").focus()}}C("input.datepicker",L).not(".hasDatePicker").datetimepicker({showOn:"both",buttonImage:pageData.baseurl+"/images/calendar-blue.png",buttonImageOnly:true,ampm:true});C("textarea.autogrow",L).elastic()}).off("poll_editform_onunload").on("poll_editform_onunload",function(N,L){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}).off("poll_newcontent_onload").on("poll_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L);vBulletin.conversation.limitVisiblePollOptionsInAPost(C("form.poll",L),3)}})};var G=function(){C("body").off("gallery_editform_onload").on("gallery_editform_onload",function(N,L,M){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){vBulletin.ckeditor.initEditor("ckeditor-bare-"+(L.attr("data-node-type")||"")+"gallery-edit",{success:function(O){if(typeof M=="function"){M();this.setData(C("."+O,L).html());this.focus();vBulletin.upload.initializePhotoUpload(L)}},error:function(O){if(typeof M=="function"){M()}C("#"+O).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true})}else{if(typeof M=="function"){M();C("#ckeditor-bare-"+(L.attr("data-node-type")||"")+"gallery-edit").focus();vBulletin.upload.initializePhotoUpload(L)}}}).off("gallery_editform_onunload").on("gallery_editform_onunload",function(N,L){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}}).off("gallery_editform_onbeforeserialize").on("gallery_editform_onbeforeserialize",function(M,L){L.find(".caption-box").each(function(){var N=C(this);if(N.hasClass("placeholder")&&N.val()==N.attr("placeholder")){N.val("")}});C(".photo-display-container .photo-display input",L.closest(".gallery-editor")).appendTo(L);return true}).off("gallery_newcontent_onload").on("gallery_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L)}})};var J=function(){C("body").off("video_editform_onload").on("video_editform_onload",function(Q,L,O){C(".videoscontainer .videocontainer .remove").off("click").on("click",M);C("button.attach",L).on("click",function(W){var S=C(this);W.preventDefault();var U=S.closest("form");var V=C("input.url",U);var T=C.trim(V.val());if(!T){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:vBulletin.phrase.get("please_enter_video_url"),iconType:"warning",onAfterClose:function(){V.focus()}});return false}S.prop("disabled",true);C('button[name="btnSubmit"]',U).prop("disabled",true);C("body").css("cursor","wait");C.post(vBulletin.getAjaxBaseurl()+"/link/getlinkdata",{url:T},function(X){if(X.error){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:X.error,iconType:"warning",onAfterClose:function(){V.focus()}})}else{$template=C(X.template);if($template.is(".videocontainer")>0){$template.hide();C(".videoscontainer",U).append($template);R($template);$template.fadeIn("slow",function(){C("input.url",U).val("");C(".videoattach-container",U).addClass("has-video")})}else{$template.find("img").error(function(){C(this).closest("li").remove()});C(".videoscontainer",U).append($template);R($template);$template.fadeIn("slow",function(){C("input.url",U).val("");C(".videoattach-container",U).addClass("has-video")})}}},"json").error(function(Z,Y,X){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:"HTTP {0} - {1}".format(Z.status,X),iconType:"error"})}).complete(function(){C("body").css("cursor","default");S.prop("disabled",false);C('button[name="btnSubmit"]',U).prop("disabled",false)})});function N(S){C(S).find(".remove").off("click").on("click",M)}function R(T){var U=T.closest("form");C(".urlinfo a.edit",T).on("click",function(W){W.preventDefault();var V=C(this).parent();V.addClass("edit-mode");C(".textbox",V).val(C.trim(C(".display-text",V).text())).trigger("focus");C("button.save",V).on("click",function(X){X.preventDefault();C('input[type="hidden"]',V).val(C(".textbox",V).val());C(".display-text",V).text(C(".textbox",V).val());V.removeClass("edit-mode")})});C("a.removelink",T).on("click",function(V){V.preventDefault();C(this).closest(".linkcontainer").html("").removeClass("videocontainer");C(".videoattach-container",U).removeClass("has-video")});C(".preview-checkbox input",T).off("click").on("click",function(){C(".urlimg_container",T)[this.checked?"addClass":"removeClass"]("hide")});var S=C(".img_wrapper img",T).length;C(".preview-checkbox input",T).off("click").on("click",function(){C(".urlimg_container",T)[this.checked?"addClass":"removeClass"]("hide")});var S=C(".img_wrapper img",T).length;T.find(".urlimg_list").jcarousel({scroll:1,wrap:null,size:S,rtl:C("html").attr("dir")=="rtl",buttonNextCallback:function(X,W,V){C(".scroll-arrows .next-arrow",T)[V?"removeClass":"addClass"]("disabled")},buttonPrevCallback:function(X,W,V){C(".scroll-arrows .prev-arrow",T)[V?"removeClass":"addClass"]("disabled")},initCallback:function(W,V){if(V=="init"&&S>0){C(".scroll-arrows .counter",T).html("1/"+S);C(".scroll-arrows .prev-arrow",T).off("click").on("click",function(){if(!C(this).hasClass("disabled")){C(".jcarousel-container .jcarousel-prev",T).trigger("click")}});C(".scroll-arrows .next-arrow",T).off("click").on("click",function(){if(!C(this).hasClass("disabled")){C(".jcarousel-container .jcarousel-next",T).trigger("click")}})}},itemVisibleInCallback:function(Y,W,V,X){if(X=="init"){return false}C(".scroll-arrows .counter",T).html(V+"/"+S);C('input[type="radio"]',W).prop("checked",true)},itemFallbackDimension:90})}function M(T){T.preventDefault();var S=C(this).closest("form");var U=C(this).parent(".videocontainer");U.remove();C(".videoattach-container",S).removeClass("has-video")}if(typeof O=="function"){vBulletin.ckeditor.initEditor("ckeditor-bare-video-edit",{success:function(S){O();this.setData(C("."+S,L).html());this.focus()},error:function(S){if(typeof O=="function"){O()}C("#"+S).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true});var P=C(".videoscontainer",L);R(P)}}).off("video_editform_onunload").on("video_editform_onunload",function(N,L){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}).off("video_newcontent_onload").on("video_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L)}})};var F=function(){C("body").off("link_editform_onload").on("link_editform_onload",function(O,L,M){C("button.attach",L).on("click",function(T){var Q=C(this);T.preventDefault();var U=Q.closest("form");var S=C("input.url",U);var R=C.trim(S.val());if(!R){openAlertDialog({title:"Error",message:"Please enter a valid URL and click <strong>Attach</strong> button.",iconType:"warning",onAfterClose:function(){S.focus()}});return false}if(!R.match(/^https?:\/\//)){R="http://"+R;C("input.url",U).val(R)}Q.prop("disabled",true);C('button[name="btnSubmit"]',U).prop("disabled",true);C("body").css("cursor","wait");C.post(vBulletin.getAjaxBaseurl()+"/link/getlinkdata",{url:R},function(W){if(W.error){openAlertDialog({title:vBulletin.phrase.get("attach_link"),message:W.error,iconType:"warning",onAfterClose:function(){S.focus()}})}else{var V=C(W.template);if(V.find("div.linkcontainer.linkviewcontainer.videocontainer").length>0){V.hide();C(".videoscontainer",U).append(V);V.fadeIn("slow",function(){C("input.url",U).val("");C(".videoattach-container",U).addClass("has-video")})}else{V.find("img").error(function(){C(this).closest("li").remove()});C(".linkcontainer",U).replaceWith(V);P(V);V.fadeIn("slow",function(){C("input.url",U).val("");C(".linkattach-container",U).addClass("hide-imp")})}}},"json").error(function(X,W,V){openAlertDialog({title:vBulletin.phrase.get("attach_link"),message:"HTTP {0} - {1}".format(X.status,V),iconType:"error"})}).complete(function(){C("body").css("cursor","default");Q.prop("disabled",false);C('button[name="btnSubmit"]',U).prop("disabled",false)})});if(typeof M=="function"){vBulletin.ckeditor.initEditor("ckeditor-bare-link-edit",{success:function(Q){M();this.setData(C("."+Q,L).html());this.focus()},error:function(Q){if(typeof M=="function"){M()}C("#"+Q).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true});var N=C(".linkcontainer",L);P(N)}function P(R){var S=R.closest("form");C(".urlinfo a.edit",R).on("click",function(U){U.preventDefault();var T=C(this).parent();T.addClass("edit-mode");C(".textbox",T).val(C.trim(C(".display-text",T).text())).trigger("focus");C("button.save",T).on("click",function(V){V.preventDefault();C('input[type="hidden"]',T).val(C(".textbox",T).val());C(".display-text",T).text(C(".textbox",T).val());T.removeClass("edit-mode")})});C("a.removelink",R).on("click",function(T){T.preventDefault();C(this).closest(".linkcontainer").html("").removeClass("videocontainer");C(".linkattach-container",S).removeClass("hide-imp")});C(".preview-checkbox input",R).off("click").on("click",function(){C(".urlimg_container",R)[this.checked?"addClass":"removeClass"]("hide")});var Q=C(".img_wrapper img",R).length;C(".preview-checkbox input",R).off("click").on("click",function(){C(".urlimg_container",R)[this.checked?"addClass":"removeClass"]("hide")});var Q=C(".img_wrapper img",R).length;R.find(".urlimg_list").jcarousel({scroll:1,wrap:null,size:Q,rtl:C("html").attr("dir")=="rtl",buttonNextCallback:function(V,U,T){C(".scroll-arrows .next-arrow",R)[T?"removeClass":"addClass"]("disabled")},buttonPrevCallback:function(V,U,T){C(".scroll-arrows .prev-arrow",R)[T?"removeClass":"addClass"]("disabled")},initCallback:function(U,T){if(T=="init"&&Q>0){C(".scroll-arrows .counter",R).html("1/"+Q);C(".scroll-arrows .prev-arrow",R).off("click").on("click",function(){if(!C(this).hasClass("disabled")){C(".jcarousel-container .jcarousel-prev",R).trigger("click")}});C(".scroll-arrows .next-arrow",R).off("click").on("click",function(){if(!C(this).hasClass("disabled")){C(".jcarousel-container .jcarousel-next",R).trigger("click")}})}},itemVisibleInCallback:function(W,U,T,V){if(V=="init"){return false}C(".scroll-arrows .counter",R).html(T+"/"+Q);C('input[type="radio"]',U).prop("checked",true)},itemFallbackDimension:90})}}).off("link_editform_onunload").on("link_editform_onunload",function(N,L){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}).off("link_newcontent_onload").on("link_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L)}}).off("link_savepost_success").on("link_savepost_success",function(M,L){C(".linkattach-container",L).removeClass("hide-imp")})};switch(K){case"text":E();break;case"comment":I();break;case"poll":H();break;case"gallery":G();break;case"video":J();break;case"link":F();break;case"all":E();I();H();G();J();F();break}}};vBulletin.isScrolledIntoView=function(G,L){var M=false;if(C.isPlainObject(L)&&(L).toString()=="[object Object]"){M=true;L.top=0;L.bottom=0}G=(G instanceof C)?G:C(G);if(G.length==0){return false}var E=C(window).scrollTop();var F=E+C(window).height();var J=G.offset().top;var H=J+G.outerHeight();var K=J-E;var I=F-H;if(M){L.top=K;L.bottom=I}return(K>=0&&I>=0)};vBulletin.scrollToFixed=function(H){var E={element:C(),fixedAt:"top",limit:0,triggerOnload:true,zIndex:99};var F=("scrollToFixed"+Math.random()).replace(".","");function G(O){E=C.extend({},E,O);if(E.element){E.element=(E.element instanceof C)?E.element:C(E.element);if(E.element.length>0){var L=E.element;if(C.inArray(E.fixedAt,["top","bottom"])){E.fixedAt="top"}var I="scrolltofixed";var K={width:L.width(),offset:L.offset(),"margin-top":parseInt(L.css("margin-top"),10),"margin-bottom":parseInt(L.css("margin-bottom"),10),cssPosition:L.css("position"),coordinates:{left:L.css("left"),top:L.css("top"),right:L.css("right"),bottom:L.css("bottom")}};if(typeof $Rx!=="undefined"){var J=($Rx&&$Rx.scrollToFixedBreakPoint)?$Rx.scrollToFixedBreakPoint:0;var N=C("<div />");if(C("#vb-page-body").width()>J){N.addClass("scrolltofixed-filler").hide().insertAfter(L)}L.data("origOffsetTop",K.offset.top);L.css("z-index",E.zIndex);var M=C(window).off("scroll."+F).on("scroll."+F,function(){if(L.is(":hidden")){return }var R=C(this).scrollTop();if(E.limit>0&&R>E.limit&&L.hasClass(I)){L.removeClass(I).css({position:"absolute",left:"auto",right:"auto",top:"auto",bottom:"auto",width:K.width})}else{if((E.limit>0&&R<E.limit&&R>K.offset.top&&!L.hasClass(I))||(E.limit<=0&&R>K.offset.top&&!L.hasClass(I))){N.css({display:L.css("display"),width:L.outerWidth(true),height:L.outerHeight(true),"float":L.css("float")});if(C("#vb-page-body").width()>J){L.addClass(I).width(K.width).css({left:K.offset.left,right:"auto",width:K.width,top:(E.fixedAt=="top")?0:"auto",bottom:(E.fixedAt=="bottom")?0:"auto",position:""})}var Q=K["margin-"+E.fixedAt];if(Q){var P={};P[E.fixedAt]=-Q+"px";L.animate(P,"fast")}}else{if(R<=K.offset.top&&L.hasClass(I)){N.hide();L.removeClass(I).css({position:"",width:"",left:"",top:"",right:"",bottom:""})}}}}).off("resize."+F).on("resize."+F,function(){L.removeClass(I).width("auto").css({position:"",left:""});K.width=L.width();K.offset=L.offset();C(this).trigger("scroll."+F)});if(E.triggerOnload){M.trigger("scroll."+F)}}}}}this.updateLimit=function(I){if(!isNaN(Number(I))){E.limit=I;C(window).trigger("scroll."+F)}};this.reset=function(I){G(I)};G(H)};vBulletin.scrollToAnchor=function(I){var G=C(I);console.log("vBulletin.scrollToAnchor() hash: {0}, found: {1}".format(I,G.length));if(G.length>0){var F=G.show().offset().top-2;G.hide();location.hash=I;var H=C("html,body");var E=C(".scrolltofixed-floating.scrolltofixed-top");var J=false;if(E.length>0){if(C(".list-container .list-item:first a.anchor"+I).length==1){if(E.hasClass("scrolltofixed")){E.removeClass("scrolltofixed")}F=E.offset().top;J=true}else{if(E.hasClass("scrolltofixed")){F-=E.outerHeight()}}}H.animate({scrollTop:F},1000,function(){if(!J){var L=G.show().offset().top;G.hide();var K=C(".scrolltofixed-floating.scrolltofixed-top.scrolltofixed");L-=(K.length>0)?K.outerHeight():0;H.animate({scrollTop:L},"slow")}C("a.anchor").show()});return false}C("a.anchor").show();return true};vBulletin.animateScrollTop=function(F,G){console.log("vBulletin.animateScrollTop({0})".format(F));var E=C(".scrolltofixed-floating.scrolltofixed-top");if(E.length>0){var H=E.data("origOffsetTop")||E.offset().top;if(!E.hasClass("scrolltofixed")&&H<F){F-=E.outerHeight(true)}if(H<F){F-=E.outerHeight()}}C("html, body").animate({scrollTop:F},G)};vBulletin.subscribe=function(E){if(C(E).hasClass("isSubscribed")||C(E).hasClass("is-pending")){return true}var H=parseInt(C(E).attr("data-node-id"),10);var G={};var F="";if(C(E).hasClass("is-topic")){F="/ajax/api/follow/add";G.follower=H;G.type="follow_contents"}else{F="/ajax/api/node/requestChannel";G.channelid=H;G.recipient=parseInt(C(E).attr("data-owner-id"),10);G.requestType=C(E).hasClass("is-blog-channel")?"member":"sg_subscriber"}C.ajax({url:pageData.baseurl+F,data:G,type:"POST",dataType:"json",success:function(I){if(!isNaN(I)&&I==1){C(E).children(".button-text-primary").text(vBulletin.phrase.get("following"));C(E).addClass("isSubscribed special").removeClass("secondary");location.reload()}else{if(!isNaN(I)&&I>1){C(E).children(".button-text-primary").text(vBulletin.phrase.get("following_pending"));C(E).addClass("is-pending special").removeClass("secondary");location.reload()}else{if(I.errors){openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get(I.errors[0][0]),iconType:"error"})}else{openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get("follow_error"),iconType:"error"})}}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get("follow_error"),iconType:"error"})}})};vBulletin.join=function(E){var G=parseInt(C(E).attr("data-node-id"),10);var F=parseInt(C(E).attr("data-owner-id"),10);C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/requestChannel",data:({channelid:G,recipient:F,requestType:"sg_member"}),type:"POST",dataType:"json",success:function(H){if(H.errors){openAlertDialog({title:vBulletin.phrase.get("join"),message:vBulletin.phrase.get(H.errors[0]),iconType:"error"})}else{if(H===true){C(E).children(".button-text-primary").text(vBulletin.phrase.get("joined"));C(E).addClass("has-joined special").removeClass("secondary");location.reload()}else{if(!isNaN(H)){C(E).children(".button-text-primary").text(vBulletin.phrase.get("following_pending"));C(E).addClass("is-pending special").removeClass("secondary")}}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("join"),message:vBulletin.phrase.get("join_error"),iconType:"error"})}})};vBulletin.leave=function(E){var F=parseInt(C(E).attr("data-node-id"),10);C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/blog/leaveChannel",data:({channelId:F}),type:"POST",dataType:"json",success:function(G){if(G.errors){openAlertDialog({title:vBulletin.phrase.get("leave"),message:vBulletin.phrase.get(G.errors[0]),iconType:"error"})}else{if(G===true){var H=C(E);if(H.hasClass("follow-btn")){H.children(".button-text-primary").text(vBulletin.phrase.get("follow"));H.removeClass("isSubscribed unfollow-btn");H.addClass("special")}else{H.children(".button-text-primary").text(vBulletin.phrase.get("join"));H.removeClass("has-joined special")}location.reload()}else{openAlertDialog({title:vBulletin.phrase.get("leave"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("leave"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}})};vBulletin.unsubscribe=function(E){var F=C(E).attr("data-node-id");C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/follow/delete",data:({follower:F,type:"follow_contents"}),type:"POST",dataType:"json",success:function(G){if(G==1){C(E).removeClass("isSubscribed unfollow-btn special").addClass("secondary").children(".button-text-primary").text(vBulletin.phrase.get("follow"));location.reload()}else{if(G.errors){openAlertDialog({title:vBulletin.phrase.get("unsubscribe"),message:vBulletin.phrase.get(G.errors[0][0]),iconType:"error"})}else{openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get("unfollow_error"),iconType:"error"})}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get("unfollow_error"),iconType:"error"})}})};vBulletin.getUnsubscribeOverlay=function(K){var L="";var E=C(K).closest(".list-item").find("ul.unfollow_panel").filter(function(){var M=parseInt(C(this).attr("data-node-id"),10);if(typeof M=="number"){L=M;return true}});var J=E.children();var H,G,F=false;var I="";C.each(J,function(M,N){if(C(N).hasClass("unfollow_content")){G=C(N).attr("data-item-id")}else{if(C(N).hasClass("unfollow_member")){H=C(N).attr("data-item-id")}else{if(C(N).hasClass("unfollow_channel")){F=C(N).attr("data-item-id")}}}});if(G){I+="&content="+G}if(H){I+="&member="+H}if(F){I+="&channel="+F}if(L){C.ajax({url:vBulletin.getAjaxBaseurl()+"/profile/getUnsubscribeOverlay?userId="+pageData.userid+I+"&nodeId="+L,success:function(M){var N=C(".unsubscribe-overlay-container");if(N){N.html(M);N.children(".unsubscribe-overlay").dialog({title:vBulletin.phrase.get("following_remove"),autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,width:450,dialogClass:"dialog-container unsubscribe-dialog-container dialog-box"}).dialog("open")}},error:function(){openAlertDialog({title:vBulletin.phrase.get("following_remove"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})}})}};vBulletin.removeUnsubscribeOptions=function(I,F){var H=C(I).parents(".unsubscribe-overlay");var J=parseInt(H.attr("data-node-id"),10);if(typeof J!="number"){return false}var G=C(H).children(".unsubscribe-options");var E=[];if((C(G).find("li #"+J+"-unsubscribeAll:checkbox:checked")).length===1){C.each(C(G).find("li :checkbox[name=unsubscribeItems]"),function(K,N){var L=C(N).attr("data-type");var M=parseInt(C(N).attr("data-item-id"),10);if(M&&typeof M=="number"){E.push({type:L,itemId:M})}})}else{C.each(C(G).find("li :checkbox[name=unsubscribeItems]:checked"),function(K,N){var L=C(N).attr("data-type");var M=parseInt(C(N).attr("data-item-id"),10);if(M&&typeof M=="number"){E.push({type:L,itemId:M})}})}if(E.length>0){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/follow/unsubscribeItems",data:({unsubscribeItems:E}),type:"POST",dataType:"json",success:function(K){if(K===true){C(H).dialog("close").remove();F.updatePageNumber(1).applyFilters(false)}else{if(K.errors!=undefined){openAlertDialog({title:vBulletin.phrase.get("profile_guser"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("profile_guser"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})}})}else{openAlertDialog({title:vBulletin.phrase.get("profile_guser"),message:vBulletin.phrase.get("unsubscribe_overlay_error"),iconType:"error"})}};vBulletin.truncatePostContent=function(E){E=(E instanceof C)?E:C(E);if(E.selector==""){E=C("body")}C(".post-content.ellipsis, .poll-desc.ellipsis, .message-body.ellipsis",E).each(function(){var F=C(this);truncatedHeight=F.height();F.removeClass("ellipsis");var G=F.height();F.addClass("ellipsis");if(G>truncatedHeight){F.closest(".list-item-body").find(".post-links").removeClass("hide-see-link").find(".see-link").off("click").on("click",function(){var I=C(this);if(I.hasClass("more")){F.removeClass("ellipsis")}else{F.addClass("ellipsis")}I.toggleClass("more less");var H=I.text();I.text(I.data("toggle-text")).data("toggle-text",H);return false})}})};vBulletin.markreadcheck=function(){var E=C.cookie(pageData.cookie_prefix+"lastvisit");if(!E||pageData.lastvisit>E){E=pageData.lastvisit}var F=Math.round(new Date().getTime()/1000),G=F-vBulletin.options.get("markinglimit")*86400;C(".forum-item").each(function(){var I=parseInt(C(this).attr("data-lastcontent"));var H=0;if(pageData.threadmarking=="0"){if(I<=E){C(this).removeClass("new");return }H=vBulletin.cookie.fetchBbarrayCookie("channel_view",C(this).attr("data-channel-id"));H=H?parseInt(H):0}else{H=C(this).attr("data-readtime")?parseInt(C(this).attr("data-readtime")):0;H=Math.max(H,G)}if(I>H){C(this).addClass("new")}else{C(this).removeClass("new")}});C(".topic-item").each(function(){var I=parseInt(C(this).attr("data-lastcontent"));var J=0,H=0,L=0;if(pageData.threadmarking=="0"){if(I<=E){C(this).addClass("read");return }H=vBulletin.cookie.fetchBbarrayCookie("channel_view",C(this).attr("data-channel-id"));H=H?parseInt(H):0;J=vBulletin.cookie.fetchBbarrayCookie("discussion_view",C(this).attr("data-node-id"));J=J?parseInt(J):0;L=Math.max(H,J)}else{L=C(this).attr("data-readtime")?parseInt(C(this).attr("data-readtime")):0;H=C(this).attr("data-channelreadtime")?parseInt(C(this).attr("data-channelreadtime")):0;L=Math.max(L,H,G)}if(I<=L||C(this).hasClass("redirect")){C(this).addClass("read")}else{var K=C(this).find(".topic-wrapper .topic-title").attr("href");if(typeof (K)!="undefined"){K+=(K.indexOf("?")==-1?"?":"&amp;")+"goto=newpost";C("<a />").addClass("go-to-first-unread").attr("href",K).attr("title",vBulletin.phrase.get("go_to_first_new_post")).html("&nbsp;").prependTo(C(this).find(".topic-wrapper"));C(this).find(".icon").attr("title",vBulletin.phrase.get("new_posts"))}}})};vBulletin.markchannelsread=function(E,F){E=E||0;C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/markChannelsRead",data:{nodeid:E},type:"POST",datatype:"json",complete:function(){},success:function(G){if(G&&!G.error){var J=Math.round(new Date().getTime()/1000);if(pageData.threadmarking=="0"){if(E==0){C.cookie(pageData.cookie_prefix+"lastvisit",J)}else{var I;try{I=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(C.cookie(pageData.cookie_prefix+"channel_view")))||{}}catch(K){I={}}for(var H in G){I[G[H]]=J}var L={path:pageData.baseurl_path};L.expires=365;C.cookie(pageData.cookie_prefix+"channel_view",vBulletin.cookie.convertBbarrayCookie(JSON.stringify(I),"set"),L)}}console.log("Channel "+E+" is marked read successfully!");if(F.success&&typeof F.success=="function"){F.success(G)}}else{console.log("Channel "+E+" is marked read failed: "+G.error);if(F.failed&&typeof F.failed=="function"){F.failed(G)}}},error:function(I,H,G){console.log("Channel "+E+" is marked read failed:"+error);openAlertDialog({title:vBulletin.phrase.get("forum"),message:"HTTP {0} - {1}".format(I.status,G),iconType:"error"})}})};vBulletin.ckeditor=vBulletin.ckeditor||{};vBulletin.ckeditor.requiredScriptsLoaded=false;vBulletin.ckeditor.requiredScriptsLoadFailed=false;vBulletin.ckeditor.checkEnvironment=function(){if(/(ipad|iphone|ipod)/.test(navigator.userAgent.toLowerCase())){C(".lnkToggleAdvanced").addClass("hide");return false}return true};vBulletin.ckeditor.initEditor=function(G,F){if(!vBulletin.ckeditor.checkEnvironment()){if(typeof F.error=="function"){F.error(G)}if(typeof F.complete=="function"){F.complete(G)}return }F=F||{};if(vBulletin.ckeditor.requiredScriptsLoaded){var H=function(I){if(typeof F.success=="function"){F.success.apply(this,[I])}if(typeof F.complete=="function"){F.complete(I)}};var E=F.editorDefinition||false;vBulletin.ckeditor.doInitEditor(G,H,E);return false}else{vBulletin.ckeditor.loadScripts(G,F)}};vBulletin.ckeditor.loadScripts=function(G,F,E){F=F||{};G=G||"";if(typeof (F.hideLoadingDialog)!=="undefined"&&!F.hideLoadingDialog){vBulletin.ckeditor.showLoadingDialog(G)}window.CKEDITOR_BASEPATH=pageData.baseurl+"/js/ckeditor/";var I=function(){if(F.showError||!vBulletin.ckeditor.requiredScriptsLoadFailed){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_ckeditor_script"),iconType:"warning"})}vBulletin.loadingIndicator.hide();vBulletin.ckeditor.requiredScriptsLoadFailed=true;if(typeof F.error=="function"){F.error(G)}if(typeof F.complete=="function"){F.complete(G)}};var H=function(){if(!vBulletin.ckeditor.requiredScriptsLoadFailed){if(typeof E=="function"){E()}if(typeof vBulletin.ckeditor.doInitEditor=="function"&&window.CKEDITOR){vBulletin.ckeditor.requiredScriptsLoaded=true;var J=function(K){if(typeof F.success=="function"){F.success.apply(this,[K])}if(typeof F.complete=="function"){F.complete(K)}};vBulletin.ckeditor.doInitEditor(G,J)}else{setTimeout(H,10)}}else{if(typeof F.error=="function"){F.error(G)}if(typeof F.complete=="function"){F.complete(G)}if(!F.hideLoadingDialog){vBulletin.ckeditor.hideLoadingDialog(G)}}};if(typeof vBulletin.ckeditor.doInitEditor!="function"&&!window.CKEDITOR){vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/render/ckeditor_javascript",success:function(K){var J=[];var L=/src="([^"]+)"/g;while(match=L.exec(K)){J.push(match[1])}var M=function(){if(J.length>0){console.log("Calling getScript for: {0}".format(J[0]));C.getScript(J[0],function(N,P,O){if(P!="success"){console.warn("Ckeditor: Error loading "+J[0]);I();return false}console.log("Ckeditor: Script loaded: "+J[0]);J.splice(0,1);M()}).fail(function(O,P,N){console.warn("Ckeditor: Error loading script: "+P+" Exception: "+N);I()})}else{H()}};M()},error_phrase:"error_fetching_dialog",})}else{H()}};vBulletin.ckeditor.editorExists=function(E){return false};vBulletin.ckeditor.editorEvents=["beforeCancel","afterCancel","beforeDelete","afterDelete","beforeInit","afterInit","beforeSave","afterSave"];vBulletin.ckeditor.registerEvent=function(E,F,G){if(typeof vBulletin.ckeditor.editorDefinitions!="undefined"&&typeof vBulletin.ckeditor.editorDefinitions[E]=="undefined"){return false}if(typeof F!="string"){return false}if(C.inArray(F.split(".")[0],vBulletin.ckeditor.editorEvents)==-1){return false}if(typeof G!="function"){return false}C(document).on(F,"#"+E,G).data("ckeditor_customevent_{0}_{1}".format(E,F),true);return true};vBulletin.ckeditor.unRegisterEvent=function(E,F){C(document).off(F,"#"+E,callback).removeData("ckeditor_customevent_{0}_{1}".format(E,F))};vBulletin.ckeditor.eventRegistered=function(E,F){return C(document).data("ckeditor_customevent_{0}_{1}".format(E,F))};vBulletin.ckeditor.loadingDialogStack={};vBulletin.ckeditor.showLoadingDialog=function(E){if((typeof vBulletin.ckeditor.loadingDialogStack[E]!="undefined")&&vBulletin.ckeditor.loadingDialogStack[E]){return }vBulletin.ckeditor.loadingDialogStack[E]=true;var F=C("#"+E);if(F.length>0&&F.is(":visible")){F.prop("disabled",true)}window.vBulletin.loadingIndicator.show("vBulletin.ckeditor.showLoadingDialog editorId: "+E)};vBulletin.ckeditor.hideLoadingDialog=function(E){if((typeof vBulletin.ckeditor.loadingDialogStack[E]=="undefined")||!vBulletin.ckeditor.loadingDialogStack[E]){return }vBulletin.ckeditor.loadingDialogStack[E]=false;C("#"+E).prop("disabled",false);window.vBulletin.loadingIndicator.hide("vBulletin.ckeditor.hideLoadingDialog editorId: "+E)};vBulletin.ckeditor.initTitleRow=function(E){(function(){var G=function(H){return E.find("select.post-icon-menu option").filter(function(){return(C(this).val()==H)}).data("icon-url")};var F=function(H){if(H==0){return C("<span />").html(vBulletin.phrase.get("no_icon")).get(0)}var I=G(H);if(I){return C("<img />").attr("src",I).attr("alt","").get(0)}else{return""}};E.find("select.post-icon-menu").selectBox().change(function(){var H=C(this).val();C(".post-icon-menu.selectBox-dropdown .selectBox-label").html(F(H))});C(".post-icon-menu-selectBox-dropdown-menu li a").each(function(){var H=C(this).attr("rel");C(this).html(F(H))})})();E.find("select.prefixid").selectBox()};vBulletin.AJAX=function(F){var E={type:"post",dataType:"json",error_phrase:"error",element:null,error:function(){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get(this.error_phrase),iconType:"error"})}};C.extend(E,F);E.success=function(G){if(G&&G.errors){var H=G.errors;if(C.isArray(H)&&H.length>0){H=H[0]}if(H=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(E.element)}openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_x",vBulletin.phrase.get(H)),iconType:"error"});if(G.wasNotArray){arguments[0]=arguments[0][0]}return false}else{if(F.success){F.success.apply(this,arguments)}}};C.ajax(E)};vBulletin.ajaxForm=function(F){var E={dataType:"json",error_phrase:"error",element:null,error:function(){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get(this.error_phrase),iconType:"error"})},complete:function(){C(".button[type=submit]",this).prop("disabled",false)},beforeSerialize:function(G){C(".placeholder",G).each(function(){var H=C(this);if(H.val()==H.attr("placeholder")){H.val("")}})},beforeSubmit:function(I,H,G){C(".button[type=submit]",this).prop("disabled",true);return true}};C.extend(E,F);E.success=function(G){if(G&&G.errors){var H=G.errors;while(C.isArray(H)&&H.length>0){H=H[0]}if(H=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(E.element)}openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_x",vBulletin.phrase.get(H)),iconType:"error"});if(G.wasNotArray){arguments[0]=arguments[0][0]}return false}else{if(F.success){F.success.apply(this,arguments)}}};this.ajaxForm(E)};window.openAlertDialog=function(J){var I=C("#alert-dialog");J=J||{};if(!I.data("created")){I.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,dialogClass:"dialog-container alert-dialog-container dialog-box",create:function(){I.data("created",true)}})}I.dialog("option","width",J.width||500);I.dialog("option","title",J.title||"Alert");var F=I.find(".dialog-content");var G=F.find(".message");var E=F.find(".icon");var H=C("#btnAlertDialogOK");if(J.maxHeight){F.css({"max-height":J.maxHeight,overflow:"auto"})}else{F.css({"max-height":"",overflow:""})}if(J.message){G.html(J.message)}E.removeClass(function(K,L){return(L.match(/\S+-icon\b/g)||[]).join(" ")});J.buttonLabel=J.buttonLabel||"OK";H.html(J.buttonLabel);I.off("dialogopen").on("dialogopen",function(){H.off("click").on("click",function(){if(typeof J.onBeforeClose=="function"){J.onBeforeClose.apply(this)}I.dialog("close")}).focus()});I.off("dialogclose").on("dialogclose",function(){if(typeof J.onAfterClose=="function"){J.onAfterClose.apply(H)}});switch(J.iconType){case"warning":E.addClass("warning-icon vb-icon vb-icon-warning");E.show();break;case"error":E.addClass("error-icon vb-icon vb-icon-error");E.show();break;default:E.addClass("no-icon").hide()}I.dialog("open");return I};window.openConfirmDialog=function(L){L=L||{};var H=C("#confirm-dialog");if(!H.data("created")){H.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,create:function(){H.data("created",true)}})}H.dialog("option","title",L.title||"Confirmation");var G=H.find(".dialog-content");var I=G.find(".message");var F=G.find(".icon");if(L.message){I.html(L.message)}H.dialog("option","width",(L.width?L.width:500));H.dialog("option","dialogClass","dialog-container confirm-dialog-container dialog-box "+(L.dialogClass||""));F.removeClass(function(M,N){return(N.match(/\S+-icon\b/g)||[]).join(" ")});L.buttonLabel=L.buttonLabel||{};L.buttonLabel.yesLabel=L.buttonLabel.yesLabel||"Yes";L.buttonLabel.noLabel=L.buttonLabel.noLabel||"No";var K=C("#btnConfirmDialogYes").html(L.buttonLabel.yesLabel);var E=C("#btnConfirmDialogNo").html(L.buttonLabel.noLabel);if(L.primaryButton=="yes"){K.addClass("primary").removeClass("secondary");E.addClass("secondary").removeClass("primary")}else{E.addClass("primary").removeClass("secondary");K.addClass("secondary").removeClass("primary")}var J;H.off("dialogopen").on("dialogopen",function(){var N=C("#btnConfirmDialogYes").off("click").on("click",function(){J=this;var P,O;if(typeof L.onClickYes=="function"){P=L.onClickYes.apply(this);if(typeof L.onClickYesWithAjax!="undefined"&&L.onClickYesWithAjax){return false}}if(P===false){return false}if(typeof L.onBeforeClose=="function"){O=L.onBeforeClose.apply(this);if(typeof L.onBeforeCloseWithAjax!="undefined"&&L.onBeforeCloseWithAjax){return false}}if(O===false){return false}H.dialog("close")});if(L.defaultFocus=="yes"){N.focus()}var M=C("#btnConfirmDialogNo").off("click").on("click",function(){J=this;if(typeof L.onClickNo=="function"){L.onClickNo.apply(this)}if(typeof L.onBeforeClose=="function"){L.onBeforeClose.apply(this)}H.dialog("close")});if(L.defaultFocus!="yes"){M.focus()}});H.off("dialogclose").on("dialogclose",function(N,M){if(typeof L.onAfterClose=="function"){L.onAfterClose.apply(J)}});switch(L.iconType){case"warning":F.addClass("warning-icon vb-icon vb-icon-warning");F.show();break;case"question":F.addClass("question-icon");F.show();break;default:F.addClass("no-icon").hide()}H.dialog("open");return H};window.openPromptDialog=function(H){var J=C("#prompt-dialog");if(!J.data("created")){J.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,width:500,dialogClass:"dialog-container prompt-dialog-container dialog-box",create:function(){J.data("created",true)}})}H=H||{};J.dialog("option","title",H.title||"Prompt");var M=J.find(".dialog-content");var I=M.find(".message");var K;if(H.message){I.html(H.message)}var E=H.initialValue||"";if(!H.multiline){K=J.find("input.input-box").val(E).removeClass("hide");K.next().addClass("hide");if(Number(H.maxlength)){K.attr("maxlength",Number(H.maxlength))}else{K.removeAttr("maxlength")}M.addClass("table");M.find("> div").addClass("td")}else{K=J.find("textarea.input-box").val(E).removeClass("hide");K.prev().addClass("hide");M.removeClass("table");M.find("> .td").removeClass("td")}H.buttonLabel=H.buttonLabel||{};H.buttonLabel.okLabel=H.buttonLabel.okLabel||"OK";H.buttonLabel.cancelLabel=H.buttonLabel.cancelLabel||"Cancel";var L=C("#btnPromptDialogOK").html(H.buttonLabel.okLabel);var G=C("#btnPromptDialogCancel").html(H.buttonLabel.cancelLabel);var F;J.off("dialogopen").on("dialogopen",function(){var O=C("#btnPromptDialogOK").off("click").on("click",function(){F=this;var Q=C.trim(K.val()),P,R;if(H.validation&&typeof H.validation=="object"){if(H.validation.override&&typeof H.validation.custom=="function"){if(!H.validation.custom.apply(this,[K])){return false}}else{switch(H.validation.type){case"number":Q=Number(Q);if(isNaN(Q)){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input must be a number.",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}if(H.validation.range&&typeof H.validation.range=="object"){if(Q<H.validation.range.min||Q>H.validation.range.max){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input must be within "+H.validation.range.min+" - "+H.validation.range.max+" only.",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}}break;case"string":default:if(!Q){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input required.",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}else{if(H.multiline&&Q.length>H.maxlength){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input too long. Maximum allowed is "+H.maxlength+" characters.",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}}}if(H.validation.set&&C.isArray(H.validation.set)&&H.validation.set.length>0){if(C.inArray(Q,H.validation.set)==-1){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input must be one of these: "+H.validation.set.join(", ")+".",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}}if(typeof H.validation.custom=="function"){if(!H.validation.custom.apply(this,[K])){return false}}}}if(typeof H.onClickOK=="function"){R=H.onClickOK.apply(this,[Q]);if(typeof H.onClickOKWithAjax!="undefined"&&H.onClickOKWithAjax){return false}}if(R===false){return false}if(typeof H.onBeforeClose=="function"){P=H.onBeforeClose.apply(this);if(typeof H.onBeforeCloseWithAjax!="undefined"&&H.onBeforeCloseWithAjax){return false}}if(P===false){return false}J.dialog("close")}).trigger("focus");var N=C("#btnPromptDialogCancel").off("click").on("click",function(){F=this;if(typeof H.onClickCancel=="function"){H.onClickCancel.apply(this)}if(typeof H.onBeforeClose=="function"){H.onBeforeClose.apply(this)}J.dialog("close")})});J.off("dialogclose").on("dialogclose",function(){if(typeof H.onAfterClose=="function"){H.onAfterClose.apply(F);K.val("")}});J.dialog("open");K.trigger("focus");return J};window.openLoadingDialog=function(){console.warn("Function openLoadingDialog is deprecated.");window.vBulletin.loadingIndicator.show("openLoadingDialog")};window.closeLoadingDialog=function(){console.warn("Function closeLoadingDialog is deprecated.");window.vBulletin.loadingIndicator.hide("closeLoadingDialog")};window.bindFormReset=function(E){return C(E).on("reset",function(F,G){if(typeof G=="function"){G()}})};setTimeout(function(){if(location.hash){vBulletin.scrollToAnchor(location.hash)}(function(){C("#main-navbar .username-container").on("click",function(M){var N=C(this),L=C("> ul",N);if(N.closest(".secondary-nav").hasClass("disabled")){return false}if(N.hasClass("username-container-active")){M.stopPropagation();try{M.target.parentNode.click()}catch(K){}L.slideUp("fast");N.removeClass("username-container-active");return L.hasClass("submenu")}C("#idLoginIframe").load(function(){try{var R=C(this);var Q=R.contents().find("html");var O=Q[0].scrollHeight;R.height(O);R.width(Q.outerWidth(true));R.parent().height(R.height())}catch(P){}});N.addClass("username-container-active");L.css("top",N.outerHeight()).slideDown("fast");return false});C("body").on("click",function(K){if(C(K.target).closest(".username-container").size()==0){C(".username-container > ul").slideUp("fast");C(".username-container").removeClass("username-container-active")}})})();if(!C.support.selectstart){C.fn.extend({disableSelection:function(){return this.each(function(){C(this).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-khtml-user-select":"none","-o-user-select":"none","user-select":"none"})})},enableSelection:function(){return this.each(function(){C(this).css({"-moz-user-select":"","-webkit-user-select":"","-khtml-user-select":"","-o-user-select":"","user-select":""})})}})}function G(){window.vBulletin.loadingIndicator.init();var L=function(){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/stylesheet_block",data:{"cssFiles[]":["sitebuilder-after.css"]},type:"POST",dataType:"json",success:function(O){C("head").append(O)}})};C(document).off("click","a.animate-scroll").on("click","a.animate-scroll",function(){var O=vBulletin.scrollToAnchor(this.hash);if(O){if(window.location.href.split("#")[0]==this.href.split("#")[0]){if(window.location.href!=this.href){window.location.href=this.href}window.openLoadingDialog();window.location.reload()}else{window.location.href=this.href}}return false});var M=function(O){C(this).closest(".split-button").toggleClass("open").find(".submenu").toggleClass("hide");C("body").off("click.buttonset").on("click.buttonset",function(P){if(C(P.target).closest(".split-button").length==0){C(".split-button").removeClass("open").find(".submenu").addClass("hide");C("body").off("click.buttonset")}})};C(".split-button .button-text").button().closest(".button-set").find(".button-icon").button({text:false,icons:{primary:"vb-icon vb-icon-triangle-down-wide"}}).on("click",M).closest(".button-set").buttonset().filter(".one-click").find(".button-text").on("click",M);C(document).off("click",".canvas-widget .toggle-button").on("click",".canvas-widget .toggle-button",function(R,O){var Q=C(this),S=Q.closest(".canvas-widget");if(Q.hasClass("expand")){if(O){C(".widget-content",S).show()}else{C(".widget-content",S).slideDown("slow")}S.removeClass("collapsed")}else{if(O){C(".widget-content",S).hide()}else{C(".widget-content",S).slideUp("slow")}S.addClass("collapsed")}Q.toggleClass("collapse expand");var P=Q.attr("title");Q.attr("title",Q.data("toggle-title")).data("toggle-title",P);return false});C(".conversation-toolbar-wrapper form.toolbar-filter-overlay").trigger("reset");C("input[placeholder], textarea[placeholder]").placeholder();C("textarea.autogrow").elastic();C(".edit-switch-container .switch-control").on("mousedown",function(O){var P=C(this);if(P.closest("ul").hasClass("disabled")){return true}if(P.hasClass("on")){C.removeCookie(pageData.sb_state_cookie,{path:pageData.baseurl_path});C("#main-navbar .main-nav").hide();P.removeClass("on");return true}L();if(C("#main-navbar .main-nav li").length>0){C("#main-navbar .main-nav").show();P.addClass("on");C.cookie(pageData.sb_state_cookie,"1",{path:pageData.baseurl_path});return true}J(true);return true});C("select.custom-dropdown").selectBox();var K=C(".content-entry-box:not(.content-entry-box-Media):has(.content-entry-box-tabs)");C(".content-entry-box-tab",K).removeClass("ui-state-disabled");K.tabs({show:function(P,Q){if(K.length==1){var O=C(Q.tab.hash).find('textarea[name="text"]').attr("id");if(C("#"+O).is(":visible")&&(C(".content-entry-box").closest("#quick-reply-container").length==0||C(".content-entry-box").closest("#quick-reply-container").data("allow-ckeditor-load-on-show"))){vBulletin.ckeditor.initEditor(O,{complete:function(R){console.log("enabling all tabs...");K.tabs("option","disabled",[]);C(window).off("error.editorInit")},error:function(T){C("#"+T).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");var S=C(Q.tab).closest(".content-entry-box");var R=C(".editor-tab",S);if(R.length>0&&R[0]==C(Q.tab).parent()[0]){S.tabs("select",0)}}})}else{if(C(".content-entry-box").closest("#quick-reply-container").length==1){C(Q.tab.hash).find(".ckeditor-bare-box.ckeditor-load-on-focus").on("focus",function(){vBulletin.ckeditor.initEditor(O,{complete:function(R){console.log("enabling all tabs...");K.tabs("option","disabled",[]);C(window).off("error.editorInit")},error:function(T){C("#"+T).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");var S=C(Q.tab).closest(".content-entry-box");var R=C(".editor-tab",S);if(R.length>0&&R[0]==C(Q.tab).parent()[0]){S.tabs("select",0)}}});if(typeof vBulletin.ckeditor.initTitleRow=="function"){vBulletin.ckeditor.initTitleRow(C(Q.tab.hash))}})}}if(typeof vBulletin.ckeditor.initTitleRow=="function"){vBulletin.ckeditor.initTitleRow(C(Q.tab.hash))}C(".content-entry-box").closest("#quick-reply-container").data("allow-ckeditor-load-on-show",true);vBulletin.hv.initHvForPostAction(C(Q.panel))}C("html").trigger("click")},select:function(P,Q){var R=[],S=C(this).tabs("length");for(var O=0;O<S;O++){if(O!=Q.index){R.push(O)}}C(window).off("error.editorInit").on("error.editorInit",function(){K.tabs("option","disabled",[]);C(this).off("error.editorInit");return true});console.log("disabling tabs..."+R);C(this).tabs("option","disabled",R);C("html").trigger("click")}});K.find("input[type=text]").off("keydown").on("keydown",function(O){if(O.which==13){O.preventDefault();return false}return true});C(".mainmenu li:has(.submenu)").on("click",function(O){C(".submenu",this).show();return false}).hover(function(){},function(O){C(".submenu",this).hide()});C(".mainmenu.textControls li").on("click",function(O){if(C(".tagCtrl",this).length==0){C("#tag-dialog").hide()}});C(".mainmenu .submenu li a").on("click",function(O){C(this).closest(".submenu").hide()});C(".follow-btn").on("click",function(O){if(!C(this).hasClass("isSubscribed")){vBulletin.subscribe(this)}else{if(C(this).hasClass("unfollow-btn")){if(C(this).hasClass("is-blog-channel")){vBulletin.leave(this)}else{vBulletin.unsubscribe(this)}}}});C(".follow-btn").on("mouseover",function(O){if(C(this).hasClass("isSubscribed")&&!C(this).hasClass("is-owner")){C(this).addClass("unfollow-btn secondary").removeClass("special");var P=vBulletin.phrase.get("unsubscribe");C(this).children(".button-text-primary").text(P)}});C(".follow-btn").on("mouseout",function(O){if(C(this).hasClass("unfollow-btn")){C(this).removeClass("unfollow-btn secondary").addClass("special");var P=vBulletin.phrase.get("following");C(this).children(".button-text-primary").text(P)}});C(".share-btn").on("click",function(O){alert("Not yet implemented");return false});C(".join-btn").on("click",function(O){if(!C(this).hasClass("has-joined")&&!C(this).hasClass("is-pending")){vBulletin.join(this)}else{if(C(this).hasClass("leave-btn")&&!C(this).hasClass("is-owner")){vBulletin.leave(this)}}});C(".join-btn").on("mouseover",function(O){if(C(this).hasClass("has-joined")&&!C(this).hasClass("is-owner")){C(this).addClass("leave-btn secondary").removeClass("special");var P=vBulletin.phrase.get("leave");C(this).children(".button-text-primary").text(P)}});C(".join-btn").on("mouseout",function(O){if(C(this).hasClass("leave-btn")&&!C(this).hasClass("is-owner")){C(this).removeClass("leave-btn secondary").addClass("special");var P=vBulletin.phrase.get("joined");C(this).children(".button-text-primary").text(P)}});C(".channel-content-widget .new-conversation-btn").off("click").on("click",function(){window.location.href=pageData.baseurl+"/new-content/"+pageData.channelid});C(".pagenav-form").submit(function(){if(Number(this.page.value)>0){location.href=this.action+"&p="+this.page.value}return false}).trigger("reset");C(".toolbar-pagenav input").off("keydown").on("keydown",function(P){var O=P.which;if(!P.shiftKey&&!P.altKey&&!P.ctrlKey&&((O>=48&&O<=57)||(O>=96&&O<=105)||O==8||O==9||O==13||O==35||O==36||O==37||O==39||O==46||O==45)){return true}return false});C(document).off("click",".list-item.deleted .manage-controls .manage").on("click",".list-item.deleted .manage-controls .manage",function(){vBulletin.inlinemod.manage_deleted_form.apply(this)});C(document).off("click",".list-item.deleted .manage-controls .show-hide").on("click",".list-item.deleted .manage-controls .show-hide",function(){var Q=C(this),P=Q.text(),O=Q.data("toggle-text");if(Q.hasClass("control-show")){Q.closest(".list-item").addClass("show-deleted-content");Q.html(O).data("toggle-text",P).removeClass("control-show")}else{Q.closest(".list-item").removeClass("show-deleted-content");Q.html(O).data("toggle-text",P).addClass("control-show")}});C(".tooltip[title]").qtip({style:{classes:"ui-tooltip-shadow ui-tooltip-light"}});C("input.datepicker").not(".hasDatePicker").datetimepicker({showOn:"both",buttonImage:pageData.baseurl+"/images/calendar-blue.png",buttonImageOnly:true,ampm:true});C(document).off("click","a.video-frame").on("click","a.video-frame",function(Q){Q.preventDefault();var P={code:this.getAttribute("data-vcode"),provider:this.getAttribute("data-vprovider")};if(this.getAttribute("data-height")){P.height=this.getAttribute("data-height")}if(this.getAttribute("data-width")){P.width=this.getAttribute("data-width")}var O=C(this);C.get(vBulletin.getAjaxBaseurl()+"/ajax/render/bbcode_video",P,function(R){if(R){O.replaceWith(R)}},"json")});if(C(".content-entry-box.content-entry-box-starter").length>0){var N=function(O){if(C(O).length>0){return new vBulletin.tagEditor.instance(O)}return null};N(".content-entry-box.content-entry-box-starter #tag-editor-text");N(".content-entry-box.content-entry-box-starter #tag-editor-poll");N(".content-entry-box.content-entry-box-starter #tag-editor-gallery");N(".content-entry-box.content-entry-box-starter #tag-editor-link");N(".content-entry-box.content-entry-box-starter #tag-editor-advanced")}vBulletin.markreadcheck();C(document).off("click","a.markchannelsread, a.navbar_mark_channels_read").on("click","a.markchannelsread, a.navbar_mark_channels_read",function(){vBulletin.markchannelsread(0,{success:function(){location.reload()},failed:function(){openAlertDialog({title:vBulletin.phrase.get("forum"),message:"Mark Channels Read failed: {0}".format(result),iconType:"error"})}});return false})}function F(){if(C(".content-entry-box").length>0){vBulletin.ckeditor.loadScripts("",{error:function(){C(".content-entry-box").addClass("no-ckeditor")}},function(){vBulletin.phrase.cachePhrases()})}else{vBulletin.phrase.cachePhrases()}}function J(K){C("body").css("cursor","wait");if(!K){window.vBulletin.loadingIndicator.show()}C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/activate-sitebuilder",data:({pageid:pageData.pageid,nodeid:pageData.nodeid}),type:"POST",dataType:"json",cache:false,complete:function(){console.log("activate-sitebuilder complete.");C("body").css("cursor","auto");if(!K){window.vBulletin.loadingIndicator.hide()}},success:function(L){console.log("activate-sitebuilder successful! result:"+JSON.stringify(L));if(L&&L.menu&&L.template){C(".edit-switch-container .switch-control").addClass("on");C("#main-navbar .main-nav").hide().html(L.menu);C("#sitebuilder-wrapper").html(L.template);C("#main-navbar .main-nav").show();C.cookie(pageData.sb_state_cookie,"1",{path:pageData.baseurl_path})}else{console.log("activating sitebuilder failed!");openAlertDialog({title:"Error",message:"Error activating SiteBuilder.<br /><br />Please try again.",iconType:"error"})}},error:function(N,M,L){console.log("activating sitebuilder failed! error:"+L);openAlertDialog({title:"Error",message:"Error activating SiteBuilder. (Error code {0})<br /><br />Please try again.".format(N.status),iconType:"error"})}})}G();C("#searchPopupControl").on("click",function(K){if(C(this).hasClass("open")){C(this).removeClass("open");C("#searchPopupContent").hide()}else{C(this).addClass("open");C("#searchPopupContent").show()}});C("html").on("click",function(K){if(C(K.target).closest("#searchForm").size()==0&&C("#searchPopupControl").hasClass("open")){C("#searchPopupControl").removeClass("open");C("#searchPopupContent").hide()}});C("#btnAdvSearch").off("click").on("click",function(L){L.preventDefault();C(this).data("clicked2submit",1);var K=C("#searchForm");K.attr("action",K.attr("action")+"&AdvSearch=1");C("#searchForm").submit()});C("#searchForm").off("submit.searchform").on("submit.searchform",function(O){var Q={};var M=C("#q");if(C.trim(M.val()).length>0){Q.keywords=C.trim(M.val())}else{if(!C("#btnAdvSearch").data("clicked2submit")){openAlertDialog({title:vBulletin.phrase.get("search"),message:vBulletin.phrase.get("please_provide_search_string"),iconType:"warning",onAfterClose:function(){C("#searchForm #q").focus()}});O.stopPropagation();return false}}var L=C(this).find("#searchPopupContent");var P=L.find(".searchFields_title_only");if(P.size()>0&&P.prop("checked")){Q.title_only=1}var K=L.find(".searchFields_author");if(K.size()>0&&K.prop("checked")){Q.author=[K.val()]}var N=L.find(".searchFields_channel");if(N.size()>0&&N.prop("checked")){Q.channel=[N.val()]}L.find("input[name=searchJSON]").val(JSON.stringify(Q));return true});C(".history-backbutton").off("click").on("click",function(K){history.back()});C(".popupControl[popup-body]").off("click").on("click",function(L){var M=C(this).attr("popup-body");if(!M){return false}var K=C(this).parent().find("."+M);if(!K){return false}C(K).toggleClass("hide")});var I;if(!(I=C.cookie(pageData.cookie_prefix+"np_notices_displayed"))){I=new Array()}if(!(I instanceof Array)){I=new Array(I)}C('ul.notices li[data-notice-persistent="0"]').each(function(K){I.push(C(this).attr("data-notice-id"))});if(I.length>0){C.cookie(pageData.cookie_prefix+"np_notices_displayed",I,{path:pageData.baseurl_path})}else{C.cookie(pageData.cookie_prefix+"np_notices_displayed",null,{path:pageData.baseurl_path})}C("ul.notices > li > .close").off("click").on("click",function(K){var M=C(this).closest("li"),L=M.attr("data-notice-id");C("body").css("cursor","wait");C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/notice/dismiss",data:{noticeid:L},type:"POST",datatype:"json",complete:function(){C("body").css("cursor","auto")},success:function(N){if(N&&!N.error){console.log("Notice dismissed successfully!");M.hide("slow",function(){if(C(this).parent().find(">li:visible").length==0){C(this).parent().addClass("hide")}})}},error:function(P,O,N){console.log("Notice dismissed failed! error:"+N);openAlertDialog({title:"Error",message:"Error dismissing the notice.",iconType:"error"})}})});new vBulletin.pagination({context:C(".wollist-widget"),onPageChanged:function(R,L){C("body").css("cursor","wait");var K=C(this).closest(".wollist-widget");var Q=C(".widget-content",K).attr("data-perpage"),P=C(".widget-content",K).attr("data-thispageonly"),M=C(".widget-content",K).attr("data-pagekey"),N=C(".widget-content",K).attr("data-who"),S=parseInt(C(".widget-content",K).attr("data-resolve")),O={who:N,pagenumber:R,perpage:Q};if(P=="1"){O.pagekey=M}C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/wol/fetchAll",data:O,type:"POST",dataType:"json",complete:function(U,T){console.log("wol-fetchAll complete.");C("body").css("cursor","auto")},success:function(T,X,Y){console.log("wol-fetchAll successful! result:"+JSON.stringify(T));if(T){if(!T.error){var V="",W=[],U="";for(x in T){if(T[x].wol){if(T[x].wol.params.length>0){T[x].wol.params.unshift(T[x].wol.action);W=T[x].wol.params}else{W=T[x].wol.action}}else{W="n_a"}if(T[x].host){if(S){U='<a href="#" class="resolveIpLink">'+T[x].host+"</a>"}else{U=T[x].host}}else{U=vBulletin.phrase.get("n_a")}if(T[x].location){loc='<div title="'+T[x].location+'" class="wol-location right"></div>'}else{loc=""}V+="<tr><td>"+T[x].username+"</td><td>"+vBulletin.phrase.get(W)+" "+loc+"</td><td>"+T[x].lastactivity+"</td><td>"+U+"</td></tr>"}C(".widget-content tbody",K).empty().html(V)}else{openAlertDialog({title:"Online Users",message:vBulletin.phrase.get("error_x",T.error),iconType:"warning"})}}else{openAlertDialog({title:"Online Users",message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}},error:function(V,U,T){console.log("wol-fetchAll failed! error:"+T);openAlertDialog({title:"Online Users",message:vBulletin.phrase.get("error_fetching_online_users_x",V.status),iconType:"error"})}})}});C("#frmLostpw").ajaxForm({dataType:"json",beforeSubmit:function(N,M,L){var K="";if(C.trim(C(".email",M).val())==""){K=vBulletin.phrase.get("please_enter_your_email_address")}else{if(!isValidEmailAddress(C(".email",M).val())){K=vBulletin.phrase.get("invalid_email_address")}}if(K){openAlertDialog({title:vBulletin.phrase.get("error"),message:K,iconType:"warning",onAfterClose:function(){C(".email",M).focus()}});return false}return true},success:function(L,M,N,K){if(L&&L.response&&L.response.errors){var O=[];C.each(L.response.errors,function(P,Q){if(Q[0]!="exception_trace"&&Q[0]!="errormsg"){O.push(vBulletin.phrase.get(Q))}});openAlertDialog({title:vBulletin.phrase.get("error"),message:O.join("<br />"),iconType:"warning",onAfterClose:function(){if(typeof (vBulletin.hv.reset)!="undefined"){vBulletin.hv.reset(true)}}})}else{openAlertDialog({title:vBulletin.phrase.get("forgot_password_title"),message:vBulletin.phrase.get("lostpw_email_sent"),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});C("#frmActivateuser").ajaxForm({dataType:"json",beforeSubmit:function(N,M,L){var K="",O="";if(C.trim(C(".username",M).val())==""){K=vBulletin.phrase.get("please_enter_a_username");O=".username"}else{if(C.trim(C(".activateid",M).val())==""){K=vBulletin.phrase.get("requiredfieldmissing",vBulletin.phrase.get("activation_code"));O=".activateid"}}if(K){openAlertDialog({title:vBulletin.phrase.get("error"),message:K,iconType:"warning",onAfterClose:function(){C(O,M).focus()}});return false}return true},success:function(M,O,P,L){if(M&&M.response&&M.response.errors){var Q=[];for(var K in M.response.errors){if(M.response.errors[K][0]!="exception_trace"&&M.response.errors[K][0]!="errormsg"){Q.push(vBulletin.phrase.get(M.response.errors[K]))}}openAlertDialog({title:vBulletin.phrase.get("error"),message:Q.join("<br />"),iconType:"warning",onAfterClose:function(){vBulletin.hv.reset(true)}})}else{var N=M.response.msg_params;N.unshift(M.response.msg);openAlertDialog({title:vBulletin.phrase.get("activate_your_account"),message:vBulletin.phrase.get.apply(vBulletin.phrase,N),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});C("#frmActivateemail").ajaxForm({dataType:"json",beforeSubmit:function(N,M,L){var K="",O="";if(C.trim(C(".email",M).val())==""){K=vBulletin.phrase.get("please_enter_your_email_address")}else{if(!isValidEmailAddress(C(".email",M).val())){K=vBulletin.phrase.get("invalid_email_address")}}if(K){openAlertDialog({title:vBulletin.phrase.get("error"),message:K,iconType:"warning",onAfterClose:function(){C(O,M).focus()}});return false}return true},success:function(M,O,P,L){if(M&&M.response&&M.response.errors){var Q=[];for(var K in M.response.errors){if(M.response.errors[K][0]!="exception_trace"&&M.response.errors[K][0]!="errormsg"){Q.push(vBulletin.phrase.get(M.response.errors[K]))}}openAlertDialog({title:vBulletin.phrase.get("error"),message:Q.join("<br />"),iconType:"warning",onAfterClose:function(){vBulletin.hv.reset(true)}})}else{var N=M.response.msg_params;N.unshift(M.response.msg);openAlertDialog({title:vBulletin.phrase.get("email_activation_codes"),message:vBulletin.phrase.get.apply(vBulletin.phrase,N),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});var E=C.cookie(pageData.cookie_prefix+"userstyleid");if(E){C(".stylechooser").val(E)}C(".stylechooser").change(function(){var K=C("option:selected",C(this)).val();var L=new Date();L.setDate(L.getDate()+365);C.cookie(pageData.cookie_prefix+"userstyleid",K,{path:pageData.baseurl_path,expires:L});window.location.reload()});var H=C.cookie(pageData.cookie_prefix+"languageid");if(H){C(".languagechooser").val(H)}C(".languagechooser").change(function(){var K=C("option:selected",C(this)).val();var L=new Date();L.setDate(L.getDate()+365);C.cookie(pageData.cookie_prefix+"languageid",K,{path:pageData.baseurl_path,expires:L});window.location.reload()});if(vBulletin.options.get("crontab")){if(pageData.nextcron<=pageData.current_server_datetime){vBulletin.loadingIndicator.suppressNextAjaxIndicator();C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/cron/run",type:"POST",dataType:"json",success:function(K){if(K&&K.errors){console.warn("Cron error: "+vBulletin.phrase.get(K.errors[0][0]))}console.warn("Cron run successfully.")},error:function(M,L,K){console.warn("Error when running cron: {0}".format(K))}})}else{}}C("a.navbar_profile").on("click",function(){if(pageData.userid=="0"){C("#lnkLoginSignupMenu").click();return false}});F()},1)})(jQuery);function JShtmlEncode(B){var A="";if(B&&typeof B!=="undefined"&&B.length>0){A=$("<div/>").text(B).html()}return A}function showPhotoDialog(A){$("#gallery_dialog"+A).dialog()}function displayPositionedPopup(E){if(E.dialog){E.dialog=$(E.dialog)}if(!E.dialog||E.dialog.size()==0){E.dialog=$("<div />").html('<h3><label class="left">'+E.title+'</label><label class="right btnClose">x</label><div class="clear"></div></h3><div class="content"></div><div class="arrow"><div class="arrowOver"></div></div>').addClass("custom-dialog").css("z-index",1100).appendTo(document.body);if(E.className){E.dialog.addClass(E.className)}if(E.width){E.dialog.css("width",E.width)}if(typeof E.id=="string"){E.dialog.prop("id",E.id)}E.dialog.find(".btnClose").on("click",function(){E.dialog.fadeOut();return false})}if(E.content){if(typeof E.content=="string"){E.dialog.find(".content").html(E.content);if(typeof E.loaded=="function"){E.loaded(E)}E.dialog.show()}else{if(typeof E.content=="function"){E.dialog.find(".content").html('<span class="text">Loading...</span><span class="loading-icon"><img width="16" height="16" alt="" src="'+pageData.baseurl+'/images/ajax-loader.gif"></span>');E.dialog.show();window.setTimeout(function(){E.content(E)},1)}}}var A=$("#wrapper").offset();var D=$("#wrapper").outerWidth();var N=$(E.target).offset();var K=$(E.target).outerWidth();var I=$(E.target).outerHeight();var F=E.dialog.outerWidth();var M=E.dialog.find(".arrow");var H=M.outerWidth();var L=M.outerHeight();var C=F-M.position().left-H;var B=N.left+(K/2)-F+C+(H/2)-2;if(B<A.left){var G=parseInt(M.css("right"));M.css("left",G);C=G+H;B=N.left+(K/2)-C+(H/2)-2}var J=N.top+I+L;E.dialog.css({left:B,top:J});if(typeof E.ready=="function"){E.ready(E)}}function closePhotoDialog(A){$("#gallery_dialog"+A).close()}function isValidEmailAddress(B){var A=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return A.test(B)}function str_repeat(D,C){var B="";for(var A=0;A<C;A++){B=B.concat(D)}return B}window.vBulletin.htmlEntities=function(A){return String(A).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'"'/g,"&quot;")};window.vBulletin.htmlEntities_decode=function(A){return String(A).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')};window.vBulletin.loadedIds=window.vBulletin.loadedIds||[];window.vBulletin.isAlreadyLoaded=function(A){if($.inArray(A,window.vBulletin.loadedIds)!=-1){return true}window.vBulletin.loadedIds.push(A)};;

/*
* qTip2 - Pretty powerful tooltips
* http://craigsworks.com/projects/qtip2/
*
* Version: nightly
* Copyright 2009-2010 Craig Michael Thompson - http://craigsworks.com
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: Mon Dec 19 15:43:28.0000000000 2011
*//*jslint browser: true, onevar: true, undef: true, nomen: true, bitwise: true, regexp: true, newcap: true, immed: true, strict: true *//*global window: false, jQuery: false, console: false */(function(a,b,c){function E(b){var c=this,d=b.elements,e=d.tooltip,f=".bgiframe-"+b.id;a.extend(c,{init:function(){d.bgiframe=a('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'),d.bgiframe.appendTo(e),e.bind("tooltipmove"+f,c.adjust)},adjust:function(){var a=b.get("dimensions"),c=b.plugins.tip,f=d.tip,g,h;h=parseInt(e.css("border-left-width"),10)||0,h={left:-h,top:-h},c&&f&&(g=c.corner.precedance==="x"?["width","left"]:["height","top"],h[g[1]]-=f[g[0]]()),d.bgiframe.css(h).css(a)},destroy:function(){d.bgiframe.remove(),e.unbind(f)}}),c.init()}function D(c){var f=this,g=c.options.show.modal,i=c.elements,j=i.tooltip,k="#qtip-overlay",l=".qtipmodal",m=l+c.id,o="is-modal-qtip",q=a(document.body),r;c.checks.modal={"^show.modal.(on|blur)$":function(){f.init(),i.overlay.toggle(j.is(":visible"))}},a.extend(f,{init:function(){if(!g.on)return f;r=f.create(),j.attr(o,d).css("z-index",h.modal.zindex+a(n+"["+o+"]").length).unbind(l).unbind(m).bind("tooltipshow"+l+" tooltiphide"+l,function(b,c,d){var e=b.originalEvent;if(e&&b.type==="tooltiphide"&&/mouse(leave|enter)/.test(e.type)&&a(e.relatedTarget).closest(r[0]).length)try{b.preventDefault()}catch(g){}else(!e||e&&!e.solo)&&f[b.type.replace("tooltip","")](b,d)}).bind("tooltipfocus"+l,function(b){if(!b.isDefaultPrevented()){var c=a(n).filter("["+o+"]"),d=h.modal.zindex+c.length,e=parseInt(j[0].style.zIndex,10);r[0].style.zIndex=d-1,c.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),c.end().filter("."+p).qtip("blur",b.originalEvent),j.addClass(p)[0].style.zIndex=d;try{b.preventDefault()}catch(f){}}}).bind("tooltiphide"+l,function(b){a("["+o+"]").filter(":visible").not(j).last().qtip("focus",b)}),g.escape&&a(b).unbind(m).bind("keydown"+m,function(a){a.keyCode===27&&j.hasClass(p)&&c.hide(a)}),g.blur&&i.overlay.unbind(m).bind("click"+m,function(a){j.hasClass(p)&&c.hide(a)});return f},create:function(){var c=a(k);if(c.length)return i.overlay=c.insertAfter(a(n).last());r=i.overlay=a("<div />",{id:k.substr(1),html:"<div></div>",mousedown:function(){return e}}).insertAfter(a(n).last()),a(b).unbind(l).bind("resize"+l,function(){r.css({height:a(b).height(),width:a(b).width()})}).triggerHandler("resize");return r},toggle:function(b,c,h){if(b&&b.isDefaultPrevented())return f;var i=g.effect,k=c?"show":"hide",l=r.is(":visible"),p=a("["+o+"]").filter(":visible").not(j),s;r||(r=f.create());if(r.is(":animated")&&l===c||!c&&p.length)return f;c?(r.css({left:0,top:0}),r.toggleClass("blurs",g.blur),q.bind("focusin"+m,function(b){var c=a(b.target),d=c.closest(".qtip"),f=d.length<1?e:parseInt(d[0].style.zIndex,10)>parseInt(j[0].style.zIndex,10);!f&&a(b.target).closest(n)[0]!==j[0]&&j.find("input:visible").filter(":first").focus()})):q.undelegate("*","focusin"+m),r.stop(d,e),a.isFunction(i)?i.call(r,c):i===e?r[k]():r.fadeTo(parseInt(h,10)||90,c?1:0,function(){c||a(this).hide()}),c||r.queue(function(a){r.css({left:"",top:""}),a()});return f},show:function(a,b){return f.toggle(a,d,b)},hide:function(a,b){return f.toggle(a,e,b)},destroy:function(){var d=r;d&&(d=a("["+o+"]").not(j).length<1,d?(i.overlay.remove(),a(b).unbind(l)):i.overlay.unbind(l+c.id),q.undelegate("*","focusin"+m));return j.removeAttr(o).unbind(l)}}),f.init()}function C(b,g){function w(a){var b=a.precedance==="y",c=n[b?"width":"height"],d=n[b?"height":"width"],e=a.string().indexOf("center")>-1,f=c*(e?.5:1),g=Math.pow,h=Math.round,i,j,k,l=Math.sqrt(g(f,2)+g(d,2)),m=[p/f*l,p/d*l];m[2]=Math.sqrt(g(m[0],2)-g(p,2)),m[3]=Math.sqrt(g(m[1],2)-g(p,2)),i=l+m[2]+m[3]+(e?0:m[0]),j=i/l,k=[h(j*d),h(j*c)];return{height:k[b?0:1],width:k[b?1:0]}}function v(b){var c=k.titlebar&&b.y==="top",d=c?k.titlebar:k.content,e=a.browser.mozilla,f=e?"-moz-":a.browser.webkit?"-webkit-":"",g=b.y+(e?"":"-")+b.x,h=f+(e?"border-radius-"+g:"border-"+g+"-radius");return parseInt(d.css(h),10)||parseInt(l.css(h),10)||0}function u(a,b,c){b=b?b:a[a.precedance];var d=l.hasClass(r),e=k.titlebar&&a.y==="top",f=e?k.titlebar:k.content,g="border-"+b+"-width",h;l.addClass(r),h=parseInt(f.css(g),10),h=(c?h||parseInt(l.css(g),10):h)||0,l.toggleClass(r,d);return h}function t(a,f,g,h){if(k.tip){var l=i.corner.clone(),n=g.adjusted,o=b.options.position.adjust.method.split(" "),p=o[0],q=o[1]||o[0],r={left:e,top:e,x:0,y:0},s,t={},u;i.corner.fixed!==d&&(p==="shift"&&l.precedance==="x"&&n.left&&l.y!=="center"?l.precedance=l.precedance==="x"?"y":"x":p==="flip"&&n.left&&(l.x=l.x==="center"?n.left>0?"left":"right":l.x==="left"?"right":"left"),q==="shift"&&l.precedance==="y"&&n.top&&l.x!=="center"?l.precedance=l.precedance==="y"?"x":"y":q==="flip"&&n.top&&(l.y=l.y==="center"?n.top>0?"top":"bottom":l.y==="top"?"bottom":"top"),l.string()!==m.corner.string()&&(m.top!==n.top||m.left!==n.left)&&i.update(l,e)),s=i.position(l,n),s.right!==c&&(s.left=-s.right),s.bottom!==c&&(s.top=-s.bottom),s.user=Math.max(0,j.offset);if(r.left=p==="shift"&&!!n.left)l.x==="center"?t["margin-left"]=r.x=s["margin-left"]-n.left:(u=s.right!==c?[n.left,-s.left]:[-n.left,s.left],(r.x=Math.max(u[0],u[1]))>u[0]&&(g.left-=n.left,r.left=e),t[s.right!==c?"right":"left"]=r.x);if(r.top=q==="shift"&&!!n.top)l.y==="center"?t["margin-top"]=r.y=s["margin-top"]-n.top:(u=s.bottom!==c?[n.top,-s.top]:[-n.top,s.top],(r.y=Math.max(u[0],u[1]))>u[0]&&(g.top-=n.top,r.top=e),t[s.bottom!==c?"bottom":"top"]=r.y);k.tip.css(t).toggle(!(r.x&&r.y||l.x==="center"&&r.y||l.y==="center"&&r.x)),g.left-=s.left.charAt?s.user:p!=="shift"||r.top||!r.left&&!r.top?s.left:0,g.top-=s.top.charAt?s.user:q!=="shift"||r.left||!r.left&&!r.top?s.top:0,m.left=n.left,m.top=n.top,m.corner=l.clone()}}var i=this,j=b.options.style.tip,k=b.elements,l=k.tooltip,m={top:0,left:0},n={width:j.width,height:j.height},o={},p=j.border||0,q=".qtip-tip",s=!!(a("<canvas />")[0]||{}).getContext;i.mimic=i.corner=f,i.border=p,i.offset=j.offset,i.size=n,b.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){i.init()||i.destroy(),b.reposition()},"^style.tip.(height|width)$":function(){n={width:j.width,height:j.height},i.create(),i.update(),b.reposition()},"^content.title.text|style.(classes|widget)$":function(){k.tip&&i.update()}},a.extend(i,{init:function(){var b=i.detectCorner()&&(s||a.browser.msie);b&&(i.create(),i.update(),l.unbind(q).bind("tooltipmove"+q,t));return b},detectCorner:function(){var a=j.corner,c=b.options.position,f=c.at,g=c.my.string?c.my.string():c.my;if(a===e||g===e&&f===e)return e;a===d?i.corner=new h.Corner(g):a.string||(i.corner=new h.Corner(a),i.corner.fixed=d);return i.corner.string()!=="centercenter"},detectColours:function(c){var d,e,f,g=k.tip.css("cssText",""),h=c||i.corner,m=h[h.precedance],p="border-"+m+"-color",q="border"+m.charAt(0)+m.substr(1)+"Color",s=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,t="background-color",u="transparent",v=" !important",w=a(document.body).css("color"),x=b.elements.content.css("color"),y=k.titlebar&&(h.y==="top"||h.y==="center"&&g.position().top+n.height/2+j.offset<k.titlebar.outerHeight(1)),z=y?k.titlebar:k.content;l.addClass(r),o.fill=e=g.css(t),o.border=f=g[0].style[q]||g.css(p)||l.css(p);if(!e||s.test(e))o.fill=z.css(t)||u,s.test(o.fill)&&(o.fill=l.css(t)||e);if(!f||s.test(f)||f===w)o.border=z.css(p)||u,s.test(o.border)&&(o.border=f);a("*",g).add(g).css("cssText",t+":"+u+v+";border:0"+v+";"),l.removeClass(r)},create:function(){var b=n.width,c=n.height,d;k.tip&&k.tip.remove(),k.tip=a("<div />",{"class":"ui-tooltip-tip"}).css({width:b,height:c}).prependTo(l),s?a("<canvas />").appendTo(k.tip)[0].getContext("2d").save():(d='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>',k.tip.html(d+d),a("*",k.tip).bind("click mousedown",function(a){a.stopPropagation()}))},update:function(b,c){var g=k.tip,l=g.children(),q=n.width,r=n.height,t="px solid ",v="px dashed transparent",x=j.mimic,y=Math.round,z,A,C,D,E;b||(b=m.corner||i.corner),x===e?x=b:(x=new h.Corner(x),x.precedance=b.precedance,x.x==="inherit"?x.x=b.x:x.y==="inherit"?x.y=b.y:x.x===x.y&&(x[b.precedance]=b[b.precedance])),z=x.precedance,i.detectColours(b),o.border!=="transparent"&&o.border!=="#123456"?(p=u(b,f,d),j.border===0&&p>0&&(o.fill=o.border),i.border=p=j.border!==d?j.border:p):i.border=p=0,C=B(x,q,r),i.size=E=w(b),g.css(E),b.precedance==="y"?D=[y(x.x==="left"?p:x.x==="right"?E.width-q-p:(E.width-q)/2),y(x.y==="top"?E.height-r:0)]:D=[y(x.x==="left"?E.width-q:0),y(x.y==="top"?p:x.y==="bottom"?E.height-r-p:(E.height-r)/2)],s?(l.attr(E),A=l[0].getContext("2d"),A.restore(),A.save(),A.clearRect(0,0,3e3,3e3),A.translate(D[0],D[1]),A.beginPath(),A.moveTo(C[0][0],C[0][1]),A.lineTo(C[1][0],C[1][1]),A.lineTo(C[2][0],C[2][1]),A.closePath(),A.fillStyle=o.fill,A.strokeStyle=o.border,A.lineWidth=p*2,A.lineJoin="miter",A.miterLimit=100,p&&A.stroke(),A.fill()):(C="m"+C[0][0]+","+C[0][1]+" l"+C[1][0]+","+C[1][1]+" "+C[2][0]+","+C[2][1]+" xe",D[2]=p&&/^(r|b)/i.test(b.string())?parseFloat(a.browser.version,10)===8?2:1:0,l.css({antialias:""+(x.string().indexOf("center")>-1),left:D[0]-D[2]*Number(z==="x"),top:D[1]-D[2]*Number(z==="y"),width:q+p,height:r+p}).each(function(b){var c=a(this);c[c.prop?"prop":"attr"]({coordsize:q+p+" "+(r+p),path:C,fillcolor:o.fill,filled:!!b,stroked:!b}).css({display:p||b?"block":"none"}),!b&&c.html()===""&&c.html('<vml:stroke weight="'+p*2+'px" color="'+o.border+'" miterlimit="1000" joinstyle="miter"  style="behavior:url(#default#VML); display:inline-block;" />')})),c!==e&&i.position(b)},position:function(b){var c=k.tip,f={},g=Math.max(0,j.offset),h,l,m;if(j.corner===e||!c)return e;b=b||i.corner,h=b.precedance,l=w(b),m=[b.x,b.y],h==="x"&&m.reverse(),a.each(m,function(a,c){var e,i;c==="center"?(e=h==="y"?"left":"top",f[e]="50%",f["margin-"+e]=-Math.round(l[h==="y"?"width":"height"]/2)+g):(e=u(b,c,d),i=v(b),f[c]=a?p?u(b,c):0:g+(i>e?i:0))}),f[b[h]]-=l[h==="x"?"width":"height"],c.css({top:"",bottom:"",left:"",right:"",margin:""}).css(f);return f},destroy:function(){k.tip&&k.tip.remove(),l.unbind(q)}}),m.corner=new h.Corner(i.init())}function B(a,b,c){var d=Math.ceil(b/2),e=Math.ceil(c/2),f={bottomright:[[0,0],[b,c],[b,0]],bottomleft:[[0,0],[b,0],[0,c]],topright:[[0,c],[b,0],[b,c]],topleft:[[0,0],[0,c],[b,c]],topcenter:[[0,c],[d,0],[b,c]],bottomcenter:[[0,0],[b,0],[d,c]],rightcenter:[[0,0],[b,e],[0,c]],leftcenter:[[b,0],[b,c],[0,e]]};f.lefttop=f.bottomright,f.righttop=f.bottomleft,f.leftbottom=f.topright,f.rightbottom=f.topleft;return f[a.string()]}function A(b){var c=this,f=b.elements.tooltip,g=b.options.content.ajax,h=".qtip-ajax",i=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,j=d;b.checks.ajax={"^content.ajax":function(a,b,d){b==="ajax"&&(g=d),b==="once"?c.init():g&&g.url?c.load():f.unbind(h)}},a.extend(c,{init:function(){g&&g.url&&f.unbind(h)[g.once?"one":"bind"]("tooltipshow"+h,c.load);return c},load:function(d,f){function p(a,c,d){a.status!==0&&b.set("content.text",c+": "+d)}function o(c){k&&(c=a("<div/>").append(c.replace(i,"")).find(k)),b.set("content.text",c)}function n(){l&&(b.show(d.originalEvent),f=e),a.isFunction(g.complete)&&g.complete.apply(this,arguments)}var h=g.url.indexOf(" "),j=g.url,k,l=g.once&&!g.loading&&f;if(l)try{d.preventDefault()}catch(m){}else if(d&&d.isDefaultPrevented())return c;h>-1&&(k=j.substr(h),j=j.substr(0,h)),a.ajax(a.extend({success:o,error:p,context:b},g,{url:j,complete:n}))}}),c.init()}function z(b,c){var i,j,k,l,m,n=a(this),o=a(document.body),p=this===document?o:n,q=n.metadata?n.metadata(c.metadata):f,r=c.metadata.type==="html5"&&q?q[c.metadata.name]:f,s=n.data(c.metadata.name||"qtipopts");try{s=typeof s==="string"?(new Function("return "+s))():s}catch(t){w("Unable to parse HTML5 attribute data: "+s)}l=a.extend(d,{},g.defaults,c,typeof s==="object"?x(s):f,x(r||q)),j=l.position,l.id=b;if("boolean"===typeof l.content.text){k=n.attr(l.content.attr);if(l.content.attr!==e&&k)l.content.text=k;else{w("Unable to locate content for tooltip! Aborting render of tooltip on element: ",n);return e}}j.container.length||(j.container=o),j.target===e&&(j.target=p),l.show.target===e&&(l.show.target=p),l.show.solo===d&&(l.show.solo=o),l.hide.target===e&&(l.hide.target=p),l.position.viewport===d&&(l.position.viewport=j.container),j.at=new h.Corner(j.at),j.my=new h.Corner(j.my);if(a.data(this,"qtip"))if(l.overwrite)n.qtip("destroy");else if(l.overwrite===e)return e;l.suppress&&(m=a.attr(this,"title"))&&a(this).removeAttr("title").attr(u,m),i=new y(n,l,b,!!k),a.data(this,"qtip",i),n.bind("remove.qtip-"+b,function(){i.destroy()});return i}function y(s,t,w,y){function R(){var c=[t.show.target[0],t.hide.target[0],z.rendered&&G.tooltip[0],t.position.container[0],t.position.viewport[0],b,document];z.rendered?a([]).pushStack(a.grep(c,function(a){return typeof a==="object"})).unbind(F):t.show.target.unbind(F+"-create")}function Q(){function p(a){E.is(":visible")&&z.reposition(a)}function o(a){if(E.hasClass(m))return e;clearTimeout(z.timers.inactive),z.timers.inactive=setTimeout(function(){z.hide(a)},t.hide.inactive)}function l(b){if(E.hasClass(m)||C||D)return e;var d=a(b.relatedTarget||b.target),g=d.closest(n)[0]===E[0],h=d[0]===f.show[0];clearTimeout(z.timers.show),clearTimeout(z.timers.hide);if(c.target==="mouse"&&g||t.hide.fixed&&(/mouse(out|leave|move)/.test(b.type)&&(g||h)))try{b.preventDefault(),b.stopImmediatePropagation()}catch(i){}else t.hide.delay>0?z.timers.hide=setTimeout(function(){z.hide(b)},t.hide.delay):z.hide(b)}function k(a){if(E.hasClass(m))return e;clearTimeout(z.timers.show),clearTimeout(z.timers.hide);var b=function(){z.toggle(d,a)};t.show.delay>0?z.timers.show=setTimeout(b,t.show.delay):b()}var c=t.position,f={show:t.show.target,hide:t.hide.target,viewport:a(c.viewport),document:a(document),body:a(document.body),window:a(b)},h={show:a.trim(""+t.show.event).split(" "),hide:a.trim(""+t.hide.event).split(" ")},j=a.browser.msie&&parseInt(a.browser.version,10)===6;E.bind("mouseenter"+F+" mouseleave"+F,function(a){var b=a.type==="mouseenter";b&&z.focus(a),E.toggleClass(q,b)}),t.hide.fixed&&(f.hide=f.hide.add(E),E.bind("mouseover"+F,function(){E.hasClass(m)||clearTimeout(z.timers.hide)})),/mouse(out|leave)/i.test(t.hide.event)?t.hide.leave==="window"&&f.window.bind("mouseout"+F+" blur"+F,function(a){/select|option/.test(a.target)&&!a.relatedTarget&&z.hide(a)}):/mouse(over|enter)/i.test(t.show.event)&&f.hide.bind("mouseleave"+F,function(a){clearTimeout(z.timers.show)}),(""+t.hide.event).indexOf("unfocus")>-1&&f.body.bind("mousedown"+F,function(b){var c=a(b.target),d=!E.hasClass(m)&&E.is(":visible");c[0]!==E[0]&&c.parents(n).length===0&&c.add(s).length>1&&!c.attr("disabled")&&z.hide(b)}),"number"===typeof t.hide.inactive&&(f.show.bind("qtip-"+w+"-inactive",o),a.each(g.inactiveEvents,function(a,b){f.hide.add(G.tooltip).bind(b+F+"-inactive",o)})),a.each(h.hide,function(b,c){var d=a.inArray(c,h.show),e=a(f.hide);d>-1&&e.add(f.show).length===e.length||c==="unfocus"?(f.show.bind(c+F,function(a){E.is(":visible")?l(a):k(a)}),delete h.show[d]):f.hide.bind(c+F,l)}),a.each(h.show,function(a,b){f.show.bind(b+F,k)}),"number"===typeof t.hide.distance&&f.show.add(E).bind("mousemove"+F,function(a){var b=H.origin||{},c=t.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&z.hide(a)}),c.target==="mouse"&&(f.show.bind("mousemove"+F,function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),c.adjust.mouse&&(t.hide.event&&E.bind("mouseleave"+F,function(a){(a.relatedTarget||a.target)!==f.show[0]&&z.hide(a)}),f.document.bind("mousemove"+F,function(a){!E.hasClass(m)&&E.is(":visible")&&z.reposition(a||i)}))),(c.adjust.resize||f.viewport.length)&&(a.event.special.resize?f.viewport:f.window).bind("resize"+F,p),(f.viewport.length||j&&E.css("position")==="fixed")&&f.viewport.bind("scroll"+F,p)}function P(b,d){function g(b){function i(c){c&&(delete h[c.src],clearTimeout(z.timers.img[c.src]),a(c).unbind(F)),a.isEmptyObject(h)&&(z.redraw(),d!==e&&z.reposition(H.event),b())}var g,h={};if((g=f.find("img:not([height]):not([width])")).length===0)return i();g.each(function(b,d){if(h[d.src]===c){var e=0,f=3;(function g(){if(d.height||d.width||e>f)return i(d);e+=1,z.timers.img[d.src]=setTimeout(g,700)})(),a(d).bind("error"+F+" load"+F,function(){i(this)}),h[d.src]=d}})}var f=G.content;if(!z.rendered||!b)return e;a.isFunction(b)&&(b=b.call(s,H.event,z)||""),b.jquery&&b.length>0?f.empty().append(b.css({display:"block"})):f.html(b),z.rendered<0?E.queue("fx",g):(D=0,g(a.noop));return z}function O(b,c){var d=G.title;if(!z.rendered||!b)return e;a.isFunction(b)&&(b=b.call(s,H.event,z));if(b===e)return K(e);b.jquery&&b.length>0?d.empty().append(b.css({display:"block"})):d.html(b),z.redraw(),c!==e&&z.rendered&&E.is(":visible")&&z.reposition(H.event)}function N(a){var b=G.button,c=G.title;if(!z.rendered)return e;a?(c||M(),L()):b.remove()}function M(){var b=B+"-title";G.titlebar&&K(),G.titlebar=a("<div />",{"class":k+"-titlebar "+(t.style.widget?"ui-widget-header":"")}).append(G.title=a("<div />",{id:b,"class":k+"-title","aria-atomic":d})).insertBefore(G.content).delegate(".ui-tooltip-close","mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus",b.type.substr(-4)==="down")}).delegate(".ui-tooltip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover",b.type==="mouseover")}),t.content.title.button?L():z.rendered&&z.redraw()}function L(){var b=t.content.title.button,c=typeof b==="string",d=c?b:"Close tooltip";G.button&&G.button.remove(),b.jquery?G.button=b:G.button=a("<a />",{"class":"ui-state-default ui-tooltip-close "+(t.style.widget?"":k+"-icon"),title:d,"aria-label":d}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),G.button.appendTo(G.titlebar).attr("role","button").click(function(a){E.hasClass(m)||z.hide(a);return e}),z.redraw()}function K(a){G.title&&(G.titlebar.remove(),G.titlebar=G.title=G.button=f,a!==e&&z.reposition())}function J(){var a=t.style.widget;E.toggleClass(l,a).toggleClass(o,t.style["default"]&&!a),G.content.toggleClass(l+"-content",a),G.titlebar&&G.titlebar.toggleClass(l+"-header",a),G.button&&G.button.toggleClass(k+"-icon",!a)}function I(a){var b=0,c,d=t,e=a.split(".");while(d=d[e[b++]])b<e.length&&(c=d);return[c||t,e.pop()]}var z=this,A=document.body,B=k+"-"+w,C=0,D=0,E=a(),F=".qtip-"+w,G,H;z.id=w,z.rendered=e,z.elements=G={target:s},z.timers={img:{}},z.options=t,z.checks={},z.plugins={},z.cache=H={event:{},target:a(),disabled:e,attr:y},z.checks.builtin={"^id$":function(b,c,f){var h=f===d?g.nextid:f,i=k+"-"+h;h!==e&&h.length>0&&!a("#"+i).length&&(E[0].id=i,G.content[0].id=i+"-content",G.title[0].id=i+"-title")},"^content.text$":function(a,b,c){P(c)},"^content.title.text$":function(a,b,c){if(!c)return K();!G.title&&c&&M(),O(c)},"^content.title.button$":function(a,b,c){N(c)},"^position.(my|at)$":function(a,b,c){"string"===typeof c&&(a[b]=new h.Corner(c))},"^position.container$":function(a,b,c){z.rendered&&E.appendTo(c)},"^show.ready$":function(){z.rendered?z.toggle(d):z.render(1)},"^style.classes$":function(a,b,c){E.attr("class",k+" qtip ui-helper-reset "+c)},"^style.widget|content.title":J,"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){E[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=t.position;E.attr("tracking",a.target==="mouse"&&a.adjust.mouse),R(),Q()}},a.extend(z,{render:function(b){if(z.rendered)return z;var c=t.content.text,f=t.content.title.text,g=t.position,i=a.Event("tooltiprender");a.attr(s[0],"aria-describedby",B),E=G.tooltip=a("<div/>",{id:B,"class":k+" qtip ui-helper-reset "+o+" "+t.style.classes+" "+k+"-pos-"+t.position.my.abbrev(),width:t.style.width||"",height:t.style.height||"",tracking:g.target==="mouse"&&g.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":e,"aria-describedby":B+"-content","aria-hidden":d}).toggleClass(m,H.disabled).data("qtip",z).appendTo(t.position.container).append(G.content=a("<div />",{"class":k+"-content",id:B+"-content","aria-atomic":d})),z.rendered=-1,C=D=1,f&&(M(),a.isFunction(f)||O(f,e)),a.isFunction(c)||P(c,e),z.rendered=d,J(),a.each(t.events,function(b,c){a.isFunction(c)&&E.bind(b==="toggle"?"tooltipshow tooltiphide":"tooltip"+b,c)}),a.each(h,function(){this.initialize==="render"&&this(z)}),Q(),E.queue("fx",function(a){i.originalEvent=H.event,E.trigger(i,[z]),C=D=0,z.redraw(),(t.show.ready||b)&&z.toggle(d,H.event,e),a()});return z},get:function(a){var b,c;switch(a.toLowerCase()){case"dimensions":b={height:E.outerHeight(),width:E.outerWidth()};break;case"offset":b=h.offset(E,t.position.container);break;default:c=I(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(b,c){function m(a,b){var c,d,e;for(c in k)for(d in k[c])if(e=(new RegExp(d,"i")).exec(a))b.push(e),k[c][d].apply(z,b)}var g=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,h=/^content\.(title|attr)|style/i,i=e,j=e,k=z.checks,l;"string"===typeof b?(l=b,b={},b[l]=c):b=a.extend(d,{},b),a.each(b,function(c,d){var e=I(c.toLowerCase()),f;f=e[0][e[1]],e[0][e[1]]="object"===typeof d&&d.nodeType?a(d):d,b[c]=[e[0],e[1],d,f],i=g.test(c)||i,j=h.test(c)||j}),x(t),C=D=1,a.each(b,m),C=D=0,E.is(":visible")&&z.rendered&&(i&&z.reposition(t.position.target==="mouse"?f:H.event),j&&z.redraw());return z},toggle:function(b,c){function q(){b?(a.browser.msie&&E[0].style.removeAttribute("filter"),E.css("overflow",""),"string"===typeof h.autofocus&&a(h.autofocus,E).focus(),p=a.Event("tooltipvisible"),p.originalEvent=c?H.event:f,E.trigger(p,[z]),h.target.trigger("qtip-"+w+"-inactive")):E.css({display:"",visibility:"",opacity:"",left:"",top:""})}if(!z.rendered)return b?z.render(1):z;var g=b?"show":"hide",h=t[g],j=E.is(":visible"),k=!c||t[g].target.length<2||H.target[0]===c.target,l=t.position,m=t.content,o,p;(typeof b).search("boolean|number")&&(b=!j);if(!E.is(":animated")&&j===b&&k)return z;if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(H.event.type)&&c.target===t.show.target[0]&&E.has(c.relatedTarget).length)return z;H.event=a.extend({},c)}p=a.Event("tooltip"+g),p.originalEvent=c?H.event:f,E.trigger(p,[z,90]);if(p.isDefaultPrevented())return z;a.attr(E[0],"aria-hidden",!b),b?(H.origin=a.extend({},i),z.focus(c),a.isFunction(m.text)&&P(m.text,e),a.isFunction(m.title.text)&&O(m.title.text,e),!v&&l.target==="mouse"&&l.adjust.mouse&&(a(document).bind("mousemove.qtip",function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),v=d),z.reposition(c,arguments[2]),(p.solo=!!h.solo)&&a(n,h.solo).not(E).qtip("hide",p)):(clearTimeout(z.timers.show),delete H.origin,v&&!a(n+'[tracking="true"]:visible',h.solo).not(E).length&&(a(document).unbind("mousemove.qtip"),v=e),z.blur(c)),k&&E.stop(0,1),h.effect===e?(E[g](),q.call(E)):a.isFunction(h.effect)?(h.effect.call(E,z),E.queue("fx",function(a){q(),a()})):E.fadeTo(90,b?1:0,q),b&&h.target.trigger("qtip-"+w+"-inactive");return z},show:function(a){return z.toggle(d,a)},hide:function(a){return z.toggle(e,a)},focus:function(b){if(!z.rendered)return z;var c=a(n),d=parseInt(E[0].style.zIndex,10),e=g.zindex+c.length,f=a.extend({},b),h,i;E.hasClass(p)||(i=a.Event("tooltipfocus"),i.originalEvent=f,E.trigger(i,[z,e]),i.isDefaultPrevented()||(d!==e&&(c.each(function(){this.style.zIndex>d&&(this.style.zIndex=this.style.zIndex-1)}),c.filter("."+p).qtip("blur",f)),E.addClass(p)[0].style.zIndex=e));return z},blur:function(b){var c=a.extend({},b),d;E.removeClass(p),d=a.Event("tooltipblur"),d.originalEvent=c,E.trigger(d,[z]);return z},reposition:function(c,d){if(!z.rendered||C)return z;C=1;var f=t.position.target,g=t.position,j=g.my,l=g.at,m=g.adjust,n=m.method.split(" "),o=E.outerWidth(),p=E.outerHeight(),q=0,r=0,s=a.Event("tooltipmove"),u=E.css("position")==="fixed",v=g.viewport,w={left:0,top:0},x=g.container,y=e,B=z.plugins.tip,D={horizontal:n[0],vertical:n[1]=n[1]||n[0],enabled:v.jquery&&f[0]!==b&&f[0]!==A&&m.method!=="none",left:function(a){var b=D.horizontal==="shift",c=-x.offset.left+v.offset.left+v.scrollLeft,d=j.x==="left"?o:j.x==="right"?-o:-o/2,e=l.x==="left"?q:l.x==="right"?-q:-q/2,f=B&&B.size?B.size.width||0:0,g=B&&B.corner&&B.corner.precedance==="x"&&!b?f:0,h=c-a+g,i=a+o-v.width-c+g,k=d-(j.precedance==="x"||j.x===j.y?e:0),n=j.x==="center";b?(g=B&&B.corner&&B.corner.precedance==="y"?f:0,k=(j.x==="left"?1:-1)*d-g,w.left+=h>0?h:i>0?-i:0,w.left=Math.max(-x.offset.left+v.offset.left+(g&&B.corner.x==="center"?B.offset:0),a-k,Math.min(Math.max(-x.offset.left+v.offset.left+v.width,a+k),w.left))):(h>0&&(j.x!=="left"||i>0)?w.left-=k:i>0&&(j.x!=="right"||h>0)&&(w.left-=n?-k:k),w.left!==a&&n&&(w.left-=m.x),w.left<c&&-w.left>i&&(w.left=a));return w.left-a},top:function(a){var b=D.vertical==="shift",c=-x.offset.top+v.offset.top+v.scrollTop,d=j.y==="top"?p:j.y==="bottom"?-p:-p/2,e=l.y==="top"?r:l.y==="bottom"?-r:-r/2,f=B&&B.size?B.size.height||0:0,g=B&&B.corner&&B.corner.precedance==="y"&&!b?f:0,h=c-a+g,i=a+p-v.height-c+g,k=d-(j.precedance==="y"||j.x===j.y?e:0),n=j.y==="center";b?(g=B&&B.corner&&B.corner.precedance==="x"?f:0,k=(j.y==="top"?1:-1)*d-g,w.top+=h>0?h:i>0?-i:0,w.top=Math.max(-x.offset.top+v.offset.top+(g&&B.corner.x==="center"?B.offset:0),a-k,Math.min(Math.max(-x.offset.top+v.offset.top+v.height,a+k),w.top))):(h>0&&(j.y!=="top"||i>0)?w.top-=k:i>0&&(j.y!=="bottom"||h>0)&&(w.top-=n?-k:k),w.top!==a&&n&&(w.top-=m.y),w.top<0&&-w.top>i&&(w.top=a));return w.top-a}},F;if(a.isArray(f)&&f.length===2)l={x:"left",y:"top"},w={left:f[0],top:f[1]};else if(f==="mouse"&&(c&&c.pageX||H.event.pageX))l={x:"left",y:"top"},c=(c&&(c.type==="resize"||c.type==="scroll")?H.event:c&&c.pageX&&c.type==="mousemove"?c:i&&i.pageX&&(m.mouse||!c||!c.pageX)?{pageX:i.pageX,pageY:i.pageY}:!m.mouse&&H.origin&&H.origin.pageX?H.origin:c)||c||H.event||i||{},w={top:c.pageY,left:c.pageX};else{f==="event"?c&&c.target&&c.type!=="scroll"&&c.type!=="resize"?f=H.target=a(c.target):f=H.target:H.target=a(f),f=a(f).eq(0);if(f.length===0)return z;f[0]===document||f[0]===b?(q=h.iOS?b.innerWidth:f.width(),r=h.iOS?b.innerHeight:f.height(),f[0]===b&&(w={top:u||h.iOS?(v||f).scrollTop():0,left:u||h.iOS?(v||f).scrollLeft():0})):f.is("area")&&h.imagemap?w=h.imagemap(f,l,D.enabled?n:e):f[0].namespaceURI==="http://www.w3.org/2000/svg"&&h.svg?w=h.svg(f,l):(q=f.outerWidth(),r=f.outerHeight(),w=h.offset(f,x)),w.offset&&(q=w.width,r=w.height,y=w.flipoffset,w=w.offset);if(h.iOS<4.1&&h.iOS>3.1||h.iOS==4.3||!h.iOS&&u)F=a(b),w.left-=F.scrollLeft(),w.top-=F.scrollTop();w.left+=l.x==="right"?q:l.x==="center"?q/2:0,w.top+=l.y==="bottom"?r:l.y==="center"?r/2:0}w.left+=m.x+(j.x==="right"?-o:j.x==="center"?-o/2:0),w.top+=m.y+(j.y==="bottom"?-p:j.y==="center"?-p/2:0),D.enabled?(v={elem:v,height:v[(v[0]===b?"h":"outerH")+"eight"](),width:v[(v[0]===b?"w":"outerW")+"idth"](),scrollLeft:u?0:v.scrollLeft(),scrollTop:u?0:v.scrollTop(),offset:v.offset()||{left:0,top:0}},x={elem:x,scrollLeft:x.scrollLeft(),scrollTop:x.scrollTop(),offset:x.offset()||{left:0,top:0}},w.adjusted={left:D.horizontal!=="none"?D.left(w.left):0,top:D.vertical!=="none"?D.top(w.top):0},w.adjusted.left+w.adjusted.top&&E.attr("class",E[0].className.replace(/ui-tooltip-pos-\w+/i,k+"-pos-"+j.abbrev())),y&&w.adjusted.left&&(w.left+=y.left),y&&w.adjusted.top&&(w.top+=y.top)):w.adjusted={left:0,top:0},s.originalEvent=a.extend({},c),E.trigger(s,[z,w,v.elem||v]);if(s.isDefaultPrevented())return z;delete w.adjusted,d===e||isNaN(w.left)||isNaN(w.top)||f==="mouse"||!a.isFunction(g.effect)?E.css(w):a.isFunction(g.effect)&&(g.effect.call(E,z,a.extend({},w)),E.queue(function(b){a(this).css({opacity:"",height:""}),a.browser.msie&&this.style.removeAttribute("filter"),b()})),C=0;return z},redraw:function(){if(z.rendered<1||D)return z;var a=t.position.container,b,c,d,e;D=1,t.style.height&&E.css("height",t.style.height),t.style.width?E.css("width",t.style.width):(E.css("width","").addClass(r),c=E.width()+1,d=E.css("max-width")||"",e=E.css("min-width")||"",b=(d+e).indexOf("%")>-1?a.width()/100:0,d=(d.indexOf("%")>-1?b:1)*parseInt(d,10)||c,e=(e.indexOf("%")>-1?b:1)*parseInt(e,10)||0,c=d+e?Math.min(Math.max(c,e),d):c,E.css("width",Math.round(c)).removeClass(r)),D=0;return z},disable:function(b){"boolean"!==typeof b&&(b=!E.hasClass(m)&&!H.disabled),z.rendered?(E.toggleClass(m,b),a.attr(E[0],"aria-disabled",b)):H.disabled=!!b;return z},enable:function(){return z.disable(e)},destroy:function(){var b=s[0],c=a.attr(b,u),d=s.data("qtip");z.rendered&&(E.remove(),a.each(z.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(z.timers.show),clearTimeout(z.timers.hide),R();if(!d||z===d)a.removeData(b,"qtip"),t.suppress&&c&&(a.attr(b,"title",c),s.removeAttr(u)),s.removeAttr("aria-describedby");s.unbind(".qtip-"+w),delete j[z.id];return s}})}function x(b){var c;if(!b||"object"!==typeof b)return e;if(b.metadata===f||"object"!==typeof b.metadata)b.metadata={type:b.metadata};if("content"in b){if(b.content===f||"object"!==typeof b.content||b.content.jquery)b.content={text:b.content};c=b.content.text||e,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"===typeof c&&!c.jquery)&&(b.content.text=e);if("title"in b.content){if(b.content.title===f||"object"!==typeof b.content.title)b.content.title={text:b.content.title};c=b.content.title.text||e,!a.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"===typeof c&&!c.jquery)&&(b.content.title.text=e)}}if("position"in b)if(b.position===f||"object"!==typeof b.position)b.position={my:b.position,at:b.position};if("show"in b)if(b.show===f||"object"!==typeof b.show)b.show.jquery?b.show={target:b.show}:b.show={event:b.show};if("hide"in b)if(b.hide===f||"object"!==typeof b.hide)b.hide.jquery?b.hide={target:b.hide}:b.hide={event:b.hide};if("style"in b)if(b.style===f||"object"!==typeof b.style)b.style={classes:b.style};a.each(h,function(){this.sanitize&&this.sanitize(b)});return b}function w(){w.history=w.history||[],w.history.push(arguments);if("object"===typeof console){var a=console[console.warn?"warn":"log"],b=Array.prototype.slice.call(arguments),c;typeof arguments[0]==="string"&&(b[0]="qTip2: "+b[0]),c=a.apply?a.apply(console,b):a(b)}}"use strict";var d=!0,e=!1,f=null,g,h,i,j={},k="ui-tooltip",l="ui-widget",m="ui-state-disabled",n="div.qtip."+k,o=k+"-default",p=k+"-focus",q=k+"-hover",r=k+"-fluid",s="-31000px",t="_replacedByqTip",u="oldtitle",v;g=a.fn.qtip=function(b,h,i){var j=(""+b).toLowerCase(),k=f,l=a.makeArray(arguments).slice(1),m=l[l.length-1],n=this[0]?a.data(this[0],"qtip"):f;if(!arguments.length&&n||j==="api")return n;if("string"===typeof b){this.each(function(){var b=a.data(this,"qtip");if(!b)return d;m&&m.timeStamp&&(b.cache.event=m);if(j!=="option"&&j!=="options"||!h)b[j]&&b[j].apply(b[j],l);else if(a.isPlainObject(h)||i!==c)b.set(h,i);else{k=b.get(h);return e}});return k!==f?k:this}if("object"===typeof b||!arguments.length){n=x(a.extend(d,{},b));return g.bind.call(this,n,m)}},g.bind=function(b,f){return this.each(function(k){function r(b){function d(){p.render(typeof b==="object"||l.show.ready),m.show.add(m.hide).unbind(o)}if(p.cache.disabled)return e;p.cache.event=a.extend({},b),p.cache.target=b?a(b.target):[c],l.show.delay>0?(clearTimeout(p.timers.show),p.timers.show=setTimeout(d,l.show.delay),n.show!==n.hide&&m.hide.bind(n.hide,function(){clearTimeout(p.timers.show)})):d()}var l,m,n,o,p,q;q=a.isArray(b.id)?b.id[k]:b.id,q=!q||q===e||q.length<1||j[q]?g.nextid++:j[q]=q,o=".qtip-"+q+"-create",p=z.call(this,q,b);if(p===e)return d;l=p.options,a.each(h,function(){this.initialize==="initialize"&&this(p)}),m={show:l.show.target,hide:l.hide.target},n={show:a.trim(""+l.show.event).replace(/ /g,o+" ")+o,hide:a.trim(""+l.hide.event).replace(/ /g,o+" ")+o},/mouse(over|enter)/i.test(n.show)&&!/mouse(out|leave)/i.test(n.hide)&&(n.hide+=" mouseleave"+o),m.show.bind("mousemove"+o,function(a){i={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),m.show.bind(n.show,r),(l.show.ready||l.prerender)&&r(f)})},h=g.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance=b==="t"||b==="b"?"y":"x",this.string=function(){return this.precedance==="y"?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:a==="c"||a!=="c"&&b!=="c"?b+a:a+b},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(a,b){function i(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}var c=a.offset(),d=b,e=0,f=document.body,g,h;if(d){do{d.css("position")!=="static"&&(g=d[0]===f?{left:parseInt(d.css("left"),10)||0,top:parseInt(d.css("top"),10)||0}:d.position(),c.left-=g.left+(parseInt(d.css("borderLeftWidth"),10)||0)+(parseInt(d.css("marginLeft"),10)||0),c.top-=g.top+(parseInt(d.css("borderTopWidth"),10)||0),h=d.css("overflow"),(h==="scroll"||h==="auto")&&++e);if(d[0]===f)break}while(d=d.offsetParent());b[0]!==f&&e&&i(b,1)}return c},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||e,fn:{attr:function(b,c){if(this.length){var d=this[0],e="title",f=a.data(d,"qtip");if(b===e&&f&&"object"===typeof f&&f.options.suppress){if(arguments.length<2)return a.attr(d,u);f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",c);return this.attr(u,c)}}return a.fn["attr"+t].apply(this,arguments)},clone:function(b){var c=a([]),d="title",e=a.fn["clone"+t].apply(this,arguments);b||e.filter("["+u+"]").attr("title",function(){return a.attr(this,u)}).removeAttr(u);return e},remove:a.ui?f:function(b,c){a.ui||a(this).each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add(this).each(function(){a(this).triggerHandler("remove")})})}}},a.each(h.fn,function(b,c){if(!c||a.fn[b+t])return d;var e=a.fn[b+t]=a.fn[b];a.fn[b]=function(){return c.apply(this,arguments)||e.apply(this,arguments)}}),g.version="nightly",g.nextid=0,g.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),g.zindex=15e3,g.defaults={prerender:e,id:e,overwrite:d,suppress:d,content:{text:d,attr:"title",title:{text:e,button:e}},position:{my:"top left",at:"bottom right",target:e,container:e,viewport:e,adjust:{x:0,y:0,mouse:d,resize:d,method:"flip flip"},effect:function(b,c,d){a(this).animate(c,{duration:200,queue:e})}},show:{target:e,event:"mouseenter",effect:d,delay:90,solo:e,ready:e,autofocus:e},hide:{target:e,event:"mouseleave",effect:d,delay:0,fixed:e,inactive:e,leave:"window",distance:e},style:{classes:"",widget:e,width:e,height:e,"default":d},events:{render:f,move:f,show:f,hide:f,toggle:f,visible:f,focus:f,blur:f}},h.ajax=function(a){var b=a.plugins.ajax;return"object"===typeof b?b:a.plugins.ajax=new A(a)},h.ajax.initialize="render",h.ajax.sanitize=function(a){var b=a.content,c;b&&"ajax"in b&&(c=b.ajax,typeof c!=="object"&&(c=a.content.ajax={url:c}),"boolean"!==typeof c.once&&c.once&&(c.once=!!c.once))},a.extend(d,g.defaults,{content:{ajax:{loading:d,once:d}}}),h.imagemap=function(b,c,d){function n(a,b,c){var d=0,e=1,f=1,g=0,h=0,i=a.width,j=a.height;while(i>0&&j>0&&e>0&&f>0){i=Math.floor(i/2),j=Math.floor(j/2),c.x==="left"?e=i:c.x==="right"?e=a.width-i:e+=Math.floor(i/2),c.y==="top"?f=j:c.y==="bottom"?f=a.height-j:f+=Math.floor(j/2),d=b.length;while(d--){if(b.length<2)break;g=b[d][0]-a.offset.left,h=b[d][1]-a.offset.top,(c.x==="left"&&g>=e||c.x==="right"&&g<=e||c.x==="center"&&(g<e||g>a.width-e)||c.y==="top"&&h>=f||c.y==="bottom"&&h<=f||c.y==="center"&&(h<f||h>a.height-f))&&b.splice(d,1)}}return{left:b[0][0],top:b[0][1]}}b.jquery||(b=a(b));var e=(b[0].shape||b.attr("shape")).toLowerCase(),f=(b[0].coords||b.attr("coords")).split(","),g=[],h=a('img[usemap="#'+b.parent("map").attr("name")+'"]'),i=h.offset(),j={width:0,height:0,offset:{top:1e10,right:0,bottom:0,left:1e10}},k=0,l=0,m;i.left+=Math.ceil((h.outerWidth()-h.width())/2),i.top+=Math.ceil((h.outerHeight()-h.height())/2);if(e==="poly"){k=f.length;while(k--)l=[parseInt(f[--k],10),parseInt(f[k+1],10)],l[0]>j.offset.right&&(j.offset.right=l[0]),l[0]<j.offset.left&&(j.offset.left=l[0]),l[1]>j.offset.bottom&&(j.offset.bottom=l[1]),l[1]<j.offset.top&&(j.offset.top=l[1]),g.push(l)}else g=a.map(f,function(a){return parseInt(a,10)});switch(e){case"rect":j={width:Math.abs(g[2]-g[0]),height:Math.abs(g[3]-g[1]),offset:{left:Math.min(g[0],g[2]),top:Math.min(g[1],g[3])}};break;case"circle":j={width:g[2]+2,height:g[2]+2,offset:{left:g[0],top:g[1]}};break;case"poly":a.extend(j,{width:Math.abs(j.offset.right-j.offset.left),height:Math.abs(j.offset.bottom-j.offset.top)}),c.string()==="centercenter"?j.offset={left:j.offset.left+j.width/2,top:j.offset.top+j.height/2}:(j.offset=n(j,g.slice(),c),d&&(d[0]==="flip"||d[1]==="flip")&&(j.flipoffset=n(j,g.slice(),{x:c.x==="left"?"right":c.x==="right"?"left":"center",y:c.y==="top"?"bottom":c.y==="bottom"?"top":"center"}),j.flipoffset.left-=j.offset.left,j.flipoffset.top-=j.offset.top)),j.width=j.height=0}j.offset.left+=i.left,j.offset.top+=i.top;return j},h.tip=function(a){var b=a.plugins.tip;return"object"===typeof b?b:a.plugins.tip=new C(a)},h.tip.initialize="render",h.tip.sanitize=function(a){var b=a.style,c;b&&"tip"in b&&(c=a.style.tip,typeof c!=="object"&&(a.style.tip={corner:c}),/string|boolean/i.test(typeof c.corner)||(c.corner=d),typeof c.width!=="number"&&delete c.width,typeof c.height!=="number"&&delete c.height,typeof c.border!=="number"&&c.border!==d&&delete c.border,typeof c.offset!=="number"&&delete c.offset)},a.extend(d,g.defaults,{style:{tip:{corner:d,mimic:e,width:6,height:6,border:d,offset:0}}}),h.svg=function(b,c){var d=a(document),e=b[0],f={width:0,height:0,offset:{top:1e10,left:1e10}},g,h,i,j,k;if(e.getBBox&&e.parentNode){g=e.getBBox(),h=e.getScreenCTM(),i=e.farthestViewportElement||e;if(!i.createSVGPoint)return f;j=i.createSVGPoint(),j.x=g.x,j.y=g.y,k=j.matrixTransform(h),f.offset.left=k.x,f.offset.top=k.y,j.x+=g.width,j.y+=g.height,k=j.matrixTransform(h),f.width=k.x-f.offset.left,f.height=k.y-f.offset.top,f.offset.left+=d.scrollLeft(),f.offset.top+=d.scrollTop()}return f},h.modal=function(a){var b=a.plugins.modal;return"object"===typeof b?b:a.plugins.modal=new D(a)},h.modal.initialize="render",h.modal.sanitize=function(a){a.show&&(typeof a.show.modal!=="object"?a.show.modal={on:!!a.show.modal}:typeof a.show.modal.on==="undefined"&&(a.show.modal.on=d))},h.modal.zindex=g.zindex+1e3,a.extend(d,g.defaults,{show:{modal:{on:e,effect:d,blur:d,escape:d}}}),h.bgiframe=function(b){var c=a.browser,d=b.plugins.bgiframe;if(a("select, object").length<1||(!c.msie||(""+c.version).charAt(0)!=="6"))return e;return"object"===typeof d?d:b.plugins.bgiframe=new E(b)},h.bgiframe.initialize="render"})(jQuery,window);

/*
 * jQuery timepicker addon
 * By: Trent Richardson [http://trentrichardson.com]
 * Version 1.1.1
 * Last Modified: 11/07/2012
 *
 * Copyright 2012 Trent Richardson
 * You may use this project under MIT or GPL licenses.
 * http://trentrichardson.com/Impromptu/GPL-LICENSE.txt
 * http://trentrichardson.com/Impromptu/MIT-LICENSE.txt
 */

/*jslint evil: true, white: false, undef: false, nomen: false */
(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version){return}$.extend($.ui,{timepicker:{version:"1.1.1"}});function Timepicker(){this.regional=[];this.regional['']={currentText:'Now',closeText:'Done',amNames:['AM','A'],pmNames:['PM','P'],timeFormat:'HH:mm',timeSuffix:'',timeOnlyTitle:'Choose Time',timeText:'Time',hourText:'Hour',minuteText:'Minute',secondText:'Second',millisecText:'Millisecond',timezoneText:'Time Zone',isRTL:false};this._defaults={showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showMillisec:false,showTimezone:false,showTime:true,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:null,useLocalTimezone:false,defaultTimezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:true,separator:' ',altFieldTimeOnly:true,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:true,timezoneIso8601:false,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null,controlType:'slider',defaultValue:null,parse:'strict'};$.extend(this._defaults,this.regional[''])}$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:null,defaultTimezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:'',formattedDate:'',formattedTime:'',formattedDateTime:'',timezoneList:null,units:['hour','minute','second','millisec'],control:null,setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_newInst:function($input,o){var tp_inst=new Timepicker(),inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults){if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr('time:'+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}}overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow)){return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst)}},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst);if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)){tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)}},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===true&&$input.val()!==''){tp_inst._updateDateTime(dp_inst)}if($.isFunction(tp_inst._defaults.evnts.onClose)){tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}}};for(i in overrides){if(overrides.hasOwnProperty(i)){fns[i]=o[i]||null}}tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()});if(typeof(tp_inst._defaults.controlType)==='string'){if($.fn[tp_inst._defaults.controlType]===undefined){tp_inst._defaults.controlType='select'}tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]}else{tp_inst.control=tp_inst._defaults.controlType}if(tp_inst._defaults.timezoneList===null){var timezoneList=['-1200','-1100','-1000','-0930','-0900','-0800','-0700','-0600','-0500','-0430','-0400','-0330','-0300','-0200','-0100','+0000','+0100','+0200','+0300','+0330','+0400','+0430','+0500','+0530','+0545','+0600','+0630','+0700','+0800','+0845','+0900','+0930','+1000','+1030','+1100','+1130','+1200','+1245','+1300','+1400'];if(tp_inst._defaults.timezoneIso8601){timezoneList=$.map(timezoneList,function(val){return val=='+0000'?'Z':(val.substring(0,3)+':'+val.substring(3))})}tp_inst._defaults.timezoneList=timezoneList}tp_inst.timezone=tp_inst._defaults.timezone;tp_inst.hour=tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec;tp_inst.ampm='';tp_inst.$input=$input;if(o.altField){tp_inst.$altInput=$(o.altField).css({cursor:'pointer'}).focus(function(){$input.trigger("focus")})}if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0){tp_inst._defaults.minDate=new Date()}if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0){tp_inst._defaults.maxDate=new Date()}if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())}if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())}if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())}if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())}tp_inst.$input.bind('focus',function(){tp_inst._onFocus()});return tp_inst},_addTimePicker:function(dp_inst){var currDT=(this.$altInput&&this._defaults.altFieldTimeOnly)?this.$input.val()+' '+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,false);this._injectTimePicker()},_parseTime:function(timeString,withDate){if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,'dateFormat');try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj){return false}$.extend(this,parseRes.timeObj)}catch(err){$.datepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat);return false}return true}else{var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);if(!timeObj){return false}$.extend(this,timeObj);return true}},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem='',uitem='',max={},gridSize={},size=null;if($dp.find("div.ui-timepicker-div").length===0&&o.showTimepicker){var noDisplay=' style="display:none;"',html='<div class="ui-timepicker-div'+(o.isRTL?' ui-timepicker-rtl':'')+'"><dl>'+'<dt class="ui_tpicker_time_label"'+((o.showTime)?'':noDisplay)+'>'+o.timeText+'</dt>'+'<dd class="ui_tpicker_time"'+((o.showTime)?'':noDisplay)+'></dd>';for(var i=0,l=this.units.length;i<l;i++){litem=this.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);max[litem]=parseInt((o[litem+'Max']-((o[litem+'Max']-o[litem+'Min'])%o['step'+uitem])),10);gridSize[litem]=0;html+='<dt class="ui_tpicker_'+litem+'_label"'+((o['show'+uitem])?'':noDisplay)+'>'+o[litem+'Text']+'</dt>'+'<dd class="ui_tpicker_'+litem+'"><div class="ui_tpicker_'+litem+'_slider"'+((o['show'+uitem])?'':noDisplay)+'></div>';if(o['show'+uitem]&&o[litem+'Grid']>0){html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(litem=='hour'){for(var h=o[litem+'Min'];h<=max[litem];h+=parseInt(o[litem+'Grid'],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(useAmpm(o.pickerTimeFormat||o.timeFormat)?'hht':'HH',{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+'</td>'}}else{for(var m=o[litem+'Min'];m<=max[litem];m+=parseInt(o[litem+'Grid'],10)){gridSize[litem]++;html+='<td data-for="'+litem+'">'+((m<10)?'0':'')+m+'</td>'}}html+='</tr></table></div>'}html+='</dd>'}html+='<dt class="ui_tpicker_timezone_label"'+((o.showTimezone)?'':noDisplay)+'>'+o.timezoneText+'</dt>';html+='<dd class="ui_tpicker_timezone" '+((o.showTimezone)?'':noDisplay)+'></dd>';html+='</dl></div>';var $tp=$(html);if(o.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all">'+'<div class="ui-datepicker-title">'+o.timeOnlyTitle+'</div>'+'</div>');$dp.find('.ui-datepicker-header, .ui-datepicker-calendar').hide()}for(var i=0,l=tp_inst.units.length;i<l;i++){litem=tp_inst.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);tp_inst[litem+'_slider']=tp_inst.control.create(tp_inst,$tp.find('.ui_tpicker_'+litem+'_slider'),litem,tp_inst[litem],o[litem+'Min'],max[litem],o['step'+uitem]);if(o['show'+uitem]&&o[litem+'Grid']>0){size=100*gridSize[litem]*o[litem+'Grid']/(max[litem]-o[litem+'Min']);$tp.find('.ui_tpicker_'+litem+' table').css({width:size+"%",marginLeft:o.isRTL?'0':((size/(-2*gridSize[litem]))+"%"),marginRight:o.isRTL?((size/(-2*gridSize[litem]))+"%"):'0',borderCollapse:'collapse'}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/ig),f=$t.data('for');if(f=='hour'){if(ap.indexOf('p')!==-1&&n<12){n+=12}else{if(ap.indexOf('a')!==-1&&n===12){n=0}}}tp_inst.control.value(tp_inst,tp_inst[f+'_slider'],litem,n);tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:'pointer',width:(100/gridSize[litem])+'%',textAlign:'center',overflow:'hidden'})}}this.timezone_select=$tp.find('.ui_tpicker_timezone').append('<select></select>').find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val(typeof val=="object"?val.value:val).text(typeof val=="object"?val.label:val)}));if(typeof(this.timezone)!="undefined"&&this.timezone!==null&&this.timezone!==""){var local_date=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12);var local_timezone=$.timepicker.timeZoneOffsetString(local_date);if(local_timezone==this.timezone){selectLocalTimeZone(tp_inst)}else{this.timezone_select.val(this.timezone)}}else{if(typeof(this.hour)!="undefined"&&this.hour!==null&&this.hour!==""){this.timezone_select.val(o.defaultTimezone)}else{selectLocalTimeZone(tp_inst)}}this.timezone_select.change(function(){tp_inst._defaults.useLocalTimezone=false;tp_inst._onTimeChange()});var $buttonPanel=$dp.find('.ui-datepicker-buttonpane');if($buttonPanel.length){$buttonPanel.before($tp)}else{$dp.append($tp)}this.$timeObj=$tp.find('.ui_tpicker_time');if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl;setTimeout(function(){if($tp.find('.ui-slider-access').length===0){$tp.find('.ui-slider:visible').sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find('.ui-slider-access:eq(0)').outerWidth(true);if(sliderAccessWidth){$tp.find('table:visible').each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?'marginRight':'marginLeft').toString().replace('%',''),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=((oldMarginLeft*newWidth)/oldWidth)+'%',css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?'marginRight':'marginLeft']=newMarginLeft;$g.css(css)})}}},10)}}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker){return}if($.datepicker._get(dp_inst,'minDateTime')!==null&&$.datepicker._get(dp_inst,'minDateTime')!==undefined&&dp_date){var minDateTime=$.datepicker._get(dp_inst,'minDateTime'),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin}if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()==dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds()}else{if(this.millisec<this._defaults.millisecMin){this.millisec=this._defaults.millisecMin}this._defaults.millisecMin=this.millisecMinOriginal}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal}}if($.datepicker._get(dp_inst,'maxDateTime')!==null&&$.datepicker._get(dp_inst,'maxDateTime')!==undefined&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,'maxDateTime'),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax}if(dp_inst.settings.timeOnly||maxDateTimeDate.getTime()==dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds()}else if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds()}else{if(this.millisec>this._defaults.millisecMax){this.millisec=this._defaults.millisecMax}this._defaults.millisecMax=this.millisecMaxOriginal}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal}}if(adjustSliders!==undefined&&adjustSliders===true){var hourMax=parseInt((this._defaults.hourMax-((this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour)),10),minMax=parseInt((this._defaults.minuteMax-((this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute)),10),secMax=parseInt((this._defaults.secondMax-((this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond)),10),millisecMax=parseInt((this._defaults.millisecMax-((this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec)),10);if(this.hour_slider){this.control.options(this,this.hour_slider,'hour',{min:this._defaults.hourMin,max:hourMax});this.control.value(this,this.hour_slider,'hour',this.hour)}if(this.minute_slider){this.control.options(this,this.minute_slider,'minute',{min:this._defaults.minuteMin,max:minMax});this.control.value(this,this.minute_slider,'minute',this.minute)}if(this.second_slider){this.control.options(this,this.second_slider,'second',{min:this._defaults.secondMin,max:secMax});this.control.value(this,this.second_slider,'second',this.second)}if(this.millisec_slider){this.control.options(this,this.millisec_slider,'millisec',{min:this._defaults.millisecMin,max:millisecMax});this.control.value(this,this.millisec_slider,'millisec',this.millisec)}}},_onTimeChange:function(){var hour=(this.hour_slider)?this.control.value(this,this.hour_slider,'hour'):false,minute=(this.minute_slider)?this.control.value(this,this.minute_slider,'minute'):false,second=(this.second_slider)?this.control.value(this,this.second_slider,'second'):false,millisec=(this.millisec_slider)?this.control.value(this,this.millisec_slider,'millisec'):false,timezone=(this.timezone_select)?this.timezone_select.val():false,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;if(typeof(hour)=='object'){hour=false}if(typeof(minute)=='object'){minute=false}if(typeof(second)=='object'){second=false}if(typeof(millisec)=='object'){millisec=false}if(typeof(timezone)=='object'){timezone=false}if(hour!==false){hour=parseInt(hour,10)}if(minute!==false){minute=parseInt(minute,10)}if(second!==false){second=parseInt(second,10)}if(millisec!==false){millisec=parseInt(millisec,10)}var ampm=o[hour<12?'amNames':'pmNames'][0];var hasChanged=(hour!=this.hour||minute!=this.minute||second!=this.second||millisec!=this.millisec||(this.ampm.length>0&&(hour<12)!=($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1))||((this.timezone===null&&timezone!=this.defaultTimezone)||(this.timezone!==null&&timezone!=this.timezone)));if(hasChanged){if(hour!==false){this.hour=hour}if(minute!==false){this.minute=minute}if(second!==false){this.second=second}if(millisec!==false){this.millisec=millisec}if(timezone!==false){this.timezone=timezone}if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}this._limitMinMaxDateTime(this.inst,true)}if(useAmpm(o.timeFormat)){this.ampm=ampm}this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o);if(this.$timeObj){if(pickerTimeFormat===o.timeFormat){this.$timeObj.text(this.formattedTime+pickerTimeSuffix)}else{this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix)}}this.timeDefined=true;if(hasChanged){this._updateDateTime()}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl){onSelect.apply(inputEl,[this.formattedDateTime,this])}},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dt=$.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay)),dateFmt=$.datepicker._get(dp_inst,'dateFormat'),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,(dt===null?new Date():dt),formatCfg);var formattedDateTime=this.formattedDate;if(this._defaults.timeOnly===true){formattedDateTime=this.formattedTime}else if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable)){formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix}this.formattedDateTime=formattedDateTime;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate)}else if(this.$altInput&&this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime='',altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;if(this._defaults.altFormat)altFormattedDateTime=$.datepicker.formatDate(this._defaults.altFormat,(dt===null?new Date():dt),formatCfg);else altFormattedDateTime=this.formattedDate;if(altFormattedDateTime)altFormattedDateTime+=altSeparator;if(this._defaults.altTimeFormat)altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix;else altFormattedDateTime+=this.formattedTime+altTimeSuffix;this.$altInput.val(altFormattedDateTime)}else{this.$input.val(formattedDateTime)}this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!=inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.datepicker.log(err)}}}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop('slide',null).slider({orientation:"horizontal",value:rtl?val*-1:val,min:rtl?max*-1:min,max:rtl?min*-1:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?ui.value*-1:ui.value);tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if(typeof(opts)=='string'){if(opts=='min'||opts=='max'){if(val!==undefined)return obj.slider(opts,val*-1);return Math.abs(obj.slider(opts))}return obj.slider(opts)}var min=opts.min,max=opts.max;opts.min=opts.max=null;if(min!==undefined)opts.max=min*-1;if(max!==undefined)opts.min=max*-1;return obj.slider(opts)}if(typeof(opts)=='string'&&val!==undefined)return obj.slider(opts,val);return obj.slider(opts)},value:function(tp_inst,obj,unit,val){if(tp_inst._defaults.isRTL){if(val!==undefined)return obj.slider('value',val*-1);return Math.abs(obj.slider('value'))}if(val!==undefined)return obj.slider('value',val);return obj.slider('value')}},select:{create:function(tp_inst,obj,unit,val,min,max,step){var sel='<select class="ui-timepicker-select" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',ul=tp_inst._defaults.timeFormat.indexOf('t')!==-1?'toLowerCase':'toUpperCase',m=0;for(var i=min;i<=max;i+=step){sel+='<option value="'+i+'"'+(i==val?' selected':'')+'>';if(unit=='hour'&&useAmpm(tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat))sel+=$.datepicker.formatTime("hh TT",{hour:i},tp_inst._defaults);else if(unit=='millisec'||i>=10)sel+=i;else sel+='0'+i.toString();sel+='</option>'}sel+='</select>';obj.children('select').remove();$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange();tp_inst._onSelectHandler()});return obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children('select');if(typeof(opts)=='string'){if(val===undefined)return $t.data(opts);o[opts]=val}else o=opts;return tp_inst.control.create(tp_inst,obj,$t.data('unit'),$t.val(),o.min||$t.data('min'),o.max||$t.data('max'),o.step||$t.data('step'))},value:function(tp_inst,obj,unit,val){var $t=obj.children('select');if(val!==undefined)return $t.val(val);return $t.val()}}}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);if(typeof o=='object'){tmp_args[0]=$.extend(o,{timeOnly:true})}return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof(o)=='string'){if(o=='getDate'){return $.fn.datepicker.apply($(this[0]),tmp_args)}else{return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)})}}else{return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}});$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec)}return parseRes.date};$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{});var strictParse=function(f,s,o){var getPatternAmpm=function(amNames,pmNames){var markers=[];if(amNames){$.merge(markers,amNames)}if(pmNames){$.merge(markers,pmNames)}markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,'\\$&')});return'('+markers.join('|')+')?'};var getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(finds){for(var i=0;i<finds.length;i++){if(orders[finds[i].toString().charAt(0)]==-1){orders[finds[i].toString().charAt(0)]=i+1}}}return orders};var regstr='^'+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g,function(match){switch(match.charAt(0).toLowerCase()){case'h':return'(\\d?\\d)';case'm':return'(\\d?\\d)';case's':return'(\\d?\\d)';case'l':return'(\\d?\\d?\\d)';case'z':return'(z|[-+]\\d\\d:?\\d\\d|\\S+)?';case't':return getPatternAmpm(o.amNames,o.pmNames);default:return'('+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+')?'}}).replace(/\s/g,'\\s?')+o.timeSuffix+'$',order=getFormatPositions(f),ampm='',treg;treg=s.match(new RegExp(regstr,'i'));var resTime={hour:0,minute:0,second:0,millisec:0};if(treg){if(order.t!==-1){if(treg[order.t]===undefined||treg[order.t].length===0){ampm='';resTime.ampm=''}else{ampm=$.inArray(treg[order.t].toUpperCase(),o.amNames)!==-1?'AM':'PM';resTime.ampm=o[ampm=='AM'?'amNames':'pmNames'][0]}}if(order.h!==-1){if(ampm=='AM'&&treg[order.h]=='12'){resTime.hour=0}else{if(ampm=='PM'&&treg[order.h]!='12'){resTime.hour=parseInt(treg[order.h],10)+12}else{resTime.hour=Number(treg[order.h])}}}if(order.m!==-1){resTime.minute=Number(treg[order.m])}if(order.s!==-1){resTime.second=Number(treg[order.s])}if(order.l!==-1){resTime.millisec=Number(treg[order.l])}if(order.z!==-1&&treg[order.z]!==undefined){var tz=treg[order.z].toUpperCase();switch(tz.length){case 1:tz=o.timezoneIso8601?'Z':'+0000';break;case 5:if(o.timezoneIso8601){tz=tz.substring(1)=='0000'?'Z':tz.substring(0,3)+':'+tz.substring(3)}break;case 6:if(!o.timezoneIso8601){tz=tz=='Z'||tz.substring(1)=='00:00'?'+0000':tz.replace(/:/,'')}else{if(tz.substring(1)=='00:00'){tz='Z'}}break}resTime.timezone=tz}return resTime}return false};var looseParse=function(f,s,o){try{var d=new Date('2012-01-01 '+s);return{hour:d.getHours(),minutes:d.getMinutes(),seconds:d.getSeconds(),millisec:d.getMilliseconds(),timezone:$.timepicker.timeZoneOffsetString(d)}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.datepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return false};if(typeof o.parse==="function"){return o.parse(timeFormat,timeString,o)}if(o.parse==='loose'){return looseParse(timeFormat,timeString,o)}return strictParse(timeFormat,timeString,o)};$.datepicker.formatTime=function(format,time,options){options=options||{};options=$.extend({},$.timepicker._defaults,options);time=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:'+0000'},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);if(hour>11){ampmName=options.pmNames[0]}tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[lz]|('.*?'|".*?"))/g,function(match){switch(match){case'HH':return('0'+hour).slice(-2);case'H':return hour;case'hh':return('0'+convert24to12(hour)).slice(-2);case'h':return convert24to12(hour);case'mm':return('0'+time.minute).slice(-2);case'm':return time.minute;case'ss':return('0'+time.second).slice(-2);case's':return time.second;case'l':return('00'+time.millisec).slice(-3);case'z':return time.timezone===null?options.defaultTimezone:time.timezone;case'T':return ampmName.charAt(0).toUpperCase();case'TT':return ampmName.toUpperCase();case't':return ampmName.charAt(0).toLowerCase();case'tt':return ampmName.toLowerCase();default:return match.replace(/\'/g,"")||"'"}});tmptime=$.trim(tmptime);return tmptime};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._limitMinMaxDateTime(inst,true);inst.inline=inst.stay_open=true;this._base_selectDate(id,dateStr);inst.inline=inst.stay_open=false;this._notifyChange(inst);this._updateDatepicker(inst)}else{this._base_selectDate(id,dateStr)}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&$.datepicker._curInst!=inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=input){return}if(typeof(inst.stay_open)!=='boolean'||inst.stay_open===false){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._addTimePicker(inst);if(tp_inst._defaults.useLocalTimezone){var date=new Date(inst.selectedYear,inst.selectedMonth,inst.selectedDay,12);selectLocalTimeZone(tp_inst,date);tp_inst._onTimeChange()}}}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if($.datepicker._get(inst,'constrainInput')){var ampm=useAmpm(tp_inst._defaults.timeFormat),dateChars=$.datepicker._possibleChars($.datepicker._get(inst,'dateFormat')),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,'').replace(/TT/g,ampm?'APM':'').replace(/Tt/g,ampm?'AaPpMm':'').replace(/tT/g,ampm?'AaPpMm':'').replace(/T/g,ampm?'AP':'').replace(/tt/g,ampm?'apm':'').replace(/t/g,ampm?'ap':'')+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tp_inst._defaults.showTimezone?tp_inst._defaults.timezoneList.join(''):'')+(tp_inst._defaults.amNames.join(''))+(tp_inst._defaults.pmNames.join(''))+dateChars,chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<' '||!dateChars||datetimeChars.indexOf(chr)>-1)}}return $.datepicker._base_doKeyPress(event)};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,'timepicker');if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var altFormat=tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime='',altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=tp_inst._defaults.altTimeFormat!==null?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix;if(!tp_inst._defaults.timeOnly&&!tp_inst._defaults.altFieldTimeOnly){if(tp_inst._defaults.altFormat)altFormattedDateTime=$.datepicker.formatDate(tp_inst._defaults.altFormat,(date===null?new Date():date),formatCfg)+altSeparator+altFormattedDateTime;else altFormattedDateTime=tp_inst.formattedDate+altSeparator+altFormattedDateTime}$(altField).val(altFormattedDateTime)}}else{$.datepicker._base_updateAlternate(inst)}};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!=inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.datepicker.log(err)}}}return $.datepicker._base_doKeyUp(event)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var tp_inst=this._get(inst,'timepicker');selectLocalTimeZone(tp_inst);var now=new Date();this._setTime(inst,now);$('.ui-datepicker-today',$dp).click()};$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,'timepicker');$(target).datepicker('getDate');if(tp_inst){tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(inst)}};$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,'timepicker');$(target).datepicker('getDate');if(tp_inst){tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst)}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,'timepicker');if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour;tp_inst.minute=date?date.getMinutes():defaults.minute;tp_inst.second=date?date.getSeconds():defaults.second;tp_inst.millisec=date?date.getMilliseconds():defaults.millisec;tp_inst._limitMinMaxDateTime(inst,true);tp_inst._onTimeChange();tp_inst._updateDateTime(inst)}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,'timepicker');if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date=="string"){tp_inst._parseTime(date,withDate);tp_date=new Date();tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec)}else{tp_date=new Date(date.getTime())}if(tp_date.toString()=='Invalid Date'){tp_date=undefined}this._setTime(inst,tp_date)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target);if(!inst){return}var tp_date=(date instanceof Date)?new Date(date.getTime()):date;this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,tp_date,true)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,'timepicker');if(tp_inst){if(inst.lastVal===undefined){this._setDateFromField(inst,noDefault)}var date=this._getDate(inst);if(date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec)}return date}return this._base_getDateDatepicker(target,noDefault)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(':')-2)),settings);$.datepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}return date};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._updateDateTime(inst);return tp_inst.$input.val()}return this._base_formatDate(inst)};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(target,name,value){var inst=this._getInst(target),name_clone;if(!inst){return null}var tp_inst=this._get(inst,'timepicker');if(tp_inst){var min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={},prop;if(typeof name=='string'){if(name==='minDate'||name==='minDateTime'){min=value}else if(name==='maxDate'||name==='maxDateTime'){max=value}else if(name==='onSelect'){onselect=value}else if(overrides.hasOwnProperty(name)){if(typeof(value)==='undefined'){return overrides[name]}fns[name]=value;name_clone={}}}else if(typeof name=='object'){if(name.minDate){min=name.minDate}else if(name.minDateTime){min=name.minDateTime}else if(name.maxDate){max=name.maxDate}else if(name.maxDateTime){max=name.maxDateTime}for(prop in overrides){if(overrides.hasOwnProperty(prop)&&name[prop]){fns[prop]=name[prop]}}}for(prop in fns){if(fns.hasOwnProperty(prop)){overrides[prop]=fns[prop];if(!name_clone){name_clone=$.extend({},name)}delete name_clone[prop]}}if(name_clone&&isEmptyObject(name_clone)){return}if(min){if(min===0){min=new Date()}else{min=new Date(min)}tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min}else if(max){if(max===0){max=new Date()}else{max=new Date(max)}tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max}else if(onselect){tp_inst._defaults.onSelect=onselect}}if(value===undefined){return this._base_optionDatepicker.call($.datepicker,target,name)}return this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj){if(obj.hasOwnProperty(obj)){return false}}return true};var extendRemove=function(target,props){$.extend(target,props);for(var name in props){if(props[name]===null||props[name]===undefined){target[name]=props[name]}}return target};var useAmpm=function(timeFormat){return(timeFormat.indexOf('t')!==-1&&timeFormat.indexOf('h')!==-1)};var convert24to12=function(hour){if(hour>12){hour=hour-12}if(hour==0){hour=12}return String(hour)};var splitDateTime=function(dateFormat,dateTimeString,dateSettings,timeSettings){try{var separator=timeSettings&&timeSettings.separator?timeSettings.separator:$.timepicker._defaults.separator,format=timeSettings&&timeSettings.timeFormat?timeSettings.timeFormat:$.timepicker._defaults.timeFormat,timeParts=format.split(separator),timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(allPartsLen>1){return[allParts.splice(0,allPartsLen-timePartsLen).join(separator),allParts.splice(0,timePartsLen).join(separator)]}}catch(err){$.datepicker.log('Could not split the date from the time. Please check the following datetimepicker options'+"\nthrown error: "+err+"\ndateTimeString"+dateTimeString+"\ndateFormat = "+dateFormat+"\nseparator = "+timeSettings.separator+"\ntimeFormat = "+timeSettings.timeFormat);if(err.indexOf(":")>=0){var dateStringLength=dateTimeString.length-(err.length-err.indexOf(':')-2),timeString=dateTimeString.substring(dateStringLength);return[$.trim(dateTimeString.substring(0,dateStringLength)),$.trim(dateTimeString.substring(dateStringLength))]}else{throw err}}return[dateTimeString,'']};var parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date;var splitRes=splitDateTime(dateFormat,dateTimeString,dateSettings,timeSettings);date=$.datepicker._base_parseDate(dateFormat,splitRes[0],dateSettings);if(splitRes[1]!==''){var timeString=splitRes[1],parsedTime=$.datepicker.parseTime(timeFormat,timeString,timeSettings);if(parsedTime===null){throw'Wrong time format'}return{date:date,timeObj:parsedTime}}else{return{date:date}}};var selectLocalTimeZone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){tp_inst._defaults.useLocalTimezone=true;var now=typeof date!=='undefined'?date:new Date();var tzoffset=$.timepicker.timeZoneOffsetString(now);if(tp_inst._defaults.timezoneIso8601){tzoffset=tzoffset.substring(0,3)+':'+tzoffset.substring(3)}tp_inst.timezone_select.val(tzoffset)}};$.timepicker=new Timepicker();$.timepicker.timeZoneOffsetString=function(date){var off=date.getTimezoneOffset()*-1,minutes=off%60,hours=(off-minutes)/60;return(off>=0?'+':'-')+('0'+(hours*101).toString()).substr(-2)+('0'+(minutes*101).toString()).substr(-2)};$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange('timepicker',startTime,endTime,options)};$.timepicker.dateTimeRange=function(startTime,endTime,options){$.timepicker.dateRange(startTime,endTime,options,'datetimepicker')};$.timepicker.dateRange=function(startTime,endTime,options,method){method=method||'datepicker';$.timepicker.handleRange(method,startTime,endTime,options)};$.timepicker.handleRange=function(method,startTime,endTime,options){$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates(this,endTime,dateText)},onSelect:function(selectedDateTime){selected(this,endTime,'minDate')}},options,options.start));$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates(this,startTime,dateText)},onSelect:function(selectedDateTime){selected(this,startTime,'maxDate')}},options,options.end));if(method!='timepicker'&&options.reformat){$([startTime,endTime]).each(function(){var format=$(this)[method].call($(this),'option','dateFormat'),date=new Date($(this).val());if($(this).val()&&date){$(this).val($.datepicker.formatDate(format,date))}})}checkDates(startTime,endTime,startTime.val());function checkDates(changed,other,dateText){if(other.val()&&(new Date(startTime.val())>new Date(endTime.val()))){other.val(dateText)}}selected(startTime,endTime,'minDate');selected(endTime,startTime,'maxDate');function selected(changed,other,option){if(!$(changed).val()){return}var date=$(changed)[method].call($(changed),'getDate');if(date.getTime){$(other)[method].call($(other),'option',option,date)}}return $([startTime.get(0),endTime.get(0)])};$.timepicker.version="1.1.1"})(jQuery);;

/* * jQuery UI Slider Access * By: Trent Richardson [http://trentrichardson.com] * Version 0.2 * Last Modified: 12/12/2011 * * Copyright 2011 Trent Richardson * Dual licensed under the MIT and GPL licenses. * http://trentrichardson.com/Impromptu/GPL-LICENSE.txt * http://trentrichardson.com/Impromptu/MIT-LICENSE.txt * */(function($){$.fn.extend({sliderAccess:function(options){options=options||{};options.touchonly=options.touchonly!==undefined?options.touchonly:true;if(options.touchonly===true&&!("ontouchend" in document)){return $(this)}return $(this).each(function(i,obj){var $t=$(this),o=$.extend({},{where:"after",step:$t.slider("option","step"),upIcon:"ui-icon-plus",downIcon:"ui-icon-minus",text:false,upText:"+",downText:"-",buttonset:true,buttonsetTag:"span",speed:150},options),$buttons=$("<"+o.buttonsetTag+' class="ui-slider-access"><button data-icon="'+o.downIcon+'" data-step="-'+o.step+'">'+o.downText+'</button><button data-icon="'+o.upIcon+'" data-step="'+o.step+'">'+o.upText+"</button></"+o.buttonsetTag+">");$buttons.children("button").each(function(j,jobj){var $jt=$(this),timeout=null,increment=function($jt,$t,e){var step=$jt.data("step"),curr=$t.slider("value"),newval=curr+=step*1,minval=$t.slider("option","min"),maxval=$t.slider("option","max");e.preventDefault();if(newval<minval||newval>maxval){return}$t.slider("value",newval);$t.slider("option","slide").call($t,null,{value:newval})};$jt.button({text:o.text,icons:{primary:$jt.data("icon")}}).bind("touchstart mousedown",function(e){increment($jt,$t,e);timeout=setInterval(function(){increment($jt,$t,e)},o.speed)});$(document).bind("touchend mouseup",function(){clearInterval(timeout);return false})});$t[o.where]($buttons);if(o.buttonset){$buttons.removeClass("ui-corner-right").removeClass("ui-corner-left").buttonset();$buttons.eq(0).addClass("ui-corner-left");$buttons.eq(1).addClass("ui-corner-right")}var bOuterWidth=$buttons.css({marginLeft:(o.where=="after"?10:0),marginRight:(o.where=="before"?10:0)}).outerWidth(true)+5;var tOuterWidth=$t.outerWidth(true);$t.css("display","inline-block").width(tOuterWidth-bOuterWidth)})}})})(jQuery);;

/*
 *  jQuery selectBox - A cosmetic, styleable replacement for SELECT elements
 *
 *  Copyright 2012 Cory LaViska for A Beautiful Site, LLC.
 *
 *  https://github.com/claviska/jquery-selectBox
 *
 *  Licensed under both the MIT license and the GNU GPLv2 (same as jQuery: http://jquery.org/license)
 *
 *  Note: Modified for vBulletin
 */
if(jQuery){(function(A){A.extend(A.fn,{selectBox:function(K,b){var C,Z="",N=navigator.platform.match(/mac/i);var S=function(k,e){var q;if(navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i)){return false}if(k.tagName.toLowerCase()!=="select"){return false}k=A(k);if(k.data("selectBox-control")){return false}if(k.is(":hidden")&&(!e||!e.allowHidden)){return false}var d=A('<a class="selectBox" />'),i=k.attr("multiple")||parseInt(k.attr("size"))>1;var c=e||{};d.addClass(k.attr("class")).attr("title",k.attr("title")||"").attr("tabindex",parseInt(k.attr("tabindex"))).css("display","inline-block").bind("focus.selectBox",function(){if(this!==document.activeElement&&document.body!==document.activeElement){A(document.activeElement).blur()}if(d.hasClass("selectBox-active")){return }d.addClass("selectBox-active");k.trigger("focus")}).bind("blur.selectBox",function(){if(!d.hasClass("selectBox-active")){return }d.removeClass("selectBox-active");k.trigger("blur")});if(!A(window).data("selectBox-bindings")){A(window).data("selectBox-bindings",true).bind("scroll.selectBox",H).bind("resize.selectBox",H)}if(k.attr("disabled")){d.addClass("selectBox-disabled")}k.bind("click.selectBox",function(r){d.focus();r.preventDefault()});if(i){q=M(k,"inline");d.append(q).data("selectBox-options",q).addClass("selectBox-inline selectBox-menuShowing").bind("keydown.selectBox",function(r){O(k,r)}).bind("keypress.selectBox",function(r){D(k,r)}).bind("mousedown.selectBox",function(r){if(A(r.target).is("A.selectBox-inline")){r.preventDefault()}if(!d.hasClass("selectBox-focus")){d.focus()}}).insertAfter(k);d.width(k.css("fontSize",d.css("fontSize")).outerWidth());if(!k[0].style.height){var p=k.attr("size")?parseInt(k.attr("size")):5;var f=d.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");f.find(".selectBox-options").html("<li><a>\u00A0</a></li>");var n=parseInt(f.find(".selectBox-options A:first").html("&nbsp;").outerHeight());f.remove();d.height(n*p)}I(d)}else{var j=A('<span class="selectBox-label" />'),m=A('<span class="selectBox-arrow" />');j.attr("class",B(k)).text(Q(k));q=M(k,"dropdown");q.appendTo("BODY");d.data("selectBox-options",q).addClass("selectBox-dropdown").append(j).append(m).bind("mousedown.selectBox",function(r){if(d.hasClass("selectBox-menuShowing")){H()}else{r.stopPropagation();q.data("selectBox-down-at-x",r.screenX).data("selectBox-down-at-y",r.screenY);R(k)}}).bind("keydown.selectBox",function(r){O(k,r)}).bind("keypress.selectBox",function(r){D(k,r)}).bind("open.selectBox",function(s,r){if(r&&r._selectBox===true){return }R(k)}).bind("close.selectBox",function(s,r){if(r&&r._selectBox===true){return }H()}).insertAfter(k);d.width(k.css("fontSize",d.css("fontSize")).width())-parseInt(d.css("border-left-width"),10)-parseInt(d.css("border-right-width"),10);var h=d.width()-m.outerWidth()-parseInt(j.css("paddingLeft"))-parseInt(j.css("paddingRight"));j.width(h);I(d)}var g=A(".selectBox-label",d);var o=parseInt(g.css("paddingLeft"))-4+parseInt(g.css("paddingRight"));var l=d.width()+o;if(l<=d.parent().innerWidth()){d.width(l);g.width(g.width()+o)}k.addClass("selectBox").data("selectBox-control",d).data("selectBox-settings",c).hide()};var M=function(c,h){var e;var d=function(i,j){i.children("OPTION, OPTGROUP").each(function(){if(A(this).is("OPTION")){if(A(this).length>0){G(A(this),j)}else{j.append("<li>\u00A0</li>")}}else{var k=A('<li class="selectBox-optgroup" />');k.text(A(this).attr("label"));j.append(k);j=d(A(this),j)}});return j};switch(h){case"inline":e=A('<ul class="selectBox-options" />');e=d(c,e);e.find("A").bind("mouseover.selectBox",function(i){X(c,A(this).parent())}).bind("mouseout.selectBox",function(i){a(c,A(this).parent())}).bind("mousedown.selectBox",function(i){i.preventDefault();if(!c.selectBox("control").hasClass("selectBox-active")){c.selectBox("control").focus()}}).bind("mouseup.selectBox",function(i){H();W(c,A(this).parent(),i)});I(e);return e;case"dropdown":e=A('<ul class="selectBox-dropdown-menu selectBox-options" />');e=d(c,e);e.data("selectBox-select",c).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(i){i.preventDefault();if(i.screenX===e.data("selectBox-down-at-x")&&i.screenY===e.data("selectBox-down-at-y")){e.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y");H()}}).bind("mouseup.selectBox",function(i){if(i.screenX===e.data("selectBox-down-at-x")&&i.screenY===e.data("selectBox-down-at-y")){return }else{e.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y")}W(c,A(this).parent());H()}).bind("mouseover.selectBox",function(i){X(c,A(this).parent())}).bind("mouseout.selectBox",function(i){a(c,A(this).parent())});var g=c.attr("class")||"";if(g!==""){g=g.split(" ");for(var f in g){e.addClass(g[f]+"-selectBox-dropdown-menu")}}I(e);return e}};var B=function(c){var d=A(c).find("OPTION:selected");return("selectBox-label "+(d.attr("class")||"")).replace(/\s+$/,"")};var Q=function(c){var d=A(c).find("OPTION:selected");return d.text()||"\u00A0"};var U=function(c){c=A(c);var d=c.data("selectBox-control");if(!d){return }d.find(".selectBox-label").attr("class",B(c)).text(Q(c))};var Y=function(c){c=A(c);var e=c.data("selectBox-control");if(!e){return }var d=e.data("selectBox-options")||A();d.remove();e.remove();c.removeClass("selectBox").removeData("selectBox-control").data("selectBox-control",null).removeData("selectBox-settings").data("selectBox-settings",null).show()};var L=function(c){c=A(c);c.selectBox("options",c.html())};var R=function(d){d=A(d);var i=d.data("selectBox-control")||A(),g=d.data("selectBox-settings")||{},e=i.data("selectBox-options")||A();if(i.hasClass("selectBox-disabled")){return false}H();var f=parseInt(i.css("borderBottomWidth"))||0;e.width(i.innerWidth()).css({top:i.offset().top+i.outerHeight()-f,left:i.offset().left});if(d.triggerHandler("beforeopen")){return false}var h=function(){d.triggerHandler("open",{_selectBox:true});if(!T(e)){e.css("top",parseFloat(e.css("top"))-(i.outerHeight()+e.outerHeight()))}};switch(g.menuTransition){case"fade":e.fadeIn(g.menuSpeed,h);break;case"slide":e.slideDown(g.menuSpeed,h);break;default:e.show(g.menuSpeed,h);break}if(!g.menuSpeed){h()}var c=e.find(".selectBox-selected:first");E(d,c,true);X(d,c);i.addClass("selectBox-menuShowing");A(document).bind("mousedown.selectBox",function(j){if(A(j.target).parents().andSelf().hasClass("selectBox-options")){return }H()})};var H=function(){if(A(".selectBox-dropdown-menu:visible").length===0){return }A(document).unbind("mousedown.selectBox");A(".selectBox-dropdown-menu").each(function(){var d=A(this),c=d.data("selectBox-select")||A(),g=c.data("selectBox-control")||A(),e=c.data("selectBox-settings")||{};if(c.triggerHandler("beforeclose")){return false}var f=function(){c.triggerHandler("close",{_selectBox:true})};switch(e.menuTransition){case"fade":d.fadeOut(e.menuSpeed,f);break;case"slide":d.slideUp(e.menuSpeed,f);break;default:d.hide(e.menuSpeed,f);break}if(!e.menuSpeed){f()}g.removeClass("selectBox-menuShowing")})};var W=function(d,c,j){d=A(d);c=A(c);var k=d.data("selectBox-control")||A(),h=d.data("selectBox-settings")||{};if(k.hasClass("selectBox-disabled")){return false}if(c.length===0||c.hasClass("selectBox-disabled")){return false}if(d.attr("multiple")){if(j.shiftKey&&k.data("selectBox-last-selected")){c.toggleClass("selectBox-selected");var e;if(c.index()>k.data("selectBox-last-selected").index()){e=c.siblings().slice(k.data("selectBox-last-selected").index(),c.index())}else{e=c.siblings().slice(c.index(),k.data("selectBox-last-selected").index())}e=e.not(".selectBox-optgroup, .selectBox-disabled");if(c.hasClass("selectBox-selected")){e.addClass("selectBox-selected")}else{e.removeClass("selectBox-selected")}}else{if((N&&j.metaKey)||(!N&&j.ctrlKey)){c.toggleClass("selectBox-selected")}else{c.siblings().removeClass("selectBox-selected");c.addClass("selectBox-selected")}}}else{c.siblings().removeClass("selectBox-selected");c.addClass("selectBox-selected")}if(k.hasClass("selectBox-dropdown")){k.find(".selectBox-label").text(c.text())}var f=0,g=[];if(d.attr("multiple")){k.find(".selectBox-selected A").each(function(){g[f++]=A(this).attr("rel")})}else{g=c.find("A").attr("rel")}k.data("selectBox-last-selected",c);if(d.val()!==g){d.val(g);U(d);d.trigger("change")}return true};var X=function(d,c){d=A(d);c=A(c);var f=d.data("selectBox-control")||A(),e=f.data("selectBox-options")||A();e.find(".selectBox-hover").removeClass("selectBox-hover");c.addClass("selectBox-hover")};var a=function(d,c){d=A(d);c=A(c);var f=d.data("selectBox-control")||A(),e=f.data("selectBox-options")||A();e.find(".selectBox-hover").removeClass("selectBox-hover")};var E=function(e,d,c){if(!d||d.length===0){return }e=A(e);var j=e.data("selectBox-control")||A(),g=j.data("selectBox-options")||A(),h=j.hasClass("selectBox-dropdown")?g:g.parent(),i=parseInt(d.offset().top-h.position().top),f=parseInt(i+d.outerHeight());if(c){h.scrollTop(d.offset().top-h.offset().top+h.scrollTop()-(h.height()/2))}else{if(i<0){h.scrollTop(d.offset().top-h.offset().top+h.scrollTop())}if(f>h.height()){h.scrollTop((d.offset().top+d.outerHeight())-h.offset().top+h.scrollTop()-h.height())}}};var O=function(k,c){k=A(k);var g=k.data("selectBox-control")||A(),l=g.data("selectBox-options")||A(),e=k.data("selectBox-settings")||{},f=0,h=0;if(g.hasClass("selectBox-disabled")){return }switch(c.keyCode){case 8:c.preventDefault();Z="";break;case 9:case 27:H();a(k);break;case 13:if(g.hasClass("selectBox-menuShowing")){W(k,l.find("LI.selectBox-hover:first"),c);if(g.hasClass("selectBox-dropdown")){H()}}else{R(k)}break;case 38:case 37:c.preventDefault();if(g.hasClass("selectBox-menuShowing")){var d=l.find(".selectBox-hover").prev("LI");f=l.find("LI:not(.selectBox-optgroup)").length;h=0;while(d.length===0||d.hasClass("selectBox-disabled")||d.hasClass("selectBox-optgroup")){d=d.prev("LI");if(d.length===0){if(e.loopOptions){d=l.find("LI:last")}else{d=l.find("LI:first")}}if(++h>=f){break}}X(k,d);W(k,d,c);E(k,d)}else{R(k)}break;case 40:case 39:c.preventDefault();if(g.hasClass("selectBox-menuShowing")){var j=l.find(".selectBox-hover").next("LI");f=l.find("LI:not(.selectBox-optgroup)").length;h=0;while(j.length===0||j.hasClass("selectBox-disabled")||j.hasClass("selectBox-optgroup")){j=j.next("LI");if(j.length===0){if(e.loopOptions){j=l.find("LI:first")}else{j=l.find("LI:last")}}if(++h>=f){break}}X(k,j);W(k,j,c);E(k,j)}else{R(k)}break}};var D=function(c,e){c=A(c);var f=c.data("selectBox-control")||A(),d=f.data("selectBox-options")||A();if(f.hasClass("selectBox-disabled")){return }switch(e.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:if(!f.hasClass("selectBox-menuShowing")){R(c)}e.preventDefault();clearTimeout(C);Z+=String.fromCharCode(e.charCode||e.keyCode);d.find("A").each(function(){if(A(this).text().substr(0,Z.length).toLowerCase()===Z.toLowerCase()){X(c,A(this).parent());E(c,A(this).parent());return false}});C=setTimeout(function(){Z=""},1000);break}};var P=function(c){c=A(c);c.attr("disabled",false);var d=c.data("selectBox-control");if(!d){return }d.removeClass("selectBox-disabled")};var J=function(c){c=A(c);c.attr("disabled",true);var d=c.data("selectBox-control");if(!d){return }d.addClass("selectBox-disabled")};var F=function(c,f){c=A(c);c.val(f);f=c.val();var g=c.data("selectBox-control");if(!g){return }var e=c.data("selectBox-settings")||{},d=g.data("selectBox-options")||A();U(c);d.find(".selectBox-selected").removeClass("selectBox-selected");d.find("A").each(function(){if(typeof (f)==="object"){for(var h=0;h<f.length;h++){if(A(this).attr("rel")==f[h]){A(this).parent().addClass("selectBox-selected")}}}else{if(A(this).attr("rel")==f){A(this).parent().addClass("selectBox-selected")}}});if(e.change){e.change.call(c)}};var V=function(l,m){l=A(l);var f=l.data("selectBox-control")||A(),d=l.data("selectBox-settings")||{};switch(typeof (b)){case"string":l.html(b);break;case"object":l.html("");for(var g in b){if(b[g]===null){continue}if(typeof (b[g])==="object"){var c=A('<optgroup label="'+g+'" />');for(var e in b[g]){c.append('<option value="'+e+'">'+b[g][e]+"</option>")}l.append(c)}else{var h=A('<option value="'+g+'">'+b[g]+"</option>");l.append(h)}}break}if(!f){return }f.data("selectBox-options").remove();var k=f.hasClass("selectBox-dropdown")?"dropdown":"inline";m=M(l,k);f.data("selectBox-options",m);switch(k){case"inline":f.append(m);break;case"dropdown":U(l);A("BODY").append(m);break}};var I=function(c){A(c).css("MozUserSelect","none").bind("selectstart",function(d){d.preventDefault()})};var G=function(e,f){var c=A("<li />"),d=A("<a />");c.addClass(e.attr("class"));c.data(e.data());d.attr("rel",e.val()).text(e.text());c.append(d);if(e.attr("disabled")){c.addClass("selectBox-disabled")}if(e.attr("selected")){c.addClass("selectBox-selected")}f.append(c)};var T=function(e){var i=A(window).scrollTop();var g=i+A(window).height();var c=e.offset().top;var d=c+e.outerHeight();var h=c-i;var f=g-d;return(h>=0&&f>=0)};switch(K){case"control":return A(this).data("selectBox-control");case"settings":if(!b){return A(this).data("selectBox-settings")}A(this).each(function(){A(this).data("selectBox-settings",A.extend(true,A(this).data("selectBox-settings"),b))});break;case"options":if(b===undefined){return A(this).data("selectBox-control").data("selectBox-options")}A(this).each(function(){V(this,b)});break;case"value":if(b===undefined){return A(this).val()}A(this).each(function(){F(this,b)});break;case"refresh":A(this).each(function(){L(this)});break;case"enable":A(this).each(function(){P(this)});break;case"disable":A(this).each(function(){J(this)});break;case"destroy":A(this).each(function(){Y(this)});break;default:A(this).each(function(){S(this,K)});break}return A(this)}})})(jQuery)};;

/*
* Placeholder plugin for jQuery
* ---
* Copyright 2010, Daniel Stocks (http://webcloud.se)
* Released under the MIT, BSD, and GPL Licenses.
*/

(function(e){function t(t){this.input=t;if(t.attr("type")=="password"){this.handlePassword()}e(t[0].form).submit(function(){if(t.hasClass("placeholder")&&t[0].value==t.attr("placeholder")){t[0].value=""}})}t.prototype={show:function(e){if(this.input[0].value===""||e&&this.valueIsPlaceholder()){if(this.isPassword){try{this.input[0].setAttribute("type","text")}catch(t){this.input.before(this.fakePassword.show()).hide()}}this.input.addClass("placeholder");this.input[0].value=this.input.attr("placeholder")}},hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")){this.input.removeClass("placeholder");this.input[0].value="";if(this.isPassword){try{this.input[0].setAttribute("type","password")}catch(e){}this.input.show();this.input[0].focus()}}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var t=this.input;t.attr("realType","password");this.isPassword=true;if(e.browser.msie&&t[0].outerHTML){var n=e(t[0].outerHTML.replace(/type=(['"])?password\1/gi,"type=$1text$1"));this.fakePassword=n.val(t.attr("placeholder")).addClass("placeholder").focus(function(){t.trigger("focus");e(this).hide()});e(t[0].form).submit(function(){n.remove();t.show()})}}};var n=!!("placeholder"in document.createElement("input"));e.fn.placeholder=function(){return n?this:this.each(function(){var n=e(this);var r=new t(n);r.show(true);n.focus(function(){r.hide()});n.blur(function(){r.show(false)});if(e.browser.msie){e(window).load(function(){if(n.val()){n.removeClass("placeholder")}r.show(true)});n.focus(function(){if(this.value==""){var e=this.createTextRange();e.collapse(true);e.moveStart("character",0);e.select()}})}})};if(!n){var r=e.fn.val;e.fn.val=function(n){if(n==null){var i=e(this);if(i.hasClass("placeholder")){var s=i.attr("placeholder"),o=i.attr("value");if(s&&s==o){var u=new t(i);u.hide();var a=r.call(this);u.show(true);return a}}return r.call(this)}else{return r.call(this,n)}}}})(jQuery);

/*!
 * jQuery Form Plugin
 * version: 2.85 (23-SEP-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(a){function b(){if(!a.fn.ajaxSubmit.debug)return;var b="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(b)}else if(window.opera&&window.opera.postError){window.opera.postError(b)}}a.fn.ajaxSubmit=function(c){function t(e){function w(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}function x(){function h(){try{var a=w(n).readyState;b("state = "+a);if(a.toLowerCase()=="uninitialized")setTimeout(h,50)}catch(c){b("Server abort: ",c," (",c.name,")");C(v);s&&clearTimeout(s);s=undefined}}var c=g.attr("target"),e=g.attr("action");f.setAttribute("target",l);if(!d){f.setAttribute("method","POST")}if(e!=j.url){f.setAttribute("action",j.url)}if(!j.skipEncodingOverride&&(!d||/post/i.test(d))){g.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(j.timeout){s=setTimeout(function(){r=true;C(u)},j.timeout)}var i=[];try{if(j.extraData){for(var k in j.extraData){i.push(a('<input type="hidden" name="'+k+'" />').attr("value",j.extraData[k]).appendTo(f)[0])}}if(!j.iframeTarget){m.appendTo("body");n.attachEvent?n.attachEvent("onload",C):n.addEventListener("load",C,false)}setTimeout(h,15);f.submit()}finally{f.setAttribute("action",e);if(c){f.setAttribute("target",c)}else{g.removeAttr("target")}a(i).remove()}}function C(c){if(o.aborted||B){return}try{z=w(n)}catch(d){b("cannot access response document: ",d);c=v}if(c===u&&o){o.abort("timeout");return}else if(c==v&&o){o.abort("server abort");return}if(!z||z.location.href==j.iframeSrc){if(!r)return}n.detachEvent?n.detachEvent("onload",C):n.removeEventListener("load",C,false);var e="success",f;try{if(r){throw"timeout"}var g=j.dataType=="xml"||z.XMLDocument||a.isXMLDoc(z);b("isXml="+g);if(!g&&window.opera&&(z.body==null||z.body.innerHTML=="")){if(--A){b("requeing onLoad callback, DOM not available");setTimeout(C,250);return}}var h=z.body?z.body:z.documentElement;o.responseText=h?h.innerHTML:null;o.responseXML=z.XMLDocument?z.XMLDocument:z;if(g)j.dataType="xml";o.getResponseHeader=function(a){var b={"content-type":j.dataType};return b[a]};if(h){o.status=Number(h.getAttribute("status"))||o.status;o.statusText=h.getAttribute("statusText")||o.statusText}var i=(j.dataType||"").toLowerCase();var l=/(json|script|text)/.test(i);if(l||j.textarea){var p=z.getElementsByTagName("textarea")[0];if(p){o.responseText=p.value;o.status=Number(p.getAttribute("status"))||o.status;o.statusText=p.getAttribute("statusText")||o.statusText}else if(l){var q=z.getElementsByTagName("pre")[0];var t=z.getElementsByTagName("body")[0];if(q){o.responseText=q.textContent?q.textContent:q.innerText}else if(t){o.responseText=t.textContent?t.textContent:t.innerText}}}else if(i=="xml"&&!o.responseXML&&o.responseText!=null){o.responseXML=D(o.responseText)}try{y=F(o,i,j)}catch(c){e="parsererror";o.error=f=c||e}}catch(c){b("error caught: ",c);e="error";o.error=f=c||e}if(o.aborted){b("upload aborted");e=null}if(o.status){e=o.status>=200&&o.status<300||o.status===304?"success":"error"}if(e==="success"){j.success&&j.success.call(j.context,y,"success",o);k&&a.event.trigger("ajaxSuccess",[o,j])}else if(e){if(f==undefined)f=o.statusText;j.error&&j.error.call(j.context,o,e,f);k&&a.event.trigger("ajaxError",[o,j,f])}k&&a.event.trigger("ajaxComplete",[o,j]);if(k&&!--a.active){a.event.trigger("ajaxStop")}j.complete&&j.complete.call(j.context,o,e);B=true;if(j.timeout)clearTimeout(s);setTimeout(function(){if(!j.iframeTarget)m.remove();o.responseXML=null},100)}var f=g[0],h,i,j,k,l,m,n,o,p,q,r,s;var t=!!a.fn.prop;if(e){if(t){for(i=0;i<e.length;i++){h=a(f[e[i].name]);h.prop("disabled",false)}}else{for(i=0;i<e.length;i++){h=a(f[e[i].name]);h.removeAttr("disabled")}}}if(a(":input[name=submit],:input[id=submit]",f).length){alert('Error: Form elements must not have name or id of "submit".');return}j=a.extend(true,{},a.ajaxSettings,c);j.context=j.context||j;l="jqFormIO"+(new Date).getTime();if(j.iframeTarget){m=a(j.iframeTarget);q=m.attr("name");if(q==null)m.attr("name",l);else l=q}else{m=a('<iframe name="'+l+'" src="'+j.iframeSrc+'" />');m.css({position:"absolute",top:"-1000px",left:"-1000px"})}n=m[0];o={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(c){var d=c==="timeout"?"timeout":"aborted";b("aborting upload... "+d);this.aborted=1;m.attr("src",j.iframeSrc);o.error=d;j.error&&j.error.call(j.context,o,d,c);k&&a.event.trigger("ajaxError",[o,j,d]);j.complete&&j.complete.call(j.context,o,d)}};k=j.global;if(k&&!(a.active++)){a.event.trigger("ajaxStart")}if(k){a.event.trigger("ajaxSend",[o,j])}if(j.beforeSend&&j.beforeSend.call(j.context,o,j)===false){if(j.global){a.active--}return}if(o.aborted){return}p=f.clk;if(p){q=p.name;if(q&&!p.disabled){j.extraData=j.extraData||{};j.extraData[q]=p.value;if(p.type=="image"){j.extraData[q+".x"]=f.clk_x;j.extraData[q+".y"]=f.clk_y}}}var u=1;var v=2;if(j.forceSync){x()}else{setTimeout(x,10)}var y,z,A=50,B;var D=a.parseXML||function(a,b){if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}else{b=(new DOMParser).parseFromString(a,"text/xml")}return b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null};var E=a.parseJSON||function(a){return window["eval"]("("+a+")")};var F=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f=c==="xml"||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;if(f&&g.documentElement.nodeName==="parsererror"){a.error&&a.error("parsererror")}if(d&&d.dataFilter){g=d.dataFilter(g,c)}if(typeof g==="string"){if(c==="json"||!c&&e.indexOf("json")>=0){g=E(g)}else if(c==="script"||!c&&e.indexOf("javascript")>=0){a.globalEval(g)}}return g}}if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}var d,e,f,g=this;if(typeof c=="function"){c={success:c}}d=this.attr("method");e=this.attr("action");f=typeof e==="string"?a.trim(e):"";f=f||window.location.href||"";if(f){f=(f.match(/^([^#]+)/)||[])[1]}c=a.extend(true,{url:f,success:a.ajaxSettings.success,type:d||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c);var h={};this.trigger("form-pre-serialize",[this,c,h]);if(h.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(c.beforeSerialize&&c.beforeSerialize(this,c)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var i,j,k=this.formToArray(c.semantic);if(c.data){c.extraData=c.data;for(i in c.data){if(a.isArray(c.data[i])){for(var l in c.data[i]){k.push({name:i,value:c.data[i][l]})}}else{j=c.data[i];j=a.isFunction(j)?j():j;k.push({name:i,value:j})}}}if(c.beforeSubmit&&c.beforeSubmit(k,this,c)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[k,this,c,h]);if(h.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var m=a.param(k);if(c.type.toUpperCase()=="GET"){c.url+=(c.url.indexOf("?")>=0?"&":"?")+m;c.data=null}else{c.data=m}var n=[];if(c.resetForm){n.push(function(){g.resetForm()})}if(c.clearForm){n.push(function(){g.clearForm()})}if(!c.dataType&&c.target){var o=c.success||function(){};n.push(function(b){var d=c.replaceTarget?"replaceWith":"html";a(c.target)[d](b).each(o,arguments)})}else if(c.success){n.push(c.success)}c.success=function(a,b,d){var e=c.context||c;for(var f=0,h=n.length;f<h;f++){n[f].apply(e,[a,b,d||g,g])}};var p=a("input:file",this).length>0;var q="multipart/form-data";var r=g.attr("enctype")==q||g.attr("encoding")==q;if(c.iframe!==false&&(p||c.iframe||r)){if(c.closeKeepAlive){a.get(c.closeKeepAlive,function(){t(k)})}else{t(k)}}else{if(a.browser.msie&&d=="get"&&typeof c.type==="undefined"){var s=g[0].getAttribute("method");if(typeof s==="string")c.type=s}a.ajax(c)}this.trigger("form-submit-notify",[this,c]);return this};a.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!a.isReady&&d.s){b("DOM not ready, queuing ajaxForm");a(function(){a(d.s,d.c).ajaxForm(c)});return this}b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){if(!b.isDefaultPrevented()){b.preventDefault();a(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(b){var c=b.target;var d=a(c);if(!d.is(":submit,input:image")){var e=d.closest(":submit");if(e.length==0){return}c=e[0]}var f=this;f.clk=c;if(c.type=="image"){if(b.offsetX!=undefined){f.clk_x=b.offsetX;f.clk_y=b.offsetY}else if(typeof a.fn.offset=="function"){var g=d.offset();f.clk_x=b.pageX-g.left;f.clk_y=b.pageY-g.top}else{f.clk_x=b.pageX-c.offsetLeft;f.clk_y=b.pageY-c.offsetTop}}setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var c=[];if(this.length===0){return c}var d=this[0];var e=b?d.getElementsByTagName("*"):d.elements;if(!e){return c}var f,g,h,i,j,k,l;for(f=0,k=e.length;f<k;f++){j=e[f];h=j.name;if(!h){continue}if(b&&d.clk&&j.type=="image"){if(!j.disabled&&d.clk==j){c.push({name:h,value:a(j).val()});c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y})}continue}i=a.fieldValue(j,true);if(i&&i.constructor==Array){for(g=0,l=i.length;g<l;g++){c.push({name:h,value:i[g]})}}else if(i!==null&&typeof i!="undefined"){c.push({name:h,value:i})}}if(!b&&d.clk){var m=a(d.clk),n=m[0];h=n.name;if(h&&!n.disabled&&n.type=="image"){c.push({name:h,value:m.val()});c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y})}}return c};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var d=this.name;if(!d){return}var e=a.fieldValue(this,b);if(e&&e.constructor==Array){for(var f=0,g=e.length;f<g;f++){c.push({name:d,value:e[f]})}}else if(e!==null&&typeof e!="undefined"){c.push({name:this.name,value:e})}});return a.param(c)};a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;d<e;d++){var f=this[d];var g=a.fieldValue(f,b);if(g===null||typeof g=="undefined"||g.constructor==Array&&!g.length){continue}g.constructor==Array?a.merge(c,g):c.push(g)}return c};a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(c===undefined){c=true}if(c&&(!d||b.disabled||e=="reset"||e=="button"||(e=="checkbox"||e=="radio")&&!b.checked||(e=="submit"||e=="image")&&b.form&&b.form.clk!=b||f=="select"&&b.selectedIndex==-1)){return null}if(f=="select"){var g=b.selectedIndex;if(g<0){return null}var h=[],i=b.options;var j=e=="select-one";var k=j?g+1:i.length;for(var l=j?g:0;l<k;l++){var m=i[l];if(m.selected){var n=m.value;if(!n){n=m.attributes&&m.attributes["value"]&&!m.attributes["value"].specified?m.text:m.value}if(j){return n}h.push(n)}}return h}return a(b).val()};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var b=this.type,c=this.tagName.toLowerCase();if(a.test(b)||c=="textarea"){this.value=""}else if(b=="checkbox"||b=="radio"){this.checked=false}else if(c=="select"){this.selectedIndex=-1}})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType){this.reset()}})};a.fn.enable=function(a){if(a===undefined){a=true}return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){if(b===undefined){b=true}return this.each(function(){var c=this.type;if(c=="checkbox"||c=="radio"){this.checked=b}else if(this.tagName.toLowerCase()=="option"){var d=a(this).parent("select");if(b&&d[0]&&d[0].type=="select-one"){d.find("option").selected(false)}this.selected=b}})};a.fn.ajaxSubmit.debug=false;})(jQuery);

/**
*	@name							Elastic
*	@descripton						Elastic is jQuery plugin that grow and shrink your textareas automatically
*	@version						1.6.11
*	@requires						jQuery 1.2.6+
*
*	@author							Jan Jarfalk
*	@author-email					jan.jarfalk@unwrongest.com
*	@author-website					http://www.unwrongest.com
*
*	@licence						MIT License - http://www.opensource.org/licenses/mit-license.php
*/
/*
*  Modified for vBulletin:
*  - Replace twin DOM node instead of adding a new one for every elastic textarea
*  - Added namespace to events bound by the plugin to the textarea to allow us to programmatically trigger events specific to this plugin
*  - Added checking for CSS box-sizing in determining the actual height and width of the textarea
*/
(function(e){jQuery.fn.extend({elastic:function(){var t=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){function a(){var e=n().width;if(i.width()!==e){i.css({width:e+"px"});l(true)}}function f(e,t){var i=parseInt(e,10);if(n().height!==i){r.css({height:i+"px",overflow:t})}}function l(e){var t=r.val().replace(/&/g,"&").replace(/ {2}/g,"").replace(/<|>/g,">").replace(/\n/g,"<br />");var s=i.html().replace(/<br>/ig,"<br />");if(e||t+""!==s){i.html(t+"");if(Math.abs(i.height()+lineHeight-n().height)>3){var o=i.height()+lineHeight;if(o>=maxheight){f(maxheight,"auto")}else if(o<=minheight){f(minheight,"hidden")}else{f(o,"hidden")}}}}if(this.type!=="textarea"){return false}var n=function(){return s=="border-box"?{height:r.outerHeight(),width:r.outerWidth()}:s=="padding-box"?{height:r.innerHeight(),width:r.innerWidth()}:{height:r.height(),width:r.width()}};var r=jQuery(this),i=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}).addClass("elastic-twin-div"),s=r.css("box-sizing")||r.css("-moz-box-sizing")||r.css("-webkit-box-sizing")||"content-box";lineHeight=parseInt(r.css("line-height"),10)||parseInt(r.css("font-size"),"10"),minheight=n().height||lineHeight*3,maxheight=parseInt(r.css("max-height"),10)||Number.MAX_VALUE,goalheight=0;if(maxheight<0){maxheight=Number.MAX_VALUE}var o=e("> .elastic-twin-div",r.parent());if(o.length==1){o.replaceWith(i)}else{i.appendTo(r.parent())}var u=t.length;while(u--){i.css(t[u].toString(),r.css(t[u].toString()))}r.css({overflow:"hidden"});r.bind("keyup.elastic change.elastic cut.elastic paste.elastic",function(){l()});e(window).bind("resize.elastic",a);r.bind("resize.elastic focus.elastic",a);r.bind("update.elastic",l);r.bind("blur.elastic",function(){if(i.height()<maxheight){if(i.height()>minheight){r.height(i.height())}else{r.height(minheight)}}});r.bind("input.elastic paste.elastic",function(e){setTimeout(l,250)});l()})}})})(jQuery);

/*!
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 *   
 *   Modified for vBulletin:
 *   - added destroy method
 *   - changed reset method by adding a flag to call setup method
 *   - added check for undefined instance in the main jcarousel function
 */

/*global window, jQuery */
(function(a){var b={vertical:false,rtl:false,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},c=false;a(window).bind("load.jcarousel",function(){c=true});a.jcarousel=function(d,e){this.options=a.extend({},b,e||{});this.locked=false;this.autoStopped=false;this.container=null;this.clip=null;this.list=null;this.buttonNext=null;this.buttonPrev=null;this.buttonNextState=null;this.buttonPrevState=null;if(!e||e.rtl===undefined){this.options.rtl=(a(d).attr("dir")||a("html").attr("dir")||"").toLowerCase()=="rtl"}this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?this.options.rtl?"right":"left":"top";var f="",g=d.className.split(" ");for(var h=0;h<g.length;h++){if(g[h].indexOf("jcarousel-skin")!=-1){a(d).removeClass(g[h]);f=g[h];break}}if(d.nodeName.toUpperCase()=="UL"||d.nodeName.toUpperCase()=="OL"){this.list=a(d);this.clip=this.list.parents(".jcarousel-clip");this.container=this.list.parents(".jcarousel-container")}else{this.container=a(d);this.list=this.container.find("ul,ol").eq(0);this.clip=this.container.find(".jcarousel-clip")}if(this.clip.size()===0){this.clip=this.list.wrap("<div></div>").parent()}if(this.container.size()===0){this.container=this.clip.wrap("<div></div>").parent()}if(f!==""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1){this.container.wrap('<div class=" '+f+'"></div>')}this.buttonPrev=a(".jcarousel-prev",this.container);if(this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null){this.buttonPrev=a(this.options.buttonPrevHTML).appendTo(this.container)}this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=a(".jcarousel-next",this.container);if(this.buttonNext.size()===0&&this.options.buttonNextHTML!==null){this.buttonNext=a(this.options.buttonNextHTML).appendTo(this.container)}this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});if(!this.options.vertical&&this.options.rtl){this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl")}var i=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null;var j=this.list.children("li");var k=this;if(j.size()>0){var l=0,m=this.options.offset;j.each(function(){k.format(this,m++);l+=k.dimension(this,i)});this.list.css(this.wh,l+100+"px");if(!e||e.size===undefined){this.options.size=j.size()}}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display","block");this.funcNext=function(){k.next()};this.funcPrev=function(){k.prev()};this.funcResize=function(){if(k.resizeTimer){clearTimeout(k.resizeTimer)}k.resizeTimer=setTimeout(function(){k.reload()},100)};if(this.options.initCallback!==null){this.options.initCallback(this,"init")}if(!c&&a.browser.safari){this.buttons(false,false);a(window).bind("load.jcarousel",function(){k.setup()})}else{this.setup()}};var d=a.jcarousel;d.fn=d.prototype={jcarousel:"0.2.8"};d.fn.extend=d.extend=a.extend;d.fn.extend({setup:function(){this.first=null;this.last=null;this.prevFirst=null;this.prevLast=null;this.animating=false;this.timer=null;this.resizeTimer=null;this.tail=null;this.inTail=false;if(this.locked){return}this.list.css(this.lt,this.pos(this.options.offset)+"px");var b=this.pos(this.options.start,true);this.prevFirst=this.prevLast=null;this.animate(b,false);a(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);if(this.options.setupCallback!==null){this.options.setupCallback(this)}},reset:function(a){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");if(this.options.initCallback!==null){this.options.initCallback(this,"reset")}if(a){this.setup()}},reload:function(){if(this.tail!==null&&this.inTail){this.list.css(this.lt,d.intval(this.list.css(this.lt))+this.tail)}this.tail=null;this.inTail=false;if(this.options.reloadCallback!==null){this.options.reloadCallback(this)}if(this.options.visible!==null){var a=this;var b=Math.ceil(this.clipping()/this.options.visible),c=0,e=0;this.list.children("li").each(function(d){c+=a.dimension(this,b);if(d+1<a.first){e=c}});this.list.css(this.wh,c+"px");this.list.css(this.lt,-e+"px")}this.scroll(this.first,false)},lock:function(){this.locked=true;this.buttons()},unlock:function(){this.locked=false;this.buttons()},size:function(a){if(a!==undefined){this.options.size=a;if(!this.locked){this.buttons()}}return this.options.size},has:function(a,b){if(b===undefined||!b){b=a}if(this.options.size!==null&&b>this.options.size){b=this.options.size}for(var c=a;c<=b;c++){var d=this.get(c);if(!d.length||d.hasClass("jcarousel-item-placeholder")){return false}}return true},get:function(b){return a(">.jcarousel-item-"+b,this.list)},add:function(b,c){var e=this.get(b),f=0,g=a(c);if(e.length===0){var h,i=d.intval(b);e=this.create(b);while(true){h=this.get(--i);if(i<=0||h.length){if(i<=0){this.list.prepend(e)}else{h.after(e)}break}}}else{f=this.dimension(e)}if(g.get(0).nodeName.toUpperCase()=="LI"){e.replaceWith(g);e=g}else{e.empty().append(c)}this.format(e.removeClass(this.className("jcarousel-item-placeholder")),b);var j=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null;var k=this.dimension(e,j)-f;if(b>0&&b<this.first){this.list.css(this.lt,d.intval(this.list.css(this.lt))-k+"px")}this.list.css(this.wh,d.intval(this.list.css(this.wh))+k+"px");return e},remove:function(a){var b=this.get(a);if(!b.length||a>=this.first&&a<=this.last){return}var c=this.dimension(b);if(a<this.first){this.list.css(this.lt,d.intval(this.list.css(this.lt))+c+"px")}b.remove();this.list.css(this.wh,d.intval(this.list.css(this.wh))-c+"px")},next:function(){if(this.tail!==null&&!this.inTail){this.scrollTail(false)}else{this.scroll((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!==null&&this.last==this.options.size?1:this.first+this.options.scroll)}},prev:function(){if(this.tail!==null&&this.inTail){this.scrollTail(true)}else{this.scroll((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!==null&&this.first==1?this.options.size:this.first-this.options.scroll)}},scrollTail:function(a){if(this.locked||this.animating||!this.tail){return}this.pauseAuto();var b=d.intval(this.list.css(this.lt));b=!a?b-this.tail:b+this.tail;this.inTail=!a;this.prevFirst=this.first;this.prevLast=this.last;this.animate(b)},scroll:function(a,b){if(this.locked||this.animating){return}this.pauseAuto();this.animate(this.pos(a),b)},pos:function(a,b){var c=d.intval(this.list.css(this.lt));if(this.locked||this.animating){return c}if(this.options.wrap!="circular"){a=a<1?1:this.options.size&&a>this.options.size?this.options.size:a}var e=this.first>a;var f=this.options.wrap!="circular"&&this.first<=1?1:this.first;var g=e?this.get(f):this.get(this.last);var h=e?f:f-1;var i=null,j=0,k=false,l=0,m;while(e?--h>=a:++h<a){i=this.get(h);k=!i.length;if(i.length===0){i=this.create(h).addClass(this.className("jcarousel-item-placeholder"));g[e?"before":"after"](i);if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(h<=0||h>this.options.size)){m=this.get(this.index(h));if(m.length){i=this.add(h,m.clone(true))}}}g=i;l=this.dimension(i);if(k){j+=l}if(this.first!==null&&(this.options.wrap=="circular"||h>=1&&(this.options.size===null||h<=this.options.size))){c=e?c+l:c-l}}var n=this.clipping(),o=[],p=0,q=0;g=this.get(a-1);h=a;while(++p){i=this.get(h);k=!i.length;if(i.length===0){i=this.create(h).addClass(this.className("jcarousel-item-placeholder"));if(g.length===0){this.list.prepend(i)}else{g[e?"before":"after"](i)}if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(h<=0||h>this.options.size)){m=this.get(this.index(h));if(m.length){i=this.add(h,m.clone(true))}}}g=i;l=this.dimension(i);if(l===0){throw new Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...")}if(this.options.wrap!="circular"&&this.options.size!==null&&h>this.options.size){o.push(i)}else if(k){j+=l}q+=l;if(q>=n){break}h++}for(var r=0;r<o.length;r++){o[r].remove()}if(j>0){this.list.css(this.wh,this.dimension(this.list)+j+"px");if(e){c-=j;this.list.css(this.lt,d.intval(this.list.css(this.lt))-j+"px")}}var s=a+p-1;if(this.options.wrap!="circular"&&this.options.size&&s>this.options.size){s=this.options.size}if(h>s){p=0;h=s;q=0;while(++p){i=this.get(h--);if(!i.length){break}q+=this.dimension(i);if(q>=n){break}}}var t=s-p+1;if(this.options.wrap!="circular"&&t<1){t=1}if(this.inTail&&e){c+=this.tail;this.inTail=false}this.tail=null;if(this.options.wrap!="circular"&&s==this.options.size&&s-p+1>=1){var u=d.intval(this.get(s).css(!this.options.vertical?"marginRight":"marginBottom"));if(q-u>n){this.tail=q-n-u}}if(b&&a===this.options.size&&this.tail){c-=this.tail;this.inTail=true}while(a-->t){c+=this.dimension(this.get(a))}this.prevFirst=this.first;this.prevLast=this.last;this.first=t;this.last=s;return c},animate:function(b,c){if(this.locked||this.animating){return}this.animating=true;var d=this;var e=function(){d.animating=false;if(b===0){d.list.css(d.lt,0)}if(!d.autoStopped&&(d.options.wrap=="circular"||d.options.wrap=="both"||d.options.wrap=="last"||d.options.size===null||d.last<d.options.size||d.last==d.options.size&&d.tail!==null&&!d.inTail)){d.startAuto()}d.buttons();d.notify("onAfterAnimation");if(d.options.wrap=="circular"&&d.options.size!==null){for(var a=d.prevFirst;a<=d.prevLast;a++){if(a!==null&&!(a>=d.first&&a<=d.last)&&(a<1||a>d.options.size)){d.remove(a)}}}};this.notify("onBeforeAnimation");if(!this.options.animation||c===false){this.list.css(this.lt,b+"px");e()}else{var f=!this.options.vertical?this.options.rtl?{right:b}:{left:b}:{top:b};var g={duration:this.options.animation,easing:this.options.easing,complete:e};if(a.isFunction(this.options.animationStepCallback)){g.step=this.options.animationStepCallback}this.list.animate(f,g)}},startAuto:function(a){if(a!==undefined){this.options.auto=a}if(this.options.auto===0){return this.stopAuto()}if(this.timer!==null){return}this.autoStopped=false;var b=this;this.timer=window.setTimeout(function(){b.next()},this.options.auto*1e3)},stopAuto:function(){this.pauseAuto();this.autoStopped=true},pauseAuto:function(){if(this.timer===null){return}window.clearTimeout(this.timer);this.timer=null},buttons:function(a,b){if(a==null){a=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="first"||this.options.size===null||this.last<this.options.size);if(!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!==null&&this.last>=this.options.size){a=this.tail!==null&&!this.inTail}}if(b==null){b=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="last"||this.first>1);if(!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!==null&&this.first==1){b=this.tail!==null&&this.inTail}}var c=this;if(this.buttonNext.size()>0){this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext);if(a){this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext)}this.buttonNext[a?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",a?false:true);if(this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=a){this.buttonNext.each(function(){c.options.buttonNextCallback(c,this,a)}).data("jcarouselstate",a)}}else{if(this.options.buttonNextCallback!==null&&this.buttonNextState!=a){this.options.buttonNextCallback(c,null,a)}}if(this.buttonPrev.size()>0){this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev);if(b){this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev)}this.buttonPrev[b?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",b?false:true);if(this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=b){this.buttonPrev.each(function(){c.options.buttonPrevCallback(c,this,b)}).data("jcarouselstate",b)}}else{if(this.options.buttonPrevCallback!==null&&this.buttonPrevState!=b){this.options.buttonPrevCallback(c,null,b)}}this.buttonNextState=a;this.buttonPrevState=b},notify:function(a){var b=this.prevFirst===null?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",a,b);if(this.prevFirst!==this.first){this.callback("itemFirstInCallback",a,b,this.first);this.callback("itemFirstOutCallback",a,b,this.prevFirst)}if(this.prevLast!==this.last){this.callback("itemLastInCallback",a,b,this.last);this.callback("itemLastOutCallback",a,b,this.prevLast)}this.callback("itemVisibleInCallback",a,b,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",a,b,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(b,c,d,e,f,g,h){if(this.options[b]==null||typeof this.options[b]!="object"&&c!="onAfterAnimation"){return}var i=typeof this.options[b]=="object"?this.options[b][c]:this.options[b];if(!a.isFunction(i)){return}var j=this;if(e===undefined){i(j,d,c)}else if(f===undefined){this.get(e).each(function(){i(j,this,e,d,c)})}else{var k=function(a){j.get(a).each(function(){i(j,this,a,d,c)})};for(var l=e;l<=f;l++){if(l!==null&&!(l>=g&&l<=h)){k(l)}}}},create:function(a){return this.format("<li></li>",a)},destroy:function(){this.reset();a(window).unbind(".jcarousel");this.list.removeData("jcarousel");this.container.removeData("jcarousel");this.buttonNext.removeData("jcarouselstate").remove();this.buttonPrev.removeData("jcarouselstate").remove();return this},format:function(b,c){b=a(b);var d=b.get(0).className.split(" ");for(var e=0;e<d.length;e++){if(d[e].indexOf("jcarousel-")!=-1){b.removeClass(d[e])}}b.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+c)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",c);return b},className:function(a){return a+" "+a+(!this.options.vertical?"-horizontal":"-vertical")},dimension:function(b,c){var e=a(b);if(c==null){return!this.options.vertical?e.outerWidth(true)||d.intval(this.options.itemFallbackDimension):e.outerHeight(true)||d.intval(this.options.itemFallbackDimension)}else{var f=!this.options.vertical?c-d.intval(e.css("marginLeft"))-d.intval(e.css("marginRight")):c-d.intval(e.css("marginTop"))-d.intval(e.css("marginBottom"));a(e).css(this.wh,f+"px");return this.dimension(e)}},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-d.intval(this.clip.css("borderLeftWidth"))-d.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-d.intval(this.clip.css("borderTopWidth"))-d.intval(this.clip.css("borderBottomWidth"))},index:function(a,b){if(b==null){b=this.options.size}return Math.round(((a-1)/b-Math.floor((a-1)/b))*b)+1}});d.extend({defaults:function(c){return a.extend(b,c||{})},intval:function(a){a=parseInt(a,10);return isNaN(a)?0:a},windowLoaded:function(){c=true}});a.fn.jcarousel=function(b){if(typeof b=="string"){var c=a(this).data("jcarousel"),e=Array.prototype.slice.call(arguments,1);if(typeof c!="undefined"){return c[b].apply(c,e)}return this}else{return this.each(function(){var c=a(this).data("jcarousel");if(c){if(b){a.extend(c.options,b)}c.reload()}else{a(this).data("jcarousel",new d(this,b))}})}}})(jQuery);

(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},h=0,c=0,l=[];function g(e,d,g,i){var c={data:i||(d?d.data:{}),_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};e&&a.extend(c,e,{nodes:[],parent:d});if(g){c.tmpl=g;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++h;(l.length?f:b)[h]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a.fn[d].apply(a(i[h]),k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,l,j){if(d[0]&&d[0].nodeType){var f=a.makeArray(arguments),g=d.length,i=0,h;while(i<g&&!(h=a.data(d[i++],"tmplItem")));if(g>1)f[0]=[a.makeArray(d)];if(h&&c)f[2]=function(b){a.tmpl.afterManip(this,b,j)};r.apply(this,f)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var j,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(i(c,null,c.tmpl(a,c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);j=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(i(c,null,j)):j},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?(a.template[c]=b):b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function i(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:i(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=j(c).concat(b);if(d)b=b.concat(j(d))});return b?b:j(c)}function j(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,j,d,b,c,e){var i=a.tmpl.tag[j],h,f,g;if(!i)throw"Template command not found: "+j;h=i._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=k(b);e=e?","+k(e)+")":c?")":"";f=c?b.indexOf(".")>-1?b+c:"("+b+").call($item"+e:b;g=c?f:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else g=f=h.$1||"null";d=k(d);return"');"+i[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(g).split("$1").join(f).split("$2").join(d?d.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(d,c,b,a){a=a?","+a+")":b?")":"";return a?"("+c+").call($item"+a:d}):h.$2||"")+"_.push('"})+"');}return _;")}function n(c,b){c._wrap=i(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function k(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,i;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(i=j.length-1;i>=0;i--)m(j[i]);m(k)}function m(j){var p,i=j,k,e,m;if(m=j.getAttribute(d)){while(i.parentNode&&(i=i.parentNode).nodeType===1&&!(p=i.getAttribute(d)));if(p!==m){i=i.parentNode?i.nodeType===11?0:i.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[i]||f[i],null,true);e.key=++h;b[h]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;i=a.data(j.parentNode,"tmplItem");i=i?i.key:0}if(e){k=e;while(k&&k.key!=i){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent,null,true)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);

/*
 * jQuery Iframe Transport Plugin 1.2.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */

/*jslint unparam: true */
/*global jQuery */
(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c,d,e){if(c.type==="POST"||c.type==="GET"){var f,g;return{send:function(d,e){f=a('<form style="display:none;"></form>');g=a('<iframe src="javascript:false;" name="iframe-transport-'+(b+=1)+'"></iframe>').bind("load",function(){var b;g.unbind("load").bind("load",function(){var b;try{b=g.contents()}catch(c){b=a()}e(200,"success",{iframe:b});a('<iframe src="javascript:false;"></iframe>').appendTo(f);f.remove()});f.prop("target",g.prop("name")).prop("action",c.url).prop("method",c.type);if(c.formData){a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(f)})}if(c.fileInput&&c.fileInput.length&&c.type==="POST"){b=c.fileInput.clone();c.fileInput.after(function(a){return b[a]});if(c.paramName){c.fileInput.each(function(){a(this).prop("name",c.paramName)})}f.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")}f.submit();if(b&&b.length){c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name"));e.replaceWith(d)})}});f.append(g).appendTo("body")},abort:function(){if(g){g.unbind("load").prop("src","javascript".concat(":false;"))}if(f){f.remove()}}}}});a.ajaxSetup({converters:{"iframe text":function(a){return a.text()},"iframe json":function(b){return a.parseJSON(b.text())},"iframe html":function(a){return a.find("body").html()},"iframe script":function(b){return a.globalEval(b.text())}}})})(jQuery);

/*
 * jQuery File Upload Plugin 5.0.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */

/*jslint nomen: true, unparam: true, regexp: true */
/*global document, XMLHttpRequestUpload, Blob, File, FormData, location, jQuery */
(function(a){"use strict";a.widget("blueimp.fileupload",{options:{namespace:undefined,dropZone:a(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,sequentialUploads:false,forceIframeTransport:false,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,formData:function(a){return a.serializeArray()},add:function(a,b){b.submit()},processData:false,contentType:false,cache:false},_refreshOptionsList:["namespace","dropZone","fileInput"],_isXHRUpload:function(a){var b="undefined";return!a.forceIframeTransport&&typeof XMLHttpRequestUpload!==b&&typeof File!==b&&(!a.multipart||typeof FormData!==b)},_getFormData:function(b){var c;if(typeof b.formData==="function"){return b.formData(b.form)}else if(a.isArray(b.formData)){return b.formData}else if(b.formData){c=[];a.each(b.formData,function(a,b){c.push({name:a,value:b})});return c}return[]},_getTotal:function(b){var c=0;a.each(b,function(a,b){c+=b.size||1});return c},_onProgress:function(a,b){if(a.lengthComputable){var c=b.total||this._getTotal(b.files),d=parseInt(a.loaded/a.total*(b.chunkSize||c),10)+(b.uploadedBytes||0);this._loaded+=d-(b.loaded||b.uploadedBytes||0);b.lengthComputable=true;b.loaded=d;b.total=c;this._trigger("progress",a,b);this._trigger("progressall",a,{lengthComputable:true,loaded:this._loaded,total:this._total})}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();if(d.upload&&d.upload.addEventListener){d.upload.addEventListener("progress",function(a){c._onProgress(a,b)},false);b.xhr=function(){return d}}},_initXHRData:function(b){var c,d=b.files[0];if(!b.multipart||b.blob){b.headers=a.extend(b.headers,{"X-File-Name":d.name,"X-File-Type":d.type,"X-File-Size":d.size});if(!b.blob){b.contentType=d.type;b.data=d}else if(!b.multipart){b.contentType="application/octet-stream";b.data=b.blob}}if(b.multipart&&typeof FormData!=="undefined"){if(b.formData instanceof FormData){c=b.formData}else{c=new FormData;a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})}if(b.blob){c.append(b.paramName,b.blob)}else{a.each(b.files,function(a,d){if(d instanceof Blob){c.append(b.paramName,d)}})}b.data=c}b.blob=null},_initIframeSettings:function(a){a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a)},_initDataSettings:function(a){if(this._isXHRUpload(a)){if(!this._chunkedUpload(a,true)){if(!a.data){this._initXHRData(a)}this._initProgressListener(a)}}else{this._initIframeSettings(a)}},_initFormSettings:function(b){if(!b.form||!b.form.length){b.form=a(b.fileInput.prop("form"))}if(!b.paramName){b.paramName=b.fileInput.prop("name")||"files[]"}if(!b.url){b.url=b.form.prop("action")||location.href}b.type=(b.type||b.form.prop("method")||"").toUpperCase();if(b.type!=="POST"&&b.type!=="PUT"){b.type="POST"}},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);this._initFormSettings(c);this._initDataSettings(c);return c},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();c=c||this.options.context||f;if(b===true){e.resolveWith(c,d)}else if(b===false){e.rejectWith(c,d)}f.abort=e.promise;return this._enhancePromise(f)},_chunkedUpload:function(b,c){var d=this,e=b.files[0],f=e.size,g=b.uploadedBytes=b.uploadedBytes||0,h=b.maxChunkSize||f,i=e.webkitSlice||e.mozSlice||e.slice,j,k,l,m;if(!(this._isXHRUpload(b)&&i&&(g||h<f))||b.data){return false}if(c){return true}if(g>=f){e.error="uploadedBytes";return this._getXHRPromise(false)}k=Math.ceil((f-g)/h);j=function(c){if(!c){return d._getXHRPromise(true)}return j(c-=1).pipe(function(){var f=a.extend({},b);f.blob=i.call(e,g+c*h,g+(c+1)*h);f.chunkSize=f.blob.size;d._initXHRData(f);d._initProgressListener(f);l=(a.ajax(f)||d._getXHRPromise(false,f.context)).done(function(){if(!f.loaded){d._onProgress(a.Event("progress",{lengthComputable:true,loaded:f.chunkSize,total:f.chunkSize}),f)}b.uploadedBytes=f.uploadedBytes+=f.chunkSize});return l})};m=j(k);m.abort=function(){return l.abort()};return this._enhancePromise(m)},_beforeSend:function(a,b){if(this._active===0){this._trigger("start")}this._active+=1;this._loaded+=b.uploadedBytes||0;this._total+=this._getTotal(b.files)},_onDone:function(b,c,d,e){if(!this._isXHRUpload(e)){this._onProgress(a.Event("progress",{lengthComputable:true,loaded:1,total:1}),e)}e.result=b;e.textStatus=c;e.jqXHR=d;this._trigger("done",null,e)},_onFail:function(a,b,c,d){d.jqXHR=a;d.textStatus=b;d.errorThrown=c;this._trigger("fail",null,d);if(d.recalculateProgress){this._loaded-=d.loaded||d.uploadedBytes||0;this._total-=d.total||this._getTotal(d.files)}},_onAlways:function(a,b,c,d,e){this._active-=1;e.result=a;e.textStatus=b;e.jqXHR=c;e.errorThrown=d;this._trigger("always",null,e);if(this._active===0){this._trigger("stop");this._loaded=this._total=0}},_onSend:function(b,c){var d=this,e,f,g=d._getAJAXSettings(c),h=function(c,f){e=e||(c!==false&&d._trigger("send",b,g)!==false&&(d._chunkedUpload(g)||a.ajax(g))||d._getXHRPromise(false,g.context,f)).done(function(a,b,c){d._onDone(a,b,c,g)}).fail(function(a,b,c){d._onFail(a,b,c,g)}).always(function(a,b,c){if(!c||typeof c==="string"){d._onAlways(undefined,b,a,c,g)}else{d._onAlways(a,b,c,undefined,g)}});return e};this._beforeSend(b,g);if(this.options.sequentialUploads){f=this._sequence=this._sequence.pipe(h,h);f.abort=function(){if(!e){return h(false,[undefined,"abort","abort"])}return e.abort()};return this._enhancePromise(f)}return h()},_onAdd:function(b,c){var d=this,e=true,f=a.extend({},this.options,c);if(f.singleFileUploads&&this._isXHRUpload(f)){a.each(c.files,function(f,g){var h=a.extend({},c,{files:[g]});h.submit=function(){return d._onSend(b,h)};return e=d._trigger("add",b,h)});return e}else if(c.files.length){c=a.extend({},c);c.submit=function(){return d._onSend(b,c)};return this._trigger("add",b,c)}},_normalizeFile:function(a,b){if(b.name===undefined&&b.size===undefined){b.name=b.fileName;b.size=b.fileSize}},_replaceFileInput:function(b){var c=b.clone(true);a("<form></form>").append(c)[0].reset();b.after(c).detach();this.options.fileInput=this.options.fileInput.map(function(a,d){if(d===b[0]){return c[0]}return d})},_onChange:function(b){var c=b.data.fileupload,d={files:a.each(a.makeArray(b.target.files),c._normalizeFile),fileInput:a(b.target),form:a(b.target.form)};if(!d.files.length){d.files=[{name:b.target.value.replace(/^.*\\/,"")}]}if(d.form.length){d.fileInput.data("blueimp.fileupload.form",d.form)}else{d.form=d.fileInput.data("blueimp.fileupload.form")}if(c.options.replaceFileInput){c._replaceFileInput(d.fileInput)}if(c._trigger("change",b,d)===false||c._onAdd(b,d)===false){return false}},_onDrop:function(b){var c=b.data.fileupload,d=b.dataTransfer=b.originalEvent.dataTransfer,e={files:a.each(a.makeArray(d&&d.files),c._normalizeFile)};if(c._trigger("drop",b,e)===false||c._onAdd(b,e)===false){return false}b.preventDefault()},_onDragOver:function(a){var b=a.data.fileupload,c=a.dataTransfer=a.originalEvent.dataTransfer;if(b._trigger("dragover",a)===false){return false}if(c){c.dropEffect=c.effectAllowed="copy"}a.preventDefault()},_initEventHandlers:function(){var a=this.options.namespace||this.name;this.options.dropZone.bind("dragover."+a,{fileupload:this},this._onDragOver).bind("drop."+a,{fileupload:this},this._onDrop);this.options.fileInput.bind("change."+a,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var a=this.options.namespace||this.name;this.options.dropZone.unbind("dragover."+a,this._onDragOver).unbind("drop."+a,this._onDrop);this.options.fileInput.unbind("change."+a,this._onChange)},_beforeSetOption:function(a,b){this._destroyEventHandlers()},_afterSetOption:function(b,c){var d=this.options;if(!d.fileInput){d.fileInput=a()}if(!d.dropZone){d.dropZone=a()}this._initEventHandlers()},_setOption:function(b,c){var d=a.inArray(b,this._refreshOptionsList)!==-1;if(d){this._beforeSetOption(b,c)}a.Widget.prototype._setOption.call(this,b,c);if(d){this._afterSetOption(b,c)}},_create:function(){var b=this.options;if(b.fileInput===undefined){b.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file")}else if(!b.fileInput){b.fileInput=a()}if(!b.dropZone){b.dropZone=a()}this._sequence=this._getXHRPromise(true);this._active=this._loaded=this._total=0;this._initEventHandlers()},destroy:function(){this._destroyEventHandlers();a.Widget.prototype.destroy.call(this)},enable:function(){a.Widget.prototype.enable.call(this);this._initEventHandlers()},disable:function(){this._destroyEventHandlers();a.Widget.prototype.disable.call(this)},add:function(b){if(!b||this.options.disabled){return}b.files=a.each(a.makeArray(b.files),this._normalizeFile);this._onAdd(null,b)},send:function(b){if(b&&!this.options.disabled){b.files=a.each(a.makeArray(b.files),this._normalizeFile);if(b.files.length){return this._onSend(null,b)}}return this._getXHRPromise(false,b&&b.context)}})})(jQuery);

/*
 * jQuery File Upload User Interface Plugin 5.0.13
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */

/*jslint nomen: true, unparam: true, regexp: true */
/*global window, document, URL, webkitURL, FileReader, jQuery */
(function(a){"use strict";a.widget("blueimpUI.fileupload",a.blueimp.fileupload,{options:{autoUpload:false,maxNumberOfFiles:undefined,maxFileSize:undefined,minFileSize:1,acceptFileTypes:/.+$/i,previewFileTypes:/^image\/(gif|jpeg|png)$/,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:true,uploadTemplate:a("#template-upload"),downloadTemplate:a("#template-download"),dataType:"json",add:function(b,c){var d=a(this).data("fileupload");d._adjustMaxNumberOfFiles(-c.files.length);c.isAdjusted=true;c.isValidated=d._validate(c.files);c.context=d._renderUpload(c.files).appendTo(a(this).find(".files")).fadeIn(function(){a(this).show()}).data("data",c);if((d.options.autoUpload||c.autoUpload)&&c.isValidated){c.jqXHR=c.submit()}},send:function(b,c){if(!c.isValidated){var d=a(this).data("fileupload");if(!c.isAdjusted){d._adjustMaxNumberOfFiles(-c.files.length)}if(!d._validate(c.files)){return false}}if(c.context&&c.dataType&&c.dataType.substr(0,6)==="iframe"){c.context.find(".ui-progressbar").progressbar("value",parseInt(100,10))}},done:function(b,c){var d=a(this).data("fileupload");if(c.context){c.context.each(function(b){var e=a.isArray(c.result)&&c.result[b]||{error:"emptyResult"};if(e.error){d._adjustMaxNumberOfFiles(1)}else{var f=a("#upload-dialog").data("editorId");var g=a("#"+f).closest("form").attr("id");a('<input type="hidden" name="filedataids[]" />').val(c.result[b].filedataid).data("url",c.result[b].url).data("thumbnail_url",c.result[b].thumbnail_url).data("name",c.result[b].name).appendTo("#"+g);a('<input type="hidden" name="filename_'+c.result[b].filedataid+'" />').val(c.result[b].name).data("name",c.result[b].name).appendTo("#"+g)}a(this).fadeOut(function(){d._renderDownload([e]).css("display","none").replaceAll(this).fadeIn(function(){a(this).show()})})})}else{d._renderDownload(c.result).css("display","none").appendTo(a(this).find(".files")).fadeIn(function(){a(this).show()})}},fail:function(b,c){var d=a(this).data("fileupload");d._adjustMaxNumberOfFiles(c.files.length);if(c.context){c.context.each(function(b){a(this).fadeOut(function(){if(c.errorThrown!=="abort"){var e=c.files[b];e.error=e.error||c.errorThrown||true;d._renderDownload([e]).css("display","none").replaceAll(this).fadeIn(function(){a(this).show()})}else{c.context.remove()}})})}else if(c.errorThrown!=="abort"){d._adjustMaxNumberOfFiles(-c.files.length);c.context=d._renderUpload(c.files).css("display","none").appendTo(a(this).find(".files")).fadeIn(function(){a(this).show()}).data("data",c)}},progress:function(a,b){if(b.context){b.context.find(".ui-progressbar").progressbar("value",parseInt(b.loaded/b.total*100,10))}},progressall:function(b,c){a(this).find(".fileupload-progressbar").progressbar("value",parseInt(c.loaded/c.total*100,10))},start:function(){a(this).find(".fileupload-progressbar").progressbar("value",0).fadeIn()},stop:function(){a(this).find(".fileupload-progressbar").fadeOut()},destroy:function(b,c){var d=a(this).data("fileupload");if(c.url){a.ajax(c).success(function(){d._adjustMaxNumberOfFiles(1);a(this).fadeOut(function(){a(this).remove()})})}else{c.context.fadeOut(function(){a(this).remove()})}}},_scaleImage:function(a,b){b=b||{};var c=document.createElement("canvas"),d=Math.min((b.maxWidth||a.width)/a.width,(b.maxHeight||a.height)/a.height);if(d>=1){d=Math.max((b.minWidth||a.width)/a.width,(b.minHeight||a.height)/a.height)}a.width=parseInt(a.width*d,10);a.height=parseInt(a.height*d,10);if(!b.canvas||!c.getContext){return a}c.width=a.width;c.height=a.height;c.getContext("2d").drawImage(a,0,0,a.width,a.height);return c},_createObjectURL:function(a){var b="undefined",c=typeof window.createObjectURL!==b&&window||typeof URL!==b&&URL||typeof webkitURL!==b&&webkitURL;return c?c.createObjectURL(a):false},_revokeObjectURL:function(a){var b="undefined",c=typeof window.revokeObjectURL!==b&&window||typeof URL!==b&&URL||typeof webkitURL!==b&&webkitURL;return c?c.revokeObjectURL(a):false},_loadFile:function(a,b){if(typeof FileReader!=="undefined"&&FileReader.prototype.readAsDataURL){var c=new FileReader;c.onload=function(a){b(a.target.result)};c.readAsDataURL(a);return true}return false},_loadImage:function(b,c,d){var e=this,f,g;if(!d||!d.fileTypes||d.fileTypes.test(b.type)){f=this._createObjectURL(b);g=a("<img>").bind("load",function(){a(this).unbind("load");e._revokeObjectURL(f);c(e._scaleImage(g[0],d))}).prop("src",f);if(!f){this._loadFile(b,function(a){g.prop("src",a)})}}},_enableDragToDesktop:function(){var b=a(this),c=b.prop("href"),d=decodeURIComponent(c.split("/").pop()).replace(/:/g,"-"),e="application/octet-stream";b.bind("dragstart",function(a){try{a.originalEvent.dataTransfer.setData("DownloadURL",[e,d,c].join(":"))}catch(b){}})},_adjustMaxNumberOfFiles:function(a){if(typeof this.options.maxNumberOfFiles==="number"){this.options.maxNumberOfFiles+=a;if(this.options.maxNumberOfFiles<1){this._disableFileInputButton()}else{this._enableFileInputButton()}}},_formatFileSize:function(a){if(typeof a.size!=="number"){return""}if(a.size>=1e9){return(a.size/1e9).toFixed(2)+" GB"}if(a.size>=1e6){return(a.size/1e6).toFixed(2)+" MB"}return(a.size/1e3).toFixed(2)+" KB"},_hasError:function(a){if(a.error){return a.error}if(this.options.maxNumberOfFiles<0){return"maxNumberOfFiles"}if(!(this.options.acceptFileTypes.test(a.type)||this.options.acceptFileTypes.test(a.name))){return"acceptFileTypes"}if(this.options.maxFileSize&&a.size>this.options.maxFileSize){return"maxFileSize"}if(typeof a.size==="number"&&a.size<this.options.minFileSize){return"minFileSize"}return null},_validate:function(b){var c=this,d;a.each(b,function(a,b){b.error=c._hasError(b);d=!b.error});return d},_uploadTemplateHelper:function(a){a.sizef=this._formatFileSize(a);return a},_renderUploadTemplate:function(b){var c=this;return a.tmpl(this.options.uploadTemplate,a.map(b,function(a){return c._uploadTemplateHelper(a)}))},_renderUpload:function(b){var c=this,d=this.options,e=this._renderUploadTemplate(b);if(!(e instanceof a)){return a()}e.css("display","none");e.find(".progress div").slice(1).remove().end().first().progressbar();e.find(".start button").slice(this.options.autoUpload?0:1).remove().end().first().button({text:false,icons:{primary:"ui-icon-circle-arrow-e"}});e.find(".cancel button").slice(1).remove().end().first().button({text:false,icons:{primary:"ui-icon-cancel"}});e.find(".preview").each(function(e,f){c._loadImage(b[e],function(b){a(b).hide().appendTo(f).fadeIn()},{maxWidth:d.previewMaxWidth,maxHeight:d.previewMaxHeight,fileTypes:d.previewFileTypes,canvas:d.previewAsCanvas})});return e},_downloadTemplateHelper:function(a){a.sizef=this._formatFileSize(a);return a},_renderDownloadTemplate:function(b){var c=this;return a.tmpl(this.options.downloadTemplate,a.map(b,function(a){return c._downloadTemplateHelper(a)}))},_renderDownload:function(b){var c=this._renderDownloadTemplate(b);if(!(c instanceof a)){return a()}c.css("display","none");c.find(".delete button").button({text:false,icons:{primary:"ui-icon-trash"}});c.find("a").each(this._enableDragToDesktop);return c},_startHandler:function(b){b.preventDefault();var c=a(this).closest(".template-upload"),d=c.data("data");if(d&&d.submit&&!d.jqXHR){d.jqXHR=d.submit();a(this).fadeOut()}},_cancelHandler:function(b){b.preventDefault();var c=a(this).closest(".template-upload"),d=c.data("data")||{};if(!d.jqXHR){d.errorThrown="abort";b.data.fileupload._trigger("fail",b,d)}else{d.jqXHR.abort()}},_deleteHandler:function(b){b.preventDefault();var c=a(this);b.data.fileupload._trigger("destroy",b,{context:c.closest(".template-download"),url:c.attr("data-url"),type:c.attr("data-type"),dataType:b.data.fileupload.options.dataType})},_initEventHandlers:function(){a.blueimp.fileupload.prototype._initEventHandlers.call(this);var b=this.element.find(".files"),c={fileupload:this};b.find(".start button").live("click."+this.options.namespace,c,this._startHandler);b.find(".cancel button").live("click."+this.options.namespace,c,this._cancelHandler);b.find(".delete button").live("click."+this.options.namespace,c,this._deleteHandler)},_destroyEventHandlers:function(){var b=this.element.find(".files");b.find(".start button").die("click."+this.options.namespace);b.find(".cancel button").die("click."+this.options.namespace);b.find(".delete button").die("click."+this.options.namespace);a.blueimp.fileupload.prototype._destroyEventHandlers.call(this)},_initFileUploadButtonBar:function(){var b=this.element.find(".fileupload-buttonbar"),c=this.element.find(".files"),d=this.options.namespace;b.addClass("ui-widget-header ui-corner-top");this.element.find(".fileinput-button").each(function(){var b=a(this).find("input:file").detach();a(this).button({icons:{primary:"ui-icon-plusthick"}}).append(b)});b.find(".start").button({icons:{primary:"ui-icon-circle-arrow-e"}}).bind("click."+d,function(a){a.preventDefault();c.find(".start button").click()});b.find(".cancel").button({icons:{primary:"ui-icon-cancel"}}).bind("click."+d,function(a){a.preventDefault();c.find(".cancel button").click()});b.find(".delete").button({icons:{primary:"ui-icon-trash"}}).bind("click."+d,function(a){a.preventDefault();c.find(".delete button").click()})},_destroyFileUploadButtonBar:function(){this.element.find(".fileupload-buttonbar").removeClass("ui-widget-header ui-corner-top");this.element.find(".fileinput-button").each(function(){var b=a(this).find("input:file").detach();a(this).button("destroy").append(b)});this.element.find(".fileupload-buttonbar button").unbind("click."+this.options.namespace).button("destroy")},_enableFileInputButton:function(){this.element.find(".fileinput-button input:file:disabled").each(function(){var b=a(this),c=b.parent();b.detach().prop("disabled",false);c.button("enable").append(b)})},_disableFileInputButton:function(){this.element.find(".fileinput-button input:file:enabled").each(function(){var b=a(this),c=b.parent();b.detach().prop("disabled",true);c.button("disable").append(b)})},_initTemplates:function(){if(this.options.uploadTemplate instanceof a&&!this.options.uploadTemplate.length){this.options.uploadTemplate=a(this.options.uploadTemplate.selector)}if(this.options.downloadTemplate instanceof a&&!this.options.downloadTemplate.length){this.options.downloadTemplate=a(this.options.downloadTemplate.selector)}},_create:function(){a.blueimp.fileupload.prototype._create.call(this);this._initTemplates();this.element.addClass("ui-widget");this._initFileUploadButtonBar();this.element.find(".fileupload-content").addClass("ui-widget-content ui-corner-bottom");this.element.find(".fileupload-progressbar").hide().progressbar()},destroy:function(){this.element.find(".fileupload-progressbar").progressbar("destroy");this.element.find(".fileupload-content").removeClass("ui-widget-content ui-corner-bottom");this._destroyFileUploadButtonBar();this.element.removeClass("ui-widget");a.blueimp.fileupload.prototype.destroy.call(this)},enable:function(){a.blueimp.fileupload.prototype.enable.call(this);this.element.find(":ui-button").not(".fileinput-button").button("enable");this._enableFileInputButton()},disable:function(){this.element.find(":ui-button").not(".fileinput-button").button("disable");this._disableFileInputButton();a.blueimp.fileupload.prototype.disable.call(this)}})})(jQuery);

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["add_caption","attach_files","click_to_add_caption","error_uploading_image","invalid_image_allowed_filetypes_are","remove_all_photos_confirmation_message","remove_all_photos_q","upload","upload_more","you_are_already_editing_continue","you_must_be_logged_in_to_upload_photos"]);(function(D){window.vBulletin=window.vBulletin||{};vBulletin.upload=vBulletin.upload||{};vBulletin.gallery=vBulletin.gallery||{};vBulletin.permissions=vBulletin.permissions||{};var C=3,E=2,G=[];vBulletin.gallery.onBeforeSerializeEditForm=function(H){H.find(".caption-box").each(function(){var I=D(this);if(I.hasClass("placeholder")&&I.val()==I.attr("placeholder")){I.val("")}});return true};vBulletin.upload.initializePhotoUpload=function(I){if(!I||I.length==0){I=D("body");if(D(".photo-display-container",I).length>1){return false}}D(".btnPhotoUploadCont",I).off("click").on("click",function(O){var L=D(document).data("gallery-container");var K=L.find(".hiddendata");var N=[];var P=[];var M={};var J=D(this).closest(".photo-display-container");K.empty();J.find(".photo-item-wrapper:not(.hide)").each(function(){var S=D(this).find(".filedataid");var R=S.val(),U=S.data("nodeid");var T=D.trim(D(this).find(".caption-box").val());D(this).removeClass("tmp-photo");if(typeof U!=="undefined"){D(this).removeClass("tmp-photo");var Q=D.inArray(U,G);if(Q==-1){G.push(U)}}K.append(D("<input />").attr({type:"hidden",name:"filedataid[]"}).val(R)).append(D("<input />").attr({type:"hidden",name:"title_"+R}).val(T));N.push(R);P.push(T);M["title["+R+"]"]=T});M.photocount=N.length;M["filedataid[]"]=N;J.find(".photo-item-wrapper.hide").remove();J.dialog("close");if(M.photocount>0){D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/editor_gallery_photoblock",data:(M),type:"POST",dataType:"json",success:function(Q){L.find(".photo-display-result").html(Q);D(document).data("gallery-container",null)}});D(".edit-photo-link",L).removeClass("hide");D(".custom-upload-button .label",L).text(vBulletin.phrase.get("upload_more"))}else{D(".photo-display-result",L).empty();D(".edit-photo-link",L).addClass("hide");D(".custom-upload-button .label",L).text(vBulletin.phrase.get("upload"))}});D(".edit-photo-link",I).off("click").on("click",function(K){D(document).data("gallery-container",D(this).closest(".gallery-editor"));var J=vBulletin.upload.getUploadedPhotosDlg(false);vBulletin.upload.relocateLastInRowClass(J.find(".photo-item-wrapper"));H(J);J.dialog("open");vBulletin.upload.adjustPhotoDialogForScrollbar(J);D(".custom-upload-button",J).trigger("focus")});D(".btnPhotoUploadCancel",I).off("click").on("click",function(L){var J=D(this).closest(".photo-display-container"),K=D(document).data("gallery-container");D(".photo-item-wrapper.tmp-photo",J).remove();D(".photo-item-wrapper.hide",J).removeClass("hide");if(D(".photo-display-result .photo-preview",K).length>0){D(".edit-photo-link",K).removeClass("hide");D(".custom-upload-button .label",K).text(vBulletin.phrase.get("upload_more"))}else{D(".photo-display-result",K).empty();D(".edit-photo-link",K).addClass("hide");D(".custom-upload-button .label",K).text(vBulletin.phrase.get("upload"))}J.dialog("close")});var H=function(J){if(D(".photo-display .photo-item-wrapper:not(.hide)",J).length>0){D(".custom-upload-button .label",J).text(vBulletin.phrase.get("upload_more"));D(".btnPhotoUploadCont, .btnPhotoUploadSave",J).show()}else{D(".custom-upload-button .label",J).text(vBulletin.phrase.get("upload"));D(".btnPhotoUploadCont, .btnPhotoUploadSave",J).hide()}};D(".gallery-editor",I).fileupload({dropZone:null,dataType:"json",acceptFileTypes:/(gif|jpg|jpeg|jpe|png)$/i,add:function(N,M){var L=D(this);D(document).data("gallery-container",L);var K=vBulletin.upload.getUploadedPhotosDlg(true);D(".upload-status-bar",K).removeClass("hide");var J=Number(D('.photo-display .photo-item-wrapper:last input[name="sequence[]"]',L).val())+1;D(".gallery-submit-form .photoCount",L).val(J||1);M.submit();D(".custom-upload-button",K).trigger("focus")},done:function(Q,P){var M=D(this);D(document).data("gallery-container",M);var L=vBulletin.upload.getUploadedPhotosDlg(false);var R=vBulletin.phrase.get("error_uploading_image");var N="error";if(P&&P.result&&(!P.result.errors||P.result.errors.length==0)&&P.result.edit){var J=D(P.result.edit);var O=D(".photo-display",L);var K=L.parent();var S=D(".photo-item-wrapper:not(.hide)",O).length;J.addClass("tmp-photo");if((S+1)%C==0){J.addClass("last-in-row")}if((S+1)>vBulletin.contentEntryBox.ATTACHLIMIT){D(".attach-limit-warning",L).show()}vBulletin.upload.adjustPhotoDialogForScrollbar(L);O.append(J);J.fadeIn("slow",function(){A(O);L.dialog("option","position","center");if(K.hasClass("has-scrollbar")){O.animate({scrollTop:O[0].scrollHeight-O.height()},"slow")}});D(".btnPhotoUploadCont, .btnPhotoUploadSave",L).show();return }else{if(P&&P.result&&P.result.errors&&P.result.errors.length>0){var R=P.result.errors[0][0]||P.result.errors[0][1];switch(R){case"please_login_first":R=vBulletin.phrase.get("you_must_be_logged_in_to_upload_photos");N="warning";break;default:R=vBulletin.phrase.get(P.result.errors[0]);N="warning";break}}else{R=vBulletin.phrase.get("unknown_error");N="warning"}}H(L);openAlertDialog({title:vBulletin.phrase.get("upload"),message:vBulletin.phrase.get(R),iconType:N})},fail:function(N,M){var K=vBulletin.phrase.get("error_uploading_image");var J="error";if(M&&M.files.length>0){switch(M.files[0].error){case"acceptFileTypes":K=vBulletin.phrase.get("invalid_image_allowed_filetypes_are");J="warning";break}}var L=vBulletin.upload.getUploadedPhotosDlg(false);H(L);openAlertDialog({title:vBulletin.phrase.get("upload"),message:K,iconType:J})},always:function(L,K){var J=vBulletin.upload.getUploadedPhotosDlg(false);J.find(".upload-status-bar").addClass("hide");H(J)}});D(".gallery-submit-form",I).submit(function(){D(".photo-display-container .photo-display input",D(this).closest(".gallery-editor")).appendTo(D(this));var J=D("input[type=hidden][name=ret]",this);if(D.trim(J.val())==""){J.val(location.href)}});D(document).off("click.photoadd",".action-buttons .btnPhotoAdd").on("click.photoadd",".action-buttons .btnPhotoAdd",function(){var J=D(this).closest(".photo-selector-container"),K={};J.find(".photo-item-wrapper").each(function(){var L=D(this).find(".filedataid"),O=L.data("nodeid");if(L.is(":checked")){var M=L.val(),N=D.trim(D(this).find(".photo-title").text());K[O]={imgUrl:vBulletin.getAjaxBaseurl()+"/filedata/fetch?filedataid="+M+"&thumb=1",filedataid:M,title:N}}});if(!D.isEmptyObject(K)){D.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/photo_item",data:{items:K,wrapperClass:"tmp-photo"},type:"POST",dataType:"json",success:function(N){var P=vBulletin.upload.getUploadedPhotosDlg(false),Q=D(".photo-display",P),M,L,O=1;Q.append(N);M=D(".photo-item-wrapper:not(.hide)",Q);D.each(M,function(R,S){L=D(S);if(O%C==0){L.addClass("last-in-row")}else{L.removeClass("last-in-row")}O++});if(O>0){D(".custom-upload-button .label",P).text(vBulletin.phrase.get("upload_more"));D(".btnPhotoUploadCont, .btnPhotoUploadSave",P).show()}else{D(".btnPhotoUploadCont, .btnPhotoUploadSave",P).hide()}vBulletin.upload.adjustPhotoDialogForScrollbar(P);P.dialog("option","position","center");P.dialog("open")}})}D(".photo-selector-galleries",J).tabs("destroy");J.dialog("close")});D(".action-buttons .btnPhotoCancel",I).off("click").on("click",function(){D(document).data("gallery-container",null);var J=D(this).closest(".photo-selector-container");D(".photo-selector-galleries",J).tabs("destroy");J.dialog("close")})};vBulletin.upload.getUploadedPhotosDlg=function(H){var I,J=D(document).data("gallery-container");if(J.parent(".profile-media-photoupload-dialog").length==1){I=J.parent(".profile-media-photoupload-dialog");if(H){I.dialog("open");vBulletin.upload.adjustPhotoDialogForScrollbar(I)}return I}I=J.find(".photo-display-container");if(I.length==0){D(".photo-display-container").each(function(){if(D(this).data("associated-editor")==D(document).data("gallery-container").get(0)){I=D(this);return false}})}else{I.dialog({modal:true,width:602,autoOpen:false,showCloseButton:false,closeOnEscape:false,resizable:false,showTitleBar:false,dialogClass:"dialog-container upload-photo-dialog-container dialog-box"});I.data("orig-width",I.dialog("option","width"));I.data("associated-editor",D(document).data("gallery-container").get(0))}if(H){I.dialog("open");vBulletin.upload.adjustPhotoDialogForScrollbar(I)}return I};vBulletin.upload.adjustPhotoDialogForScrollbar=function(K){var L=D(".photo-display",K);var J=K.parent();var I=D(".photo-item-wrapper:not(.hide)",L).length;if(!J.hasClass("has-scrollbar")&&I>=(C*E)){var H=window.vBulletin.getScrollbarWidth();J.addClass("has-scrollbar");K.dialog("option","width",K.dialog("option","width")+H+11);D(".action-buttons",K).css("margin-right",H+10)}};vBulletin.upload.relocateLastInRowClass=function(H){H.removeClass("last-in-row").filter(":not(.hide)").filter(function(I){return((I%C)==(C-1))}).addClass("last-in-row")};function F(){D(document).off("click.removephoto",".photo-display .photo-item .remove-icon").on("click.removephoto",".photo-display .photo-item .remove-icon",function(){var I=D(this).closest(".photo-item-wrapper"),M=D(".filedataid",I).data("nodeid"),L=I.parents(".photo-display-container").last();if(typeof M!=="undefined"){var K=D.inArray(M,G);if(K!=-1){G.splice(K,1)}}I.addClass("hide");var J=D(".photo-item-wrapper:not(.hide)",L).length;if(J<=vBulletin.contentEntryBox.ATTACHLIMIT){D(".attach-limit-warning",L).hide()}var H=L.find(".photo-item-wrapper:not(.hide)");vBulletin.upload.relocateLastInRowClass(H);if(H.length<=(C*E)){L.parent().removeClass("has-scrollbar");L.dialog("option","width",L.data("orig-width"));D(".action-buttons",L).css("margin-right","")}if(H.length>0){D(".gallery-upload-form .custom-upload-button .label",L).text(vBulletin.phrase.get("upload_more"));D(".btnPhotoUploadCont, .btnPhotoUploadSave",L).show()}else{D(".gallery-upload-form .custom-upload-button .label",L).text(vBulletin.phrase.get("upload"));D(".btnPhotoUploadCont, .btnPhotoUploadSave",L).hide()}});D(document).off("blur.photocaption",".photo-display .photo-caption .caption-box").on("blur.photocaption",".photo-display .photo-caption .caption-box",function(){D(this).scrollTop(0)});vBulletin.conversation.bindEditFormEventHandlers("gallery")}function A(I){var H=D(".photo-item .photo-caption .caption-box",I);H.filter("[placeholder]").placeholder()}function B(H){D(this).replaceWith(H);A(H)}D(document).ready(function(){vBulletin.upload.initializePhotoUpload();F()})})(jQuery);function submitUrl(){var A="urlupload="+$("#urlupload").val()+"&urlretrieve="+$("#urlretrieve").val();data=$.ajax({type:"POST",url:uploadUrlTarget,data:A,success:function(C){fileInfo=jQuery.parseJSON(C);var B=document.createElement("input");B.setAttribute("type","hidden");B.setAttribute("value",fileInfo.filedataid);B.setAttribute("name","filedataids[]");B.setAttribute("id","filedataid_"+fileInfo.filedataid);var B=document.createElement("input");B.setAttribute("type","hidden");B.setAttribute("value",fileInfo.name);B.setAttribute("name","filename_"+fileInfo.filedataid);B.setAttribute("id","filename_"+fileInfo.filedataid);document.getElementById("newTextForm").appendChild(B);newItem='<div id ="uploadedUrl_'+fileInfo.filedataid+'"><img src="'+fileInfo.thumbUrl+'"></img><a href="#" onclick="javascript:deleteExistingLink('+fileInfo.filedataid+')"> Click Here to Remove</a>&nbsp;&nbsp;'+$("#urlupload").val()+"</div>";$("#urlupload").val("");$("#tab-3").append(newItem)}});return false}function deleteExistingLink(A){$("#uploadedUrl_"+A).remove();$("#filedataid_"+A).remove();return false}function removePhoto(A){$("#vb_photoEdit_"+A).remove()}function showCaptionEdit(A){$("#photoCtrl_"+A).removeClass("show");$("#photoCtrl_"+A).addClass("hide");$("#photoCaption_"+A).removeClass("hide");$("#photoCaption_"+A).addClass("show")}function closePhotoCaption(A){$("#photoCtrl_"+A).removeClass("hide");$("#photoCtrl_"+A).addClass("show");$("#photoCaption_"+A).removeClass("show");$("#photoCaption_"+A).addClass("hide");caption=$("#caption_edit_"+A).val();if(caption.length){$("#addcaptionText_"+A).html(caption.substr(0,10))}else{$("#addcaptionText_"+A).html(vBulletin.phrase.get("add_caption"))}}function cancelPhotoCaption(A){$("#photoCtrl_"+A).removeClass("hide");$("#photoCtrl_"+A).addClass("show");$("#photoCaption_"+A).removeClass("show");$("#photoCaption_"+A).addClass("hide");$("#addcaptionText_"+A).html(vBulletin.phrase.get("add_caption"));$("#caption_edit_"+A).val("")}var openGalleryEdit=false;function editGallery(B){redirect=true;if(B.data){B=B.data;redirect=false}if(openGalleryEdit!==false){if(!confirm(vBulletin.phrase.get("you_are_already_editing_continue"))){return }$("#gallery_edit_holder_"+openGalleryEdit).removeClass("show");$("#gallery_edit_holder_"+openGalleryEdit).addClass("hide");$("#gallery_edit_holder_"+openGalleryEdit).html("")}var A=0;openGalleryEdit=B;$.ajax({type:"POST",url:vBulletin.getAjaxBaseurl()+"/uploader/get_photoedit",data:"nodeid="+B,success:function(E,D,C){$("#gallery_edit_holder_"+B).removeClass("hide");$("#gallery_edit_holder_"+B).addClass("show");$("#gallery_edit_holder_"+B).html(C.responseText);$("#gallery_pageid_"+B).val(pageData.pageid);A=$("#photoCount"+B).val();$("#gallery_edit-"+B).fileupload({dropZone:null,add:function(G,F){A++;$("#photoCount"+B).val(A);$("#photo_uploader_status").css("display","block");F.submit()},done:function(H,G){if(G.result&&G.result.filedataid){var F=G.result.edit;if(typeof (G.result.galleryid)=="undefined"){galleryid=""}else{galleryid=G.result.galleryid}$("#photo_display"+galleryid).css("display","block");$("#photo_display_edit"+galleryid).append(F);$("#photo_uploader_status").css("display","none")}},fail:function(G,F){},always:function(G,F){$("#photo_display").css("display","block");$("#photo_uploader_status").css("display","none")}})},dataType:"html"})}function closeGalleryEdit(A){$("#gallery_edit_holder_"+A).removeClass("show");$("#gallery_edit_holder_"+A).addClass("hide");$("#gallery_edit_holder_"+A).html("");openGalleryEdit=false}$(function(){window.openUploadDialog=function(D,B){var C=$("#upload-dialog").data("editorId",D);if(!isNaN(B)){C.find('input[name="parentid"]').val(B)}if(!C.data("created")){C.dialog({width:720,title:vBulletin.phrase.get("attach_files"),dialogClass:"dialog-container upload-dialog-container input-dialog shadow-dark",showCloseButton:false,modal:true,resizable:false,autoOpen:false,create:function(G,F){var E=$(this);E.data("created",true);$("#btnDone",E).on("click",function(){A();E.dialog("close")});$("#btnCancelAttach",E).on("click",function(){E.dialog("close")})}})}C.dialog("open")};var A=function(){var C=function(J,I){var K="";J.each(function(){if($(this).data("insertedIntoEditor")=="true"){return true}var N=$(this).data("name");if(N.match(/\.(gif|jpg|jpeg|jpe|png|bmp)$/i)){var O=vBulletin.getAjaxBaseurl()+"/filedata/fetch?filedataid="+$(this).val();K+=' <img src="'+O+'" alt="" /> '}else{if(N!=""){var M=vBulletin.getAjaxBaseurl()+"/filedata/fetch?filedataid="+$(this).val();K+=' <a href="'+M+'">'+N+"</a>"}}$(this).data("insertedIntoEditor","true")});if(K!=""){var L=I.document.getBody();L.setAttribute("contentEditable",false);L.setAttribute("contentEditable",true);I.insertHtml(K)}};var H=$("#upload-dialog").data("editorId");var G=$("#"+H);var B=G.closest("form");var F=B.find("input[name^=filedataids]");if(F.length>0){if(!vBulletin.ckeditor.editorExists(H)){vBulletin.ckeditor.initEditor(H,{success:function(){C(F,vBulletin.ckeditor.getEditor(H))}})}else{C(F,vBulletin.ckeditor.getEditor(H))}}var D=B.find("input[name^=filename]");var E=G.closest(".content-entry-box").find("form").not(B);E.remove("input[name^=filedataids]").append(F.clone(true));E.remove("input[name^=filename]").append(D.clone(true))};$(document).off("click",".content-entry-box .btnUpload").on("click",".content-entry-box .btnUpload",function(D){var C=$(this).closest("form").find('textarea[name="text"]').attr("id");var B=$(this).closest("form").find('input[name="parentid"]').val();window.openUploadDialog(C,B)});$("#fileupload").fileupload();$("#fileupload .files a:not([target^=_blank])").live("click",function(B){B.preventDefault();$('<iframe style="display:none;"></iframe>').prop("src",this.href).appendTo("body")})});;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,[]);var vBulletin_Autocomplete=function(T,a){var B=$(T),Y=a.apiClass||null,K=a.apiFunction||"getAutocomplete",c=a.delay||500,b=a.minLength||3,X=a.maxItems||false,F=B.attr("name")||"autocompleteElements",I=a.containerClass||"entry-field",J=a.placeholderText,M=[],A=B.parent(".autocomplete-container"),e=A.find(".autocompleteHelper"),Z=false,R=false,P=B.siblings(".autocomplete-box"),H=a.beforeAdd||false,G=a.afterAdd||false,E=a.beforeDelete||false,C=a.afterDelete||false,N=this,W=a.editorContext||null,V=function(){if(A.length==0){B.wrap('<div class="autocomplete-container" />');A=B.parent(".autocomplete-container");A.addClass(I).on("mousedown",function(k){var i=this;setTimeout(function(){var l=$(".autocompleteHelper:visible",i);if(l.length>0){l[0].focus()}},10);return false})}if(P.length==0){P=$("<div />").addClass("autocomplete-box").insertBefore(B)}if(e.length==0){e=$('<input type="text" name="autocompleteHelper" />').addClass("autocompleteHelper").attr("placeholder",function(){return J?J:null}).attr("maxlength",function(){return B.attr("maxlength")?B.attr("maxlength"):null}).insertAfter(P)}e.attr("tabindex",B.attr("tabindex")||0);e.off("keydown").on("keydown",function(k){if(k.which==13){var i=$(k.target).val();if(i.length>=b){Q(i,true,k)}}});e.off("blur").on("blur",function(i){Z=window.setTimeout(function(){if(!R){var k=e.val();if(k.length>=b){Q(k,true,i)}}R=false;Z=false},200)});e.off("focus").on("focus",function(i){R=Z?true:false;return false});var g=["font-family","font-size","font-weight","font-style","color","border","line-height","height"];var h;for(h=0;h<g.length;++h){A.css(g[h],B.css(g[h]))}var f='<input type="hidden" name="'+F+'"';if(B.attr("id")){f+=' id="'+B.attr("id")+'"'}if(B.attr("class")){f+=' class="'+B.attr("class")+'"'}if(B.attr("data-value")){var j=B.attr("data-value").split(",")}f+=" />";B.replaceWith(f);B=A.find('[name="'+F+'"]');e.autocomplete({delay:c,minLength:b,search:function(i,k){console.log("searching for "+this.value)},source:function(i,k){console.log("getting source for "+i.term);vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/api/"+Y+"/"+K,data:({searchStr:i.term}),success:function(m){console.log("got source for "+i.term+":");if(m&&$.isArray(m.suggestions)){var l=[];$.each(m.suggestions,function(n,o){if(W&&W.type=="tags"){l.push({label:o.title,value:pageData.userid})}else{l.push({label:o.title,value:o.value})}});k(l)}else{console.log("/ajax/api/"+Y+"/"+K+" successful, but response was not an array");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}},error_phrase:"error_getting_suggestions"})},select:function(k,i){N.addElement(i.item.label,i.item.value);e.val("");k.preventDefault()},focus:function(k,i){e.val(i.item.label);k.preventDefault()}});P.delegate(".element-x","click",function(n){var l=$(this).closest(".autocomplete");var k=l.find(".element-text").text().toLowerCase();var i=[];var m=false;$(M).each(function(o,p){if(p.label.toLowerCase()==k){m=p}else{i.push(p)}});if(typeof E=="function"){if(!E.call(this,m.label,m.data)){return false}}M=i;l.remove();d();if(typeof C=="function"){C.call(this,m.label,m.data)}});A.off("click").on("click",function(i){if(!$(i.target).hasClass("ui-autocomplete-input")){$(".ui-autocomplete-input",$(this)).focus()}return false});if(j){U.call(this,j)}},L=function(j,i){if(j==""){return false}if(typeof H=="function"){if(!H.call(this,j,i)){return false}}var h=true;$(M).each(function(l,m){if(m.label==j){h=false}});if(!h){return false}if(X){if(M.length>=X){return false}}var k=$("<div />").addClass("element-x vb-icon vb-icon-x-blue").text("X");var f=$("<div />").addClass("element-text").text(j);var g=$("<div />").addClass("autocomplete").append(f).append(k).appendTo(P);M.push({label:j,value:i});d();if(typeof G=="function"){G.call(this,j,i)}P.show();return true},U=function(h){var f=h.length,g;for(g=0;g<f;++g){L(h[g])}},S=function(f){O();U(f)},O=function(){P.html("");e.val("");M=[];d()},d=function(){var f=[];$(M).each(function(g,h){f.push(h.label)});B.val(f.join(","))},D=function(){return b},Q=function(h,f,g){if(W){switch(W.type){case"tags":W.context.addTag(h);break;default:break}}else{N.addElement(h,h);e.val("")}if(typeof f!=="undefined"&&typeof g!=="undefined"){g.preventDefault();return false}};V.call(this);this.addElement=function(g,f){return L.call(this,g,f)};this.addElements=function(f){U.call(this,f)};this.setElements=function(f){S.call(this,f)};this.getElements=function(){return M};this.getLabels=function(){var f=[];$(M).each(function(g,h){f.push(h.label)});return f};this.getValues=function(){var f=[];$(M).each(function(g,h){f.push(h.value)});return f};this.getInputField=function(){return e};this.clearElements=function(){return O.call(this)};this.countElements=function(){return $(M).length};this.getMinLength=function(){return D()}};;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["vote_failed","vote_now","votes"]);window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.precache=$.merge(window.vBulletin.options.precache,["maxpolloptions"]);(function(A){A(document).ready(function(){function E(I){var H=window.vBulletin.options.get("maxpolloptions"),G=(H>3)?3:H;I.off("click",'[name="viewpollresults"]').on("click",'[name="viewpollresults"]',function(L){L.preventDefault();var K=A(this).attr("data-nodeid"),J=A(this).closest("form");A.get(vBulletin.getAjaxBaseurl()+"/poll/get",{nodeid:K},function(M){B(J,M)},"json")});I.off("click",'[name="backtopoll"]').on("click",'[name="backtopoll"]',function(K){K.preventDefault();var J=A(this).parents(".list-item-body").eq(0);J.find("div.pollresults").addClass("hide");J.find("form.poll").show()});I.off("click","a#addanswer").on("click","a#addanswer",function(K){var L=A(".polloptioncontainer:first").clone(),J=A(".polloptioncontainer:not(:hidden)",I).length;L.css("display","table").find("input").attr("name","polloptions[new][]").val("").placeholder().prop("disabled",false);A(this).prev(".polloption-list").append(L.css("display","")).find(".polloptioncontainer:last input").focus();if(J+1==H){A(this).hide()}return false});I.off("click",".polloptioncontainer button.remove").on("click",".polloptioncontainer button.remove",function(){var J=A(".polloptioncontainer:not(:hidden)",I).length;A(this).closest(".polloptioncontainer").remove();A("a#addanswer",I).show();return false});I.off("click",".pollsettings .timeout input").on("click",".pollsettings .timeout input",function(J){A(this).closest(".polloptions-container").next(".datepickercontainer")[this.checked?"removeClass":"addClass"]("hide")});I.off("submit.formpoll","form.poll").on("submit.formpoll","form.poll",function(M){M.preventDefault();var J=A(this);var L=J.find('[name="polloptionid"]:checked').val();var K=[];J.find('[name="polloptionids[]"]:checked').each(function(){K.push(A(this).val())});A.post(vBulletin.normalizeAjaxUrl(J.attr("action")),{polloptionid:L,"polloptionids[]":K},function(O){if(O==false){openAlertDialog({title:vBulletin.phrase.get("vote_now"),message:vBulletin.phrase.get("vote_failed"),iconType:"warning"})}else{B(J,O);var N=J.parent();A("div.pollresults",N).find('[name="backtopoll"]').remove()}},"json")});A(document).off("click",".pollresults-data .voter-icon").on("click",".pollresults-data .voter-icon",function(){var J=A(this);if(J.find(".voters").is(":visible")){return false}A(".pollresults-data tr td.pollvoter-cell .voter-icon .voters").hide();var M=J.attr("data-node-id");var L=J.attr("data-polloption-id");var K=J.closest("form");A.get(vBulletin.getAjaxBaseurl()+"/poll/get-voters",{nodeid:M,polloptionid:L},function(N){if(N){if(!N.error){C(K,N,L,J)}else{D({message:N.error,type:"error"},J)}}else{D({message:"Error retrieving voters.",type:"error"},J)}},"json")});A(document).off("click",".pollresults-data .voter-icon .voters").on("click",".pollresults-data .voter-icon .voters",function(){e.stopPropagation();return true});if(A(".polloptioncontainer.new",I).length>0){for(var F=0;F<G-1;F++){A("a#addanswer",I).click()}if(G==H){A("a#addanswer",I).hide()}}}vBulletin.conversation.bindEditFormEventHandlers("poll");function D(H,G){var I=G.find(".voters");if(H.message){var F=A("<span />").addClass(H.type).text(H.message);I.html(F)}else{I.html(H.voters)}I.fadeIn("slow");A("body").on("click.voterpopup",function(J){if(A(J.target).closest(".voter-icon").length==0){I.hide();A("body").off("click.voterpopup")}})}function C(F,H,K,I){var M=false;if(H.options){B(F,H);var J=H.options[K];if(J){M=true;if(!A.isEmptyObject(J.votersinfo)){var L=[];for(var G in J.votersinfo){L.push('<a href="{0}">{1}</a>'.format(pageData.baseurl+J.votersinfo[G].profileUrl,J.votersinfo[G].username))}D({voters:L.join(", ")},I)}else{D({message:"No one has voted for this option yet. Be the first one to vote.",type:"note"},I)}}}if(!M){D({message:"Error retrieving voters.",type:"error"},I)}}function B(G,K){var F=G.parent();var H=K.options;for(var I in H){var J=A(".pollresults-option-"+H[I].polloptionid);J.find(".title").html(JShtmlEncode(H[I].title));J.find(".bar-container .bar").css("width",H[I].percentage+"%");J.find(".percentage").html(H[I].percentage+"%");J.find(".votes span").html(H[I].votes);if(H[I].votes>1){J.find(".votes label").html(vBulletin.phrase.get("votes"))}}A(".pollresults .pollvote-count span",F).html(K.poll_votes);if(K.poll_votes>1){A(".pollresults .pollvote-count label",F).html(vBulletin.phrase.get("votes"))}G.hide();A("div.pollresults",F).removeClass("hide")}E(A("body"))})})(jQuery);;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["attach_video","please_enter_video_url"]);(function(A){A(document).ready(function(){vBulletin.conversation.bindEditFormEventHandlers("video");A(".content-entry-box .video-pane").each(function(){A("body").trigger("video_editform_onload",[A(this)])})})})(jQuery);;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["gallery_slideshow","no_photos_found_or_post_deleted"]);(function(A){window.vBulletin=window.vBulletin||{};vBulletin.gallery=vBulletin.gallery||{};A(document).ready(function(){var F=5,B=A("#slideshow-dialog"),G=0;A(document).off("click",".galleryLink").on("click",".galleryLink",function(){var M=A(this);if(M.closest("#preview-overlay").length==1){return false}var H=M.attr("data-channelid"),K=M.closest(".photoPreviewBox"),J=M.attr("src");G=(K.length>0)?K.index():M.index();A(document).off("click","#slideshow-dialog .close-btn").on("click","#slideshow-dialog .close-btn",function(){B.dialog("close")});A(document).off("click",".thumbnails .image-wrapper").on("click",".thumbnails .image-wrapper",function(P,O){if(typeof O=="undefined"){O=true}A(".thumbnails .image-wrapper",B).addClass("dimmed");A(this).removeClass("dimmed");var N=Number(A(this).parent().attr("jcarouselindex"));B.data("thumbclick",true);vBulletin.gallery.slideshow.jcarousel("scroll",N,O);B.removeData("thumbclick")});B.dialog({autoOpen:false,resizable:false,closeOnEscape:true,showTitleBar:false,modal:true,width:550,height:510,dialogClass:"slideshow-dialog",open:function(){A(".ui-widget-overlay").bind("click",function(){B.dialog("close")})},close:function(O,N){if(vBulletin.gallery.thumbnails){vBulletin.gallery.thumbnails.jcarousel("destroy")}if(vBulletin.gallery.slideshow){vBulletin.gallery.slideshow.jcarousel("destroy")}}});var I=B.find(".slideshow-wrapper .slideshow-list");if(I.length==0){I=B.find(".slideshow-wrapper").append(A("<ul />").addClass("slideshow-list"))}B.dialog("open");window.vBulletin.loadingIndicator.show();var L=M.closest(".list-item").attr("data-node-id")||M.closest(".list-item").attr("data-nodeid");vBulletin.gallery.slideshow=I.jcarousel({wrap:null,animation:"slow",easing:"swing",scroll:1,rtl:A("html").attr("dir")=="rtl",initCallback:function(S,R){if(R=="init"){var P=M.closest(".gallery-submit-form").find(".hiddendata input");if(P.length>0){var U={photos:[]};P.filter('[name="filedataid[]"]').each(function(){var V={title:JShtmlEncode(P.filter('[name="title_'+this.value+'"]').val()),url:pageData.baseurl+"/filedata/fetch?filedataid="+this.value,thumb:pageData.baseurl+"/filedata/fetch?thumb=1&filedataid="+this.value};U.photos.push(V)});setTimeout(function(){E(U,S)},10)}else{var Q={nodeid:L};if(vBulletin.media&&vBulletin.media.MEDIA_USERID){Q.userid=vBulletin.media.MEDIA_USERID}if(H){Q.channelid=H}var N=parseInt(A(".albumSlideShowPageNo").val());if(!isNaN(N)){Q.pageno=N}var O=parseInt(A(".albumSlideShowPerPage").val());if(!isNaN(O)){Q.perpage=O}var T=A(".media-tab .media-filter-overlay .filter-options input:checked").val();if(T){Q.dateFilter=T}if(!isNaN(G)){Q.startIndex=G}A.get(vBulletin.getAjaxBaseurl()+"/filedata/gallery",Q,function(V){if(!V&&J){V={photos:[{title:"",url:J,thumb:""}],}}E(V,S)},"json").complete(function(){window.vBulletin.loadingIndicator.hide()})}}},itemVisibleInCallback:{onBeforeAnimation:function(R,P,O,Q){if(Q=="init"){return false}var S=B.data("image-data");if(S){if(O>0){while(O>S.photos.length){O-=S.photos.length}}else{while(O<=0){O+=S.photos.length}}if(S.photos[O-1].links){B.find(".caption").html(S.photos[O-1].title+S.photos[O-1].links)}else{B.find(".caption").html(S.photos[O-1].title)}if(!B.data("thumbclick")){var N=vBulletin.gallery.thumbnails.data("visible-range")||{first:1,last:F};if(O<N.first||O>N.last){vBulletin.gallery.thumbnails.jcarousel("scroll",O,true)}A("#slideshow-dialog .thumbnails .image-wrapper").addClass("dimmed");vBulletin.gallery.thumbnails.jcarousel("get",O).find(".image-wrapper").removeClass("dimmed")}}}}});return false});function E(K,J){if(!K||!K.photos){openAlertDialog({title:vBulletin.phrase.get("gallery_slideshow"),message:vBulletin.phrase.get("no_photos_found_or_post_deleted"),iconType:"warning"});return }B.data("image-data",K);D(J,K,B);if(K.photos[0].links){B.find(".caption").html(K.photos[0].title+K.photos[0].links)}else{B.find(".caption").html(K.photos[0].title)}if(K.photos.length>1){vBulletin.gallery.thumbnails.jcarousel("get",1).find(".image-wrapper").removeClass("dimmed")}var I=G;var H=parseInt(A(".albumSlideShowPerPage").val());if(!isNaN(H)){I=G%H}if(I>0){A(".thumbnails .image-wrapper",B).eq(I).trigger("click",[false])}window.vBulletin.loadingIndicator.hide()}function D(I,K,H){I.size(K.photos.length);if(K.photos.length>1){A("#slideshow-dialog .thumbnails").show();C(K)}else{A("#slideshow-dialog .thumbnails").hide();H.dialog("option","height",444)}var J=I.first||1;A.each(K.photos,function(M,L){I.add(J+M,'<div class="image-wrapper"><img src="{0}" alt="{1}" class="image" /></div>'.format(L.url,L.title))})}function C(I){var H=A("#slideshow-dialog .thumbnails .thumbnail-list");if(H.length==0){H=A("#slideshow-dialog .thumbnails").append(A("<ul />").addClass("thumbnail-list"))}vBulletin.gallery.thumbnails=H.jcarousel({wrap:null,animation:"fast",easing:"swing",scroll:F,rtl:A("html").attr("dir")=="rtl",size:I.photos.length,initCallback:function(K,J){if(J=="init"){K.size(I.photos.length);A.each(I.photos,function(N,M){var L=(K.first||1)+N;if(K.has(L)){return true}if(L>I.photos.length){return false}var O=A("<img />").addClass("thumbnail").on("load",function(){}).attr({src:M.thumb,alt:""}).appendTo(A("<div />").addClass("image-wrapper dimmed"));K.add(L,O.parent().get(0))});if(K.size()<F){K.buttonNext.hide();K.buttonPrev.hide()}}},itemVisibleInCallback:{onBeforeAnimation:function(M,K,J,L){A("#slideshow-dialog .thumbnails").data("visible-range",{first:M.first,last:M.last})}}}).disableSelection()}})})(jQuery);;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["invalid_request","invalid_search_syntax","invalid_server_response_please_try_again","unknown_error"]);(function(A){vBulletin.conversation=vBulletin.conversation||{};vBulletin.conversation.filter=function(H){var K=this;var C=null;var D=0;var G=false;var B=false;var J='<div class="filter-text" data-filter-name="{0}"><span title="{1}">{2}</span><span class="x vb-icon vb-icon-x-blue"></span></div>';var F="conversation_filter";var L={context:document,autoCheck:false,checkInterval:15000,scrollToTop:null,customFilter:null,onContentLoad:null,closeOverlayOnScroll:true,pagination:null};if(H&&typeof H=="object"){A.extend(L,H)}function E(){A(".toolbar-filter-overlay input[type=radio]",L.context).off("change."+F).on("change."+F,function(){G=true;L.customFilter=null;if(!A(this).data("bypass-filter-display")){I(this)}if(A(".conversation-toolbar-wrapper",L.context).length>1){$toolbarWrappers.filter("."+(A(this).closest(".conversation-toolbar-wrapper").hasClass("top")?"bottom":"top")).find("input[name={0}][value={1}]".format(this.name,this.value)).prop("checked",true)}if(this.value=="conversations_on"){L.autoCheck=true;B=true;D=1}else{clearTimeout(D);B=(this.name=="filter_show")}A(".new-conversations-strip",L.context).hide();K.updatePageNumber(1);K.applyFilters(false)});A(".new-conversations-strip",L.context).off("click."+F).on("click."+F,function(){A(this).hide();B=true;K.updatePageNumber(1);K.applyFilters(false,true)});A(".toolbar-filter",L.context).off("click."+F).on("click."+F,function(R,Q,O){var P=A(this).closest(".conversation-toolbar-wrapper");var N=(P.hasClass("bottom"))?"bottom":"top";if(typeof Q=="undefined"){Q="slow"}var S=A(".filter-wrapper",this).toggleClass("selected");A(".arrow .vb-icon",this).toggleClass("vb-icon-triangle-down-wide vb-icon-triangle-up-wide");A(".toolbar-filter-overlay",P).slideToggle(Q,function(){var T=F+N;if(A(this).is(":visible")){A("body").off("click."+T).on("click."+T,function(Z){var X=".conversation-toolbar-wrapper."+N;if(A(Z.target).closest(".toolbar-filter-overlay").length==0&&A(Z.target).closest(".toolbar-filter").length==0){A("body").off("click."+T);A(window).off("scroll."+T);var Y=(A(Z.target).closest(".toolbar-filter").length>0)?"fast":"slow";A(".conversation-toolbar-wrapper.{0} .conversation-toolbar .toolbar-filter".format(N),L.context).triggerHandler("click."+F,[Y])}});var V=true;if(O!="scroll"){var U=A(".filtered-by",L.context);if(U.length==0||U.is(":hidden")){U=this}var W={};V=vBulletin.isScrolledIntoView(U,W);if(!V){A("html,body").animate({scrollTop:"+="+Math.abs(W.bottom)},"fast",function(){setTimeout(function(){if(L.closeOverlayOnScroll){A(window).off("scroll."+T).on("scroll."+T,function(){A(".conversation-toolbar-wrapper.{0} .conversation-toolbar .toolbar-filter".format(N),L.context).triggerHandler("click."+F,[0,"scroll"])})}},50)})}}if(V){if(L.closeOverlayOnScroll){A(window).off("scroll."+T).on("scroll."+T,function(){A(".conversation-toolbar-wrapper.{0} .conversation-toolbar .toolbar-filter".format(N),L.context).triggerHandler("click."+F,[0,"scroll"])})}}}else{A("body").off("click."+T);A(window).off("scroll."+T)}});if(P.hasClass("bottom")&&A(".arrow .vb-icon",this).hasClass("vb-icon-triangle-up-wide")){var M=A(".conversation-toolbar-wrapper.bottom .toolbar-filter-overlay",L.context);A("html, body").animate({scrollTop:M.offset().top+M.innerHeight()},500)}});A(".filtered-by",L.context).off("click."+F,".x").on("click."+F,".x",function(){var M=A(this).closest(".filtered-by");var Q=A(this).closest(".filter-text");var N=Q.attr("data-filter-name");var P=A();A(".toolbar-filter-overlay .filter-options input[name={0}]".format(N),L.context).prop("checked",false).each(function(){if(this.defaultChecked){P=A(this);return false}});K.updatePageNumber(1);if(P.length==1){P.data("bypass-filter-display",true);P.trigger("click."+F);P.removeData()}else{K.applyFilters(false,true)}Q.remove();var O=M.find(".filter-text").length;if(O==0){M.addClass("hide")}else{if(O==1){M.find(".clear-all").addClass("hide")}}});A(".filtered-by",L.context).off("click."+F,".clear-all").on("click."+F,".clear-all",function(){K.resetFilters();return false});A(".conversation-toolbar .filter-wrapper",L.context).data("object-instance",K);A(".conversation-showmore",L.context).click(function(){var M=parseInt(A('form.toolbar-filter-overlay input[name="pagenum"]',L.context).val());B=false;K.updatePageNumber(M+1);K.applyFilters(false,true,true)})}function I(R){var S=A(".filtered-by",L.context).removeClass("hide").find(".filter-text-wrapper").show();var Q=A(".filter-text[data-filter-name={0}]".format(R.name),S);var O=A(R).next("span").html();var M=A(J.format(R.name,A(R).closest(".filter-options").prev(".filter-header").html()+" - "+O,((R.name=="filter_new_topics"||R.name=="filter_depth"||R.name=="filter_prefix"||(R.value.indexOf("_all")!=-1&&R.value!="time_all"))?(A(R).closest("li").find(".filter-header").html()||"")+" ":"")+O));if(Q.length>0){Q.replaceWith(M)}else{var P=[],N=false;A(".toolbar-filter-overlay > ul > li",L.context).each(function(){P.push(A("input:first",this).attr("name"))});A(".filter-text",S).each(function(){var T=A(this);if(A.inArray(R.name,P)<A.inArray(T.attr("data-filter-name"),P)){T.before(M);N=true;return false}});if(!N){S.append(M)}if(A(".filter-text",S).length>1){S.next(".clear-all").removeClass("hide")}}}E();this.isFilterSelected=function(M){return A('.toolbar-filter-overlay input[value="'+M+'"]',L.context).is(":checked")};this.getSelectedFilters=function(M){var N={},O=M.serializeArray();A.each(O,function(Q,R){if(R.name.slice(-2)=="[]"){var P=R.name.split("[]");N[P[0]]=N[P[0]]||[];N[P[0]].push(R.value)}else{N[R.name]=R.value}});return N};this.resetFilters=function(){var M=A(".conversation-toolbar-wrapper .filtered-by",L.context).addClass("hide");A(".clear-all",M).addClass("hide");A("form.toolbar-filter-overlay",L.context).trigger("reset");A(".filter-text",M).remove();K.updatePageNumber(1);K.applyFilters(false,true);return K};this.forceApplyFilters=function(){if(typeof (K.lastFilters)!="undefined"){delete K.lastFilters}B=true;K.applyFilters(false,true);return K};this.applyFilters=function(S,N,P,R){if(N){clearTimeout(D)}var M=A("form.toolbar-filter-overlay",L.context);var O={filters:(!L.customFilter)?K.getSelectedFilters(M):L.customFilter};if(A.isEmptyObject(O.filters)){return K}if(S){O.filters["checkSince"]=C;O.filters["pagenum"]=1}if(!R){var Q=M.find('input[name="result-id"]').val(0);if(Q.length){O.filters["result-id"]=0}}else{B=true}if(typeof (this.lastFilters)!="undefined"&&vBulletin.areJsonObjectsEqual(this.lastFilters.filters,O.filters)&&!S){return K}this.lastFilters=O;A(".conversation-toolbar-wrapper",L.context).addClass("disabled");A(".conversation-empty",L.context).addClass("invisible");if(S){window.vBulletin.loadingIndicator.suppressNextAjaxIndicator()}A.ajax({type:"post",url:vBulletin.normalizeAjaxUrl(M.attr("action"))||(vBulletin.getAjaxBaseurl()+"/activity/get"),data:(O),dataType:"json",success:function(T){A(".conversation-empty",L.context).addClass("hide");if(!T||T.error||T.errors){console.log("/activity/get failed. result:"+JSON.stringify(T));A(".conversation-list",L.context).addClass("hide");var V="unknown_error";if(!T){V="invalid_server_response_please_try_again"}else{if(T.error){V=T.error}else{if(T.errors){V=T.errors[0][0]}}}V=vBulletin.phrase.get(V);A(".conversation-empty",L.context).html((V||"").replace(/<br\s*\/*>/g," ")).removeClass("hide invisible");return }if(S){if(!G&&T.total>0&&!A("body").hasClass("edit-mode")){A(".new-conversations-strip span",L.context).html(T.total);A(".new-conversations-strip",L.context).fadeIn("slow")}if(A(".conversation-list li.list-item",L.context).length==0){A(".conversation-empty",L.context).removeClass("hide")}}else{A(".new-conversations-strip",L.context).hide();if(((T.total_with_sticky>0)||(T.total>0))&&T.template){if(T.resultId){var W=A('input[name="result-id"]',M).val(T.resultId);if(W.length&&this.lastFilters){this.lastFilters.filters["result-id"]=T.resultId}if(L.pagination){L.pagination.updateResultId(T.resultId)}}if(P){A(".conversation-list",L.context).append(T.template)}else{A(".conversation-empty",L.context).addClass("hide");A(".conversation-list",L.context).html(T.template).removeClass("hide")}if(O.filters["pagenum"]>=O.filters["maxpages"]||O.filters["pagenum"]>=T.pageinfo.totalpages||T.pageinfo.showseemore===false){A(".conversation-showmore",L.context).addClass("hide")}else{A(".conversation-showmore",L.context).removeClass("hide")}}else{if(!P){A(".conversation-empty",L.context).removeClass("hide");A(".conversation-list",L.context).addClass("hide").empty()}}if(T.total_with_sticky==0){A(".conversation-showmore",L.context).addClass("hide")}if(B&&L.scrollToTop){var U=(L.scrollToTop instanceof A)?L.scrollToTop:A(L.scrollToTop);if(U.length>0){A("body,html").animate({scrollTop:U.offset().top},"slow")}}C=T.lastDate;if(typeof L.onContentLoad=="function"){L.onContentLoad.apply(A(".conversation-list",L.context).get(0),[T])}if(T.pageinfo){K.updatePageNumber(T.pageinfo.pagenumber||1);if(L.pagination&&typeof L.pagination.updatePageInfo=="function"){L.pagination.updatePageInfo(T.pageinfo,true)}}if(vBulletin.inlinemod&&typeof vBulletin.inlinemod.init=="function"&&A(".moderationmenu_container",L.context).length>0){vBulletin.inlinemod.init(L.context)}}if(G){G=false}},error:function(V,U,T){console.log("/activity/get failed. error:"+T);if(T!=""){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})}},complete:function(){A(".conversation-toolbar-wrapper",L.context).removeClass("disabled");A(".conversation-empty",L.context).removeClass("invisible");if(!G&&L.autoCheck&&D){D=setTimeout(K.checkNewConversations,L.checkInterval)}}});return K};this.updatePageNumber=function(M){M=Number(M);if(M>0){A('form.toolbar-filter-overlay input[name="pagenum"]',L.context).val(M)}return K};this.checkNewConversations=function(){if(!A("body").hasClass("edit-mode")){console.log("Checking for new activity since "+C);K.applyFilters(true)}return K};this.toggleNewConversations=function(M){if(M){L.autoCheck=true;D=setTimeout(K.checkNewConversations,L.checkInterval)}else{L.autoCheck=false;clearTimeout(D)}return K};this.hideFilterOverlay=function(){A(".conversation-toolbar-wrapper .toolbar-filter-overlay",L.context).filter(":visible").each(function(){A(this).prev(".conversation-toolbar").find(".toolbar-filter").triggerHandler("click."+F,[0])});return K};this.getOption=function(M){return L[M]};this.setOption=function(M,N){L[M]=N;return K};if(L.autoCheck){C=pageData.current_server_datetime;D=setTimeout(K.checkNewConversations,L.checkInterval)}}})(jQuery);;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,[]);(function(A){var B=[".forum-channel-content-widget",".blog-channel-content-widget",".sg-channel-content-widget"];if(!vBulletin.pageHasSelectors(B)){return false}A(document).ready(function(){vBulletin.conversation=vBulletin.conversation||{};var E=A(".channel-content-widget .channel-conversation-list-wrapper");var F=A("#activity-stream-tab",E);var K=A("#recommended-tab",E);var L=A("#subscribed-tab",E);var Z=A("#topic-tab",E);var G=A("#media-tab",E);var M=A(".conversation-list",F);var c=A(".conversation-list",K);var V=A(".conversation-list",L);var a=A(".conversation-list",Z);var T=A(".conversation-list",E);var I,b,Q,W,C;var Y,X,R,D;var J,U,S;var H=E.find(".widget-tabs-nav .ui-tabs-nav > li"),P=H.filter(".ui-tabs-selected"),O=P.index(),d;if(O==-1){O=0;P=H.first()}d=P.find("> a").attr("href");var N=function(e){var f=(E.offset().top+(E.outerHeight()-parseFloat(E.css("border-bottom-width")))-e.height());console.log(f);return f};H.removeClass("ui-state-disabled");E.tabs({selected:O,select:function(e,f){if(S){S.hideFilterOverlay()}if(Q){Q.hideFilterOverlay()}if(R){R.hideFilterOverlay()}},show:function(f,g){if(g.tab.hash=="#activity-stream-tab"){if(Q){Q.toggleNewConversations(false)}if(!S){J=A(".conversation-toolbar-wrapper.scrolltofixed-floating",F);U=new vBulletin.scrollToFixed({element:J,limit:N(J)});var e=new vBulletin.pagination({context:F,onPageChanged:function(i,j){S.updatePageNumber(i);if(!j){S.applyFilters(false,true,false,true)}}});S=new vBulletin.conversation.filter({context:F,autoCheck:A(".toolbar-filter-overlay input[type=radio][value=conversations_on]",F).is(":checked"),scrollToTop:E,pagination:e,onContentLoad:function(){U.updateLimit(N(J));vBulletin.truncatePostContent(M);vBulletin.conversation.processPostContent(M)}});if(d==g.tab.hash){vBulletin.truncatePostContent(M);vBulletin.conversation.processPostContent(M);S.lastFilters={filters:S.getSelectedFilters(A(".toolbar-filter-overlay",F))}}}else{if(typeof S.lastFilters!="undefined"&&A(".conversation-empty:not(.hide)",g.panel).length>0){delete S.lastFilters}}S.applyFilters(false,true)}else{if(g.tab.hash=="#subscribed-tab"){if(S){S.toggleNewConversations(false)}if(Q){Q.toggleNewConversations(false)}if(!R){Y=A(".conversation-toolbar-wrapper.scrolltofixed-floating",L);X=new vBulletin.scrollToFixed({element:Y,limit:N(Y)});R=new vBulletin.conversation.filter({context:L,scrollToTop:E,onContentLoad:function(){X.updateLimit(N(Y));vBulletin.truncatePostContent(V);vBulletin.conversation.processPostContent(V)}});if(d==g.tab.hash){vBulletin.truncatePostContent(V);vBulletin.conversation.processPostContent(V);R.lastFilters={filters:R.getSelectedFilters(A(".toolbar-filter-overlay",L))}}}else{if(typeof R.lastFilters!="undefined"&&A(".conversation-empty:not(.hide)",g.panel).length>0){delete R.lastFilters}}R.applyFilters(false)}else{if(g.tab.hash=="#topic-tab"){if(S){S.toggleNewConversations(false)}if(!Q){I=A(".conversation-toolbar-wrapper.scrolltofixed-floating",Z);b=new vBulletin.scrollToFixed({element:I,limit:N(I)});var h=new vBulletin.pagination({context:Z,onPageChanged:function(i,j){Q.updatePageNumber(i);if(!j){Q.applyFilters(false,true,false,true)}}});Q=new vBulletin.conversation.filter({context:Z,autoCheck:A(".toolbar-filter-overlay input[type=radio][value=conversations_on]",Z).is(":checked"),scrollToTop:E,pagination:h,onContentLoad:function(){b.updateLimit(N(I));vBulletin.markreadcheck()}});if(d==g.tab.hash){Q.lastFilters={filters:Q.getSelectedFilters(A(".toolbar-filter-overlay",Z))}}}else{if(typeof Q.lastFilters!="undefined"&&A(".conversation-empty:not(.hide)",g.panel).length>0){delete Q.lastFilters}}Q.applyFilters(false,true)}else{if(g.tab.hash=="#media-tab"){if(S){S.toggleNewConversations(false)}if(Q){Q.toggleNewConversations(false)}if(!W){W=A(".conversation-toolbar-wrapper.scrolltofixed-floating",G);C=new vBulletin.scrollToFixed({element:W,limit:N(W)})}if(A("#profileMediaDetailContainer .album-detail",g.panel).length==0){if(!D){D=vBulletin.media.calculatePhotosPerPage(vBulletin.media.TARGET_PHOTOS_PERPAGE)}loadGalleryById({nodeid:-2,channelid:pageData.channelid,pageno:1,dateFilter:"lastweek",perpage:D},false,0,{complete:function(){A(".profile-toolbar .media-toolbar-filter",G).removeClass("hide");C.updateLimit(N(W))}})}if(d==g.tab.hash){A(".profile-toolbar .media-toolbar-filter",G).removeClass("hide")}}}}}}});T.off("click",".list-item-poll .view-more-ctrl").on("click",".view-more-ctrl",function(g){var f=A(this).closest("form.poll");var h=f.find("ul.poll");A(this).addClass("hide");h.css("max-height","none").find("li.hide").slideDown(100,function(){f.find(".action-buttons").removeClass("hide").next(".view-less-ctrl").removeClass("hide");vBulletin.animateScrollTop(f.offset().top,{duration:"fast"})});return false});T.off("click",".list-item-poll .view-less-ctrl").on("click",".view-less-ctrl",function(g){var f=A(this).closest("form.poll");vBulletin.conversation.limitVisiblePollOptionsInAPost(f,3);f.find("ul.poll").css("max-height","").find("li.hide").slideUp(100);return false});T.off("click",".post-history").on("click",".post-history",vBulletin.conversation.showPostHistory);T.off("click",".ipAddress").on("click",".ipAddress",vBulletin.conversation.showIp);T.off("click",".editCtrl").on("click",".editCtrl",function(f){vBulletin.conversation.editPost.apply(this,[f,S])});T.off("click",".voteCtrl").on("click",".voteCtrl",function(f){if(A(f.target).closest(".bubble-flyout").length==1){vBulletin.conversation.showWhoVoted.apply(f.target,[f])}else{vBulletin.conversation.votePost.apply(this,[f])}return false});T.off("click",".flagCtrl").on("click",".flagCtrl",vBulletin.conversation.flagPost);T.off("click",".commentCtrl").on("click",".commentCtrl",vBulletin.conversation.toggleCommentBox);T.off("click",".post-comment-btn").on("click",".post-comment-btn",function(f){vBulletin.conversation.postComment.apply(this,[f,function(){S.updatePageNumber(1).applyFilters(false,true)}])});vBulletin.conversation.bindEditFormEventHandlers("all")})})(jQuery);;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["attach_link","please_enter_link_url"]);(function(A){A(document).ready(function(){vBulletin.conversation.bindEditFormEventHandlers("link");A(".content-entry-box .link-pane").each(function(){A("body").trigger("link_editform_onload",[A(this)])})})})(jQuery);;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["error","error_adding_search_tips_code_x","error_adding_tags_code_x","invalid_server_response_please_try_again","invalid_x_tag_length","popular_tags_cloud","you_may_add_one_more_tag","you_may_add_x_more_tags","you_may_not_add_any_more_tags","error_fetching_popular_tags","add_tags","tag_cloud","loading"]);window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.precache=$.merge(window.vBulletin.options.precache,["tagmaxlen","tagminlen","tagforcelower"]);(function(A){vBulletin.tagEditor=vBulletin.tagEditor||{};vBulletin.tagEditor.instance=function(L,S,d){var U=this,P,W=false,a=false,Z=window.vBulletin.options.get("tagmaxlen")||25,G=window.vBulletin.options.get("tagminlen")||3,C=0,K=0,N=false,g=A(L),H=g.closest(".tag-editor-container"),F=g.closest(".tag-editor-wrapper"),M=H.data("node-id")||0,c=false,J=g.attr("placeholder")?g.attr("placeholder"):"",I=J?J.length:10,f=function(){if(g.length==0){return false}g.attr("maxlength",Z);c=new vBulletin_Autocomplete(g,{apiClass:"Tags",containerClass:(d||"")+" entry-field clearfix",placeholderText:J,editorContext:{type:"tags",context:U},minLength:G,beforeAdd:function(i,j){W=a?true:false;if(h()==0){return false}return true},afterAdd:function(i,j){var k=b();if(k==0){g.hide()}g.attr("placeholder","");e(H.find(".tagcloudlink"),H)},afterDelete:function(j,k){W=a?true:false;var l=b();if(S||l>0){g.show();setTimeout(function(){g[0].focus()},10)}g.attr("placeholder",function(){var m=B();return(!m||m.length==0)?J:""});if(g.attr("placeholder")){g.placeholder()}var i=H.find(".tag-cloud .tagcloudlink");if(i.length==0){i=A(".ui-tooltip-popular-tags{0} .tag-cloud .tagcloudlink".format(F.data("tag-editor-id")?"."+F.data("tag-editor-id"):""))}i.filter('[data-tag="{0}"]'.format(j)).removeClass("added")}});g=c.getInputField();if(g.attr("placeholder")){g.placeholder()}},V=function(i){if(window.vBulletin.options.get("tagforcelower")==1){i=i.toLowerCase()}if(i.length>Z){i=i.substr(0,Z)}return i},X=function(l,j){if(!c){return false}if(typeof j=="undefined"||j<1){j=pageData.userid}var i=c.getMinLength();if(l.length<i){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_x_tag_length",i),iconType:"warning"});return false}l=V(l);var k=c.addElement(l,j);g.val("");b();return k},O=function(l){var j=l.length,k;for(k=0;k<j;++k){X(l[k])}},Y=function(i){if(!c){return false}c.clearElements();O(i)},R=function(){g.attr("size",I);var i=JShtmlEncode(A.trim(g.val()));if(i==""||(i==J&&J)){return false}var j="Adding tag: "+i;if(h()>0){setTimeout(function(){X(i)},10);j+=" (Tag added)"}console.log(j)},h=function(){if(S||(C==0&&K==0)){console.log("Tag limits not enforced.");return true}var m=c.countElements(),i=A(c.getElements()).filter(function(n,o){return(pageData.userid==0||o.value==pageData.userid)}).size(),l=C>0?C-m:K-m,k=K==0?l:K-i,j=Math.min(k,l);console.log(["tagCount: "+m,"userTagCount: "+i,"maxTags: "+C,"maxUserTags: "+K,"totalCanAdd: "+l,"userCanAdd: "+k,"canAdd: "+j]);return j},b=function(){var i=H.find(".you-may-add-x-tags");var j=h();if(j===true){return true}else{if(j>1){i.removeClass("warning").html(vBulletin.phrase.get("you_may_add_x_more_tags",j))}else{if(j==1){i.removeClass("warning").html(vBulletin.phrase.get("you_may_add_one_more_tag"))}else{i.addClass("warning").html(vBulletin.phrase.get("you_may_not_add_any_more_tags"));return 0}}}return j},T=function(){c.clearElements()},B=function(){if(!c){return false}return c.getLabels()},E=function(i){if(S){g[0].focus();return }else{if(!vBulletin.tagEditor.tagLimits||!vBulletin.tagEditor.tagLimits[i]){vBulletin.tagEditor.tagLimits={};vBulletin.tagEditor.tagLimits[i]={}}else{if(vBulletin.tagEditor.tagLimits&&vBulletin.tagEditor.tagLimits[i]){C=vBulletin.tagEditor.tagLimits[i].maxTags;K=vBulletin.tagEditor.tagLimits[i].maxUserTags;N=vBulletin.tagEditor.tagLimits[i].canManageTags;Q();return }}}A.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/tags/getNodeTags",data:({nodeid:i}),type:"POST",dataType:"json",complete:function(){console.log("/ajax/api/tags/getNodeTags complete")},success:function(j){console.log("/ajax/api/tags/getNodeTags successful");if(j&&A.isArray(j.tags)){C=parseInt(j.maxtags,10);K=parseInt(j.maxusertags,10);N=j.canmanagetags;vBulletin.tagEditor.tagLimits={};vBulletin.tagEditor.tagLimits[i]={maxTags:C,maxUserTags:K,canManageTags:N};Q()}else{console.log("result: "+JSON.stringify(j))}},error:function(l,k,j){console.log("/ajax/api/tags/getNodeTags failed, error: "+j)}})};this.addTag=function(j,i){X(j,i)};this.addTags=function(i){O(i)};this.setTags=function(i){Y(i)};this.removeAllTags=function(){T()};this.getTags=function(){return B()};this.getTagEditor=function(){return g};f();g.off("keydown").on("keydown",function(j){var i=A(j.target).val().length;A(j.target).attr("size",(i>I?i:I));if(j.which==13){W=a?true:false;R();j.preventDefault();return false}});g.off("blur").on("blur",function(i){a=window.setTimeout(function(){if(!W){R()}W=false;a=false},200)});g.off("click").on("click",function(i){if(!A(i.target).hasClass("tag-input")){A(".tag-input",A(this)).focus();W=a?true:false}return false});g.each(function(){var i=A(this);i.closest("form").submit(function(){R()})});var Q=function(){if(!C&&!K){H.find(".you-may-add-text").addClass("hide")}else{if(C&&!K){H.find(".you-may-add-text span").text(C)}else{if(!C&&K){H.find(".you-may-add-text span").text(K)}else{H.find(".you-may-add-text span").text(Math.min(C,K))}}}if(!h()){g.hide()}else{if(g.is(":visible")){g[0].focus()}}};A(".tag-cloud-text.inline-tag-cloud .popular-tags-link",H).off("click").on("click",function(){var i=H.find(".tag-cloud");vBulletin.tagEditor.fetchPopularTags({type:"nodes",noformat:1,success:function(j){i.html(j);e(i.find(".tagcloudlink"),H)},error:function(j){i.html('<span class="error">{0}</span>'.format(j))}})});A(".tag-cloud-text:not(.inline-tag-cloud) .popular-tags-link",H).qtip({content:{text:vBulletin.phrase.get("loading")+"...",ajax:{url:vBulletin.getAjaxBaseurl()+"/search/fetchTagCloud",data:({type:"nodes",noformat:1}),type:"POST",dataType:"json",success:function(i,l,k){console.log("/search/fetchTagCloud successful, response: "+JSON.stringify(i));if(i){if(i.errors){this.set("content.text",'<span class="error">{0} {1}</span>'.format(vBulletin.phrase.get("error_fetching_popular_tags"),vBulletin.phrase.get(i.errors[0][0])))}else{this.set("content.text",'<div class="tag-cloud">{0}</div>'.format(i));A(".ui-tooltip-popular-tags").delegate(".tag-cloud .tagcloudlink label","click",D);var j=A(".ui-tooltip-popular-tags{0} .tag-cloud .tagcloudlink".format(F.data("tag-editor-id")?"."+F.data("tag-editor-id"):""));e(j,F)}}else{this.set("content.text",'<span class="error">{0}</span>'.format(vBulletin.phrase.get("error_fetching_popular_tags")))}},error:function(k,j,i){console.log("/search/fetchTagCloud failed, error: "+i);this.set("content.text",'<span class="error">{0}</span>'.format(vBulletin.phrase.get("error_fetching_popular_tags")))}},title:{text:vBulletin.phrase.get("tag_cloud"),button:false}},position:{at:"bottom center",my:"top center",viewport:A(window),effect:false},show:{event:"click",solo:true},hide:"unfocus",style:{classes:"ui-tooltip-shadow ui-tooltip-light ui-tooltip-rounded ui-tooltip-popular-tags "+(F.data("tag-editor-id")||""),width:280},events:{show:function(k,j){var i=A(".ui-tooltip-popular-tags{0} .tag-cloud .tagcloudlink".format(F.data("tag-editor-id")?"."+F.data("tag-editor-id"):""));e(i,F)}}});var D=function(j){var i=A(this);if(!i.parent().hasClass("added")&&X(i.text())){i.parent().addClass("added");if(g.is(":visible")){g[0].focus()}}return false};var e=function(i,j){if(i.length>0){var k=(j.find(".tag-input").val()||"").split(",");A.each(k,function(l,m){i.filter('[data-tag="{0}"]'.format(A.trim(m))).addClass("added")})}};H.delegate(".tag-cloud .tagcloudlink label","click",D);F.delegate(".add-tag-link","click",function(j){j.stopPropagation();var i=A(this);var k=F.find(".tag-editor-container");if(k.length==1){k.dialog({title:vBulletin.phrase.get("add_tags"),autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,width:500,dialogClass:"dialog-container tag-editor-dialog-container dialog-box",open:function(){T();var l=F.find(".tag-input").val();if(l){var o=l.split(",");for(var n in o){X(A.trim(o[n]))}}else{if(J&&!g.attr("placeholder")){g.attr("placeholder",J)}}var p=b();if(p>0){g.show()}E(i.data("node-id"));var m=A(".tag-cloud",k);vBulletin.tagEditor.fetchPopularTags({type:F.data("type")||"nodes",noformat:1,success:function(q){m.html(q);e(m.find(".tagcloudlink"),F)},error:function(q){m.html('<span class="error">{0}</span>'.format(q))}})}}).dialog("open");i.data("tag-dialog",k);k.data("parent",i.closest("form, .search-controls-tags, .form_row"))}else{k=i.data("tag-dialog")||A();k.dialog("open")}return false})};vBulletin.tagEditor.fetchPopularTags=function(B){B=B||{};B.type=B.type!="search"?"nodes":B.type;A.ajax({url:vBulletin.getAjaxBaseurl()+"/search/fetchTagCloud",data:({type:B.type,noformat:B.noformat}),type:"POST",dataType:"json",success:function(C,E,D){console.log("/search/fetchTagCloud successful, response: "+JSON.stringify(C));if(C){if(C.errors){if(typeof B.error=="function"){B.error("{0} {1}".format(vBulletin.phrase.get("error_fetching_popular_tags"),vBulletin.phrase.get(C.errors[0][0])))}}else{if(typeof B.success=="function"){B.success(C,E,D)}}}else{if(typeof B.error=="function"){B.error(vBulletin.phrase.get("error_fetching_popular_tags"))}}},error:function(E,D,C){console.log("/search/fetchTagCloud failed, error: "+C);if(typeof B.error=="function"){B.error(vBulletin.phrase.get("error_fetching_popular_tags"))}},complete:function(C,D){if(typeof B.complete=="function"){B.complete(C,D)}}})};A(document).ready(function(){A(document).off("click",".tag-editor-container .cancel-tag-btn").on("click",".tag-editor-container .cancel-tag-btn",function(){A(".tag-editor-container").dialog("close")});A(document).off("click",".tag-editor-container .save-tag-btn").on("click",".tag-editor-container .save-tag-btn",function(){var E=A(this).closest(".tag-editor-container"),D=E.find(".tag-input").val(),B=D.replace(/\,/g,", "),C=E.data("parent");C.find(".tag-list span").html(B);C.find(".tag-input").val(D);E.dialog("close")});A(document).off("mousedown",".tag-editor-container .autocomplete-container").on("mousedown",".tag-editor-container .autocomplete-container",function(){var B=this;setTimeout(function(){var C=A(".autocompleteHelper:visible",B);if(C.length>0){C[0].focus()}},10);return false})})})(jQuery);;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["saving"]);window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.precache=$.merge(window.vBulletin.options.precache,["postminchars","commentminchars"]);var galleryData={mediaTypeFilter:false,currentMediaPage:1,currentGalleryPage:1,currentNodeId:0,currentUserId:0,profileMediaDetailContainer:false,currentDateFilter:"anytime"};(function(A){var B=["#profileMediaDetailContainer"];if(!vBulletin.pageHasSelectors(B)){return false}window.vBulletin.media=window.vBulletin.media||{};window.vBulletin.media.calculatePhotosPerPage=function(D){D=D||50;var C=A("#profileMediaDetailContainer").is(":visible");if(!C){A("#profileMediaDetailContainer").removeClass("hide")}var E=Math.floor(A("#profileMediaDetailContainer").width()/128);if(!C){A("#profileMediaDetailContainer").addClass("hide")}return(D%E==0||D<=E)?D:D-(D%E)};A(document).ready(function(){A(".profileMediaAlbumLink").off("click").on("click",loadAlbum);A(document).off("click","#mediaList .albumLink").on("click","#mediaList .albumLink",loadGallery);var C=false;A(".profile-media-createvideo, .profile-media-upload").off("click").on("click",function(G){var D=A(".content-entry-box.content-entry-box-Media .content-entry-box-tab").length==2?(A(this).hasClass("profile-media-createvideo")?1:0):0;if(!C){C=A(G.target).closest(".ui-widget-content").find(".profileMediaEditContainer");var F,E=A(".content-entry-box.content-entry-box-Media");A(".ui-tabs-nav > li",E).removeClass("ui-state-disabled");E.tabs({selected:D,select:function(J,K){var H=A(this),L=[],M=H.tabs("length");for(var I=0;I<M;I++){if(I!=K.index){L.push(I)}}A(window).off("error.editorInit").on("error.editorInit",function(){H.tabs("option","disabled",[]);A(this).off("error.editorInit");return true});console.log("disabling tabs..."+L);A(this).tabs("option","disabled",L)},show:function(I,J){var H=A(this);F=A(".content-entry-box.content-entry-box-Media").find(J.tab.hash).find('textarea[name="text"]').attr("id");if(!vBulletin.ckeditor.editorExists(F)){vBulletin.ckeditor.initEditor(F,{complete:function(K){console.log("enabling all tabs...");H.tabs("option","disabled",[]);A(window).off("error.editorInit")},error:function(K){A("#"+K).prop("disabled",false).removeClass("ckeditor-load-on-focus").off("focus");H.addClass("no-ckeditor")}})}vBulletin.hv.initHvForPostAction(A(J.panel))}});C.dialog({modal:true,autoOpen:false,width:800,title:vBulletin.phrase.get("profile_media"),resizable:false,closeOnEscape:false,showCloseButton:false,dialogClass:"dialog-container dialog-box edit-media-upload-dialog",open:function(H,I){if(!vBulletin.ckeditor.editorExists(F)){vBulletin.ckeditor.initEditor(F,{error:function(J){A("#"+J).prop("disabled",false).removeClass("ckeditor-load-on-focus").off("focus");A(".content-entry-box",C).addClass("no-ckeditor")}})}A(document).data("gallery-container",A(this).find(".gallery-editor"))},close:function(){A(document).data("gallery-container",null)}});vBulletin.upload.initializePhotoUpload(C)}C.dialog("open");A(".content-entry-box.content-entry-box-Media").tabs("select",D);A("#mediabtnCancel, #btnCancel, .btnCancel").off("click").on("click",function(H){C.dialog("close")})});A(".profile-media-backbtn").off("click").on("click",function(E){A("#profileMediaDetailContainer").addClass("hide");A("#mediaPreviousPage").closest(".pagenav-controls-container").removeClass("hide");A("#profileMediaContainer").removeClass("hide");A(".media-tab .profile-toolbar .toolset-left > li").addClass("hide").has(".profile-media-upload, .profile-media-createvideo").removeClass("hide");galleryData.currentDateFilter="anytime";A(".profile-toolbar .media-toolbar-filter").addClass("hide");var D={totalpages:Number(A("#mediaList").data("totalpages")),totalcount:Number(A("#mediaList").data("totalcount")),currentpage:galleryData.currentMediaPage};setPagination(D)});A("#mediaCurrentPage").off("change").on("change",goMediaPage);A("#mediaPreviousPage, #mediaNextPage").off("click").on("click",goMediaPage);galleryData.profileMediaDetailContainer=A("#profileMediaDetailContainer").clone();vBulletin.ckeditor.registerEvent("ckeditor-bare-mediagallery-edit","afterSave",function(E,D){loadMediaPage(galleryData.currentMediaPage)});vBulletin.ckeditor.registerEvent("ckeditor-bare-mediagallery-edit","afterCancel",function(E,D){loadMediaPage(galleryData.currentMediaPage)});vBulletin.ckeditor.registerEvent("ckeditor-bare-mediagallery","afterSave",function(G,F){A(".edit-media-upload-dialog .profileMediaEditContainer").dialog("close");var D=A("#mediaList"),H=Number(D.data("totalpages")),I=Number(D.data("totalcount")),E=(I%vBulletin.media.ALBUMS_PERPAGE)==0?H+1:H;loadMediaPage(E)});vBulletin.ckeditor.registerEvent("ckeditor-bare-mediavideo","afterSave",function(E,D){A(".edit-media-upload-dialog .profileMediaEditContainer").dialog("close").find(".videoattach-container").removeClass("has-video").find(".videoscontainer").empty();loadMediaPage(1)});vBulletin.ckeditor.registerEvent("ckeditor-bare-video-edit","afterSave",function(E,D){loadMediaPage(galleryData.currentMediaPage)});A(".media-toolbar-filter").off("click").on("click",function(D){A(".filter-wrapper",this).toggleClass("selected");A(".arrow .vb-icon",this).toggleClass("vb-icon-triangle-down-wide vb-icon-triangle-up-wide");A(D.target).closest(".conversation-toolbar-wrapper").find(".toolbar-filter-overlay").slideToggle("slow",function(){var E="media_filter";if(A(this).is(":visible")){A("body").off("click."+E).on("click."+E,function(H){if(A(H.target).closest(".toolbar-filter-overlay").length==0&&A(H.target).closest(".toolbar-filter").length==0){A("body").off("click."+E);A(".media-toolbar-filter").trigger("click")}});var G={};var F=vBulletin.isScrolledIntoView(this,G);if(!F){A("html,body").animate({scrollTop:"+="+Math.abs(G.bottom)},"fast")}}else{A("body").off("click."+E)}})});A("form.media-filter-overlay").trigger("reset");A(".media-filter-overlay input[type=radio]").off("change").on("change",function(F){galleryData.currentDateFilter=this.value;var E=fetchMediaFilter(A(F.target));var D=A(".media-tab");if(D.data("perpage")){E.perpage=D.data("perpage")}loadGalleryById(E,true,0,D.data("callbacks"))})})})(jQuery);doMediaFilters=function(A){$(".profMediaFilterRow").removeClass("filterSelected");$(A.target).addClass("filterSelected");if($(A.target).hasClass("profMediaFilterAllTypes")){galleryData.mediaTypeFilter=false}else{if($(A.target).hasClass("profMediaFilterGallery")){galleryData.mediaTypeFilter="gallery"}else{if($(A.target).hasClass("profMediaFilterVideo")){galleryData.mediaTypeFilter="video"}}}loadMediaPage(1)};loadMediaPage=function(A){$("body").css("cursor","wait");$.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/profile_media_content",data:({userid:vBulletin.media.MEDIA_USERID,pageno:A}),dataType:"json",success:function(B){if(B.errors){openAlertDialog({title:vBulletin.phrase.get("profile_media"),message:vBulletin.phrase.get(B.errors[0][0]),iconType:"error"})}else{$("#mediacontent").html(B);$("#profileMediaDetailContainer").empty();$("#mediacontent").removeClass("hide");$("#profileMediaContainer").removeClass("hide");$(".media-tab .profile-toolbar .toolset-left > li").addClass("hide").has(".profile-media-upload, .profile-media-createvideo").removeClass("hide");$("#mediaPreviousPage").closest("pagenav-controls").removeClass("hide");$("#profileMediaDetailContainer").addClass("hide");$("#profileMediaContainer").removeClass("hide");galleryData.currentMediaPage=A;var C={totalpages:Number($("#mediaList").data("totalpages")),totalcount:Number($("#mediaList").data("totalcount")),currentpage:A};setPagination(C);$(".gallery-submit-form .hiddendata").html("");if(!vBulletin.isScrolledIntoView($("#profileTabs .profile-tabs-nav"))){$("html,body").animate({scrollTop:$("#profileTabs .profile-tabs-nav").offset().top},"slow")}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("edit_avatar"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})},complete:function(){$("body").css("cursor","auto")}})};goMediaPage=function(B){var A=B.target.id;if($("#profileMediaDetailContainer").is(":visible")){gotoGalleryPage(B);return false}if(A=="mediaCurrentPage"){var C=parseInt($("#mediaCurrentPage").val());if(C>0&&C<=parseInt($("#mediaPageCount").html())){loadMediaPage(C)}else{$("#mediaCurrentPage").val(galleryData.currentMediaPage)}}else{if(A=="mediaPreviousPage"){if(galleryData.currentMediaPage>1){loadMediaPage(galleryData.currentMediaPage-1)}else{$("#mediaPreviousPage").addClass("disabled")}}else{if(A=="mediaNextPage"){if(galleryData.currentMediaPage<parseInt($("#mediaPageCount").html())){loadMediaPage(galleryData.currentMediaPage+1)}else{$("#mediaNextPage").addClass("disabled")}}}}return false};gotoGalleryPage=function(C){if(!galleryData.currentNodeId&&!galleryData.currentUserId){return false}var A=C.target.id;if(A=="mediaCurrentPage"){targetPage=parseInt($("#mediaCurrentPage").val());if(targetPage>0&&targetPage<=parseInt($("#mediaPageCount").html())){var B={nodeid:galleryData.currentNodeId,userid:galleryData.currentUserId,pageno:targetPage,perpage:vBulletin.media.calculatePhotosPerPage(vBulletin.media.TARGET_PHOTOS_PERPAGE),datefilter:galleryData.currentDateFilter};loadGalleryById(B)}else{$("#mediaCurrentPage").val(galleryData.currentGalleryPage)}}else{if(A=="mediaPreviousPage"){if(galleryData.currentGalleryPage>1){var B={nodeid:galleryData.currentNodeId,userid:galleryData.currentUserId,pageno:galleryData.currentGalleryPage-1,perpage:vBulletin.media.calculatePhotosPerPage(vBulletin.media.TARGET_PHOTOS_PERPAGE),datefilter:galleryData.currentDateFilter};loadGalleryById(B)}else{$("#mediaPreviousPage ").addClass("disabled")}}else{if(A=="mediaNextPage"){if(galleryData.currentGalleryPage<parseInt($("#mediaPageCount").html())){var B={nodeid:galleryData.currentNodeId,userid:galleryData.currentUserId,pageno:galleryData.currentGalleryPage+1,perpage:vBulletin.media.calculatePhotosPerPage(vBulletin.media.TARGET_PHOTOS_PERPAGE),datefilter:galleryData.currentDateFilter};loadGalleryById(B)}else{$("#mediaNextPage").addClass("disabled")}}}}return false};setPagination=function(A){var B=$(".media-tab .pagenav-controls-container")[(A.totalpages>1)?"removeClass":"addClass"]("hide");if(B.is(":visible")){$("#mediaPreviousPage")[(A.currentpage<=1)?"addClass":"removeClass"]("disabled");$("#mediaNextPage")[(A.currentpage>=A.totalpages)?"addClass":"removeClass"]("disabled");$("#mediaCurrentPage").val(A.currentpage);$("#mediaPageCount").text(A.totalpages)}};loadGalleryById=function(E,G,H,F){var C={nodeid:galleryData.currentNodeId,userid:galleryData.currentUserId,channelid:0,pageno:1,dateFilter:galleryData.currentDateFilter,albumid:0};E=$.extend({},C,E);if(!isNaN(E.nodeid)){$("body").css("cursor","wait");var D;if(E.nodeid==-1){D="profile_media_videolist"}else{D="profile_textphotodetail"}if($(".media-tab #profileMediaDetailContainer").length==0){$(".media-tab").append(galleryData.profileMediaDetailContainer)}$("#profileMediaContainer").closest(".tab").find("li.list-item-gallery").remove();var B=vBulletin.getAjaxBaseurl()+"/ajax/render/"+D;var A={nodeid:E.nodeid,userid:E.userid,channelid:E.channelid,pageno:E.pageno,albumid:E.albumid,viewMore:H};if(E.dateFilter){A.dateFilter=E.dateFilter}if(E.perpage){A.perpage=E.perpage}$.ajax({url:B,type:"GET",data:A,dataType:"json",success:function(I){if(I.errors){openAlertDialog({title:vBulletin.phrase.get("profile_media"),message:vBulletin.phrase.get(I.errors[0][0]),iconType:"error"});if(F&&typeof F.error=="function"){F.error()}}else{galleryData.currentNodeId=E.nodeid;galleryData.currentUserId=E.userid;galleryData.currentGalleryPage=E.pageno;if(H){$(".album-detail .photo-preview").append(I);$("#profileMediaDetailContainer .more-gallery")[(galleryData.currentGalleryPage<$(".album-detail").data("totalpages"))?"removeClass":"addClass"]("hide-imp")}else{$("#profileMediaDetailContainer").html("").append(I);$("#profileMediaDetailContainer .more-gallery").off("click").on("click",getMorePhotos);$("#profileMediaDetailContainer").addClass("list-item");$("#profileMediaDetailContainer").attr("data-nodeid",E.nodeid);$("#profileMediaContainer").addClass("hide");$(".media-tab .profile-toolbar .toolset-left > li").removeClass("hide").has(".profile-media-upload, .profile-media-createvideo").addClass("hide");$("#profileMediaDetailContainer").removeClass("hide");$("#mediaPreviousPage").closest(".pagenav-controls-container").addClass("hide");$("#profileMediaDetailContainer .profile-media-uploadphotos").click(loadPhotoUploader);if(E.perpage){$(".media-tab").data("perpage",E.perpage).data("callbacks",F)}}}if(E.nodeid==-1){var J={totalpages:Number($("#profileMediaDetailContainer .media-video-list").data("totalpages")),totalcount:Number($("#profileMediaDetailContainer .media-video-list").data("totalcount")),currentpage:galleryData.currentGalleryPage};setPagination(J)}if(!G){$("form.media-filter-overlay").trigger("reset")}$(".profile-toolbar .media-toolbar-filter").removeClass("hide");if(F&&typeof F.success=="function"){F.success()}},error:function(){openAlertDialog({title:vBulletin.phrase.get("profile_media"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"});if(F&&typeof F.error=="function"){F.error()}},complete:function(){$("body").css("cursor","auto");if(F&&typeof F.complete=="function"){F.complete()}}})}};loadPhotoUploader=function(C){$(document).data("gallery-container",$(this).closest(".album-detail"));var A=vBulletin.upload.getUploadedPhotosDlg(false);var B=A.data("nodeid");if(!B||isNaN(parseInt(B))){return }$.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/media_addphotos?nodeid="+B,dataType:"json",success:function(D){if(D.errors){openAlertDialog({title:vBulletin.phrase.get("profile_media"),message:vBulletin.phrase.get(D.errors[0][0]),iconType:"warning",onAfterClose:function(){A.dialog("close")}})}else{A.html(D);vBulletin.upload.initializePhotoUpload(A);A.find(".btnPhotoUploadSave").off("click").on("click",saveGalleryPhotos);A.find(".btnPhotoUploadCancel").off("click").on("click",function(E){A.dialog("close")});vBulletin.upload.relocateLastInRowClass(A.find(".photo-item-wrapper"));if($(".photo-display .photo-item-wrapper:not(.hide)",A).length>0){$(".custom-upload-button .label",A).text(vBulletin.phrase.get("upload_more"));$(".btnPhotoUploadSave",A).show()}else{$(".btnPhotoUploadSave",A).hide()}A.dialog("open");vBulletin.upload.adjustPhotoDialogForScrollbar(A)}},error:function(F,E,D){console.log("/ajax/render/media_addphotos failed, error: "+D);openAlertDialog({title:vBulletin.phrase.get("profile_media"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error",onAfterClose:function(){A.dialog("close")}})}})};loadAlbum=function(B){var A={nodeid:parseInt($(this).closest("li").attr("data-nodeid"),10),userid:0,pageno:1,datefilter:"anytime"};galleryData.currentDateFilter="anytime";loadGalleryById(A)};loadGallery=function(B){var A=fetchMediaFilter($(this));A.pageno=1;A.perpage=vBulletin.media.calculatePhotosPerPage(vBulletin.media.TARGET_PHOTOS_PERPAGE);galleryData.currentDateFilter="anytime";loadGalleryById(A)};getMorePhotos=function(D){var C=$(".media-tab").data("perpage");var B=$(".media-tab").data("callbacks");var A=fetchMediaFilter($(this));A.pageno=galleryData.currentGalleryPage+1;if(C){A.perpage=C}loadGalleryById(A,false,1,B)};saveGalleryPhotos=function(D){var C=$(D.target).closest(".profile-media-photoupload-dialog"),A=$(D.target).closest("form");if(A.length>0){$(D.target).closest(".photo-display-container").find(".photo-item-wrapper:not(.hide)").each(function(E,G){var F=parseInt($(G).find(".filedataid").val());if(!isNaN(F)){A.append('<input type="hidden" name="filedataid[]" value="'+F+'"/>');$('<input type="hidden" name="title_'+F+'" />').val($(G).find("textarea").val()).appendTo(A)}});var B=$("button",A).prop("disabled",true);$.ajax({url:A.attr("data-action-submit"),data:A.serializeArray(),type:"post",success:function(E){if(E.errors){if(typeof (E.errors[0])=="undefined"){openAlertDialog({title:vBulletin.phrase.get("media"),message:vBulletin.phrase.get(E.errors),iconType:"error"})}else{openAlertDialog({title:vBulletin.phrase.get("media"),message:vBulletin.phrase.get(E.errors[0]),iconType:"error"})}}else{C.dialog("close");loadMediaPage(galleryData.currentMediaPage)}},error:function(){openAlertDialog({title:vBulletin.phrase.get("media"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})},complete:function(){B.prop("disabled",false)},})}else{C.dialog("close")}};fetchMediaFilter=function(A){var C;if($("#profileMediaContainer").is(":visible")){C=$("#profileMediaContainer")}else{if($("#profileMediaDetailContainer").is(":visible")){C=$("#profileMediaDetailContainer")}}var B={nodeid:parseInt(A.data("nodeid"),10)||parseInt(C.data("nodeid"),10),userid:parseInt(C.data("userid"),10),channelid:parseInt(C.data("channelid"),10),dateFilter:galleryData.currentDateFilter,albumid:parseInt(A.data("albumid"),10)};if(isNaN(B.channelid)){B.channelid=0}if(isNaN(B.nodeid)){B.nodeid=0}if(B.nodeid>0){B.userid=0}else{if(isNaN(B.userid)){B.userid=0}}if(isNaN(B.albumid)){B.albumid=0}return B};;

window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["blog_memberblogLabel","edit_conversation","forum","you_have_a_pending_edit_unsaved"]);(function(A){var B=[".forum-activity-stream-widget",".bloghome-widget",".search-widget"];if(!vBulletin.pageHasSelectors(B)){return false}A(document).ready(function(){vBulletin.conversation=vBulletin.conversation||{};var J=vBulletin.conversation.$activityStreamWidget=A(".activity-stream-widget"),C=vBulletin.conversation.$activityStreamTab=A("#activity-stream-tab"),G=vBulletin.conversation.$subscribedTab=A("#subscribed-tab"),H=vBulletin.conversation.$activityStreamList=A(".conversation-list",C),Q=vBulletin.conversation.$subscribedList=A(".conversation-list",G),S,T,N,F,V,P,O=A(".conversation-list",J),M,U;var E=J.find(".widget-tabs-nav .ui-tabs-nav > li"),L=E.filter(".ui-tabs-selected"),K=L.index(),W;if(K==-1){K=0;L=E.first()}W=L.find("> a").attr("href");var I=function(X){var Y=(J.offset().top+(J.outerHeight()-parseFloat(J.css("border-bottom-width")))-X.height());return Y};E.removeClass("ui-state-disabled");J.tabs({selected:K,select:function(Z,a){if(P){P.hideFilterOverlay()}if(N){N.hideFilterOverlay()}var Y=J.find(".widget-tabs-panel .ui-tabs-panel:visible");var X=Y.find(".list-item-body-wrapper.edit-post .edit-conversation-container");if(X.length>0){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get("you_have_a_pending_edit_unsaved"),iconType:"warning",onAfterClose:function(){vBulletin.animateScrollTop(X.closest(".list-item").offset().top,{duration:"slow"})}});return false}},show:function(Y,Z){if(Z.tab.hash=="#memberblog-tab"){function b(c){vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/render/blogmember_tab",data:{from:c||1},error_phrase:"unable_to_contact_server_please_try_again",success:function(e){A(Z.panel).html(e);var d=A(".toolbar-pagenav",Z.panel);if(d.length>0){vBulletin.pagination({context:d,onPageChanged:b})}}})}if(P){P.toggleNewConversations(false)}if(N){N.toggleNewConversations(false)}var X=A(".conversation-list",Z.panel);if(!X.hasClass("dataLoaded")){if(W==Z.tab.hash&&!U){U=true;return false}A(".conversation-empty",Z.panel).addClass("hide");b()}return }else{if(Z.tab.hash=="#activity-stream-tab"){if(N){N.toggleNewConversations(false)}if(!P){F=A(".conversation-toolbar-wrapper.scrolltofixed-floating",C);V=false;P=vBulletin.conversation.activityStreamFilter=new vBulletin.conversation.filter({context:C,autoCheck:A(".toolbar-filter-overlay input[type=radio][value=conversations_on]",J).is(":checked"),scrollToTop:J,onContentLoad:function(){if(!V){V=new vBulletin.scrollToFixed({element:F,limit:I(F)})}V.updateLimit(I(F));vBulletin.truncatePostContent(H);vBulletin.conversation.processPostContent(H)}});if(W==Z.tab.hash){vBulletin.truncatePostContent(H);vBulletin.conversation.processPostContent(H);P.lastFilters={filters:P.getSelectedFilters(A(".toolbar-filter-overlay",C))}}}else{if(typeof P.lastFilters!="undefined"&&A(".conversation-empty:not(.hide)",Z.panel).length>0){delete P.lastFilters}}P.applyFilters(false,true)}else{if(Z.tab.hash=="#subscribed-tab"){if(P){P.toggleNewConversations(false)}if(!N){S=A(".conversation-toolbar-wrapper.scrolltofixed-floating",G);T=new vBulletin.scrollToFixed({element:S,limit:I(S)});N=vBulletin.conversation.subscribedFilter=new vBulletin.conversation.filter({context:G,scrollToTop:J,onContentLoad:function(){T.updateLimit(I(S));vBulletin.truncatePostContent(Q);vBulletin.conversation.processPostContent(Q)}});if(W==Z.tab.hash){vBulletin.truncatePostContent(Q);vBulletin.conversation.processPostContent(Q);N.lastFilters={filters:N.getSelectedFilters(A(".toolbar-filter-overlay",G))}}}else{if(typeof N.lastFilters!="undefined"&&A(".conversation-empty:not(.hide)",Z.panel).length>0){delete N.lastFilters}}N.applyFilters(false,true)}else{if(Z.tab.hash=="#forum-tab"){if(P){P.toggleNewConversations(false)}if(N){N.toggleNewConversations(false)}var a=A(Z.panel);if(a.hasClass("dataLoaded")){if(W==Z.tab.hash){vBulletin.markreadcheck()}return false}else{if(W==Z.tab.hash&&!M){M=true;return false}}A(".conversation-empty",Z.panel).addClass("hide");A.post(vBulletin.getAjaxBaseurl()+"/ajax/render/display_Forums_tab",function(c){a.html(c).addClass(function(){var d=A(".conversation-empty",this);if(d.length==0){return"dataLoaded"}else{d.removeClass("hide");return""}})},"json").error(function(e,d,c){console.log("/ajax/render/display_Forums_tab failed. Error: "+c);openAlertDialog({title:vBulletin.phrase.get("forum"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})}).complete(function(){vBulletin.markreadcheck()})}}}}}});vBulletin.truncatePostContent(".search-widget");var D=0;J.find(".ui-tabs-nav li").each(function(){D+=A(this).width()});var R=J.find(".ui-tabs-nav").width();if(D>J.find(".ui-tabs-nav").width()){J.find(".widget-tabs-nav, .module-title").height(J.find(".ui-tabs-nav").height())}J.off("click",".list-item-poll .view-more-ctrl").on("click",".list-item-poll .view-more-ctrl",function(Y){var X=A(this).closest("form.poll");var Z=X.find("ul.poll");A(this).addClass("hide");Z.css("max-height","none").find("li.hide").slideDown(100,function(){X.find(".action-buttons").removeClass("hide").next(".view-less-ctrl").removeClass("hide");vBulletin.animateScrollTop(X.offset().top,{duration:"fast"})});return false});J.off("click",".list-item-poll .view-less-ctrl").on("click",".list-item-poll .view-less-ctrl",function(Y){var X=A(this).closest("form.poll");vBulletin.conversation.limitVisiblePollOptionsInAPost(X,3);X.find("ul.poll").css("max-height","").find("li.hide").slideUp(100);return false});O.off("click",".editCtrl").on("click",".editCtrl",function(X){vBulletin.conversation.editPost.apply(this,[X,P])});O.off("click",".post-history").on("click",".post-history",vBulletin.conversation.showPostHistory);O.off("click",".ipAddress").on("click",".ipAddress",vBulletin.conversation.showIp);O.off("click",".voteCtrl").on("click",".voteCtrl",function(X){if(A(X.target).closest(".bubble-flyout").length==1){vBulletin.conversation.showWhoVoted.apply(X.target,[X])}else{vBulletin.conversation.votePost.apply(this,[X])}return false});O.off("click",".flagCtrl").on("click",".flagCtrl",vBulletin.conversation.flagPost);O.off("click",".commentCtrl").on("click",".commentCtrl",vBulletin.conversation.toggleCommentBox);O.off("click",".comment-entry-box .post-comment-btn").on("click",".comment-entry-box .post-comment-btn",function(X){vBulletin.conversation.postComment.apply(this,[X,function(){P.updatePageNumber(1).applyFilters(false,true)}])});vBulletin.conversation.bindEditFormEventHandlers("all")})})(jQuery);;

(function(A){window.vBulletin=window.vBulletin||{};vBulletin.hv=vBulletin.hv||{};vBulletin.hv.reset=function(B){var C;if($(".humanverify.humanverify_image").length>0){$(".humanverify.humanverify_image .refresh_imagereg").click();C=$(".humanverify.humanverify_image .imageregt")}else{if($(".humanverify.humanverify_recaptcha").length>0&&Recaptcha&&typeof Recaptcha.reload=="function"){Recaptcha.reload()}else{if($(".humanverify.humanverify_question").length>0){$.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/humanverify",data:{action:"register"},type:"post",dataType:"json",success:function(D){$(".humanverify.humanverify_question").replaceWith(D);if(B){$(".humanverify.humanverify_question .answer").focus()}}});C=$(".humanverify.humanverify_question .answer")}}}if(B&&C&&C.length>0){C.focus()}};vBulletin.hv.imagereg=vBulletin.hv.imagereg||{};vBulletin.hv.imagereg.init=function(B){if(typeof B=="undefined"||B.length==0){B=$(document)}$(".humanverify_image",B).each(function(){var C=$(this);$(".refresh_imagereg",C).off("click").on("click",C,vBulletin.hv.imagereg.fetch_image);$(".imagereg",C).off("click").on("click",C,vBulletin.hv.imagereg.fetch_image);$(".refresh_imagereg",C).removeClass("hide")})};vBulletin.hv.imagereg.fetch_image=function(C){var B=C.data;$(".progress_imagereg",B).removeClass("hide");$.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/hv/generateToken",type:"post",dataType:"json",success:function(D){if(!D.errors){var E=D.hash;$("input.hash",B).val(E);$(".imagereg",B).attr("src",pageData.baseurl+"/hv/image?hash="+E);$(".imageregt",B).val("")}},complete:function(){$(".progress_imagereg",B).addClass("hide")}});return false};vBulletin.hv.initHvForPostAction=function(B){if(!pageData.showhv_post||B.closest(".edit-post").length>0){return }$(".content-entry-box .humanverify").remove();$.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/humanverify",type:"POST",data:({action:"post"}),dataType:"json",success:function(C){console.log("/ajax/render/humanverify");if(C&&!C.errors){$(".content_entry_box_buttons",B).before(C);if($(".humanverify.humanverify_image",B).length>0){vBulletin.hv.imagereg.init(B)}}else{console.log("/ajax/render/humanverify successful, but response was not valid: "+JSON.stringify(C));openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}},error:function(E,D,C){console.log("/ajax/render/humanverify failed, error: "+C);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_delete_form_x",E.status),iconType:"error"})}})};$(document).ready(function(){vBulletin.hv.imagereg.init();if(typeof (window.vBulletin.hv_script)!="undefined"&&typeof (window.vBulletin.delayedInit)!="undefined"&&window.vBulletin.delayedInit){$.getScript(window.vBulletin.hv_script,function(){reloadRecaptcha()})}})})(jQuery);;

