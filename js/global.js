(function(C){if(typeof window.console!="object"){window.console={}}var D=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];for(var B=0;B<D.length;B++){if(typeof window.console[D[B]]!="function"&&typeof window.console[D[B]]!="object"){window.console[D[B]]=function(){}}}C.ajaxPrefilter("script",function(E){E.cache=true});String.prototype.format=function(){var F=this,E=arguments.length;while(E--){F=F.replace(new RegExp("\\{"+E+"\\}","gm"),arguments[E])}return F};String.prototype.latinise=function(){return this.replace(/[^A-Za-z0-9]/g,function(E){var F={"Ã?":"A","Ä‚":"A","áº®":"A","áº¶":"A","áº°":"A","áº²":"A","áº´":"A","Ç?":"A","Ã‚":"A","áº¤":"A","áº¬":"A","áº¦":"A","áº¨":"A","áºª":"A","Ã„":"A","Çž":"A","È¦":"A","Ç ":"A","áº ":"A","È€":"A","Ã€":"A","áº¢":"A","È‚":"A","Ä€":"A","Ä„":"A","Ã…":"A","Çº":"A","á¸€":"A","Èº":"A","Ãƒ":"A","êœ²":"AA","Ã†":"AE","Ç¼":"AE","Ç¢":"AE","êœ´":"AO","êœ¶":"AU","êœ¸":"AV","êœº":"AV","êœ¼":"AY","á¸‚":"B","á¸„":"B","Æ?":"B","á¸†":"B","Éƒ":"B","Æ‚":"B","Ä†":"C","ÄŒ":"C","Ã‡":"C","á¸ˆ":"C","Äˆ":"C","ÄŠ":"C","Æ‡":"C","È»":"C","ÄŽ":"D","á¸?":"D","á¸’":"D","á¸Š":"D","á¸Œ":"D","ÆŠ":"D","á¸Ž":"D","Ç²":"D","Ç…":"D","Ä?":"D","Æ‹":"D","Ç±":"DZ","Ç„":"DZ","Ã‰":"E","Ä”":"E","Äš":"E","È¨":"E","á¸œ":"E","ÃŠ":"E","áº¾":"E","á»†":"E","á»€":"E","á»‚":"E","á»„":"E","á¸˜":"E","Ã‹":"E","Ä–":"E","áº¸":"E","È„":"E","Ãˆ":"E","áºº":"E","È†":"E","Ä’":"E","á¸–":"E","á¸”":"E","Ä˜":"E","É†":"E","áº¼":"E","á¸š":"E","ê?ª":"ET","á¸ž":"F","Æ‘":"F","Ç´":"G","Äž":"G","Ç¦":"G","Ä¢":"G","Äœ":"G","Ä ":"G","Æ“":"G","á¸ ":"G","Ç¤":"G","á¸ª":"H","Èž":"H","á¸¨":"H","Ä¤":"H","â±§":"H","á¸¦":"H","á¸¢":"H","á¸¤":"H","Ä¦":"H","Ã?":"I","Ä¬":"I","Ç?":"I","ÃŽ":"I","Ã?":"I","á¸®":"I","Ä°":"I","á»Š":"I","Èˆ":"I","ÃŒ":"I","á»ˆ":"I","ÈŠ":"I","Äª":"I","Ä®":"I","Æ—":"I","Ä¨":"I","á¸¬":"I","ê?¹":"D","ê?»":"F","ê?½":"G","êž‚":"R","êž„":"S","êž†":"T","ê?¬":"IS","Ä´":"J","Éˆ":"J","á¸°":"K","Ç¨":"K","Ä¶":"K","â±©":"K","ê?‚":"K","á¸²":"K","Æ˜":"K","á¸´":"K","ê?€":"K","ê?„":"K","Ä¹":"L","È½":"L","Ä½":"L","Ä»":"L","á¸¼":"L","á¸¶":"L","á¸¸":"L","â± ":"L","ê?ˆ":"L","á¸º":"L","Ä¿":"L","â±¢":"L","Çˆ":"L","Å?":"L","Ç‡":"LJ","á¸¾":"M","á¹€":"M","á¹‚":"M","â±®":"M","Åƒ":"N","Å‡":"N","Å…":"N","á¹Š":"N","á¹„":"N","á¹†":"N","Ç¸":"N","Æ?":"N","á¹ˆ":"N","È ":"N","Ç‹":"N","Ã‘":"N","ÇŠ":"NJ","Ã“":"O","ÅŽ":"O","Ç‘":"O","Ã”":"O","á»?":"O","á»˜":"O","á»’":"O","á»”":"O","á»–":"O","Ã–":"O","Èª":"O","È®":"O","È°":"O","á»Œ":"O","Å?":"O","ÈŒ":"O","Ã’":"O","á»Ž":"O","Æ ":"O","á»š":"O","á»¢":"O","á»œ":"O","á»ž":"O","á» ":"O","ÈŽ":"O","ê?Š":"O","ê?Œ":"O","ÅŒ":"O","á¹’":"O","á¹?":"O","ÆŸ":"O","Çª":"O","Ç¬":"O","Ã˜":"O","Ç¾":"O","Ã•":"O","á¹Œ":"O","á¹Ž":"O","È¬":"O","Æ¢":"OI","ê?Ž":"OO","Æ?":"E","Æ†":"O","È¢":"OU","á¹”":"P","á¹–":"P","ê?’":"P","Æ¤":"P","ê?”":"P","â±£":"P","ê??":"P","ê?˜":"Q","ê?–":"Q","Å”":"R","Å˜":"R","Å–":"R","á¹˜":"R","á¹š":"R","á¹œ":"R","È?":"R","È’":"R","á¹ž":"R","ÉŒ":"R","â±¤":"R","êœ¾":"C","ÆŽ":"E","Åš":"S","á¹¤":"S","Å ":"S","á¹¦":"S","Åž":"S","Åœ":"S","È˜":"S","á¹ ":"S","á¹¢":"S","á¹¨":"S","Å¤":"T","Å¢":"T","á¹°":"T","Èš":"T","È¾":"T","á¹ª":"T","á¹¬":"T","Æ¬":"T","á¹®":"T","Æ®":"T","Å¦":"T","â±¯":"A","êž€":"L","Æœ":"M","É…":"V","êœ¨":"TZ","Ãš":"U","Å¬":"U","Ç“":"U","Ã›":"U","á¹¶":"U","Ãœ":"U","Ç—":"U","Ç™":"U","Ç›":"U","Ç•":"U","á¹²":"U","á»¤":"U","Å°":"U","È”":"U","Ã™":"U","á»¦":"U","Æ¯":"U","á»¨":"U","á»°":"U","á»ª":"U","á»¬":"U","á»®":"U","È–":"U","Åª":"U","á¹º":"U","Å²":"U","Å®":"U","Å¨":"U","á¹¸":"U","á¹´":"U","ê?ž":"V","á¹¾":"V","Æ²":"V","á¹¼":"V","ê? ":"VY","áº‚":"W","Å´":"W","áº„":"W","áº†":"W","áºˆ":"W","áº€":"W","â±²":"W","áºŒ":"X","áºŠ":"X","Ã?":"Y","Å¶":"Y","Å¸":"Y","áºŽ":"Y","á»´":"Y","á»²":"Y","Æ³":"Y","á»¶":"Y","á»¾":"Y","È²":"Y","ÉŽ":"Y","á»¸":"Y","Å¹":"Z","Å½":"Z","áº?":"Z","â±«":"Z","Å»":"Z","áº’":"Z","È¤":"Z","áº”":"Z","Æµ":"Z","Ä²":"IJ","Å’":"OE","á´€":"A","á´?":"AE","Ê™":"B","á´ƒ":"B","á´„":"C","á´…":"D","á´‡":"E","êœ°":"F","É¢":"G","Ê›":"G","Êœ":"H","Éª":"I","Ê?":"R","á´Š":"J","á´‹":"K","ÊŸ":"L","á´Œ":"L","á´?":"M","É´":"N","á´?":"O","É¶":"OE","á´?":"O","á´•":"OU","á´˜":"P","Ê€":"R","á´Ž":"N","á´™":"R","êœ±":"S","á´›":"T","â±»":"E","á´š":"R","á´œ":"U","á´ ":"V","á´¡":"W","Ê?":"Y","á´¢":"Z","Ã¡":"a","Äƒ":"a","áº¯":"a","áº·":"a","áº±":"a","áº³":"a","áºµ":"a","ÇŽ":"a","Ã¢":"a","áº¥":"a","áº":"a","áº§":"a","áº©":"a","áº«":"a","Ã¤":"a","ÇŸ":"a","È§":"a","Ç¡":"a","áº¡":"a","È?":"a","Ã ":"a","áº£":"a","Èƒ":"a","Ä?":"a","Ä…":"a","á¶?":"a","áºš":"a","Ã¥":"a","Ç»":"a","á¸?":"a","â±¥":"a","Ã£":"a","êœ³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êœµ":"ao","êœ·":"au","êœ¹":"av","êœ»":"av","êœ½":"ay","á¸ƒ":"b","á¸…":"b","É“":"b","á¸‡":"b","áµ¬":"b","á¶€":"b","Æ€":"b","Æƒ":"b","Éµ":"o","Ä‡":"c","Ä?":"c","Ã§":"c","á¸‰":"c","Ä‰":"c","É•":"c","Ä‹":"c","Æˆ":"c","È¼":"c","Ä?":"d","á¸‘":"d","á¸“":"d","È¡":"d","á¸‹":"d","á¸?":"d","É—":"d","á¶‘":"d","á¸?":"d","áµ":"d","á¶?":"d","Ä‘":"d","É–":"d","ÆŒ":"d","Ä±":"i","È·":"j","ÉŸ":"j","Ê„":"j","Ç³":"dz","Ç†":"dz","Ã©":"e","Ä•":"e","Ä›":"e","È©":"e","á¸?":"e","Ãª":"e","áº¿":"e","á»‡":"e","á»?":"e","á»ƒ":"e","á»…":"e","á¸™":"e","Ã«":"e","Ä—":"e","áº¹":"e","È…":"e","Ã¨":"e","áº»":"e","È‡":"e","Ä“":"e","á¸—":"e","á¸•":"e","â±¸":"e","Ä™":"e","á¶’":"e","É‡":"e","áº½":"e","á¸›":"e","ê?«":"et","á¸Ÿ":"f","Æ’":"f","áµ®":"f","á¶‚":"f","Çµ":"g","ÄŸ":"g","Ç§":"g","Ä£":"g","Ä?":"g","Ä¡":"g","É ":"g","á¸¡":"g","á¶ƒ":"g","Ç¥":"g","á¸«":"h","ÈŸ":"h","á¸©":"h","Ä¥":"h","â±¨":"h","á¸§":"h","á¸£":"h","á¸¥":"h","É¦":"h","áº–":"h","Ä§":"h","Æ•":"hv","Ã":"i","Ä":"i","Ç?":"i","Ã®":"i","Ã¯":"i","á¸¯":"i","á»‹":"i","È‰":"i","Ã¬":"i","á»‰":"i","È‹":"i","Ä«":"i","Ä¯":"i","á¶–":"i","É¨":"i","Ä©":"i","á¸":"i","ê?º":"d","ê?¼":"f","áµ¹":"g","êžƒ":"r","êž…":"s","êž‡":"t","ê?":"is","Ç°":"j","Äµ":"j","Ê?":"j","É‰":"j","á¸±":"k","Ç©":"k","Ä·":"k","â±ª":"k","ê?ƒ":"k","á¸³":"k","Æ™":"k","á¸µ":"k","á¶„":"k","ê??":"k","ê?…":"k","Äº":"l","Æš":"l","É¬":"l","Ä¾":"l","Ä¼":"l","á¸½":"l","È´":"l","á¸·":"l","á¸¹":"l","â±¡":"l","ê?‰":"l","á¸»":"l","Å€":"l","É«":"l","á¶…":"l","É":"l","Å‚":"l","Ç‰":"lj","Å¿":"s","áºœ":"s","áº›":"s","áº?":"s","á¸¿":"m","á¹?":"m","á¹ƒ":"m","É±":"m","áµ¯":"m","á¶†":"m","Å„":"n","Åˆ":"n","Å†":"n","á¹‹":"n","Èµ":"n","á¹…":"n","á¹‡":"n","Ç¹":"n","É²":"n","á¹‰":"n","Æž":"n","áµ°":"n","á¶‡":"n","É³":"n","Ã±":"n","ÇŒ":"nj","Ã³":"o","Å?":"o","Ç’":"o","Ã´":"o","á»‘":"o","á»™":"o","á»“":"o","á»•":"o","á»—":"o","Ã¶":"o","È«":"o","È¯":"o","È±":"o","á»?":"o","Å‘":"o","È?":"o","Ã²":"o","á»?":"o","Æ¡":"o","á»›":"o","á»£":"o","á»?":"o","á»Ÿ":"o","á»¡":"o","È?":"o","ê?‹":"o","ê??":"o","â±º":"o","Å?":"o","á¹“":"o","á¹‘":"o","Ç«":"o","Ç":"o","Ã¸":"o","Ç¿":"o","Ãµ":"o","á¹?":"o","á¹?":"o","È":"o","Æ£":"oi","ê??":"oo","É›":"e","á¶“":"e","É”":"o","á¶—":"o","È£":"ou","á¹•":"p","á¹—":"p","ê?“":"p","Æ¥":"p","áµ±":"p","á¶ˆ":"p","ê?•":"p","áµ½":"p","ê?‘":"p","ê?™":"q","Ê ":"q","É‹":"q","ê?—":"q","Å•":"r","Å™":"r","Å—":"r","á¹™":"r","á¹›":"r","á¹?":"r","È‘":"r","É¾":"r","áµ³":"r","È“":"r","á¹Ÿ":"r","É¼":"r","áµ²":"r","á¶‰":"r","É?":"r","É½":"r","â†„":"c","êœ¿":"c","É˜":"e","É¿":"r","Å›":"s","á¹¥":"s","Å¡":"s","á¹§":"s","ÅŸ":"s","Å?":"s","È™":"s","á¹¡":"s","á¹£":"s","á¹©":"s","Ê‚":"s","áµ´":"s","á¶Š":"s","È¿":"s","É¡":"g","á´‘":"o","á´“":"o","á´?":"u","Å¥":"t","Å£":"t","á¹±":"t","È›":"t","È¶":"t","áº—":"t","â±¦":"t","á¹«":"t","á¹":"t","Æ":"t","á¹¯":"t","áµµ":"t","Æ«":"t","Êˆ":"t","Å§":"t","áµº":"th","É?":"a","á´‚":"ae","Ç?":"e","áµ·":"g","É¥":"h","Ê®":"h","Ê¯":"h","á´‰":"i","Êž":"k","êž?":"l","É¯":"m","É°":"m","á´”":"oe","É¹":"r","É»":"r","Éº":"r","â±¹":"r","Ê‡":"t","ÊŒ":"v","Ê?":"w","ÊŽ":"y","êœ©":"tz","Ãº":"u","Å":"u","Ç”":"u","Ã»":"u","á¹·":"u","Ã¼":"u","Ç˜":"u","Çš":"u","Çœ":"u","Ç–":"u","á¹³":"u","á»¥":"u","Å±":"u","È•":"u","Ã¹":"u","á»§":"u","Æ°":"u","á»©":"u","á»±":"u","á»«":"u","á»":"u","á»¯":"u","È—":"u","Å«":"u","á¹»":"u","Å³":"u","á¶™":"u","Å¯":"u","Å©":"u","á¹¹":"u","á¹µ":"u","áµ«":"ue","ê?¸":"um","â±´":"v","ê?Ÿ":"v","á¹¿":"v","Ê‹":"v","á¶Œ":"v","â±±":"v","á¹½":"v","ê?¡":"vy","áºƒ":"w","Åµ":"w","áº…":"w","áº‡":"w","áº‰":"w","áº?":"w","â±³":"w","áº˜":"w","áº?":"x","áº‹":"x","á¶?":"x","Ã½":"y","Å·":"y","Ã¿":"y","áº?":"y","á»µ":"y","á»³":"y","Æ´":"y","á»·":"y","á»¿":"y","È³":"y","áº™":"y","É?":"y","á»¹":"y","Åº":"z","Å¾":"z","áº‘":"z","Ê‘":"z","â±¬":"z","Å¼":"z","áº“":"z","È¥":"z","áº•":"z","áµ¶":"z","á¶Ž":"z","Ê?":"z","Æ¶":"z","É€":"z","ï¬€":"ff","ï¬ƒ":"ffi","ï¬„":"ffl","ï¬?":"fi","ï¬‚":"fl","Ä³":"ij","Å“":"oe","ï¬†":"st","â‚?":"a","â‚‘":"e","áµ¢":"i","â±¼":"j","â‚’":"o","áµ£":"r","áµ¤":"u","áµ¥":"v","â‚“":"x"};return F[E]||E})};window.vBulletin=window.vBulletin||{};vBulletin.cookie=vBulletin.cookie||{};vBulletin.cookie.convertBbarrayCookie=function(F,E){F=F||"";E=E||"get";if(E=="set"){F=F.replace(/"/g,".");F=F.replace(/:/g,"-");F=F.replace(/;/g,"_")}else{F=F.replace(/\./g,'"');F=F.replace(/-/g,":");F=F.replace(/_/g,";")}return F};vBulletin.cookie.fetchBbarrayCookie=function(E,H){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var F=C.cookie(pageData.cookie_prefix+E);if(F!=""&&!vBulletin.cookie.bbarraycookiecache[E]){try{vBulletin.cookie.bbarraycookiecache[E]=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(F))}catch(G){vBulletin.cookie.bbarraycookiecache[E]=null}}if(vBulletin.cookie.bbarraycookiecache[E]){return vBulletin.cookie.bbarraycookiecache[E][H]?vBulletin.cookie.bbarraycookiecache[E][H]:null}else{return null}};vBulletin.cookie.setBbarrayCookie=function(E,K,G,I){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var F=C.cookie(pageData.cookie_prefix+E);if(F!=""&&!vBulletin.cookie.bbarraycookiecache[E]){try{vBulletin.cookie.bbarraycookiecache[E]=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(F))}catch(H){vBulletin.cookie.bbarraycookiecache[E]=null}}if(!vBulletin.cookie.bbarraycookiecache[E]){vBulletin.cookie.bbarraycookiecache[E]={}}vBulletin.cookie.bbarraycookiecache[E][K]=G;var J={path:pageData.baseurl_path};if(I){J.expires=365}C.cookie(pageData.cookie_prefix+E,vBulletin.cookie.convertBbarrayCookie(JSON.stringify(vBulletin.cookie.bbarraycookiecache[E]),"set"),J)};(function A(){C(".announcement-tabs").tabs({fx:{opacity:"toggle"},show:function(G,H){var E=C(H.panel).attr("data-id"),F=vBulletin.cookie.fetchBbarrayCookie("announcements_displayed",E);if(!F){vBulletin.cookie.setBbarrayCookie("announcements_displayed",E,1,true)}}}).each(function(){var E=C(this),F=C("> .tab",E).length;C(".tab",E).each(function(){var I=parseInt(C(this).attr("data-index")),H=C(this);C("span.prev",H)[I==0?"hide":"show"]();C("span.next",H)[I==F-1?"hide":"show"]();C("span.prev",H).on("click",function(J){E.tabs("select",I-1)});C("span.next",H).on("click",function(J){E.tabs("select",I+1)});var G={condensedLength:250,minTrail:20,delim:" ",moreText:C(".condense-text .see-more",E).html(),lessText:C(".condense-text .see-less",E).html(),ellipsis:"...",moreSpeed:"fast",lessSpeed:"fast",easing:"linear"};C(".announcementtext",H).removeClass("hide").condense(G)})});C(".ui-tabs .ui-tabs-nav > li").addClass("ui-state-disabled")})();window.vBulletin.getAjaxBaseurl=function(){if(pageData.baseurl.indexOf("http://")==0){return pageData.baseurl.substring(5)}else{if(pageData.baseurl.indexOf("https://")==0){return pageData.baseurl.substring(6)}else{return pageData.baseurl}}};window.vBulletin.normalizeAjaxUrl=function(E){if(E.indexOf("http://")==0){return E.substring(5)}else{if(E.indexOf("https://")==0){return E.substring(6)}else{return E}}};window.vBulletin.pageHasSelectors=function(E){if(C.isArray(E)&&E.length>0&&C.trim(E.toString())!=""){var F=false;C.each(E,function(G,H){if(C(H).length>0){F=true;return false}});return F}return true};window.vBulletin.areJsonObjectsEqual=function(G,E){var F=function(J,I){for(var H in J){if(J.hasOwnProperty(H)&&I.hasOwnProperty(H)){var L=J[H],K=I[H];if(L!=K){if(L instanceof Array&&K instanceof Array){if(C(L).not(K).length>0||C(K).not(L).length>0){return false}else{continue}}else{return false}switch(L.constructor){case Object:if(!window.vBulletin.areJsonObjectsEqual(L,K)){return false}break;case Function:if(L.toString()!=K.toString()){return false}break;default:return false}}}else{return false}}return true};if(typeof Object.keys=="function"){return(Object.keys(G).length==Object.keys(E).length)?F(G,E):false}else{return F(G,E)&&F(E,G)}};window.vBulletin.ajaxSetup=(function(){var E=false;return{init:function(){if(E){return }E=true;C.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=UTF-8"})}}})();window.vBulletin.ajaxSetup.init();window.vBulletin.ajaxProfile=(function(){var G=[],H=false,F=true,E=false;return{init:function(){if(H){return }H=true;C(function(){if(C("#debug-information").length==0){F=false}C("<ol />").attr("id","debug-ajax-request-list").hide().css({height:"150px",overflow:"auto",padding:"4px",border:"1px solid #CCC",background:"#EEE","margin-top":"2px","margin-bottom":"4px"}).appendTo(C("#debug-information #debug-ajax-request-count").closest("li"));C("#debug-information #debug-ajax-request-count").css("cursor","pointer").on("click",function(){C("#debug-ajax-request-list").toggle()});E=true});C.ajaxPrefilter(function(I,K,J){if(!F){return }G.push({displayed:false,url:I.url,relUrl:""});if(E){C("#debug-information #debug-ajax-request-count").text(G.length);C.each(G,function(){if(!this.displayed){this.displayed=true;this.relUrl=this.url.indexOf(pageData.baseurl)==0?this.url.substring(pageData.baseurl.length):this.url;C("#debug-ajax-request-list").append(C("<li />").text(this.relUrl))}})}})}}})();window.vBulletin.ajaxProfile.init();window.vBulletin.loadingIndicator=(function(){var I=0,H=false,G=false,F=0,E=0;return{init:function(){if(H){return }C("#loading_indicator").ajaxStart(function(){window.vBulletin.loadingIndicator.show("ajaxStart")});C("#loading_indicator").ajaxStop(function(){window.vBulletin.loadingIndicator.hide("ajaxStop")});H=true},show:function(J){if(F>0&&J=="ajaxStart"){--F;++E;console.log("vBulletin.loadingIndicator.show ajax indicator suppressed");return }++I;console.log("vBulletin.loadingIndicator.show Counter: "+I+" Source: "+(J||"Unspecified"));if(I>0){G=window.setTimeout(function(){if(G){C("#loading_indicator").show();G=false}},1000)}},hide:function(J){if(E>0&&J=="ajaxStop"){--E;console.log("vBulletin.loadingIndicator.hide ajax indicator suppressed");return }--I;I=I<0?0:I;if(!J){I=0}console.log("vBulletin.loadingIndicator.hide Counter: "+I+" Source: "+(J||"Unspecified"));if(I<1){if(G){window.clearTimeout(G);G=false}C("#loading_indicator").hide()}},suppressNextAjaxIndicator:function(){++F}}})();window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.cache=window.vBulletin.phrase.cache||{};window.vBulletin.phrase.uncachable=window.vBulletin.phrase.uncachable||[];window.vBulletin.phrase.isCached=function(E){return(typeof window.vBulletin.phrase.cache[E]!="undefined")};window.vBulletin.phrase.isCachable=function(E){return(C.inArray(E,window.vBulletin.phrase.uncachable)==-1)};window.vBulletin.phrase.isPreCached=function(E){return(C.inArray(E,window.vBulletin.phrase.precache)!=-1)};window.vBulletin.phrase.render=function(E){var G=window.vBulletin.phrase.isCached(E[0])?window.vBulletin.phrase.cache[E[0]]:E[0];for(var F=1;F<E.length;++F){G=G.replace(new RegExp("%"+F+"\\$s","gm"),E[F])}return G};window.vBulletin.phrase.cachePhrases=function(E,H){console.log("Cache phrases");var F=window.vBulletin.phrase.isCachable(E);if(!F){console.warn('The phrase "{0}" cannot be cached. This usually means it does not exist.'.format(E))}if(F&&!window.vBulletin.phrase.isPreCached(E)){window.vBulletin.phrase.precache.push(E);console.warn('The phrase "{0}" needs to be pre-cached at the top of the Javascript file'.format(E))}if(window.vBulletin.phrase.precache.length<1){console.log("Nothing to cache");return""}console.log("Phrases required: "+window.vBulletin.phrase.precache);var G=[];C.each(window.vBulletin.phrase.precache,function(J,I){if(C.inArray(I,G)===-1){G.push(I)}});console.log("Phrases being cached: "+G);window.vBulletin.phrase.precache=[];vBulletin.loadingIndicator.suppressNextAjaxIndicator();C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/phrase/fetch",async:false,data:({phrases:G}),type:"POST",dataType:"json",success:function(I){console.log("Successfully fetched phrases");if(I){var J=[];C.each(I,function(L,K){window.vBulletin.phrase.cache[L]=K;J.push(L)});C.each(G,function(K,L){if(C.inArray(L,J)==-1){window.vBulletin.phrase.uncachable.push(L)}});console.warn("Uncachable phrases (check if they even exist): "+window.vBulletin.phrase.uncachable)}else{console.warn("Unexpected result when fetching phrases")}},error:function(K,J,I){console.warn("Error when fetching phrases: {0}".format(I))}});if(typeof H=="function"){return H()}};window.vBulletin.phrase.get=function(){if(arguments.length<1){console.log("vBulletin.phrase.get() called with no parameters");return""}if(typeof arguments[0]=="object"){arguments=arguments[0]}if(window.vBulletin.phrase.isCached(arguments[0])){return window.vBulletin.phrase.render(arguments)}else{if(!window.vBulletin.phrase.isCachable(arguments[0])){console.warn('The phrase "{0}" cannot be cached. This usually means it does not exist.'.format(arguments[0]));return window.vBulletin.phrase.render(arguments)}else{var E=arguments;return window.vBulletin.phrase.cachePhrases(arguments[0],function(){return window.vBulletin.phrase.render(E)})}}};window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=C.merge(window.vBulletin.phrase.precache,["admin","admin_auth","all_changes_made_will_be_lost_would_you_like_to_continue","attach_link","attach_video","cancel","cancel_edit","close","compare_versions","conversation","edit_conversation","email_addresses_must_match","error","error_fetching_online_users_x","error_loading_ckeditor_script","error_loading_editor","error_loading_post","error_posting_comment_code_x","error_saving_vote","error_x","existing_reply_will_be_deleted","flag_a_post","follow","follow_error","following","following_pending","following_remove","forgot_password_title","go_to_first_new_post","inlinemod_auth_login_failed","inlinemod_auth_login_first","inlinemod_auth_password_empty","invalid_data","invalid_data_requested","invalid_email_address","invalid_request","invalid_server_response_please_try_again","invalid_special_channel_subscribe_request","invalid_user_permissions","invalid_username_specified","invalid_username_specified_maxlength_x","invalid_username_specified_minlength_x","invalid_query_definition_x","join","joined","join_error","leave","logged_out_while_editing_post","login","login_success_admin_auth","lostpw_email_sent","moderator","new_posts","no_create_permissions","no_icon","no_leave_channel_permission","no_one_voted","no_permission","no_update_permissions","no_valid_tags_found","not_logged_no_permission","onbeforeunload_message_while_editing_post","password_must_be_at_least_four_chars","passwords_must_match","people_who_liked","physically_remove_blog","physically_remove_comment","physically_remove_media","physically_remove_reply","physically_remove_topic","physically_remove_visitorMessage","please_enter_a_username","please_enter_link_url","please_enter_video_url","please_enter_your_comment","please_enter_your_email_address","please_enter_your_reason_why_you_want_to_flag_this_post","please_provide_search_string","please_select_a_day","please_select_a_month","please_select_a_year","post_comment","post_history","posttype_blog","posttype_comment","posttype_media","posttype_reply","posttype_topic","posttype_visitorMessage","search","see_less","see_more","select_option_and_click_delete_button_blog","select_option_and_click_delete_button_comment","select_option_and_click_delete_button_media","select_option_and_click_delete_button_reply","select_option_and_click_delete_button_topic","select_option_and_click_delete_button_visitorMessage","send_report","soft_delete_blog","soft_delete_comment","soft_delete_media","soft_delete_notes_blog","soft_delete_notes_comment","soft_delete_notes_media","soft_delete_notes_reply","soft_delete_notes_topic","soft_delete_notes_visitorMessage","soft_delete_reply","soft_delete_topic","soft_delete_visitorMessage","thanks_for_signing_up_log_in","the_report_has_been_sent","unable_to_check_admin_permissions","unexpected_error","unfollow_error","unsubscribe","unsubscribe_overlay_error","unvote_cap","user_name_x_already_in_use_choose_different_name","vote_a_post","vote_cap","xs_avatar","you_have_a_pending_edit_unsaved"]);window.vBulletin.getScrollbarWidth=function(){if(C("body").data("scrollbar-width")){return C("body").data("scrollbar-width")}var E=C('<div style="width:50px;height:50px;overflow:auto;position:absolute;top:-99999px;"><div /></div>').appendTo("body"),G=E.children(),F=G.innerWidth()-G.height(99).innerWidth();E.remove();C("body").data("scrollbar-width",F);return F};window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.cache=window.vBulletin.options.cache||{};window.vBulletin.options.uncachable=window.vBulletin.options.uncachable||[];window.vBulletin.options.isCached=function(E){return(typeof window.vBulletin.options.cache[E]!="undefined")};window.vBulletin.options.isCachable=function(E){return(C.inArray(E,window.vBulletin.options.uncachable)==-1)};window.vBulletin.options.isPreCached=function(E){return(C.inArray(E,window.vBulletin.options.precache)!=-1)};window.vBulletin.options.cacheOptions=function(E,H){console.log("Cache options");var F=window.vBulletin.options.isCachable(E);if(!F){console.warn('The option "{0}" cannot be cached. This usually means it does not exist.'.format(E))}if(F&&!window.vBulletin.options.isPreCached(E)){window.vBulletin.options.precache.push(E);console.warn('The option "{0}" needs to be pre-cached at the top of the Javascript file'.format(E))}if(window.vBulletin.options.precache.length<1){console.log("Nothing to cache");return""}console.log("Options required: "+window.vBulletin.options.precache);var G=[];C.each(window.vBulletin.options.precache,function(J,I){if(C.inArray(I,G)===-1){G.push(I)}});console.log("Options being cached: "+G);window.vBulletin.options.precache=[];C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/options/fetchValues",async:false,data:({options:G}),type:"POST",dataType:"json",success:function(I){console.log("Successfully fetched options");if(I){var J=[];C.each(I,function(K,L){window.vBulletin.options.cache[K]=L;J.push(K)});C.each(G,function(K,L){if(C.inArray(L,J)==-1){window.vBulletin.options.uncachable.push(L)}});console.warn("Uncachable options (check if they even exist): "+window.vBulletin.options.uncachable)}else{console.warn("Unexpected result when fetching options")}},error:function(K,J,I){console.warn("Error when fetching options: {0}".format(I))}});return H()};window.vBulletin.options.get=function(E){if(window.vBulletin.options.isCached(E)){return window.vBulletin.options.cache[E]}else{if(!window.vBulletin.options.isCachable(E)){console.warn('The option "{0}" cannot be cached. This usually means it does not exist.'.format(E));return E}else{var F=E;return window.vBulletin.options.cacheOptions(E,function(){return window.vBulletin.options.cache[F]})}}};window.vBulletin=window.vBulletin||{};window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||[];window.vBulletin.options.precache=C.merge(window.vBulletin.options.precache,["crontab","bbtitle","markinglimit"]);window.vBulletin.openAuthDialog=function(H,G,E){G=G||"inlinemod_auth";E=E||function(){};var F=openConfirmDialog({title:vBulletin.phrase.get(G),message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"inlinemod-auth-dialog loading",buttonLabel:{yesLabel:vBulletin.phrase.get("login"),noLabel:vBulletin.phrase.get("cancel")},primaryButton:"yes",onClickYesWithAjax:true,onClickYes:function(){var J=F.find(".inlinemod-auth-form"),K=J.find(':input[name="password"]').val(),I=J.find(".error-msg-box");I.text("").addClass("hide");C.ajax({url:vBulletin.normalizeAjaxUrl(J.attr("action")),data:{password:K},type:"POST",dataType:"json",success:function(L){if(L.error){I.text(vBulletin.phrase.get(L.error)).removeClass("hide")}else{F.dialog("close");F.dialog("close");return H()}},error:function(N,M,L){console.log("/auth/inlinemodLogin failed, error: "+L);openAlertDialog({title:vBulletin.phrase.get(G),message:N.status,iconType:"error"})}})},onClickNo:E});C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/inlinemod_auth",type:"POST",dataType:"json",success:function(I){console.log("/ajax/render/inlinemod_auth");if(I&&!I.errors){C(".inlinemod-auth-dialog").removeClass("loading");C(".dialog-content .message",F).html(I);F.dialog("option","position","center");C('[name="password"]',F).on("keydown",function(J){if(J.which==13){J.preventDefault();C("#btnConfirmDialogYes",F).click()}}).focus()}else{console.log("/ajax/render/inlinemod_auth successful, but response was not valid");openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){F.dialog("close")}})}},error:function(K,J,I){console.log("/ajax/render/inlinemod_auth failed, error: "+I);openAlertDialog({title:vBulletin.phrase.get(G),message:vBulletin.phrase.get("error_loading_delete_form_x",K.status),iconType:"error",onAfterClose:function(){F.dialog("close")}})}})};window.vBulletin.assertUserHasAdminPermission=function(H,G,E){if(C(G).data("in-progress")){return false}C("body").css("cursor","wait");var F=arguments.callee.caller;C(G).data("in-progress",true);C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/user/currentUserHasAdminPermission",data:({adminPermission:H}),type:"POST",dataType:"json",complete:function(){C("body").css("cursor","auto");C(G).data("in-progress",null)},success:function(I){console.log("ajax/api/user/currentUserHasAdminPermission result:"+JSON.stringify(I));if(I===true){E()}else{if(I&&I.errors&&I.errors.length>0){if(I.errors[0]=="auth_required"){window.vBulletin.openAuthDialog(function(){F.apply(G)},"admin_auth");return }openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("nopermission_loggedout"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}else{openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("unable_to_check_admin_permissions"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}}},error:function(K,J,I){console.log("ajax/api/user/currentUserHasAdminPermission error: "+I);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("unable_to_check_admin_permissions"),iconType:"error",onAfterClose:function(){C("#config-dialog").dialog("close");window.location.reload()}});C("#config-dialog .loader").hide()}})};vBulletin.pagination=function(L){var H={context:document,onPageChanged:null};if(L&&typeof L=="object"){C.extend(H,L)}var J=C(".pagenav-controls .pagenav-form",H.context);function F(){return parseInt(C(".pagetotal",J).html(),10)}function G(M,O){var N=F.apply(this);if(M<1){M=1}C("input[name=page]",J).val(M);C(".horizontal-arrows .arrow[rel=next]",J)[(M>=N)?"addClass":"removeClass"]("disabled");C(".horizontal-arrows .arrow[rel=prev]",J)[(M==1)?"addClass":"removeClass"]("disabled");if(typeof H.onPageChanged=="function"){H.onPageChanged.apply(this,[M,O])}}function K(M){var N=parseInt(M);if(N&&typeof N==="number"){C("input[name=result-id]",J).val(N)}}function I(M){C("a.see-all-btn",this).closest(".pagenav-controls")[M?"addClass":"removeClass"]("hide")}C(".arrow",J).off("click").on("click",function(N){N.preventDefault();if(!C(this).hasClass("disabled")){var M=parseInt(C("input[name=page]",J).val())+((C(this).attr("rel")=="next")?1:-1);G.apply(this,[M,false])}});function E(){C(".pagenav .button",H.context).off("click").on("click",function(N){N.preventDefault();var M=parseInt(C(this).data("page"));G.apply(this,[M,false])})}E();C("input[type=text][name=page]",J).off("keypress").on("keypress",function(O){if(O.keyCode==13){O.preventDefault();var M=parseInt(C(this).val(),10);var N=F.apply(this);if(M>N){M=N}if(M<1){M=1}G.apply(this,[M,false])}});this.updatePageInfo=function(N,M){if(N&&typeof N=="object"){var O=N.totalpages||1;C(".pagetotal",J).text(O);if(typeof N.showseemore!="undefined"){if(N.showseemore){I.apply(J,[false])}else{I.apply(J,[true])}}N.perpage=vBulletin.conversation.POSTS_PER_PAGE;if(M){C.get(pageData.baseurl+"/ajax/render/pagenav",{pagenav:N},function(P){if(P){C(".pagenav-container",H.context).replaceWith(P);E()}},"json")}G.apply(J,[N.pagenumber,M])}};this.updateResultId=function(M){K(M)}};vBulletin.conversation=vBulletin.conversation||{};vBulletin.conversation.toggleCommentBox=function(){var E=C(this).closest(".list-item-body-wrapper").find(".comment-entry-box");E.slideToggle("fast",function(){var F=C(this).find(".comment-textbox");if(F.is(":visible")){F.focus()}});E.find(".post-comment-cancel-btn").off("click").on("click",function(F){E.slideToggle();return false});return false};vBulletin.conversation.postComment=function(K,H){var G=this;var F=C(G).closest(".comment-entry-box").find(".comment-textbox");var J=C.trim(F.val());if(!J||(F.hasClass("placeholder")&&J==F.attr("placeholder"))){openAlertDialog({title:vBulletin.phrase.get("post_comment"),message:vBulletin.phrase.get("please_enter_your_comment"),iconType:"warning",onAfterClose:function(){F.focus()}});return false}C("body").css("cursor","wait");C(G).blur();var E=C(G).closest(".list-item"),I=C(G).closest(".comment-entry-box-blog").length==1?1:0;C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/post-comment",data:({text:J,parentid:E.attr("data-node-id"),postindex:E.find(".conversation-body .post-count").text().replace("#",""),view:E.parent().hasClass("stream-view")?"stream":"thread",redirecturl:F.hasClass(".reload-on-post")?1:0,isblogcomment:I,humanverify:{input:C(G).closest(".comment-entry-box").find('[name="humanverify[input]"]').val(),hash:C(G).closest(".comment-entry-box").find('[name="humanverify[hash]"]').val()},recaptcha_challenge_field:C(G).closest(".comment-entry-box").find('[name="recaptcha_challenge_field"]').val(),recaptcha_response_field:C(G).closest(".comment-entry-box").find('[name="recaptcha_response_field"]').val()}),type:"POST",dataType:"json",complete:function(M,L){console.log("post-comment complete.");C("body").css("cursor","auto");vBulletin.hv.reset()},success:function(L,N,O){console.log("post-comment successful! result:"+JSON.stringify(L));if(L){if(!L.error){if(typeof H=="function"){H.apply(G,[L])}if(!I){C(G).closest(".comment-entry-box").slideToggle()}var M=E.attr("data-node-id");if(pageData.threadmarking=="0"||pageData.userid=="0"){vBulletin.cookie.setBbarrayCookie("discussion_view",M,Math.round(new Date().getTime()/1000))}else{C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/markRead",data:{nodeid:M},type:"POST",datatype:"json",complete:function(){},success:function(P){if(P&&!P.error){console.log("Topic "+M+" is marked read successfully!")}else{console.log("Topic "+M+" is marked read failed: "+P.error)}},error:function(R,Q,P){console.log("Topic "+M+" is marked read failed:"+P)}})}}else{openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_x",L.error),iconType:"warning"})}}else{openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}},error:function(N,M,L){console.log("post-comment failed! error:"+L);openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_posting_comment_code_x",N.status),iconType:"error"})}})};vBulletin.conversation.showIp=function(F){var H=C(this),G=C(this).data("post-ip"),E=C(this).data("post-host");openAlertDialog({title:vBulletin.phrase.get("ip_info"),message:vBulletin.phrase.get("ip_address_is")+": "+G+"<br />"+vBulletin.phrase.get("host_name_is")+': <span class="ip-host-name loading">...</span>',iconType:"none"});vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/getHostName",data:{ip:G},success:function(I,J,K){C(".ip-host-name").removeClass("loading").html(I)}});return false};vBulletin.conversation.showPostHistory=function(H){var I=C(this);var G=C(this).closest(".list-item").attr("data-node-id");var F=openConfirmDialog({title:vBulletin.phrase.get("post_history"),message:vBulletin.phrase.get("loading")+"...",width:800,dialogClass:"post-history-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:vBulletin.phrase.get("compare_versions"),noLabel:vBulletin.phrase.get("cancel")},onAfterClose:function(){if(this.id=="btnConfirmDialogYes"){var K=F.find(".post-history-form");var J={oldpost:K.find("input:radio[name=old]:checked").val()||1,newpost:K.find("input:radio[name=new]:checked").val()||1,nodeid:G};C("#btnConfirmDialogYes").hide();var L=openConfirmDialog({title:vBulletin.phrase.get("post_history"),message:vBulletin.phrase.get("loading")+"...",width:800,dialogClass:"post-history-comparison-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:vBulletin.phrase.get("compare_versions"),noLabel:vBulletin.phrase.get("close")},onAfterClose:function(){C("#btnConfirmDialogYes").show()}});E(L,"post_history_form",J)}}});E(F,"post_history_form",{nodeid:G});function E(J,K,L){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/"+K,data:L,type:"POST",dataType:"json",success:function(M){console.log("/ajax/render/"+K);if(M&&!M.errors){J.removeClass("loading").find(".dialog-content .message").html(M).find("[placeholder]").placeholder().end().end().dialog("option","position","center")}else{console.log("/ajax/render/"+K+" successful, but response was not valid: "+JSON.stringify(M));openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){J.dialog("close")}})}},error:function(O,N,M){console.log("/ajax/render/"+K+" failed, error: "+M);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_delete_form_x",O.status),iconType:"error",onAfterClose:function(){J.dialog("close")}})}})}};vBulletin.conversation.flagPost=function(F){var G=C(this);var E=C(this).closest(".list-item").attr("data-node-id");openPromptDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("please_enter_your_reason_why_you_want_to_flag_this_post"),buttonLabel:{okLabel:vBulletin.phrase.get("send_report"),cancelLabel:vBulletin.phrase.get("cancel")},multiline:true,validation:{type:"string"},onClickOK:function(H){C("body").css("cursor","wait");C.ajax({url:vBulletin.getAjaxBaseurl()+"/report/report",type:"post",data:{reason:H,reportnodeid:E},dataType:"json",success:function(I){if(I){if(I.error){console.log("/report/report failed, error: "+JSON.stringify(I.error));var J;if(I.error.length>1){J=vBulletin.phrase.get(I.error)}else{J=vBulletin.phrase.get(I.error[0])}openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:J,iconType:"error"})}else{openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("the_report_has_been_sent"),iconType:"",onAfterClose:function(){C("#prompt-dialog").dialog("close")}})}}},error:function(K,J,I){console.log("/report/report failed, error: "+I);openAlertDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error",onAfterClose:function(){C("#prompt-dialog").dialog("close")}})},complete:function(){C("body").css("cursor","default")}})}});return false};vBulletin.conversation.editPost=function(K,N){var P=C(this),G,O,L=P.closest(".conversation-list");if(P.closest(".conversation-comments-wrapper").length>0){G="comment"}var H=C(".edit-conversation-container form",L);if(H.length>0){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get("you_have_a_pending_edit_unsaved"),iconType:"warning",onAfterClose:function(){vBulletin.animateScrollTop(H.closest(".list-item").offset().top,{duration:"slow"})}});return }if(N&&N.isFilterSelected("conversations_on")){N.toggleNewConversations(false)}window.vBulletin.loadingIndicator.show();K.preventDefault();var F=P.parent().attr("data-node-id");var E=(G=="comment")?P.closest(".conversation-comments-wrapper .list-item"):P.closest(".list-item-body-wrapper");if(L.hasClass("thread-view")){O="thread"}else{if(L.hasClass("full-activity-view")){O="full-activity-stream"}else{if(L.hasClass("activity-view")){O="activity-stream"}else{O="stream"}}}G=G||E.attr("data-node-type")||"";var J,M=C(".post-count",E).text()||"1";if(G=="comment"&&O=="thread"){J=Number(M.replace("#",""))}else{J=Number(M.replace("#",""))-1}var I=function(R,U,W,Q){if(R&&R.error){window.vBulletin.loadingIndicator.hide();Q.find(".action-buttons .button").prop("disabled",false);if(C.isArray(R.error)){switch(R.error[0]){case"toomanyimages":var V=vBulletin.phrase.get("toomanyimages",R.error[1],R.error[2]);break;default:C.each(R.error,function(Y,Z){R.error[Y]=vBulletin.phrase.get(Z)});var V=R.error.join("<br />")}}else{var V=vBulletin.phrase.get(R.error)}openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:V,iconType:"error"});return }var X=C(".edit-conversation-container form",E).attr("data-content-type");var S=Q.attr("ck-editorid");if(S&&vBulletin.ckeditor.eventRegistered(S,"afterSave")){C("body").trigger(X+"_editform_onunload",[E]);C("#"+S).trigger("afterSave",[S]);window.vBulletin.loadingIndicator.hide();return }Q.closest(".conversation-reply-slideout").addClass("hide");var T=pageData;T["posts-perpage"]=vBulletin.conversation.POSTS_PER_PAGE;if(O=="thread"){T["comments-perpage"]=vBulletin.conversation.COMMENTS_PER_PAGE}var W=C.post(vBulletin.getAjaxBaseurl()+"/create-content/loadnode",{nodeid:F,view:O,page:T,index:J,type:G},function(a){if(a.error){openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get(a.error),iconType:"error"})}else{var Y=C(a.template);C("body").trigger(X+"_editform_onunload",[E]);if(N&&N.isFilterSelected("conversations_on")){N.toggleNewConversations(true)}P.closest(".list-item").replaceWith(Y);C("body").trigger(X+"_newcontent_onload",[Y]);var b=Y.attr("data-node-id");if(Y.hasClass("conversation-starter")){var Z=C(".post-title",Y).first().text();document.title=Z+" - "+vBulletin.options.get("bbtitle");C(".conversation-content-widget .widget-header .module-title").text(Z)}vBulletin.animateScrollTop(Y.offset().top,{duration:"slow"})}},"json").error(function(){openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_loading_post"),iconType:"error"})}).complete(function(){window.vBulletin.loadingIndicator.hide()})};C.post(vBulletin.getAjaxBaseurl()+"/create-content/loadeditor",{nodeid:F,type:G,view:O},function(U){if(U.error){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get(U.error),iconType:"error"})}else{var T=function(){E.addClass("edit-post content-entry-box").find(".edit-conversation-container").show();vBulletin.ckeditor.initTitleRow(E);window.vBulletin.loadingIndicator.hide()};C("> .edit-conversation-container",E).hide().html(U.template);var V=C(".edit-conversation-container form",E).attr("data-content-type");var S=C(".edit-conversation-container form textarea.ckeditor-bare-box",E);S.val(JShtmlEncode(S.val()));C(".edit-conversation-container input[placeholder], .edit-conversation-container textarea[placeholder]",E).placeholder();var Q=C(".list-item[data-node-id={0}] .tag-editor-container .tag-input".format(F));if(Q.length>0){var R=new vBulletin.tagEditor.instance(Q.selector)}C("button.cancel",E).on("click",function(X,W){X.preventDefault();if(!W){openConfirmDialog({title:vBulletin.phrase.get("cancel_edit"),message:vBulletin.phrase.get("all_changes_made_will_be_lost_would_you_like_to_continue"),iconType:"warning",onClickYes:function(){C(E).find("form").each(function(Z,Y){var a=C(Y).attr("ck-editorid");if(a){C("#"+a).trigger("beforeCancel",[a])}});C("button.cancel",E).trigger("click",[true])}});return false}E.removeClass("edit-post content-entry-box");C(window).off("beforeunload.editPost");C("body").trigger(V+"_editform_onunload",[E]);if(N&&N.isFilterSelected("conversations_on")){N.toggleNewConversations(true)}C(E).find("form").each(function(Z,Y){var a=C(Y).attr("ck-editorid");if(a){C("#"+a).trigger("afterCancel",[a])}});C(".edit-conversation-container",E).empty().hide()});C("button.delete",E).on("click",function(){var X=C(this),Y=C(this.form).data("content-type");if(Y!="comment"&&Y!="media"){if(X.closest('.content-entry-box[data-node-type="visitorMessage"]').length==1){Y="visitorMessage"}else{if(X.closest(".list-item.conversation-starter").length==1){Y=X.closest(".conversation-list.blog-list").length==1?"blog":"topic"}else{Y="reply"}}}var W=vBulletin.phrase.get("delete_x",vBulletin.phrase.get("posttype_"+Y));$deleteDialog=openConfirmDialog({title:W,message:vBulletin.phrase.get("loading")+"...",width:500,dialogClass:"delete-post-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:W,noLabel:vBulletin.phrase.get("cancel")},onClickYes:function(){var c=[];C(E).find("form").each(function(e,d){var f=C(d).attr("ck-editorid");if(f){C("#"+f).trigger("beforeDelete",[f]);c.push(f)}});var b=$deleteDialog.find(".delete-posts-form");var a=b.find("input:radio[name=deletetype]:checked").val()||1;var Z={hard:(a==2?1:0),reason:b.find(":input[name=deletereason]").val(),nodeids:F};vBulletin.AJAX({url:vBulletin.normalizeAjaxUrl(b.attr("action")),data:Z,error_phrase:"error_deleting_posts_x",success:function(d){C(window).off("beforeunload.editPost");C("body").trigger(V+"_editform_onunload",[E]);if(a==2){if(Y=="topic"||Y=="blog"){location.replace(C("#breadcrumbs .crumb a:last").attr("href")||pageData.baseurl)}else{C('.list-item[data-node-id="'+F+'"]').remove()}}else{var e=C(".filter-wrapper",X.closest(".conversation-view, .ui-tabs-panel, .widget-content").find(".conversation-toolbar")).data("object-instance");if(e&&typeof e.applyFilters=="function"){e.forceApplyFilters()}else{if(Y=="visitorMessage"){window.history.back()}else{location.reload()}}}C.each(c,function(f,g){C("#"+g).trigger("afterDelete",[g])})}})}});C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/delete_post_form",data:({postType:Y,nodeid:F,authorid:X.data("userid")}),type:"POST",dataType:"json",success:function(Z){console.log("/ajax/render/delete_post_form");if(Z&&!Z.errors){$deleteDialog.removeClass("loading").find(".dialog-content .message").html(Z).find("[placeholder]").placeholder().end().end().dialog("option","position","center")}else{console.log("/ajax/render/delete_post_form successful, but response was not valid: "+JSON.stringify(Z));openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error",onAfterClose:function(){$deleteDialog.dialog("close")}})}},error:function(b,a,Z){console.log("/ajax/render/delete_post_form failed, error: "+Z);openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_delete_form_x",b.status),iconType:"error",onAfterClose:function(){$deleteDialog.dialog("close")}})}})});C("form",E).ajaxForm({dataType:"json",success:I,beforeSerialize:function(W){var Y=W.attr("ck-editorid");C("#"+Y).trigger("beforeSave",[Y]);var X=C("body").triggerHandler(V+"_editform_onbeforeserialize",[W]);return(X===false)?false:true},beforeSubmit:function(a,Z,X){var Y=(vBulletin.contentEntryBox||{})[V+"FormValidate"],W;if(typeof Y=="function"){W=Y.apply(Z,[X])}if(W===false){return false}C(window).off("beforeunload.editPost");window.vBulletin.loadingIndicator.show();return true}});C(window).off("beforeunload.editPost").on("beforeunload.editPost",function(){return vBulletin.phrase.get("onbeforeunload_message_while_editing_post")});C("body").trigger(V+"_editform_onload",[E,T])}},"json").error(function(R,S,Q){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:"HTTP {0} - {1}".format(R.status,Q),iconType:"error"})}).complete(function(R,S,Q){window.vBulletin.loadingIndicator.hide()})};vBulletin.conversation.votePost=function(F){var E=C(this).closest(".list-item").attr("data-node-id");C(".list-item[data-node-id="+E+"] .voteCtrl").addClass("disabled");C("body").css("cursor","wait");if(!C(this).hasClass("voted")){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/vote",type:"post",data:{nodeid:E},dataType:"json",success:function(G){if(G){if(G.errors){openAlertDialog({title:vBulletin.phrase.get("error_saving_vote"),message:vBulletin.phrase.get(G.errors[0]),iconType:"error"});C(".list-item[data-node-id="+E+"] .voteCtrl").removeClass("disabled")}else{C(".list-item[data-node-id="+G.nodeid+"] .votecount").html(G.votes);C(".list-item[data-node-id="+E+"] .voteCtrl").addClass("voted").removeClass("disabled").find(".label").text(vBulletin.phrase.get("unvote_cap")).end()}}},complete:function(){C("body").css("cursor","default")}})}else{C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/unvote",type:"post",data:{nodeid:E},dataType:"json",success:function(G){if(G){if(G.errors){openAlertDialog({title:vBulletin.phrase.get("error_saving_vote"),message:vBulletin.phrase.get(G.errors[0]),iconType:"error"});C(".list-item[data-node-id="+E+"] .voteCtrl").removeClass("disabled")}else{C(".list-item[data-node-id="+G.nodeid+"] .votecount").html(G.votes);C(".list-item[data-node-id="+E+"] .voteCtrl").removeClass("voted").removeClass("disabled").find(".label").text(vBulletin.phrase.get("vote_cap")).end()}}},complete:function(){C("body").css("cursor","default")}})}};vBulletin.conversation.showWhoVoted=function(G){var E=C(this);if(C(this).hasClass("novotepopup")){return }var F=E.closest(".list-item").attr("data-node-id");E.qtip({content:{title:{text:vBulletin.phrase.get("people_who_liked"),button:true},text:vBulletin.phrase.get("loading")+"...",ajax:{url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/fetchWhovoted",type:"POST",data:{nodeid:F},dataType:"json",once:false,success:function(L,J){if(L.errors){this.set("content.text",L.errors[0][0])}else{if(L.length<1){this.set("content.text",vBulletin.phrase.get("no_one_voted"))}else{var N="<ul>";for(x in L){var I=pageData.baseurl+L[x].profileurl,Q;if(!L[x].avatarurl){Q=pageData.baseurl_core+"/image.php?u="+L[x].userid+"&type=profile"}else{Q=pageData.baseurl_core+"/"+L[x].avatarurl}var M=C("<img>").attr("src",Q).attr("alt",vBulletin.phrase.get("xs_avatar",L[x].username)),P=C("<a>").attr("href",I).addClass("avatar"),H=P.clone().removeClass("avatar"),R=C("<li>"),O=C("<div>").addClass("usertitle").text(L[x].usertitle);var K=C("<div>").addClass("username").text(L[x].musername);if(L[x].musername!=""){K=C("<div>").addClass("username").html(L[x].musername)}P.append(M);H.append(K);R.append(P);R.append(H);R.append(O);N+=C("<div>").append(R).html()}N+="</ul>";this.set("content.text",N)}}},error:function(H,J,I){this.set("content.text","failed to load.")}}},position:{my:"left top",at:"right top",viewport:C(window)},show:{event:"click"},hide:{event:"unfocus",fixed:true},style:{classes:"ui-tooltip-shadow ui-tooltip-light ui-tooltip-whovoted"}});E.qtip("api").show()};vBulletin.conversation.processPostContent=function(E){E.css("border-bottom","").filter(".stream-view.activity-view").find(".list-item-poll form.poll").each(function(F,G){if(C(this).is(":visible")&&C(".view-less-ctrl",this).hasClass("hide")){vBulletin.conversation.limitVisiblePollOptionsInAPost(this,3)}})};vBulletin.conversation.limitVisiblePollOptionsInAPost=function(I,H){if(typeof H=="undefined"){H=3}var F=0;var G=C("ul.poll li",I);var E=parseInt(G.css("line-height"),10);G.each(function(J){C(this).removeClass("hide");var K=C(this).height();F+=K/E;if(F>H){C(this).addClass("hide")}else{C(this).css("display","")}});if(F>3){C(".view-more-ctrl",I).removeClass("hide").next(".action-buttons").addClass("hide").next(".view-less-ctrl").addClass("hide")}else{C(".view-more-ctrl",I).addClass("hide").next(".action-buttons").removeClass("hide").next(".view-less-ctrl").addClass("hide")}};vBulletin.conversation.bindEditFormEventHandlers=function(K){K=(K)?K.toLowerCase():"";if(C.inArray(K,["text","gallery","video","poll","link","comment"])!=-1||K=="all"){var E=function(){C("body").off("text_editform_onload").on("text_editform_onload",function(N,L,M){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){vBulletin.ckeditor.initEditor("ckeditor-bare-edit",{success:function(O){if(typeof M=="function"){M();this.setData(C("."+O,L).html());this.focus()}},error:function(O){if(typeof M=="function"){M()}C("#"+O).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true})}else{if(typeof M=="function"){M();L.closest(".conversation-comments-wrapper").find("> .action-buttons").hide();C("#ckeditor-bare-edit").focus()}}}).off("text_editform_onunload").on("text_editform_onunload",function(N,L){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}else{L.closest(".conversation-comments-wrapper").find("> .action-buttons").show()}}).off("text_newcontent_onload").on("text_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L)}})};var I=function(){C("body").off("comment_editform_onload").on("comment_editform_onload",function(N,L,M){if(typeof M=="function"){M();C("#ckeditor-bare-edit").focus()}}).off("comment_editform_onunload").on("comment_editform_onunload",function(M,L){})};var H=function(){C("body").off("poll_editform_onload").on("poll_editform_onload",function(N,L,M){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){vBulletin.ckeditor.initEditor("ckeditor-bare-poll-edit",{success:function(O){if(typeof M=="function"){M();this.setData(C("."+O,L).html());this.focus()}},error:function(O){if(typeof M=="function"){M()}C("#"+O).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true})}else{if(typeof M=="function"){M();L.closest(".conversation-comments-wrapper").find("> .action-buttons").hide();C("#ckeditor-bare-poll-edit").focus()}}C("input.datepicker",L).not(".hasDatePicker").datetimepicker({showOn:"both",buttonImage:pageData.baseurl+"/images/calendar-blue.png",buttonImageOnly:true,ampm:true});C("textarea.autogrow",L).elastic()}).off("poll_editform_onunload").on("poll_editform_onunload",function(N,L){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}).off("poll_newcontent_onload").on("poll_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L);vBulletin.conversation.limitVisiblePollOptionsInAPost(C("form.poll",L),3)}})};var G=function(){C("body").off("gallery_editform_onload").on("gallery_editform_onload",function(N,L,M){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){vBulletin.ckeditor.initEditor("ckeditor-bare-"+(L.attr("data-node-type")||"")+"gallery-edit",{success:function(O){if(typeof M=="function"){M();this.setData(C("."+O,L).html());this.focus();vBulletin.upload.initializePhotoUpload(L)}},error:function(O){if(typeof M=="function"){M()}C("#"+O).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true})}else{if(typeof M=="function"){M();C("#ckeditor-bare-"+(L.attr("data-node-type")||"")+"gallery-edit").focus();vBulletin.upload.initializePhotoUpload(L)}}}).off("gallery_editform_onunload").on("gallery_editform_onunload",function(N,L){if(L.find(".ckeditor-bare-box.ckeditor-load-on-focus").length>0){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}}).off("gallery_editform_onbeforeserialize").on("gallery_editform_onbeforeserialize",function(M,L){L.find(".caption-box").each(function(){var N=C(this);if(N.hasClass("placeholder")&&N.val()==N.attr("placeholder")){N.val("")}});C(".photo-display-container .photo-display input",L.closest(".gallery-editor")).appendTo(L);return true}).off("gallery_newcontent_onload").on("gallery_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L)}})};var J=function(){C("body").off("video_editform_onload").on("video_editform_onload",function(Q,L,O){C(".videoscontainer .videocontainer .remove").off("click").on("click",M);C("button.attach",L).on("click",function(W){var S=C(this);W.preventDefault();var U=S.closest("form");var V=C("input.url",U);var T=C.trim(V.val());if(!T){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:vBulletin.phrase.get("please_enter_video_url"),iconType:"warning",onAfterClose:function(){V.focus()}});return false}S.prop("disabled",true);C('button[name="btnSubmit"]',U).prop("disabled",true);C("body").css("cursor","wait");C.post(vBulletin.getAjaxBaseurl()+"/link/getlinkdata",{url:T},function(X){if(X.error){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:X.error,iconType:"warning",onAfterClose:function(){V.focus()}})}else{$template=C(X.template);if($template.is(".videocontainer")>0){$template.hide();C(".videoscontainer",U).append($template);R($template);$template.fadeIn("slow",function(){C("input.url",U).val("");C(".videoattach-container",U).addClass("has-video")})}else{$template.find("img").error(function(){C(this).closest("li").remove()});C(".videoscontainer",U).append($template);R($template);$template.fadeIn("slow",function(){C("input.url",U).val("");C(".videoattach-container",U).addClass("has-video")})}}},"json").error(function(Z,Y,X){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:"HTTP {0} - {1}".format(Z.status,X),iconType:"error"})}).complete(function(){C("body").css("cursor","default");S.prop("disabled",false);C('button[name="btnSubmit"]',U).prop("disabled",false)})});function N(S){C(S).find(".remove").off("click").on("click",M)}function R(T){var U=T.closest("form");C(".urlinfo a.edit",T).on("click",function(W){W.preventDefault();var V=C(this).parent();V.addClass("edit-mode");C(".textbox",V).val(C.trim(C(".display-text",V).text())).trigger("focus");C("button.save",V).on("click",function(X){X.preventDefault();C('input[type="hidden"]',V).val(C(".textbox",V).val());C(".display-text",V).text(C(".textbox",V).val());V.removeClass("edit-mode")})});C("a.removelink",T).on("click",function(V){V.preventDefault();C(this).closest(".linkcontainer").html("").removeClass("videocontainer");C(".videoattach-container",U).removeClass("has-video")});C(".preview-checkbox input",T).off("click").on("click",function(){C(".urlimg_container",T)[this.checked?"addClass":"removeClass"]("hide")});var S=C(".img_wrapper img",T).length;C(".preview-checkbox input",T).off("click").on("click",function(){C(".urlimg_container",T)[this.checked?"addClass":"removeClass"]("hide")});var S=C(".img_wrapper img",T).length;T.find(".urlimg_list").jcarousel({scroll:1,wrap:null,size:S,rtl:C("html").attr("dir")=="rtl",buttonNextCallback:function(X,W,V){C(".scroll-arrows .next-arrow",T)[V?"removeClass":"addClass"]("disabled")},buttonPrevCallback:function(X,W,V){C(".scroll-arrows .prev-arrow",T)[V?"removeClass":"addClass"]("disabled")},initCallback:function(W,V){if(V=="init"&&S>0){C(".scroll-arrows .counter",T).html("1/"+S);C(".scroll-arrows .prev-arrow",T).off("click").on("click",function(){if(!C(this).hasClass("disabled")){C(".jcarousel-container .jcarousel-prev",T).trigger("click")}});C(".scroll-arrows .next-arrow",T).off("click").on("click",function(){if(!C(this).hasClass("disabled")){C(".jcarousel-container .jcarousel-next",T).trigger("click")}})}},itemVisibleInCallback:function(Y,W,V,X){if(X=="init"){return false}C(".scroll-arrows .counter",T).html(V+"/"+S);C('input[type="radio"]',W).prop("checked",true)},itemFallbackDimension:90})}function M(T){T.preventDefault();var S=C(this).closest("form");var U=C(this).parent(".videocontainer");U.remove();C(".videoattach-container",S).removeClass("has-video")}if(typeof O=="function"){vBulletin.ckeditor.initEditor("ckeditor-bare-video-edit",{success:function(S){O();this.setData(C("."+S,L).html());this.focus()},error:function(S){if(typeof O=="function"){O()}C("#"+S).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true});var P=C(".videoscontainer",L);R(P)}}).off("video_editform_onunload").on("video_editform_onunload",function(N,L){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}).off("video_newcontent_onload").on("video_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L)}})};var F=function(){C("body").off("link_editform_onload").on("link_editform_onload",function(O,L,M){C("button.attach",L).on("click",function(T){var Q=C(this);T.preventDefault();var U=Q.closest("form");var S=C("input.url",U);var R=C.trim(S.val());if(!R){openAlertDialog({title:"Error",message:"Please enter a valid URL and click <strong>Attach</strong> button.",iconType:"warning",onAfterClose:function(){S.focus()}});return false}if(!R.match(/^https?:\/\//)){R="http://"+R;C("input.url",U).val(R)}Q.prop("disabled",true);C('button[name="btnSubmit"]',U).prop("disabled",true);C("body").css("cursor","wait");C.post(vBulletin.getAjaxBaseurl()+"/link/getlinkdata",{url:R},function(W){if(W.error){openAlertDialog({title:vBulletin.phrase.get("attach_link"),message:W.error,iconType:"warning",onAfterClose:function(){S.focus()}})}else{var V=C(W.template);if(V.find("div.linkcontainer.linkviewcontainer.videocontainer").length>0){V.hide();C(".videoscontainer",U).append(V);V.fadeIn("slow",function(){C("input.url",U).val("");C(".videoattach-container",U).addClass("has-video")})}else{V.find("img").error(function(){C(this).closest("li").remove()});C(".linkcontainer",U).replaceWith(V);P(V);V.fadeIn("slow",function(){C("input.url",U).val("");C(".linkattach-container",U).addClass("hide-imp")})}}},"json").error(function(X,W,V){openAlertDialog({title:vBulletin.phrase.get("attach_link"),message:"HTTP {0} - {1}".format(X.status,V),iconType:"error"})}).complete(function(){C("body").css("cursor","default");Q.prop("disabled",false);C('button[name="btnSubmit"]',U).prop("disabled",false)})});if(typeof M=="function"){vBulletin.ckeditor.initEditor("ckeditor-bare-link-edit",{success:function(Q){M();this.setData(C("."+Q,L).html());this.focus()},error:function(Q){if(typeof M=="function"){M()}C("#"+Q).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");C(".edit-post .btnGoAdvanced").prop("disabled",true)},hideLoadingDialog:true});var N=C(".linkcontainer",L);P(N)}function P(R){var S=R.closest("form");C(".urlinfo a.edit",R).on("click",function(U){U.preventDefault();var T=C(this).parent();T.addClass("edit-mode");C(".textbox",T).val(C.trim(C(".display-text",T).text())).trigger("focus");C("button.save",T).on("click",function(V){V.preventDefault();C('input[type="hidden"]',T).val(C(".textbox",T).val());C(".display-text",T).text(C(".textbox",T).val());T.removeClass("edit-mode")})});C("a.removelink",R).on("click",function(T){T.preventDefault();C(this).closest(".linkcontainer").html("").removeClass("videocontainer");C(".linkattach-container",S).removeClass("hide-imp")});C(".preview-checkbox input",R).off("click").on("click",function(){C(".urlimg_container",R)[this.checked?"addClass":"removeClass"]("hide")});var Q=C(".img_wrapper img",R).length;C(".preview-checkbox input",R).off("click").on("click",function(){C(".urlimg_container",R)[this.checked?"addClass":"removeClass"]("hide")});var Q=C(".img_wrapper img",R).length;R.find(".urlimg_list").jcarousel({scroll:1,wrap:null,size:Q,rtl:C("html").attr("dir")=="rtl",buttonNextCallback:function(V,U,T){C(".scroll-arrows .next-arrow",R)[T?"removeClass":"addClass"]("disabled")},buttonPrevCallback:function(V,U,T){C(".scroll-arrows .prev-arrow",R)[T?"removeClass":"addClass"]("disabled")},initCallback:function(U,T){if(T=="init"&&Q>0){C(".scroll-arrows .counter",R).html("1/"+Q);C(".scroll-arrows .prev-arrow",R).off("click").on("click",function(){if(!C(this).hasClass("disabled")){C(".jcarousel-container .jcarousel-prev",R).trigger("click")}});C(".scroll-arrows .next-arrow",R).off("click").on("click",function(){if(!C(this).hasClass("disabled")){C(".jcarousel-container .jcarousel-next",R).trigger("click")}})}},itemVisibleInCallback:function(W,U,T,V){if(V=="init"){return false}C(".scroll-arrows .counter",R).html(T+"/"+Q);C('input[type="radio"]',U).prop("checked",true)},itemFallbackDimension:90})}}).off("link_editform_onunload").on("link_editform_onunload",function(N,L){var M=L.find('textarea[name="text"]').attr("id");if(vBulletin.ckeditor.editorExists(M)){vBulletin.ckeditor.destroyEditor(M)}}).off("link_newcontent_onload").on("link_newcontent_onload",function(M,L){if(L.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(L)}}).off("link_savepost_success").on("link_savepost_success",function(M,L){C(".linkattach-container",L).removeClass("hide-imp")})};switch(K){case"text":E();break;case"comment":I();break;case"poll":H();break;case"gallery":G();break;case"video":J();break;case"link":F();break;case"all":E();I();H();G();J();F();break}}};vBulletin.isScrolledIntoView=function(G,L){var M=false;if(C.isPlainObject(L)&&(L).toString()=="[object Object]"){M=true;L.top=0;L.bottom=0}G=(G instanceof C)?G:C(G);if(G.length==0){return false}var E=C(window).scrollTop();var F=E+C(window).height();var J=G.offset().top;var H=J+G.outerHeight();var K=J-E;var I=F-H;if(M){L.top=K;L.bottom=I}return(K>=0&&I>=0)};vBulletin.scrollToFixed=function(H){var E={element:C(),fixedAt:"top",limit:0,triggerOnload:true,zIndex:99};var F=("scrollToFixed"+Math.random()).replace(".","");function G(O){E=C.extend({},E,O);if(E.element){E.element=(E.element instanceof C)?E.element:C(E.element);if(E.element.length>0){var L=E.element;if(C.inArray(E.fixedAt,["top","bottom"])){E.fixedAt="top"}var I="scrolltofixed";var K={width:L.width(),offset:L.offset(),"margin-top":parseInt(L.css("margin-top"),10),"margin-bottom":parseInt(L.css("margin-bottom"),10),cssPosition:L.css("position"),coordinates:{left:L.css("left"),top:L.css("top"),right:L.css("right"),bottom:L.css("bottom")}};if(typeof $Rx!=="undefined"){var J=($Rx&&$Rx.scrollToFixedBreakPoint)?$Rx.scrollToFixedBreakPoint:0;var N=C("<div />");if(C("#vb-page-body").width()>J){N.addClass("scrolltofixed-filler").hide().insertAfter(L)}L.data("origOffsetTop",K.offset.top);L.css("z-index",E.zIndex);var M=C(window).off("scroll."+F).on("scroll."+F,function(){if(L.is(":hidden")){return }var R=C(this).scrollTop();if(E.limit>0&&R>E.limit&&L.hasClass(I)){L.removeClass(I).css({position:"absolute",left:"auto",right:"auto",top:"auto",bottom:"auto",width:K.width})}else{if((E.limit>0&&R<E.limit&&R>K.offset.top&&!L.hasClass(I))||(E.limit<=0&&R>K.offset.top&&!L.hasClass(I))){N.css({display:L.css("display"),width:L.outerWidth(true),height:L.outerHeight(true),"float":L.css("float")});if(C("#vb-page-body").width()>J){L.addClass(I).width(K.width).css({left:K.offset.left,right:"auto",width:K.width,top:(E.fixedAt=="top")?0:"auto",bottom:(E.fixedAt=="bottom")?0:"auto",position:""})}var Q=K["margin-"+E.fixedAt];if(Q){var P={};P[E.fixedAt]=-Q+"px";L.animate(P,"fast")}}else{if(R<=K.offset.top&&L.hasClass(I)){N.hide();L.removeClass(I).css({position:"",width:"",left:"",top:"",right:"",bottom:""})}}}}).off("resize."+F).on("resize."+F,function(){L.removeClass(I).width("auto").css({position:"",left:""});K.width=L.width();K.offset=L.offset();C(this).trigger("scroll."+F)});if(E.triggerOnload){M.trigger("scroll."+F)}}}}}this.updateLimit=function(I){if(!isNaN(Number(I))){E.limit=I;C(window).trigger("scroll."+F)}};this.reset=function(I){G(I)};G(H)};vBulletin.scrollToAnchor=function(I){var G=C(I);console.log("vBulletin.scrollToAnchor() hash: {0}, found: {1}".format(I,G.length));if(G.length>0){var F=G.show().offset().top-2;G.hide();location.hash=I;var H=C("html,body");var E=C(".scrolltofixed-floating.scrolltofixed-top");var J=false;if(E.length>0){if(C(".list-container .list-item:first a.anchor"+I).length==1){if(E.hasClass("scrolltofixed")){E.removeClass("scrolltofixed")}F=E.offset().top;J=true}else{if(E.hasClass("scrolltofixed")){F-=E.outerHeight()}}}H.animate({scrollTop:F},1000,function(){if(!J){var L=G.show().offset().top;G.hide();var K=C(".scrolltofixed-floating.scrolltofixed-top.scrolltofixed");L-=(K.length>0)?K.outerHeight():0;H.animate({scrollTop:L},"slow")}C("a.anchor").show()});return false}C("a.anchor").show();return true};vBulletin.animateScrollTop=function(F,G){console.log("vBulletin.animateScrollTop({0})".format(F));var E=C(".scrolltofixed-floating.scrolltofixed-top");if(E.length>0){var H=E.data("origOffsetTop")||E.offset().top;if(!E.hasClass("scrolltofixed")&&H<F){F-=E.outerHeight(true)}if(H<F){F-=E.outerHeight()}}C("html, body").animate({scrollTop:F},G)};vBulletin.subscribe=function(E){if(C(E).hasClass("isSubscribed")||C(E).hasClass("is-pending")){return true}var H=parseInt(C(E).attr("data-node-id"),10);var G={};var F="";if(C(E).hasClass("is-topic")){F="/ajax/api/follow/add";G.follower=H;G.type="follow_contents"}else{F="/ajax/api/node/requestChannel";G.channelid=H;G.recipient=parseInt(C(E).attr("data-owner-id"),10);G.requestType=C(E).hasClass("is-blog-channel")?"member":"sg_subscriber"}C.ajax({url:pageData.baseurl+F,data:G,type:"POST",dataType:"json",success:function(I){if(!isNaN(I)&&I==1){C(E).children(".button-text-primary").text(vBulletin.phrase.get("following"));C(E).addClass("isSubscribed special").removeClass("secondary");location.reload()}else{if(!isNaN(I)&&I>1){C(E).children(".button-text-primary").text(vBulletin.phrase.get("following_pending"));C(E).addClass("is-pending special").removeClass("secondary");location.reload()}else{if(I.errors){openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get(I.errors[0][0]),iconType:"error"})}else{openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get("follow_error"),iconType:"error"})}}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get("follow_error"),iconType:"error"})}})};vBulletin.join=function(E){var G=parseInt(C(E).attr("data-node-id"),10);var F=parseInt(C(E).attr("data-owner-id"),10);C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/requestChannel",data:({channelid:G,recipient:F,requestType:"sg_member"}),type:"POST",dataType:"json",success:function(H){if(H.errors){openAlertDialog({title:vBulletin.phrase.get("join"),message:vBulletin.phrase.get(H.errors[0]),iconType:"error"})}else{if(H===true){C(E).children(".button-text-primary").text(vBulletin.phrase.get("joined"));C(E).addClass("has-joined special").removeClass("secondary");location.reload()}else{if(!isNaN(H)){C(E).children(".button-text-primary").text(vBulletin.phrase.get("following_pending"));C(E).addClass("is-pending special").removeClass("secondary")}}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("join"),message:vBulletin.phrase.get("join_error"),iconType:"error"})}})};vBulletin.leave=function(E){var F=parseInt(C(E).attr("data-node-id"),10);C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/blog/leaveChannel",data:({channelId:F}),type:"POST",dataType:"json",success:function(G){if(G.errors){openAlertDialog({title:vBulletin.phrase.get("leave"),message:vBulletin.phrase.get(G.errors[0]),iconType:"error"})}else{if(G===true){var H=C(E);if(H.hasClass("follow-btn")){H.children(".button-text-primary").text(vBulletin.phrase.get("follow"));H.removeClass("isSubscribed unfollow-btn");H.addClass("special")}else{H.children(".button-text-primary").text(vBulletin.phrase.get("join"));H.removeClass("has-joined special")}location.reload()}else{openAlertDialog({title:vBulletin.phrase.get("leave"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("leave"),message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}})};vBulletin.unsubscribe=function(E){var F=C(E).attr("data-node-id");C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/follow/delete",data:({follower:F,type:"follow_contents"}),type:"POST",dataType:"json",success:function(G){if(G==1){C(E).removeClass("isSubscribed unfollow-btn special").addClass("secondary").children(".button-text-primary").text(vBulletin.phrase.get("follow"));location.reload()}else{if(G.errors){openAlertDialog({title:vBulletin.phrase.get("unsubscribe"),message:vBulletin.phrase.get(G.errors[0][0]),iconType:"error"})}else{openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get("unfollow_error"),iconType:"error"})}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("follow"),message:vBulletin.phrase.get("unfollow_error"),iconType:"error"})}})};vBulletin.getUnsubscribeOverlay=function(K){var L="";var E=C(K).closest(".list-item").find("ul.unfollow_panel").filter(function(){var M=parseInt(C(this).attr("data-node-id"),10);if(typeof M=="number"){L=M;return true}});var J=E.children();var H,G,F=false;var I="";C.each(J,function(M,N){if(C(N).hasClass("unfollow_content")){G=C(N).attr("data-item-id")}else{if(C(N).hasClass("unfollow_member")){H=C(N).attr("data-item-id")}else{if(C(N).hasClass("unfollow_channel")){F=C(N).attr("data-item-id")}}}});if(G){I+="&content="+G}if(H){I+="&member="+H}if(F){I+="&channel="+F}if(L){C.ajax({url:vBulletin.getAjaxBaseurl()+"/profile/getUnsubscribeOverlay?userId="+pageData.userid+I+"&nodeId="+L,success:function(M){var N=C(".unsubscribe-overlay-container");if(N){N.html(M);N.children(".unsubscribe-overlay").dialog({title:vBulletin.phrase.get("following_remove"),autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,width:450,dialogClass:"dialog-container unsubscribe-dialog-container dialog-box"}).dialog("open")}},error:function(){openAlertDialog({title:vBulletin.phrase.get("following_remove"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})}})}};vBulletin.removeUnsubscribeOptions=function(I,F){var H=C(I).parents(".unsubscribe-overlay");var J=parseInt(H.attr("data-node-id"),10);if(typeof J!="number"){return false}var G=C(H).children(".unsubscribe-options");var E=[];if((C(G).find("li #"+J+"-unsubscribeAll:checkbox:checked")).length===1){C.each(C(G).find("li :checkbox[name=unsubscribeItems]"),function(K,N){var L=C(N).attr("data-type");var M=parseInt(C(N).attr("data-item-id"),10);if(M&&typeof M=="number"){E.push({type:L,itemId:M})}})}else{C.each(C(G).find("li :checkbox[name=unsubscribeItems]:checked"),function(K,N){var L=C(N).attr("data-type");var M=parseInt(C(N).attr("data-item-id"),10);if(M&&typeof M=="number"){E.push({type:L,itemId:M})}})}if(E.length>0){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/follow/unsubscribeItems",data:({unsubscribeItems:E}),type:"POST",dataType:"json",success:function(K){if(K===true){C(H).dialog("close").remove();F.updatePageNumber(1).applyFilters(false)}else{if(K.errors!=undefined){openAlertDialog({title:vBulletin.phrase.get("profile_guser"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})}}},error:function(){openAlertDialog({title:vBulletin.phrase.get("profile_guser"),message:vBulletin.phrase.get("unable_to_contact_server_please_try_again"),iconType:"error"})}})}else{openAlertDialog({title:vBulletin.phrase.get("profile_guser"),message:vBulletin.phrase.get("unsubscribe_overlay_error"),iconType:"error"})}};vBulletin.truncatePostContent=function(E){E=(E instanceof C)?E:C(E);if(E.selector==""){E=C("body")}C(".post-content.ellipsis, .poll-desc.ellipsis, .message-body.ellipsis",E).each(function(){var F=C(this);truncatedHeight=F.height();F.removeClass("ellipsis");var G=F.height();F.addClass("ellipsis");if(G>truncatedHeight){F.closest(".list-item-body").find(".post-links").removeClass("hide-see-link").find(".see-link").off("click").on("click",function(){var I=C(this);if(I.hasClass("more")){F.removeClass("ellipsis")}else{F.addClass("ellipsis")}I.toggleClass("more less");var H=I.text();I.text(I.data("toggle-text")).data("toggle-text",H);return false})}})};vBulletin.markreadcheck=function(){var E=C.cookie(pageData.cookie_prefix+"lastvisit");if(!E||pageData.lastvisit>E){E=pageData.lastvisit}var F=Math.round(new Date().getTime()/1000),G=F-vBulletin.options.get("markinglimit")*86400;C(".forum-item").each(function(){var I=parseInt(C(this).attr("data-lastcontent"));var H=0;if(pageData.threadmarking=="0"){if(I<=E){C(this).removeClass("new");return }H=vBulletin.cookie.fetchBbarrayCookie("channel_view",C(this).attr("data-channel-id"));H=H?parseInt(H):0}else{H=C(this).attr("data-readtime")?parseInt(C(this).attr("data-readtime")):0;H=Math.max(H,G)}if(I>H){C(this).addClass("new")}else{C(this).removeClass("new")}});C(".topic-item").each(function(){var I=parseInt(C(this).attr("data-lastcontent"));var J=0,H=0,L=0;if(pageData.threadmarking=="0"){if(I<=E){C(this).addClass("read");return }H=vBulletin.cookie.fetchBbarrayCookie("channel_view",C(this).attr("data-channel-id"));H=H?parseInt(H):0;J=vBulletin.cookie.fetchBbarrayCookie("discussion_view",C(this).attr("data-node-id"));J=J?parseInt(J):0;L=Math.max(H,J)}else{L=C(this).attr("data-readtime")?parseInt(C(this).attr("data-readtime")):0;H=C(this).attr("data-channelreadtime")?parseInt(C(this).attr("data-channelreadtime")):0;L=Math.max(L,H,G)}if(I<=L||C(this).hasClass("redirect")){C(this).addClass("read")}else{var K=C(this).find(".topic-wrapper .topic-title").attr("href");if(typeof (K)!="undefined"){K+=(K.indexOf("?")==-1?"?":"&amp;")+"goto=newpost";C("<a />").addClass("go-to-first-unread").attr("href",K).attr("title",vBulletin.phrase.get("go_to_first_new_post")).html("&nbsp;").prependTo(C(this).find(".topic-wrapper"));C(this).find(".icon").attr("title",vBulletin.phrase.get("new_posts"))}}})};vBulletin.markchannelsread=function(E,F){E=E||0;C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/node/markChannelsRead",data:{nodeid:E},type:"POST",datatype:"json",complete:function(){},success:function(G){if(G&&!G.error){var J=Math.round(new Date().getTime()/1000);if(pageData.threadmarking=="0"){if(E==0){C.cookie(pageData.cookie_prefix+"lastvisit",J)}else{var I;try{I=C.parseJSON(vBulletin.cookie.convertBbarrayCookie(C.cookie(pageData.cookie_prefix+"channel_view")))||{}}catch(K){I={}}for(var H in G){I[G[H]]=J}var L={path:pageData.baseurl_path};L.expires=365;C.cookie(pageData.cookie_prefix+"channel_view",vBulletin.cookie.convertBbarrayCookie(JSON.stringify(I),"set"),L)}}console.log("Channel "+E+" is marked read successfully!");if(F.success&&typeof F.success=="function"){F.success(G)}}else{console.log("Channel "+E+" is marked read failed: "+G.error);if(F.failed&&typeof F.failed=="function"){F.failed(G)}}},error:function(I,H,G){console.log("Channel "+E+" is marked read failed:"+error);openAlertDialog({title:vBulletin.phrase.get("forum"),message:"HTTP {0} - {1}".format(I.status,G),iconType:"error"})}})};vBulletin.ckeditor=vBulletin.ckeditor||{};vBulletin.ckeditor.requiredScriptsLoaded=false;vBulletin.ckeditor.requiredScriptsLoadFailed=false;vBulletin.ckeditor.checkEnvironment=function(){if(/(ipad|iphone|ipod)/.test(navigator.userAgent.toLowerCase())){C(".lnkToggleAdvanced").addClass("hide");return false}return true};vBulletin.ckeditor.initEditor=function(G,F){if(!vBulletin.ckeditor.checkEnvironment()){if(typeof F.error=="function"){F.error(G)}if(typeof F.complete=="function"){F.complete(G)}return }F=F||{};if(vBulletin.ckeditor.requiredScriptsLoaded){var H=function(I){if(typeof F.success=="function"){F.success.apply(this,[I])}if(typeof F.complete=="function"){F.complete(I)}};var E=F.editorDefinition||false;vBulletin.ckeditor.doInitEditor(G,H,E);return false}else{vBulletin.ckeditor.loadScripts(G,F)}};vBulletin.ckeditor.loadScripts=function(G,F,E){F=F||{};G=G||"";if(typeof (F.hideLoadingDialog)!=="undefined"&&!F.hideLoadingDialog){vBulletin.ckeditor.showLoadingDialog(G)}window.CKEDITOR_BASEPATH=pageData.baseurl+"/js/ckeditor/";var I=function(){if(F.showError||!vBulletin.ckeditor.requiredScriptsLoadFailed){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_loading_ckeditor_script"),iconType:"warning"})}vBulletin.loadingIndicator.hide();vBulletin.ckeditor.requiredScriptsLoadFailed=true;if(typeof F.error=="function"){F.error(G)}if(typeof F.complete=="function"){F.complete(G)}};var H=function(){if(!vBulletin.ckeditor.requiredScriptsLoadFailed){if(typeof E=="function"){E()}if(typeof vBulletin.ckeditor.doInitEditor=="function"&&window.CKEDITOR){vBulletin.ckeditor.requiredScriptsLoaded=true;var J=function(K){if(typeof F.success=="function"){F.success.apply(this,[K])}if(typeof F.complete=="function"){F.complete(K)}};vBulletin.ckeditor.doInitEditor(G,J)}else{setTimeout(H,10)}}else{if(typeof F.error=="function"){F.error(G)}if(typeof F.complete=="function"){F.complete(G)}if(!F.hideLoadingDialog){vBulletin.ckeditor.hideLoadingDialog(G)}}};if(typeof vBulletin.ckeditor.doInitEditor!="function"&&!window.CKEDITOR){vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/render/ckeditor_javascript",success:function(K){var J=[];var L=/src="([^"]+)"/g;while(match=L.exec(K)){J.push(match[1])}var M=function(){if(J.length>0){console.log("Calling getScript for: {0}".format(J[0]));C.getScript(J[0],function(N,P,O){if(P!="success"){console.warn("Ckeditor: Error loading "+J[0]);I();return false}console.log("Ckeditor: Script loaded: "+J[0]);J.splice(0,1);M()}).fail(function(O,P,N){console.warn("Ckeditor: Error loading script: "+P+" Exception: "+N);I()})}else{H()}};M()},error_phrase:"error_fetching_dialog",})}else{H()}};vBulletin.ckeditor.editorExists=function(E){return false};vBulletin.ckeditor.editorEvents=["beforeCancel","afterCancel","beforeDelete","afterDelete","beforeInit","afterInit","beforeSave","afterSave"];vBulletin.ckeditor.registerEvent=function(E,F,G){if(typeof vBulletin.ckeditor.editorDefinitions!="undefined"&&typeof vBulletin.ckeditor.editorDefinitions[E]=="undefined"){return false}if(typeof F!="string"){return false}if(C.inArray(F.split(".")[0],vBulletin.ckeditor.editorEvents)==-1){return false}if(typeof G!="function"){return false}C(document).on(F,"#"+E,G).data("ckeditor_customevent_{0}_{1}".format(E,F),true);return true};vBulletin.ckeditor.unRegisterEvent=function(E,F){C(document).off(F,"#"+E,callback).removeData("ckeditor_customevent_{0}_{1}".format(E,F))};vBulletin.ckeditor.eventRegistered=function(E,F){return C(document).data("ckeditor_customevent_{0}_{1}".format(E,F))};vBulletin.ckeditor.loadingDialogStack={};vBulletin.ckeditor.showLoadingDialog=function(E){if((typeof vBulletin.ckeditor.loadingDialogStack[E]!="undefined")&&vBulletin.ckeditor.loadingDialogStack[E]){return }vBulletin.ckeditor.loadingDialogStack[E]=true;var F=C("#"+E);if(F.length>0&&F.is(":visible")){F.prop("disabled",true)}window.vBulletin.loadingIndicator.show("vBulletin.ckeditor.showLoadingDialog editorId: "+E)};vBulletin.ckeditor.hideLoadingDialog=function(E){if((typeof vBulletin.ckeditor.loadingDialogStack[E]=="undefined")||!vBulletin.ckeditor.loadingDialogStack[E]){return }vBulletin.ckeditor.loadingDialogStack[E]=false;C("#"+E).prop("disabled",false);window.vBulletin.loadingIndicator.hide("vBulletin.ckeditor.hideLoadingDialog editorId: "+E)};vBulletin.ckeditor.initTitleRow=function(E){(function(){var G=function(H){return E.find("select.post-icon-menu option").filter(function(){return(C(this).val()==H)}).data("icon-url")};var F=function(H){if(H==0){return C("<span />").html(vBulletin.phrase.get("no_icon")).get(0)}var I=G(H);if(I){return C("<img />").attr("src",I).attr("alt","").get(0)}else{return""}};E.find("select.post-icon-menu").selectBox().change(function(){var H=C(this).val();C(".post-icon-menu.selectBox-dropdown .selectBox-label").html(F(H))});C(".post-icon-menu-selectBox-dropdown-menu li a").each(function(){var H=C(this).attr("rel");C(this).html(F(H))})})();E.find("select.prefixid").selectBox()};vBulletin.AJAX=function(F){var E={type:"post",dataType:"json",error_phrase:"error",element:null,error:function(){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get(this.error_phrase),iconType:"error"})}};C.extend(E,F);E.success=function(G){if(G&&G.errors){var H=G.errors;if(C.isArray(H)&&H.length>0){H=H[0]}if(H=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(E.element)}openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_x",vBulletin.phrase.get(H)),iconType:"error"});if(G.wasNotArray){arguments[0]=arguments[0][0]}return false}else{if(F.success){F.success.apply(this,arguments)}}};C.ajax(E)};vBulletin.ajaxForm=function(F){var E={dataType:"json",error_phrase:"error",element:null,error:function(){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get(this.error_phrase),iconType:"error"})},complete:function(){C(".button[type=submit]",this).prop("disabled",false)},beforeSerialize:function(G){C(".placeholder",G).each(function(){var H=C(this);if(H.val()==H.attr("placeholder")){H.val("")}})},beforeSubmit:function(I,H,G){C(".button[type=submit]",this).prop("disabled",true);return true}};C.extend(E,F);E.success=function(G){if(G&&G.errors){var H=G.errors;while(C.isArray(H)&&H.length>0){H=H[0]}if(H=="inlinemodauth_required"){return vBulletin.inlinemod.openAuthDialog(E.element)}openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("error_x",vBulletin.phrase.get(H)),iconType:"error"});if(G.wasNotArray){arguments[0]=arguments[0][0]}return false}else{if(F.success){F.success.apply(this,arguments)}}};this.ajaxForm(E)};window.openAlertDialog=function(J){var I=C("#alert-dialog");J=J||{};if(!I.data("created")){I.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,dialogClass:"dialog-container alert-dialog-container dialog-box",create:function(){I.data("created",true)}})}I.dialog("option","width",J.width||500);I.dialog("option","title",J.title||"Alert");var F=I.find(".dialog-content");var G=F.find(".message");var E=F.find(".icon");var H=C("#btnAlertDialogOK");if(J.maxHeight){F.css({"max-height":J.maxHeight,overflow:"auto"})}else{F.css({"max-height":"",overflow:""})}if(J.message){G.html(J.message)}E.removeClass(function(K,L){return(L.match(/\S+-icon\b/g)||[]).join(" ")});J.buttonLabel=J.buttonLabel||"OK";H.html(J.buttonLabel);I.off("dialogopen").on("dialogopen",function(){H.off("click").on("click",function(){if(typeof J.onBeforeClose=="function"){J.onBeforeClose.apply(this)}I.dialog("close")}).focus()});I.off("dialogclose").on("dialogclose",function(){if(typeof J.onAfterClose=="function"){J.onAfterClose.apply(H)}});switch(J.iconType){case"warning":E.addClass("warning-icon vb-icon vb-icon-warning");E.show();break;case"error":E.addClass("error-icon vb-icon vb-icon-error");E.show();break;default:E.addClass("no-icon").hide()}I.dialog("open");return I};window.openConfirmDialog=function(L){L=L||{};var H=C("#confirm-dialog");if(!H.data("created")){H.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,create:function(){H.data("created",true)}})}H.dialog("option","title",L.title||"Confirmation");var G=H.find(".dialog-content");var I=G.find(".message");var F=G.find(".icon");if(L.message){I.html(L.message)}H.dialog("option","width",(L.width?L.width:500));H.dialog("option","dialogClass","dialog-container confirm-dialog-container dialog-box "+(L.dialogClass||""));F.removeClass(function(M,N){return(N.match(/\S+-icon\b/g)||[]).join(" ")});L.buttonLabel=L.buttonLabel||{};L.buttonLabel.yesLabel=L.buttonLabel.yesLabel||"Yes";L.buttonLabel.noLabel=L.buttonLabel.noLabel||"No";var K=C("#btnConfirmDialogYes").html(L.buttonLabel.yesLabel);var E=C("#btnConfirmDialogNo").html(L.buttonLabel.noLabel);if(L.primaryButton=="yes"){K.addClass("primary").removeClass("secondary");E.addClass("secondary").removeClass("primary")}else{E.addClass("primary").removeClass("secondary");K.addClass("secondary").removeClass("primary")}var J;H.off("dialogopen").on("dialogopen",function(){var N=C("#btnConfirmDialogYes").off("click").on("click",function(){J=this;var P,O;if(typeof L.onClickYes=="function"){P=L.onClickYes.apply(this);if(typeof L.onClickYesWithAjax!="undefined"&&L.onClickYesWithAjax){return false}}if(P===false){return false}if(typeof L.onBeforeClose=="function"){O=L.onBeforeClose.apply(this);if(typeof L.onBeforeCloseWithAjax!="undefined"&&L.onBeforeCloseWithAjax){return false}}if(O===false){return false}H.dialog("close")});if(L.defaultFocus=="yes"){N.focus()}var M=C("#btnConfirmDialogNo").off("click").on("click",function(){J=this;if(typeof L.onClickNo=="function"){L.onClickNo.apply(this)}if(typeof L.onBeforeClose=="function"){L.onBeforeClose.apply(this)}H.dialog("close")});if(L.defaultFocus!="yes"){M.focus()}});H.off("dialogclose").on("dialogclose",function(N,M){if(typeof L.onAfterClose=="function"){L.onAfterClose.apply(J)}});switch(L.iconType){case"warning":F.addClass("warning-icon vb-icon vb-icon-warning");F.show();break;case"question":F.addClass("question-icon");F.show();break;default:F.addClass("no-icon").hide()}H.dialog("open");return H};window.openPromptDialog=function(H){var J=C("#prompt-dialog");if(!J.data("created")){J.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,width:500,dialogClass:"dialog-container prompt-dialog-container dialog-box",create:function(){J.data("created",true)}})}H=H||{};J.dialog("option","title",H.title||"Prompt");var M=J.find(".dialog-content");var I=M.find(".message");var K;if(H.message){I.html(H.message)}var E=H.initialValue||"";if(!H.multiline){K=J.find("input.input-box").val(E).removeClass("hide");K.next().addClass("hide");if(Number(H.maxlength)){K.attr("maxlength",Number(H.maxlength))}else{K.removeAttr("maxlength")}M.addClass("table");M.find("> div").addClass("td")}else{K=J.find("textarea.input-box").val(E).removeClass("hide");K.prev().addClass("hide");M.removeClass("table");M.find("> .td").removeClass("td")}H.buttonLabel=H.buttonLabel||{};H.buttonLabel.okLabel=H.buttonLabel.okLabel||"OK";H.buttonLabel.cancelLabel=H.buttonLabel.cancelLabel||"Cancel";var L=C("#btnPromptDialogOK").html(H.buttonLabel.okLabel);var G=C("#btnPromptDialogCancel").html(H.buttonLabel.cancelLabel);var F;J.off("dialogopen").on("dialogopen",function(){var O=C("#btnPromptDialogOK").off("click").on("click",function(){F=this;var Q=C.trim(K.val()),P,R;if(H.validation&&typeof H.validation=="object"){if(H.validation.override&&typeof H.validation.custom=="function"){if(!H.validation.custom.apply(this,[K])){return false}}else{switch(H.validation.type){case"number":Q=Number(Q);if(isNaN(Q)){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input must be a number.",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}if(H.validation.range&&typeof H.validation.range=="object"){if(Q<H.validation.range.min||Q>H.validation.range.max){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input must be within "+H.validation.range.min+" - "+H.validation.range.max+" only.",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}}break;case"string":default:if(!Q){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input required.",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}else{if(H.multiline&&Q.length>H.maxlength){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input too long. Maximum allowed is "+H.maxlength+" characters.",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}}}if(H.validation.set&&C.isArray(H.validation.set)&&H.validation.set.length>0){if(C.inArray(Q,H.validation.set)==-1){if(H.validation.showError){openAlertDialog({title:J.dialog("option","title"),message:"Input must be one of these: "+H.validation.set.join(", ")+".",iconType:"warning",onAfterClose:function(){K.trigger("select").trigger("focus")}})}else{K.trigger("select").trigger("focus")}return false}}if(typeof H.validation.custom=="function"){if(!H.validation.custom.apply(this,[K])){return false}}}}if(typeof H.onClickOK=="function"){R=H.onClickOK.apply(this,[Q]);if(typeof H.onClickOKWithAjax!="undefined"&&H.onClickOKWithAjax){return false}}if(R===false){return false}if(typeof H.onBeforeClose=="function"){P=H.onBeforeClose.apply(this);if(typeof H.onBeforeCloseWithAjax!="undefined"&&H.onBeforeCloseWithAjax){return false}}if(P===false){return false}J.dialog("close")}).trigger("focus");var N=C("#btnPromptDialogCancel").off("click").on("click",function(){F=this;if(typeof H.onClickCancel=="function"){H.onClickCancel.apply(this)}if(typeof H.onBeforeClose=="function"){H.onBeforeClose.apply(this)}J.dialog("close")})});J.off("dialogclose").on("dialogclose",function(){if(typeof H.onAfterClose=="function"){H.onAfterClose.apply(F);K.val("")}});J.dialog("open");K.trigger("focus");return J};window.openLoadingDialog=function(){console.warn("Function openLoadingDialog is deprecated.");window.vBulletin.loadingIndicator.show("openLoadingDialog")};window.closeLoadingDialog=function(){console.warn("Function closeLoadingDialog is deprecated.");window.vBulletin.loadingIndicator.hide("closeLoadingDialog")};window.bindFormReset=function(E){return C(E).on("reset",function(F,G){if(typeof G=="function"){G()}})};setTimeout(function(){if(location.hash){vBulletin.scrollToAnchor(location.hash)}(function(){C("#main-navbar .username-container").on("click",function(M){var N=C(this),L=C("> ul",N);if(N.closest(".secondary-nav").hasClass("disabled")){return false}if(N.hasClass("username-container-active")){M.stopPropagation();try{M.target.parentNode.click()}catch(K){}L.slideUp("fast");N.removeClass("username-container-active");return L.hasClass("submenu")}C("#idLoginIframe").load(function(){try{var R=C(this);var Q=R.contents().find("html");var O=Q[0].scrollHeight;R.height(O);R.width(Q.outerWidth(true));R.parent().height(R.height())}catch(P){}});N.addClass("username-container-active");L.css("top",N.outerHeight()).slideDown("fast");return false});C("body").on("click",function(K){if(C(K.target).closest(".username-container").size()==0){C(".username-container > ul").slideUp("fast");C(".username-container").removeClass("username-container-active")}})})();if(!C.support.selectstart){C.fn.extend({disableSelection:function(){return this.each(function(){C(this).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-khtml-user-select":"none","-o-user-select":"none","user-select":"none"})})},enableSelection:function(){return this.each(function(){C(this).css({"-moz-user-select":"","-webkit-user-select":"","-khtml-user-select":"","-o-user-select":"","user-select":""})})}})}function G(){window.vBulletin.loadingIndicator.init();var L=function(){C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/render/stylesheet_block",data:{"cssFiles[]":["sitebuilder-after.css"]},type:"POST",dataType:"json",success:function(O){C("head").append(O)}})};C(document).off("click","a.animate-scroll").on("click","a.animate-scroll",function(){var O=vBulletin.scrollToAnchor(this.hash);if(O){if(window.location.href.split("#")[0]==this.href.split("#")[0]){if(window.location.href!=this.href){window.location.href=this.href}window.openLoadingDialog();window.location.reload()}else{window.location.href=this.href}}return false});var M=function(O){C(this).closest(".split-button").toggleClass("open").find(".submenu").toggleClass("hide");C("body").off("click.buttonset").on("click.buttonset",function(P){if(C(P.target).closest(".split-button").length==0){C(".split-button").removeClass("open").find(".submenu").addClass("hide");C("body").off("click.buttonset")}})};C(".split-button .button-text").button().closest(".button-set").find(".button-icon").button({text:false,icons:{primary:"vb-icon vb-icon-triangle-down-wide"}}).on("click",M).closest(".button-set").buttonset().filter(".one-click").find(".button-text").on("click",M);C(document).off("click",".canvas-widget .toggle-button").on("click",".canvas-widget .toggle-button",function(R,O){var Q=C(this),S=Q.closest(".canvas-widget");if(Q.hasClass("expand")){if(O){C(".widget-content",S).show()}else{C(".widget-content",S).slideDown("slow")}S.removeClass("collapsed")}else{if(O){C(".widget-content",S).hide()}else{C(".widget-content",S).slideUp("slow")}S.addClass("collapsed")}Q.toggleClass("collapse expand");var P=Q.attr("title");Q.attr("title",Q.data("toggle-title")).data("toggle-title",P);return false});C(".conversation-toolbar-wrapper form.toolbar-filter-overlay").trigger("reset");C("input[placeholder], textarea[placeholder]").placeholder();C("textarea.autogrow").elastic();C(".edit-switch-container .switch-control").on("mousedown",function(O){var P=C(this);if(P.closest("ul").hasClass("disabled")){return true}if(P.hasClass("on")){C.removeCookie(pageData.sb_state_cookie,{path:pageData.baseurl_path});C("#main-navbar .main-nav").hide();P.removeClass("on");return true}L();if(C("#main-navbar .main-nav li").length>0){C("#main-navbar .main-nav").show();P.addClass("on");C.cookie(pageData.sb_state_cookie,"1",{path:pageData.baseurl_path});return true}J(true);return true});C("select.custom-dropdown").selectBox();var K=C(".content-entry-box:not(.content-entry-box-Media):has(.content-entry-box-tabs)");C(".content-entry-box-tab",K).removeClass("ui-state-disabled");K.tabs({show:function(P,Q){if(K.length==1){var O=C(Q.tab.hash).find('textarea[name="text"]').attr("id");if(C("#"+O).is(":visible")&&(C(".content-entry-box").closest("#quick-reply-container").length==0||C(".content-entry-box").closest("#quick-reply-container").data("allow-ckeditor-load-on-show"))){vBulletin.ckeditor.initEditor(O,{complete:function(R){console.log("enabling all tabs...");K.tabs("option","disabled",[]);C(window).off("error.editorInit")},error:function(T){C("#"+T).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");var S=C(Q.tab).closest(".content-entry-box");var R=C(".editor-tab",S);if(R.length>0&&R[0]==C(Q.tab).parent()[0]){S.tabs("select",0)}}})}else{if(C(".content-entry-box").closest("#quick-reply-container").length==1){C(Q.tab.hash).find(".ckeditor-bare-box.ckeditor-load-on-focus").on("focus",function(){vBulletin.ckeditor.initEditor(O,{complete:function(R){console.log("enabling all tabs...");K.tabs("option","disabled",[]);C(window).off("error.editorInit")},error:function(T){C("#"+T).prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".content-entry-box").addClass("no-ckeditor");var S=C(Q.tab).closest(".content-entry-box");var R=C(".editor-tab",S);if(R.length>0&&R[0]==C(Q.tab).parent()[0]){S.tabs("select",0)}}});if(typeof vBulletin.ckeditor.initTitleRow=="function"){vBulletin.ckeditor.initTitleRow(C(Q.tab.hash))}})}}if(typeof vBulletin.ckeditor.initTitleRow=="function"){vBulletin.ckeditor.initTitleRow(C(Q.tab.hash))}C(".content-entry-box").closest("#quick-reply-container").data("allow-ckeditor-load-on-show",true);vBulletin.hv.initHvForPostAction(C(Q.panel))}C("html").trigger("click")},select:function(P,Q){var R=[],S=C(this).tabs("length");for(var O=0;O<S;O++){if(O!=Q.index){R.push(O)}}C(window).off("error.editorInit").on("error.editorInit",function(){K.tabs("option","disabled",[]);C(this).off("error.editorInit");return true});console.log("disabling tabs..."+R);C(this).tabs("option","disabled",R);C("html").trigger("click")}});K.find("input[type=text]").off("keydown").on("keydown",function(O){if(O.which==13){O.preventDefault();return false}return true});C(".mainmenu li:has(.submenu)").on("click",function(O){C(".submenu",this).show();return false}).hover(function(){},function(O){C(".submenu",this).hide()});C(".mainmenu.textControls li").on("click",function(O){if(C(".tagCtrl",this).length==0){C("#tag-dialog").hide()}});C(".mainmenu .submenu li a").on("click",function(O){C(this).closest(".submenu").hide()});C(".follow-btn").on("click",function(O){if(!C(this).hasClass("isSubscribed")){vBulletin.subscribe(this)}else{if(C(this).hasClass("unfollow-btn")){if(C(this).hasClass("is-blog-channel")){vBulletin.leave(this)}else{vBulletin.unsubscribe(this)}}}});C(".follow-btn").on("mouseover",function(O){if(C(this).hasClass("isSubscribed")&&!C(this).hasClass("is-owner")){C(this).addClass("unfollow-btn secondary").removeClass("special");var P=vBulletin.phrase.get("unsubscribe");C(this).children(".button-text-primary").text(P)}});C(".follow-btn").on("mouseout",function(O){if(C(this).hasClass("unfollow-btn")){C(this).removeClass("unfollow-btn secondary").addClass("special");var P=vBulletin.phrase.get("following");C(this).children(".button-text-primary").text(P)}});C(".share-btn").on("click",function(O){alert("Not yet implemented");return false});C(".join-btn").on("click",function(O){if(!C(this).hasClass("has-joined")&&!C(this).hasClass("is-pending")){vBulletin.join(this)}else{if(C(this).hasClass("leave-btn")&&!C(this).hasClass("is-owner")){vBulletin.leave(this)}}});C(".join-btn").on("mouseover",function(O){if(C(this).hasClass("has-joined")&&!C(this).hasClass("is-owner")){C(this).addClass("leave-btn secondary").removeClass("special");var P=vBulletin.phrase.get("leave");C(this).children(".button-text-primary").text(P)}});C(".join-btn").on("mouseout",function(O){if(C(this).hasClass("leave-btn")&&!C(this).hasClass("is-owner")){C(this).removeClass("leave-btn secondary").addClass("special");var P=vBulletin.phrase.get("joined");C(this).children(".button-text-primary").text(P)}});C(".channel-content-widget .new-conversation-btn").off("click").on("click",function(){window.location.href=pageData.baseurl+"/new-content/"+pageData.channelid});C(".pagenav-form").submit(function(){if(Number(this.page.value)>0){location.href=this.action+"&p="+this.page.value}return false}).trigger("reset");C(".toolbar-pagenav input").off("keydown").on("keydown",function(P){var O=P.which;if(!P.shiftKey&&!P.altKey&&!P.ctrlKey&&((O>=48&&O<=57)||(O>=96&&O<=105)||O==8||O==9||O==13||O==35||O==36||O==37||O==39||O==46||O==45)){return true}return false});C(document).off("click",".list-item.deleted .manage-controls .manage").on("click",".list-item.deleted .manage-controls .manage",function(){vBulletin.inlinemod.manage_deleted_form.apply(this)});C(document).off("click",".list-item.deleted .manage-controls .show-hide").on("click",".list-item.deleted .manage-controls .show-hide",function(){var Q=C(this),P=Q.text(),O=Q.data("toggle-text");if(Q.hasClass("control-show")){Q.closest(".list-item").addClass("show-deleted-content");Q.html(O).data("toggle-text",P).removeClass("control-show")}else{Q.closest(".list-item").removeClass("show-deleted-content");Q.html(O).data("toggle-text",P).addClass("control-show")}});C(".tooltip[title]").qtip({style:{classes:"ui-tooltip-shadow ui-tooltip-light"}});C("input.datepicker").not(".hasDatePicker").datetimepicker({showOn:"both",buttonImage:pageData.baseurl+"/images/calendar-blue.png",buttonImageOnly:true,ampm:true});C(document).off("click","a.video-frame").on("click","a.video-frame",function(Q){Q.preventDefault();var P={code:this.getAttribute("data-vcode"),provider:this.getAttribute("data-vprovider")};if(this.getAttribute("data-height")){P.height=this.getAttribute("data-height")}if(this.getAttribute("data-width")){P.width=this.getAttribute("data-width")}var O=C(this);C.get(vBulletin.getAjaxBaseurl()+"/ajax/render/bbcode_video",P,function(R){if(R){O.replaceWith(R)}},"json")});if(C(".content-entry-box.content-entry-box-starter").length>0){var N=function(O){if(C(O).length>0){return new vBulletin.tagEditor.instance(O)}return null};N(".content-entry-box.content-entry-box-starter #tag-editor-text");N(".content-entry-box.content-entry-box-starter #tag-editor-poll");N(".content-entry-box.content-entry-box-starter #tag-editor-gallery");N(".content-entry-box.content-entry-box-starter #tag-editor-link");N(".content-entry-box.content-entry-box-starter #tag-editor-advanced")}vBulletin.markreadcheck();C(document).off("click","a.markchannelsread, a.navbar_mark_channels_read").on("click","a.markchannelsread, a.navbar_mark_channels_read",function(){vBulletin.markchannelsread(0,{success:function(){location.reload()},failed:function(){openAlertDialog({title:vBulletin.phrase.get("forum"),message:"Mark Channels Read failed: {0}".format(result),iconType:"error"})}});return false})}function F(){if(C(".content-entry-box").length>0){vBulletin.ckeditor.loadScripts("",{error:function(){C(".content-entry-box").addClass("no-ckeditor")}},function(){vBulletin.phrase.cachePhrases()})}else{vBulletin.phrase.cachePhrases()}}function J(K){C("body").css("cursor","wait");if(!K){window.vBulletin.loadingIndicator.show()}C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/activate-sitebuilder",data:({pageid:pageData.pageid,nodeid:pageData.nodeid}),type:"POST",dataType:"json",cache:false,complete:function(){console.log("activate-sitebuilder complete.");C("body").css("cursor","auto");if(!K){window.vBulletin.loadingIndicator.hide()}},success:function(L){console.log("activate-sitebuilder successful! result:"+JSON.stringify(L));if(L&&L.menu&&L.template){C(".edit-switch-container .switch-control").addClass("on");C("#main-navbar .main-nav").hide().html(L.menu);C("#sitebuilder-wrapper").html(L.template);C("#main-navbar .main-nav").show();C.cookie(pageData.sb_state_cookie,"1",{path:pageData.baseurl_path})}else{console.log("activating sitebuilder failed!");openAlertDialog({title:"Error",message:"Error activating SiteBuilder.<br /><br />Please try again.",iconType:"error"})}},error:function(N,M,L){console.log("activating sitebuilder failed! error:"+L);openAlertDialog({title:"Error",message:"Error activating SiteBuilder. (Error code {0})<br /><br />Please try again.".format(N.status),iconType:"error"})}})}G();C("#searchPopupControl").on("click",function(K){if(C(this).hasClass("open")){C(this).removeClass("open");C("#searchPopupContent").hide()}else{C(this).addClass("open");C("#searchPopupContent").show()}});C("html").on("click",function(K){if(C(K.target).closest("#searchForm").size()==0&&C("#searchPopupControl").hasClass("open")){C("#searchPopupControl").removeClass("open");C("#searchPopupContent").hide()}});C("#btnAdvSearch").off("click").on("click",function(L){L.preventDefault();C(this).data("clicked2submit",1);var K=C("#searchForm");K.attr("action",K.attr("action")+"&AdvSearch=1");C("#searchForm").submit()});C("#searchForm").off("submit.searchform").on("submit.searchform",function(O){var Q={};var M=C("#q");if(C.trim(M.val()).length>0){Q.keywords=C.trim(M.val())}else{if(!C("#btnAdvSearch").data("clicked2submit")){openAlertDialog({title:vBulletin.phrase.get("search"),message:vBulletin.phrase.get("please_provide_search_string"),iconType:"warning",onAfterClose:function(){C("#searchForm #q").focus()}});O.stopPropagation();return false}}var L=C(this).find("#searchPopupContent");var P=L.find(".searchFields_title_only");if(P.size()>0&&P.prop("checked")){Q.title_only=1}var K=L.find(".searchFields_author");if(K.size()>0&&K.prop("checked")){Q.author=[K.val()]}var N=L.find(".searchFields_channel");if(N.size()>0&&N.prop("checked")){Q.channel=[N.val()]}L.find("input[name=searchJSON]").val(JSON.stringify(Q));return true});C(".history-backbutton").off("click").on("click",function(K){history.back()});C(".popupControl[popup-body]").off("click").on("click",function(L){var M=C(this).attr("popup-body");if(!M){return false}var K=C(this).parent().find("."+M);if(!K){return false}C(K).toggleClass("hide")});var I;if(!(I=C.cookie(pageData.cookie_prefix+"np_notices_displayed"))){I=new Array()}if(!(I instanceof Array)){I=new Array(I)}C('ul.notices li[data-notice-persistent="0"]').each(function(K){I.push(C(this).attr("data-notice-id"))});if(I.length>0){C.cookie(pageData.cookie_prefix+"np_notices_displayed",I,{path:pageData.baseurl_path})}else{C.cookie(pageData.cookie_prefix+"np_notices_displayed",null,{path:pageData.baseurl_path})}C("ul.notices > li > .close").off("click").on("click",function(K){var M=C(this).closest("li"),L=M.attr("data-notice-id");C("body").css("cursor","wait");C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/notice/dismiss",data:{noticeid:L},type:"POST",datatype:"json",complete:function(){C("body").css("cursor","auto")},success:function(N){if(N&&!N.error){console.log("Notice dismissed successfully!");M.hide("slow",function(){if(C(this).parent().find(">li:visible").length==0){C(this).parent().addClass("hide")}})}},error:function(P,O,N){console.log("Notice dismissed failed! error:"+N);openAlertDialog({title:"Error",message:"Error dismissing the notice.",iconType:"error"})}})});new vBulletin.pagination({context:C(".wollist-widget"),onPageChanged:function(R,L){C("body").css("cursor","wait");var K=C(this).closest(".wollist-widget");var Q=C(".widget-content",K).attr("data-perpage"),P=C(".widget-content",K).attr("data-thispageonly"),M=C(".widget-content",K).attr("data-pagekey"),N=C(".widget-content",K).attr("data-who"),S=parseInt(C(".widget-content",K).attr("data-resolve")),O={who:N,pagenumber:R,perpage:Q};if(P=="1"){O.pagekey=M}C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/wol/fetchAll",data:O,type:"POST",dataType:"json",complete:function(U,T){console.log("wol-fetchAll complete.");C("body").css("cursor","auto")},success:function(T,X,Y){console.log("wol-fetchAll successful! result:"+JSON.stringify(T));if(T){if(!T.error){var V="",W=[],U="";for(x in T){if(T[x].wol){if(T[x].wol.params.length>0){T[x].wol.params.unshift(T[x].wol.action);W=T[x].wol.params}else{W=T[x].wol.action}}else{W="n_a"}if(T[x].host){if(S){U='<a href="#" class="resolveIpLink">'+T[x].host+"</a>"}else{U=T[x].host}}else{U=vBulletin.phrase.get("n_a")}if(T[x].location){loc='<div title="'+T[x].location+'" class="wol-location right"></div>'}else{loc=""}V+="<tr><td>"+T[x].username+"</td><td>"+vBulletin.phrase.get(W)+" "+loc+"</td><td>"+T[x].lastactivity+"</td><td>"+U+"</td></tr>"}C(".widget-content tbody",K).empty().html(V)}else{openAlertDialog({title:"Online Users",message:vBulletin.phrase.get("error_x",T.error),iconType:"warning"})}}else{openAlertDialog({title:"Online Users",message:vBulletin.phrase.get("invalid_server_response_please_try_again"),iconType:"error"})}},error:function(V,U,T){console.log("wol-fetchAll failed! error:"+T);openAlertDialog({title:"Online Users",message:vBulletin.phrase.get("error_fetching_online_users_x",V.status),iconType:"error"})}})}});C("#frmLostpw").ajaxForm({dataType:"json",beforeSubmit:function(N,M,L){var K="";if(C.trim(C(".email",M).val())==""){K=vBulletin.phrase.get("please_enter_your_email_address")}else{if(!isValidEmailAddress(C(".email",M).val())){K=vBulletin.phrase.get("invalid_email_address")}}if(K){openAlertDialog({title:vBulletin.phrase.get("error"),message:K,iconType:"warning",onAfterClose:function(){C(".email",M).focus()}});return false}return true},success:function(L,M,N,K){if(L&&L.response&&L.response.errors){var O=[];C.each(L.response.errors,function(P,Q){if(Q[0]!="exception_trace"&&Q[0]!="errormsg"){O.push(vBulletin.phrase.get(Q))}});openAlertDialog({title:vBulletin.phrase.get("error"),message:O.join("<br />"),iconType:"warning",onAfterClose:function(){if(typeof (vBulletin.hv.reset)!="undefined"){vBulletin.hv.reset(true)}}})}else{openAlertDialog({title:vBulletin.phrase.get("forgot_password_title"),message:vBulletin.phrase.get("lostpw_email_sent"),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});C("#frmActivateuser").ajaxForm({dataType:"json",beforeSubmit:function(N,M,L){var K="",O="";if(C.trim(C(".username",M).val())==""){K=vBulletin.phrase.get("please_enter_a_username");O=".username"}else{if(C.trim(C(".activateid",M).val())==""){K=vBulletin.phrase.get("requiredfieldmissing",vBulletin.phrase.get("activation_code"));O=".activateid"}}if(K){openAlertDialog({title:vBulletin.phrase.get("error"),message:K,iconType:"warning",onAfterClose:function(){C(O,M).focus()}});return false}return true},success:function(M,O,P,L){if(M&&M.response&&M.response.errors){var Q=[];for(var K in M.response.errors){if(M.response.errors[K][0]!="exception_trace"&&M.response.errors[K][0]!="errormsg"){Q.push(vBulletin.phrase.get(M.response.errors[K]))}}openAlertDialog({title:vBulletin.phrase.get("error"),message:Q.join("<br />"),iconType:"warning",onAfterClose:function(){vBulletin.hv.reset(true)}})}else{var N=M.response.msg_params;N.unshift(M.response.msg);openAlertDialog({title:vBulletin.phrase.get("activate_your_account"),message:vBulletin.phrase.get.apply(vBulletin.phrase,N),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});C("#frmActivateemail").ajaxForm({dataType:"json",beforeSubmit:function(N,M,L){var K="",O="";if(C.trim(C(".email",M).val())==""){K=vBulletin.phrase.get("please_enter_your_email_address")}else{if(!isValidEmailAddress(C(".email",M).val())){K=vBulletin.phrase.get("invalid_email_address")}}if(K){openAlertDialog({title:vBulletin.phrase.get("error"),message:K,iconType:"warning",onAfterClose:function(){C(O,M).focus()}});return false}return true},success:function(M,O,P,L){if(M&&M.response&&M.response.errors){var Q=[];for(var K in M.response.errors){if(M.response.errors[K][0]!="exception_trace"&&M.response.errors[K][0]!="errormsg"){Q.push(vBulletin.phrase.get(M.response.errors[K]))}}openAlertDialog({title:vBulletin.phrase.get("error"),message:Q.join("<br />"),iconType:"warning",onAfterClose:function(){vBulletin.hv.reset(true)}})}else{var N=M.response.msg_params;N.unshift(M.response.msg);openAlertDialog({title:vBulletin.phrase.get("email_activation_codes"),message:vBulletin.phrase.get.apply(vBulletin.phrase,N),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});var E=C.cookie(pageData.cookie_prefix+"userstyleid");if(E){C(".stylechooser").val(E)}C(".stylechooser").change(function(){var K=C("option:selected",C(this)).val();var L=new Date();L.setDate(L.getDate()+365);C.cookie(pageData.cookie_prefix+"userstyleid",K,{path:pageData.baseurl_path,expires:L});window.location.reload()});var H=C.cookie(pageData.cookie_prefix+"languageid");if(H){C(".languagechooser").val(H)}C(".languagechooser").change(function(){var K=C("option:selected",C(this)).val();var L=new Date();L.setDate(L.getDate()+365);C.cookie(pageData.cookie_prefix+"languageid",K,{path:pageData.baseurl_path,expires:L});window.location.reload()});if(vBulletin.options.get("crontab")){if(pageData.nextcron<=pageData.current_server_datetime){vBulletin.loadingIndicator.suppressNextAjaxIndicator();C.ajax({url:vBulletin.getAjaxBaseurl()+"/ajax/api/cron/run",type:"POST",dataType:"json",success:function(K){if(K&&K.errors){console.warn("Cron error: "+vBulletin.phrase.get(K.errors[0][0]))}console.warn("Cron run successfully.")},error:function(M,L,K){console.warn("Error when running cron: {0}".format(K))}})}else{}}C("a.navbar_profile").on("click",function(){if(pageData.userid=="0"){C("#lnkLoginSignupMenu").click();return false}});F()},1)})(jQuery);function JShtmlEncode(B){var A="";if(B&&typeof B!=="undefined"&&B.length>0){A=$("<div/>").text(B).html()}return A}function showPhotoDialog(A){$("#gallery_dialog"+A).dialog()}function displayPositionedPopup(E){if(E.dialog){E.dialog=$(E.dialog)}if(!E.dialog||E.dialog.size()==0){E.dialog=$("<div />").html('<h3><label class="left">'+E.title+'</label><label class="right btnClose">x</label><div class="clear"></div></h3><div class="content"></div><div class="arrow"><div class="arrowOver"></div></div>').addClass("custom-dialog").css("z-index",1100).appendTo(document.body);if(E.className){E.dialog.addClass(E.className)}if(E.width){E.dialog.css("width",E.width)}if(typeof E.id=="string"){E.dialog.prop("id",E.id)}E.dialog.find(".btnClose").on("click",function(){E.dialog.fadeOut();return false})}if(E.content){if(typeof E.content=="string"){E.dialog.find(".content").html(E.content);if(typeof E.loaded=="function"){E.loaded(E)}E.dialog.show()}else{if(typeof E.content=="function"){E.dialog.find(".content").html('<span class="text">Loading...</span><span class="loading-icon"><img width="16" height="16" alt="" src="'+pageData.baseurl+'/images/ajax-loader.gif"></span>');E.dialog.show();window.setTimeout(function(){E.content(E)},1)}}}var A=$("#wrapper").offset();var D=$("#wrapper").outerWidth();var N=$(E.target).offset();var K=$(E.target).outerWidth();var I=$(E.target).outerHeight();var F=E.dialog.outerWidth();var M=E.dialog.find(".arrow");var H=M.outerWidth();var L=M.outerHeight();var C=F-M.position().left-H;var B=N.left+(K/2)-F+C+(H/2)-2;if(B<A.left){var G=parseInt(M.css("right"));M.css("left",G);C=G+H;B=N.left+(K/2)-C+(H/2)-2}var J=N.top+I+L;E.dialog.css({left:B,top:J});if(typeof E.ready=="function"){E.ready(E)}}function closePhotoDialog(A){$("#gallery_dialog"+A).close()}function isValidEmailAddress(B){var A=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return A.test(B)}function str_repeat(D,C){var B="";for(var A=0;A<C;A++){B=B.concat(D)}return B}window.vBulletin.htmlEntities=function(A){return String(A).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'"'/g,"&quot;")};window.vBulletin.htmlEntities_decode=function(A){return String(A).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')};window.vBulletin.loadedIds=window.vBulletin.loadedIds||[];window.vBulletin.isAlreadyLoaded=function(A){if($.inArray(A,window.vBulletin.loadedIds)!=-1){return true}window.vBulletin.loadedIds.push(A)};